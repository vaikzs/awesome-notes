"use strict";(self.webpackChunkawesome_notes=self.webpackChunkawesome_notes||[]).push([[4076],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=p(t),d=r,k=m["".concat(s,".").concat(d)]||m[d]||c[d]||l;return t?a.createElement(k,o(o({ref:n},u),{},{components:t})):a.createElement(k,o({ref:n},u))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6186:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return c}});var a=t(7462),r=t(3366),l=(t(7294),t(3905)),o=["components"],i={author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Web","JavaScript"]},s="JavaScript Basic Notes",p={unversionedId:"web/javascript/javascriptBasicNotes",id:"web/javascript/javascriptBasicNotes",title:"JavaScript Basic Notes",description:"TC39",source:"@site/notes/web/javascript/javascriptBasicNotes.md",sourceDirName:"web/javascript",slug:"/web/javascript/javascriptBasicNotes",permalink:"/awesome-notes/web/javascript/javascriptBasicNotes",editUrl:"https://github.com/sabertazimi/awesome-notes/edit/main/notes/web/javascript/javascriptBasicNotes.md",tags:[{label:"Web",permalink:"/awesome-notes/tags/web"},{label:"JavaScript",permalink:"/awesome-notes/tags/java-script"}],version:"current",lastUpdatedBy:"sabertazimi",lastUpdatedAt:1650808195,formattedLastUpdatedAt:"4/24/2022",frontMatter:{author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Web","JavaScript"]},sidebar:"sidebar",previous:{title:"JavaScript Advanced Notes",permalink:"/awesome-notes/web/javascript/javascriptAdvancedNotes"},next:{title:"TypeScript Basic Notes",permalink:"/awesome-notes/web/javascript/typescriptBasicNotes"}},u={},c=[{value:"TC39",id:"tc39",level:2},{value:"Primitive Values",id:"primitive-values",level:2},{value:"Undefined",id:"undefined",level:3},{value:"Null",id:"null",level:3},{value:"Boolean",id:"boolean",level:3},{value:"Zero Value Expression",id:"zero-value-expression",level:4},{value:"Boolean Conversion",id:"boolean-conversion",level:4},{value:"Number",id:"number",level:3},{value:"Number Conversion",id:"number-conversion",level:4},{value:"Number Static Properties",id:"number-static-properties",level:4},{value:"Not A Number",id:"not-a-number",level:4},{value:"Infinity Number",id:"infinity-number",level:4},{value:"Safe Number",id:"safe-number",level:4},{value:"Float Number",id:"float-number",level:4},{value:"String",id:"string",level:3},{value:"String Primitive Features",id:"string-primitive-features",level:4},{value:"String Reference Features",id:"string-reference-features",level:4},{value:"String Conversion",id:"string-conversion",level:4},{value:"String Unicode",id:"string-unicode",level:4},{value:"String Char Code",id:"string-char-code",level:4},{value:"String Slice and Merge",id:"string-slice-and-merge",level:4},{value:"String Query",id:"string-query",level:4},{value:"String Replace",id:"string-replace",level:4},{value:"String Pad",id:"string-pad",level:4},{value:"String Trim",id:"string-trim",level:4},{value:"String Template Literals",id:"string-template-literals",level:4},{value:"Tagged Templates Literals",id:"tagged-templates-literals",level:4},{value:"Raw String",id:"raw-string",level:4},{value:"Symbol",id:"symbol",level:3},{value:"Symbol Conversion",id:"symbol-conversion",level:4},{value:"Built-in Symbol Methods",id:"built-in-symbol-methods",level:4},{value:"Bigint",id:"bigint",level:3},{value:"Bigint Conversion",id:"bigint-conversion",level:4},{value:"Bigint Static Properties",id:"bigint-static-properties",level:4},{value:"Wrapper Objects for Primitives",id:"wrapper-objects-for-primitives",level:3},{value:"Reference Values",id:"reference-values",level:2},{value:"Array",id:"array",level:3},{value:"Array Length",id:"array-length",level:4},{value:"Array Literals",id:"array-literals",level:4},{value:"Array Of",id:"array-of",level:4},{value:"Array From",id:"array-from",level:4},{value:"Array Fill",id:"array-fill",level:4},{value:"Array CopyWithin",id:"array-copywithin",level:4},{value:"Array Stack",id:"array-stack",level:4},{value:"Array Slice and Merge",id:"array-slice-and-merge",level:4},{value:"Array Query",id:"array-query",level:4},{value:"Array Element Filter",id:"array-element-filter",level:4},{value:"Array Boolean Filter",id:"array-boolean-filter",level:4},{value:"Array Map",id:"array-map",level:4},{value:"Array Flat",id:"array-flat",level:4},{value:"Array FlatMap",id:"array-flatmap",level:4},{value:"Array Reduce",id:"array-reduce",level:4},{value:"Array Traversal",id:"array-traversal",level:4},{value:"Array Sort",id:"array-sort",level:4},{value:"Array Reverse",id:"array-reverse",level:4},{value:"Array Spread",id:"array-spread",level:4},{value:"Array Deep Clone",id:"array-deep-clone",level:4},{value:"Typed Array",id:"typed-array",level:4},{value:"Map",id:"map",level:3},{value:"Set",id:"set",level:3},{value:"WeakMap and WeakSet",id:"weakmap-and-weakset",level:3},{value:"Date",id:"date",level:3},{value:"Variable",id:"variable",level:2},{value:"Variable Hoisting",id:"variable-hoisting",level:3},{value:"Let Variable",id:"let-variable",level:3},{value:"Const Variable",id:"const-variable",level:3},{value:"Type Detection",id:"type-detection",level:3},{value:"Null Detection",id:"null-detection",level:4},{value:"Property Detection",id:"property-detection",level:4},{value:"Custom Object Detection",id:"custom-object-detection",level:4},{value:"Type Conversion",id:"type-conversion",level:3},{value:"Type Conversion Context",id:"type-conversion-context",level:4},{value:"Type Conversion Algorithms",id:"type-conversion-algorithms",level:4},{value:"Operators",id:"operators",level:2},{value:"Loose Comparison",id:"loose-comparison",level:3},{value:"Strict Comparison",id:"strict-comparison",level:3},{value:"Conditional Expression",id:"conditional-expression",level:3},{value:"Add Operator",id:"add-operator",level:3},{value:"Dot Operator",id:"dot-operator",level:3},{value:"Logical Operators",id:"logical-operators",level:3},{value:"Operators Reference",id:"operators-reference",level:3},{value:"Control Flow",id:"control-flow",level:2},{value:"Switch Case Statement",id:"switch-case-statement",level:3},{value:"Object",id:"object",level:2},{value:"OOP Features",id:"oop-features",level:3},{value:"Prototype Chain",id:"prototype-chain",level:3},{value:"Object Conversion",id:"object-conversion",level:3},{value:"Object Constructor",id:"object-constructor",level:3},{value:"Object Literal Creation",id:"object-literal-creation",level:4},{value:"Object New Constructor",id:"object-new-constructor",level:4},{value:"Object Create Constructor",id:"object-create-constructor",level:4},{value:"Constructor Return Value",id:"constructor-return-value",level:4},{value:"Constructor Instance Detection",id:"constructor-instance-detection",level:4},{value:"Object Property Descriptor",id:"object-property-descriptor",level:3},{value:"Property Descriptor Definition",id:"property-descriptor-definition",level:4},{value:"Property Descriptor Functions",id:"property-descriptor-functions",level:4},{value:"Private Property and Method",id:"private-property-and-method",level:3},{value:"Private Property",id:"private-property",level:4},{value:"Private Method",id:"private-method",level:4},{value:"Static Property and Method",id:"static-property-and-method",level:3},{value:"Static Property",id:"static-property",level:4},{value:"Static Method",id:"static-method",level:4},{value:"Object Property",id:"object-property",level:3},{value:"Object Method",id:"object-method",level:3},{value:"Object Clone",id:"object-clone",level:3},{value:"Object Shallow Clone",id:"object-shallow-clone",level:4},{value:"Object Deep Clone",id:"object-deep-clone",level:4},{value:"Object Inheritance",id:"object-inheritance",level:3},{value:"Prototype Proxy Inheritance",id:"prototype-proxy-inheritance",level:4},{value:"Class Simulation Inheritance",id:"class-simulation-inheritance",level:4},{value:"Composite Inheritance",id:"composite-inheritance",level:4},{value:"Class",id:"class",level:3},{value:"Class Prototype",id:"class-prototype",level:4},{value:"Class Inheritance",id:"class-inheritance",level:4},{value:"Super Class",id:"super-class",level:5},{value:"Abstract Base Class",id:"abstract-base-class",level:5},{value:"Class Expression",id:"class-expression",level:4},{value:"Class Constructor",id:"class-constructor",level:4},{value:"Class Private Member",id:"class-private-member",level:4},{value:"Class Public Fields",id:"class-public-fields",level:4},{value:"Class Static Blocks",id:"class-static-blocks",level:4},{value:"Class Best Practice",id:"class-best-practice",level:4},{value:"Global Object",id:"global-object",level:3},{value:"Function",id:"function",level:2},{value:"Implicit Invocation",id:"implicit-invocation",level:3},{value:"Explicit Invocation",id:"explicit-invocation",level:3},{value:"Explicit Bind Invocation",id:"explicit-bind-invocation",level:4},{value:"Explicit Call and Apply Invocation",id:"explicit-call-and-apply-invocation",level:4},{value:"Constructor Invocation",id:"constructor-invocation",level:3},{value:"Arrow Function Invocation",id:"arrow-function-invocation",level:3},{value:"This Binding Invocation",id:"this-binding-invocation",level:3},{value:"Context and Scope",id:"context-and-scope",level:3},{value:"Function Name",id:"function-name",level:3},{value:"Function Prototype",id:"function-prototype",level:3},{value:"Function Arguments",id:"function-arguments",level:3},{value:"Arguments Callee",id:"arguments-callee",level:4},{value:"Function Parameters",id:"function-parameters",level:3},{value:"Function Declaration",id:"function-declaration",level:3},{value:"Function Expression",id:"function-expression",level:3},{value:"Immediately Invoked Function Expression",id:"immediately-invoked-function-expression",level:3},{value:"IIFE Pattern",id:"iife-pattern",level:4},{value:"IIFE Return Value",id:"iife-return-value",level:4},{value:"IIFE Usage",id:"iife-usage",level:4},{value:"Tail Call Optimization",id:"tail-call-optimization",level:3},{value:"Closure",id:"closure",level:3},{value:"Closure Structure",id:"closure-structure",level:4},{value:"Closure Usage",id:"closure-usage",level:4},{value:"Callback Function",id:"callback-function",level:3},{value:"Lazy Function Definition",id:"lazy-function-definition",level:3},{value:"Polymorphism Function",id:"polymorphism-function",level:3},{value:"Eval Function",id:"eval-function",level:3},{value:"Iterator",id:"iterator",level:2},{value:"Iteration Protocol",id:"iteration-protocol",level:3},{value:"Synchronous Iterator",id:"synchronous-iterator",level:3},{value:"Iterable Object",id:"iterable-object",level:4},{value:"Iterable Class",id:"iterable-class",level:4},{value:"Class Iterator",id:"class-iterator",level:4},{value:"Asynchronous Iterator",id:"asynchronous-iterator",level:3},{value:"Closable Iterator",id:"closable-iterator",level:3},{value:"Generator",id:"generator",level:2},{value:"Generator Definition",id:"generator-definition",level:3},{value:"Generator Roles",id:"generator-roles",level:3},{value:"Generator Basic Usage",id:"generator-basic-usage",level:3},{value:"Default Iterator Generator",id:"default-iterator-generator",level:4},{value:"Early Return Generator",id:"early-return-generator",level:4},{value:"Error Handling Generator",id:"error-handling-generator",level:4},{value:"Generator Advanced Usage",id:"generator-advanced-usage",level:3},{value:"Next Value Generator",id:"next-value-generator",level:4},{value:"Default Asynchronous Iterator Generator",id:"default-asynchronous-iterator-generator",level:4},{value:"Asynchronous Generator",id:"asynchronous-generator",level:4},{value:"Asynchronous Events Stream",id:"asynchronous-events-stream",level:4},{value:"Delegating Generator",id:"delegating-generator",level:4},{value:"Recursive Generator",id:"recursive-generator",level:4},{value:"Destructuring Pattern Matching",id:"destructuring-pattern-matching",level:2},{value:"Destructuring Default Value",id:"destructuring-default-value",level:3},{value:"Object Destructuring",id:"object-destructuring",level:3},{value:"JSON Object Destructuring",id:"json-object-destructuring",level:4},{value:"Import Destructuring",id:"import-destructuring",level:4},{value:"Number and Boolean Destructuring",id:"number-and-boolean-destructuring",level:4},{value:"Iterator Destructuring",id:"iterator-destructuring",level:3},{value:"Map and List Destructuring",id:"map-and-list-destructuring",level:4},{value:"String Destructuring",id:"string-destructuring",level:4},{value:"Function Parameters Destructuring",id:"function-parameters-destructuring",level:3},{value:"Function Return Value Destructuring",id:"function-return-value-destructuring",level:3},{value:"Promise",id:"promise",level:2},{value:"Promise Resolve",id:"promise-resolve",level:3},{value:"Promise Reject",id:"promise-reject",level:3},{value:"Promise Catch",id:"promise-catch",level:3},{value:"Promise Finally",id:"promise-finally",level:3},{value:"Promise Thenable and Catch",id:"promise-thenable-and-catch",level:3},{value:"Promise Chain",id:"promise-chain",level:3},{value:"Promise Combinator Array Functions",id:"promise-combinator-array-functions",level:3},{value:"Promise Polyfill",id:"promise-polyfill",level:3},{value:"Memorize Async Function",id:"memorize-async-function",level:3},{value:"Async and Await",id:"async-and-await",level:2},{value:"Await Features",id:"await-features",level:3},{value:"Await Arrays",id:"await-arrays",level:3},{value:"Asynchronous JavaScript",id:"asynchronous-javascript",level:2},{value:"Sleep Function",id:"sleep-function",level:3},{value:"Race Condition",id:"race-condition",level:3},{value:"Web Worker",id:"web-worker",level:3},{value:"Web Worker Runtime",id:"web-worker-runtime",level:4},{value:"Web Worker Basic Usage",id:"web-worker-basic-usage",level:4},{value:"Web Worker Pool",id:"web-worker-pool",level:4},{value:"Web Worker Performance",id:"web-worker-performance",level:4},{value:"Abort Controller",id:"abort-controller",level:3},{value:"Abort Fetching",id:"abort-fetching",level:4},{value:"Abort Promise",id:"abort-promise",level:4},{value:"Asynchronous API Comparison",id:"asynchronous-api-comparison",level:3},{value:"Module",id:"module",level:2},{value:"CRUST Principles",id:"crust-principles",level:3},{value:"Namespace Module Pattern",id:"namespace-module-pattern",level:3},{value:"Namespace Module Constructor",id:"namespace-module-constructor",level:4},{value:"Namespace Module Usage",id:"namespace-module-usage",level:4},{value:"Sandbox Module Pattern",id:"sandbox-module-pattern",level:3},{value:"Sandbox Module Constructor",id:"sandbox-module-constructor",level:4},{value:"Sandbox Module Usage",id:"sandbox-module-usage",level:4},{value:"CommonJS Pattern",id:"commonjs-pattern",level:3},{value:"AMD Pattern",id:"amd-pattern",level:3},{value:"UMD Pattern",id:"umd-pattern",level:3},{value:"ES6 Module",id:"es6-module",level:3},{value:"ES6 Module Features",id:"es6-module-features",level:4},{value:"ES6 Module Syntax",id:"es6-module-syntax",level:4},{value:"ES6 Module Imports",id:"es6-module-imports",level:4},{value:"ES6 Module Exports",id:"es6-module-exports",level:4},{value:"Proxy and Reflect",id:"proxy-and-reflect",level:2},{value:"Proxy",id:"proxy",level:3},{value:"Reflect",id:"reflect",level:3},{value:"Proxy Usage",id:"proxy-usage",level:3},{value:"Default Zero Value Protection",id:"default-zero-value-protection",level:4},{value:"Hiding Properties Protection",id:"hiding-properties-protection",level:4},{value:"Read Only Object Protection",id:"read-only-object-protection",level:4},{value:"Range Validation",id:"range-validation",level:4},{value:"Property Validation",id:"property-validation",level:4},{value:"Function Parameter Validation",id:"function-parameter-validation",level:4},{value:"Constructor Parameter Validation",id:"constructor-parameter-validation",level:4},{value:"Negative Array Indices Protection",id:"negative-array-indices-protection",level:4},{value:"Array Manipulation Protection",id:"array-manipulation-protection",level:4},{value:"Exception Protection",id:"exception-protection",level:4},{value:"Proxy Pattern Implementation",id:"proxy-pattern-implementation",level:4},{value:"Proxy and DefineProperty",id:"proxy-and-defineproperty",level:3},{value:"Error and Exception",id:"error-and-exception",level:2},{value:"Error",id:"error",level:3},{value:"Error Type",id:"error-type",level:4},{value:"Error Object",id:"error-object",level:4},{value:"Exception",id:"exception",level:3},{value:"Call Stack Overflow",id:"call-stack-overflow",level:4},{value:"Exception Handling",id:"exception-handling",level:4},{value:"Regular Expression",id:"regular-expression",level:2},{value:"RegExp Flags",id:"regexp-flags",level:3},{value:"RegExp Character Classes",id:"regexp-character-classes",level:3},{value:"RegExp Quantifiers",id:"regexp-quantifiers",level:3},{value:"RegExp Group and Ranges",id:"regexp-group-and-ranges",level:3},{value:"RegExp Back Reference",id:"regexp-back-reference",level:3},{value:"RegExp Functions",id:"regexp-functions",level:3},{value:"RegExp Test",id:"regexp-test",level:4},{value:"RexExp Exec",id:"rexexp-exec",level:4},{value:"RegExp Replace",id:"regexp-replace",level:4},{value:"RegExp Replace Arguments",id:"regexp-replace-arguments",level:5},{value:"RegExp Replace Performance",id:"regexp-replace-performance",level:5},{value:"RegExp Best Practice",id:"regexp-best-practice",level:3},{value:"RegExp Use Case",id:"regexp-use-case",level:3},{value:"Common Pattern",id:"common-pattern",level:4},{value:"\u4e2d\u82f1\u6587",id:"\u4e2d\u82f1\u6587",level:4},{value:"\u6570\u5b57",id:"\u6570\u5b57",level:4},{value:"\u7a7a\u5b57\u7b26\u4e0e\u7a7a\u683c\u5b57\u7b26",id:"\u7a7a\u5b57\u7b26\u4e0e\u7a7a\u683c\u5b57\u7b26",level:4},{value:"Markdown Table",id:"markdown-table",level:4},{value:"JavaScript API",id:"javascript-api",level:2},{value:"Strict Mode",id:"strict-mode",level:3},{value:"Timer",id:"timer",level:3},{value:"Math",id:"math",level:3},{value:"Atomics",id:"atomics",level:3},{value:"URI and URL",id:"uri-and-url",level:3},{value:"Encoding and Decoding",id:"encoding-and-decoding",level:3},{value:"Internationalization",id:"internationalization",level:3},{value:"Number i18n",id:"number-i18n",level:4},{value:"String i18n",id:"string-i18n",level:4},{value:"Time i18n",id:"time-i18n",level:4},{value:"Functional JavaScript",id:"functional-javascript",level:2},{value:"Functional JavaScript Pros",id:"functional-javascript-pros",level:3},{value:"Functional JavaScript Cons",id:"functional-javascript-cons",level:3},{value:"Partial Application",id:"partial-application",level:3},{value:"Currying",id:"currying",level:3},{value:"Compose",id:"compose",level:3},{value:"Flow",id:"flow",level:3},{value:"Pipe",id:"pipe",level:3},{value:"Immutable",id:"immutable",level:3},{value:"Immutable Array",id:"immutable-array",level:4},{value:"Immutable Map",id:"immutable-map",level:4},{value:"Immutable Class",id:"immutable-class",level:4},{value:"Lodash",id:"lodash",level:3},{value:"RxJS",id:"rxjs",level:3},{value:"Stream",id:"stream",level:4},{value:"Observable",id:"observable",level:4}],m={toc:c};function d(e){var n=e.components,i=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},m,i,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"javascript-basic-notes"},"JavaScript Basic Notes"),(0,l.kt)("h2",{id:"tc39"},"TC39"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposals"},(0,l.kt)("img",{alt:"TC39",src:t(7379).Z,width:"1273",height:"957"}))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.ecma-international.org/technical-committees/tc39",title:"TC39"},"Technical Committees 39")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://tc39.github.io/process-document"},"TC39 Process")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://exploringjs.com/es6/ch_overviews.html"},"ES2015"))),(0,l.kt)("p",null,"JavaScript = ECMAScript + DOM + BOM:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"ECMAScript: ECMA-262."),(0,l.kt)("li",{parentName:"ul"},"DOM: DOM Core + DOM HTML (",(0,l.kt)("inlineCode",{parentName:"li"},"document"),")."),(0,l.kt)("li",{parentName:"ul"},"BOM: Browser Object Model API (HTML5)\n(",(0,l.kt)("inlineCode",{parentName:"li"},"window"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"navigator"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"location"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"screen"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"performance")," etc).")),(0,l.kt)("h2",{id:"primitive-values"},"Primitive Values"),(0,l.kt)("p",null,"Primitive data types:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Undefined."),(0,l.kt)("li",{parentName:"ul"},"Null."),(0,l.kt)("li",{parentName:"ul"},"Boolean."),(0,l.kt)("li",{parentName:"ul"},"Number."),(0,l.kt)("li",{parentName:"ul"},"String."),(0,l.kt)("li",{parentName:"ul"},"Symbol."),(0,l.kt)("li",{parentName:"ul"},"BigInt.")),(0,l.kt)("h3",{id:"undefined"},"Undefined"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u8c61\u5c5e\u6027\u672a\u5b9a\u4e49\u65f6, \u8be5\u5c5e\u6027\u503c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),"."),(0,l.kt)("li",{parentName:"ul"},"\u672a\u521d\u59cb\u5316\u53d8\u91cf\u7684\u521d\u503c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined")," (\u8868\u793a\u7b49\u5f85\u88ab\u8d4b\u503c).")),(0,l.kt)("h3",{id:"null"},"Null"),(0,l.kt)("p",null,"\u5f53\u5f15\u7528\u4e3a\u7a7a\u6216\u5f15\u7528\u5bf9\u8c61\u4e0d\u5b58\u5728\u65f6, \u503c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"null"),".\n",(0,l.kt)("inlineCode",{parentName:"p"},"null")," \u503c\u8868\u793a\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u6307\u9488."),(0,l.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Null")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("inlineCode",{parentName:"p"},"typeof null")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"object"),"."))),(0,l.kt)("h3",{id:"boolean"},"Boolean"),(0,l.kt)("h4",{id:"zero-value-expression"},"Zero Value Expression"),(0,l.kt)("p",null,"\u96f6\u503c\u8868\u8fbe\u5f0f:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"null"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NaN"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0n"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"''"),".")),(0,l.kt)("h4",{id:"boolean-conversion"},"Boolean Conversion"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"x")),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Boolean(x)")))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"boolean")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"x"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"number")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"0")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"false"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"NaN")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Other numbers \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"true"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"bigint")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"0n")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Other numbers \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"true"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"string")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"''")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Other strings \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"true"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"symbol")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"true"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"object")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"true"))))),(0,l.kt)("h3",{id:"number"},"Number"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Binary: ",(0,l.kt)("inlineCode",{parentName:"li"},"0b10"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"0B10"),"."),(0,l.kt)("li",{parentName:"ul"},"Octal: ",(0,l.kt)("inlineCode",{parentName:"li"},"0o23"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"0O23"),"."),(0,l.kt)("li",{parentName:"ul"},"Hex: ",(0,l.kt)("inlineCode",{parentName:"li"},"0xFF"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"**")," \u6307\u6570\u8fd0\u7b97\u7b26."),(0,l.kt)("li",{parentName:"ul"},"BigInt.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const a = 2172141653;\nconst b = 15346349309;\nconst c1 = a * b;\n// => 33334444555566670000\n\nconst c2 = BigInt(a) * BigInt(b);\n// => 33334444555566667777n\n\nconst inhabitantsOfLondon = 1_335_000;\nconst distanceEarthSunInKm = 149_600_000;\n\nconst fileSystemPermission = 0b111_111_000;\nconst bytes = 0b1111_10101011_11110000_00001101;\nconst words = 0xf3b_f00d;\n\nconst massOfElectronInKg = 9.109_383_56e-31;\nconst trillionInShortScale = 1e1_2;\n")),(0,l.kt)("h4",{id:"number-conversion"},"Number Conversion"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"x")),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Number(x)")))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"NaN"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"boolean")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"0"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"true")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"1"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"number")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"x"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"bigint")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"-1n")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"-1"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"1n")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"1"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"string")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"''")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"0"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Other \u2192 parsed number, ignoring leading/trailing whitespace")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"symbol")),(0,l.kt)("td",{parentName:"tr",align:null},"Throws TypeError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"object")),(0,l.kt)("td",{parentName:"tr",align:null},"Configurable (",(0,l.kt)("inlineCode",{parentName:"td"},"[Symbol.toPrimitive]()"),"/",(0,l.kt)("inlineCode",{parentName:"td"},"valueOf()"),")")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"assert.equal(Number(123.45), 123.45);\nassert.equal(Number(''), 0);\nassert.equal(Number('\\n 123.45 \\t'), 123.45);\nassert.equal(Number('xyz'), NaN);\nassert.equal(Number(-123n), -123);\nassert.equal(\n  Number({\n    valueOf() {\n      return 123;\n    },\n  }),\n  123\n);\n")),(0,l.kt)("h4",{id:"number-static-properties"},"Number Static Properties"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.NaN"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.NEGATIVE_INFINITY"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.POSITIVE_INFINITY"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.MAX_SAFE_INTEGER"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.MIN_SAFE_INTEGER"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.EPSILON"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.isNaN()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.isFinite()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.isInteger()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.isSafeInteger()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.toExponential()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.toFixed()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.toPrecision()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.parseInt(string, radix)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Number.parseFloat(string)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"(1234).toExponential();\n// '1.234e+3'\n(1234).toExponential(5);\n// '1.23400e+3'\n(1234).toExponential(1);\n// '1.2e+3'\n(0.003).toExponential();\n// '3e-3'\n\n(0.00000012).toFixed(10);\n// '0.0000001200'\n(0.00000012).toFixed();\n// '0'\n(10 ** 21).toFixed();\n// '1e+21'\n\n(1234).toPrecision(3);\n// '1.23e+3'\n(1234).toPrecision(4);\n// '1234'\n(1234).toPrecision(5);\n// '1234.0'\n(1.234).toPrecision(3);\n// '1.23'\n")),(0,l.kt)("h4",{id:"not-a-number"},"Not A Number"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const numberType = typeof NaN; // 'number'\n\nNumber.isFinite(NaN);\n// false\nNumber.isNaN(NaN);\n// true\nNumber.isNaN(123);\n// false\nNumber.isNaN('abc');\n// false\n\nfunction isNumber(value) {\n  return typeof value === 'number' && Number.isFinite(value);\n}\n")),(0,l.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"NaN")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},(0,l.kt)("inlineCode",{parentName:"p"},"NaN === NaN")," -> ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),"."))),(0,l.kt)("h4",{id:"infinity-number"},"Infinity Number"),(0,l.kt)("p",null,"Infinity represents all values greater than 1.7976931348623157e+308.\nInfinity will be converted to ",(0,l.kt)("inlineCode",{parentName:"p"},"null")," with ",(0,l.kt)("inlineCode",{parentName:"p"},"JSON.stringify()"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const largeNumber = 1.7976931348623157e308;\n// eslint-disable-next-line @typescript-eslint/no-loss-of-precision\nconst largerNumber = 1.7976931348623157e309;\n\nconsole.log(largeNumber); // 1.7976931348623157e+308\nconsole.log(largerNumber); // Infinity\nconsole.log(46 / 0); // Infinity\nconsole.log(Number.POSITIVE_INFINITY); // Infinity\nconsole.log(Number.MAX_VALUE); // Infinity\n// eslint-disable-next-line @typescript-eslint/no-loss-of-precision\nconsole.log(-1.7976931348623157e309); // -Infinity\nconsole.log(-46 / 0); // -Infinity\nconsole.log(Number.NEGATIVE_INFINITY); // -Infinity\nconsole.log(Number.MIN_VALUE); // -Infinity\n\nconsole.log(Math.max()); // -Infinity\nconsole.log(Math.min()); // Infinity\n\nNumber.isFinite(Infinity);\n// false\nNumber.isFinite(-Infinity);\n// false\nNumber.isFinite(NaN);\n// false\nNumber.isFinite(123);\n// true\n")),(0,l.kt)("h4",{id:"safe-number"},"Safe Number"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Safe integers:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Precision: 53 bits plus sign."),(0,l.kt)("li",{parentName:"ul"},"Range: (",(0,l.kt)("inlineCode",{parentName:"li"},"\u22122^53"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"2^53"),")."))),(0,l.kt)("li",{parentName:"ul"},"Array indices:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Precision: 32 bits, unsigned"),(0,l.kt)("li",{parentName:"ul"},"Range: [",(0,l.kt)("inlineCode",{parentName:"li"},"0"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"2^32\u22121"),")."),(0,l.kt)("li",{parentName:"ul"},"Typed Arrays have a larger range of 53 bits (safe and unsigned)."))),(0,l.kt)("li",{parentName:"ul"},"Bitwise operators:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Precision: 32 bits."),(0,l.kt)("li",{parentName:"ul"},"Range of unsigned right shift (",(0,l.kt)("inlineCode",{parentName:"li"},">>>"),"): unsigned, [",(0,l.kt)("inlineCode",{parentName:"li"},"0"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"2^32"),")."),(0,l.kt)("li",{parentName:"ul"},"Range of all other bitwise operators: signed, [",(0,l.kt)("inlineCode",{parentName:"li"},"\u22122^31"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"2^31"),").")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"assert.equal(Number.MAX_SAFE_INTEGER, 2 ** 53 - 1);\nassert.equal(Number.MIN_SAFE_INTEGER, -Number.MAX_SAFE_INTEGER);\n\nassert.equal(Number.isSafeInteger(5), true);\nassert.equal(Number.isSafeInteger('5'), false);\nassert.equal(Number.isSafeInteger(5.1), false);\nassert.equal(Number.isSafeInteger(Number.MAX_SAFE_INTEGER), true);\nassert.equal(Number.isSafeInteger(Number.MAX_SAFE_INTEGER + 1), false);\n\nNumber.isInteger(-17);\n// true\nNumber.isInteger(33);\n// true\nNumber.isInteger(33.1);\n// false\nNumber.isInteger('33');\n// false\nNumber.isInteger(NaN);\n// false\nNumber.isInteger(Infinity);\n// false\n")),(0,l.kt)("h4",{id:"float-number"},"Float Number"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8ba1\u7b97\u6d6e\u70b9\u6570\u65f6, \u5e94\u5148\u8ba1\u7b97\u6574\u6570, \u518d\u5229\u7528\u79fb\u4f4d/\u4e58\u6cd5/\u9664\u6cd5\u8f6c\u5316\u4e3a\u6d6e\u70b9\u6570."),(0,l.kt)("li",{parentName:"ul"},"\u6d6e\u70b9\u503c\u7684\u7cbe\u786e\u5ea6\u6700\u9ad8\u53ef\u8fbe 17 \u4f4d\u5c0f\u6570.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const a = (1 + 2) / 10; // a = 0.1 + 0.2;\n")),(0,l.kt)("h3",{id:"string"},"String"),(0,l.kt)("h4",{id:"string-primitive-features"},"String Primitive Features"),(0,l.kt)("p",null,"\u4f5c\u4e3a\u57fa\u672c\u53d8\u91cf:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"delete")," \u65e0\u6cd5\u5220\u9664\u67d0\u4f4d\u5b57\u7b26.")),(0,l.kt)("h4",{id:"string-reference-features"},"String Reference Features"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8d4b\u503c\u4e0e\u4f20\u53c2: \u4f20\u9012 string \u5b57\u7b26\u4e32\u5e38\u91cf\u7684\u5f15\u7528."),(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709 string \u5b57\u9762\u91cf\u90fd\u662f\u4e0d\u53ef\u53d8\u91cf,\n\u5f53\u5bf9 string \u8fdb\u884c\u64cd\u4f5c\u540e, \u5c06\u5148\u4f1a\u5728\u5806\u533a\u521b\u5efa\u526f\u672c,\n\u518d\u901a\u8fc7\u526f\u672c\u8fdb\u884c\u4fee\u6539, \u5e76\u8fd4\u56de\u526f\u672c\u7684\u7d22\u5f15."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"for...in"),": \u8fd4\u56de\u4e0b\u6807\u6570\u5b57."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"for...of"),": \u5bf9\u5b57\u7b26\u4e32\u5b57\u7b26\u8fdb\u884c\u904d\u5386."),(0,l.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u88ab\u4efb\u4f55\u53d8\u91cf\u5f15\u7528\u7684 string: \u5783\u573e\u56de\u6536.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const goodString = \"I've been a good string\";\nconsole.log(typeof goodString); // string\nconsole.log(goodString instanceof String); // false\nconsole.log(Object.prototype.toString.call(goodString)); // [object String]\n\n// eslint-disable-next-line no-new-wrappers\nconst badString = new String(\"I've been a naughty string\");\nconsole.log(typeof badString); // object\nconsole.log(badString instanceof String); // true\nconsole.log(Object.prototype.toString.call(badString)); // [object String]\n\nconst isPrimitiveString = value => typeof value === 'string';\nconsole.log(isPrimitiveString(goodString)); // true\nconsole.log(isPrimitiveString(badString)); // false\n\nconst isObjectWrappedString = value => value instanceof String;\nconsole.log(isObjectWrappedString(goodString)); // false\nconsole.log(isObjectWrappedString(badString)); // true\n\nconst isString = value => typeof value === 'string' || value instanceof String;\nconsole.log(isString(goodString)); // true\nconsole.log(isString(badString)); // true\n\nconst isStringAlternative = value =>\n  Object.prototype.toString.call(badString) === '[object String]';\nconsole.log(isStringAlternative(goodString)); // true\nconsole.log(isStringAlternative(badString)); // true\n")),(0,l.kt)("h4",{id:"string-conversion"},"String Conversion"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"x")),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"String(x)")))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"'undefined'"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"'null'"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"boolean")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"'false'"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"true")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"'true'"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"number")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"123")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"'123'"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"bigint")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"123n")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"'123'"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"string")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"x"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"symbol")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Symbol('abc')")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"'Symbol(abc)'"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"object")),(0,l.kt)("td",{parentName:"tr",align:null},"Configurable (",(0,l.kt)("inlineCode",{parentName:"td"},"toPrimitive"),"/",(0,l.kt)("inlineCode",{parentName:"td"},"toStringTag"),"/",(0,l.kt)("inlineCode",{parentName:"td"},"toString()"),")")))),(0,l.kt)("h4",{id:"string-unicode"},"String Unicode"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// eslint-disable-next-line no-self-compare\nconst truthy = 'z' === 'z'; // true\n// eslint-disable-next-line no-octal-escape\nconst truthy = '\\172' === 'z'; // true\nconst truthy = '\\x7A' === 'z'; // true\nconst truthy = '\\u007A' === 'z'; // true\nconst truthy = '\\u{7A}' === 'z'; // true\n")),(0,l.kt)("h4",{id:"string-char-code"},"String Char Code"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.charAt(index)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.charCodeAt(index)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.fromCharCode(charCode)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.codePointAt(index)"),": \u6b63\u786e\u5904\u7406 4 \u5b57\u8282\u5b58\u50a8\u5b57\u7b26."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.fromCodePoint(codePoint)"),": \u6b63\u786e\u5904\u7406 4 \u5b57\u8282\u5b58\u50a8\u5b57\u7b26.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function is32Bit(c) {\n  return c.codePointAt(0) > 0xffff;\n}\n\nconst truthy = String.fromCodePoint(0x78, 0x1f680, 0x79) === 'x\\uD83D\\uDE80y';\n\nconst after = before.charAt(0).toUpperCase() + before.slice(1);\n")),(0,l.kt)("h4",{id:"string-slice-and-merge"},"String Slice and Merge"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.slice()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.substring()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.substr()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.split(separator)"),": \u9009\u62e9\u5272\u65ad\u7b26, \u8fd4\u56de\u5b57\u7b26\u4e32\u6570\u7ec4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Array<string>.join(separator)"),": \u5c06\u5b57\u7b26\u4e32\u6570\u7ec4\u8fde\u63a5\u6210\u5b57\u7b26\u4e32.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'const stringValue = \'hello world\';\nconsole.log(stringValue.slice(3)); // "lo world"\nconsole.log(stringValue.substring(3)); // "lo world"\nconsole.log(stringValue.substr(3)); // "lo world"\nconsole.log(stringValue.slice(3, 8)); // "lo wo"\nconsole.log(stringValue.substring(3, 8)); // "lo wo"\nconsole.log(stringValue.substr(3, 8)); // "lo world"\nconsole.log(stringValue.slice(-3)); // "rld"\nconsole.log(stringValue.substring(-3)); // "hello world"\nconsole.log(stringValue.substr(-3)); // "rld"\nconsole.log(stringValue.slice(3, -4)); // "lo w"\nconsole.log(stringValue.substring(3, -4)); // "hel"\nconsole.log(stringValue.substr(3, -4)); // "" (empty string)\n')),(0,l.kt)("h4",{id:"string-query"},"String Query"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.includes(substr)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.startsWith(substr)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.endsWith(substr)"),"."),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570 n \u65f6, endsWith \u9488\u5bf9\u524d n \u4e2a\u5b57\u7b26, \u5176\u4ed6\u4e24\u4e2a\u65b9\u6cd5\u9488\u5bf9\u4ece\u7b2c n \u4e2a\u4f4d\u7f6e\u76f4\u5230\u5b57\u7b26\u4e32\u7ed3\u675f.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const s = 'Hello world!';\n\ns.startsWith('world', 6); // true\ns.endsWith('Hello', 5); // true\ns.includes('Hello', 6); // false\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.match(RegExp): string[] | null"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.matchAll(RegExp): string[] | null"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface RegExpMatchArray extends Array<string> {\n  index: number;\n  input: string;\n  groups: Record<string, string> | undefined;\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.search(string | RegExp): number"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"'a2b'.search(/[0-9]/);\n// 1\n'a2b'.search('[0-9]');\n// 1\n")),(0,l.kt)("h4",{id:"string-replace"},"String Replace"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.replace(string | RegExp, replaceValue | replacerFunction)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.replaceAll(string | RegExp, replaceValue | replacerFunction)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'// eslint-disable-next-line prefer-regex-literals\nconst regexp = new RegExp(\'foo[a-z]*\', \'g\');\nconst str = \'table football, foosball\';\nconst matches = str.matchAll(regexp);\n\nfor (const match of matches) {\n  console.log(\n    `Found ${match[0]} start=${match.index} end=${\n      match.index + match[0].length\n    }.`\n  );\n}\n// expected output: "Found football start=6 end=14."\n// expected output: "Found foosball start=16 end=24."\n\n// matches iterator is exhausted after the for..of iteration\n// Call matchAll again to create a new iterator\nArray.from(str.matchAll(regexp), m => m[0]);\n// Array [ "football", "foosball" ]\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"'aabbcc'.replaceAll('b', '.');\n// => 'aa..cc'\n\n'aabbcc'.replaceAll(/b/g, '.');\n// => 'aa..cc'\n")),(0,l.kt)("h4",{id:"string-pad"},"String Pad"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.repeat(times)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"'hello'.repeat(2); // \"hellohello\"\n'na'.repeat(2.9); // \"nana\"\n\n'na'.repeat(-0.9); // \"\"\n'na'.repeat(-1); // RangeError\n\n'na'.repeat(NaN); // \"\"\n'na'.repeat(Infinity); // RangeError\n\n'na'.repeat('na'); // \"\"\n'na'.repeat('3'); // \"nanana\"\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.padStart(len, paddingStr)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.padEnd(len, paddingStr)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"'1'.padStart(10, '0'); // \"0000000001\"\n'12'.padStart(10, '0'); // \"0000000012\"\n'123456'.padStart(10, '0'); // \"0000123456\"\n\n'12'.padStart(10, 'YYYY-MM-DD'); // \"YYYY-MM-12\"\n'09-12'.padStart(10, 'YYYY-MM-DD'); // \"YYYY-09-12\"\n")),(0,l.kt)("h4",{id:"string-trim"},"String Trim"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.trimLeft()"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"string.trimStart()"),": remove start whitespace."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"string.trimRight()"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"string.trimEnd()"),": remove end whitespace.")),(0,l.kt)("h4",{id:"string-template-literals"},"String Template Literals"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"str")," \u8868\u793a\u6a21\u677f\u5b57\u7b26\u4e32:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u666e\u901a\u5b57\u7b26\u4e32\n`In JavaScript '\\n' is a line-feed.``\\`Yo\\` World!``In JavaScript this is // \u591a\u884c\u5b57\u7b26\u4e32\n not legal.``${\n  x // \u5f15\u7528\u53d8\u91cf\n} + ${y * 2} = ${x + y * 2}``${obj.x + obj.y}``foo ${\n  fn() // \u8c03\u7528\u51fd\u6570\n} bar`;\n")),(0,l.kt)("h4",{id:"tagged-templates-literals"},"Tagged Templates Literals"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const boldify = (parts, ...insertedParts) => {\n  return parts\n    .map((s, i) => {\n      if (i === insertedParts.length) return s;\n      return `${s}<strong>${insertedParts[i]}</strong>`;\n    })\n    .join('');\n};\n\nconst name = 'Sabertaz';\nconsole.log(boldify`Hi, my name is ${name}!`);\n// => \"Hi, my name is <strong>Sabertaz</strong>!\"\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function template(strings, ...keys) {\n  return function (...values) {\n    const dict = values[values.length - 1] || {};\n    const result = [strings[0]];\n    keys.forEach(function (key, i) {\n      const value = Number.isInteger(key) ? values[key] : dict[key];\n      result.push(value, strings[i + 1]);\n    });\n    return result.join('');\n  };\n}\n\nconst t1Closure = template`${0}${1}${0}!`;\nt1Closure('Y', 'A'); // \"YAY!\"\nconst t2Closure = template`${0} ${'foo'}!`;\nt2Closure('Hello', { foo: 'World' }); // \"Hello World!\"\n")),(0,l.kt)("p",null,"\u7f16\u8bd1\u6a21\u677f (\u5c0f\u578b\u6a21\u677f\u5f15\u64ce):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function compile(template) {\n  const evalExpr = /<%=(.+?)%>/g;\n  const expr = /<%([\\s\\S]+?)%>/g;\n\n  template = template\n    .replace(evalExpr, '`); \\n  echo( $1 ); \\n  echo(`')\n    .replace(expr, '`); \\n $1 \\n  echo(`');\n\n  template = `echo(\\`${template}\\`);`;\n\n  const script = `(function parse(data){\n      let output = \"\";\n\n      function echo(html){\n        output += html;\n      }\n\n      ${template}\n\n      return output;\n    })`;\n\n  return script;\n}\n\nconst template = `\n<ul>\n  <% for(let i=0; i < data.supplies.length; i++) { %>\n    <li><%= data.supplies[i] %></li>\n  <% } %>\n</ul>\n`;\nconst parse = compile(template);\ndiv.innerHTML = parse({ supplies: ['broom', 'mop', 'cleaner'] });\n// => <ul>\n// =>   <li>broom</li>\n// =>   <li>mop</li>\n// =>   <li>cleaner</li>\n// => </ul>\n\n// \u4e0b\u9762\u7684hashTemplate\u51fd\u6570\n// \u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u6a21\u677f\u5904\u7406\u51fd\u6570\nconst libraryHtml = hashTemplate`\n  <ul>\n    #for book in ${myBooks}\n      <li><i>#{book.title}</i> by #{book.author}</li>\n    #end\n  </ul>\n`;\n")),(0,l.kt)("p",null,"\u56fd\u9645\u5316\u5904\u7406:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'i18n`Welcome to ${siteName}, you are visitor number ${visitorNumber}!`;\n// "\u6b22\u8fce\u8bbf\u95eexxx, \u60a8\u662f\u7b2cxxxx\u4f4d\u8bbf\u95ee\u8005\uff01"\n')),(0,l.kt)("p",null,"XSS protection:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const message = SaferHTML`<p>${sender} has sent you a message.</p>`;\n\nfunction SaferHTML(templateString, ...expressions) {\n  let s = templateString[0];\n\n  for (let i = 0; i < expressions.length; i++) {\n    const expression = String(expressions[i]);\n\n    // Escape special characters in the substitution.\n    s += expression\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n\n    // Don't escape special characters in the template.\n    s += templateString[i + 1];\n  }\n\n  return s;\n}\n")),(0,l.kt)("p",null,"\u8fd0\u884c\u4ee3\u7801:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"jsx`\n  <div>\n    <input\n      ref='input'\n      onChange='${this.handleChange}'\n      defaultValue='${this.state.value}' />\n      ${this.state.value}\n   </div>\n`;\n\njava`\nclass HelloWorldApp {\n  public static void main(String[] args) {\n    System.out.println(\"Hello World!\"); // Display the string.\n  }\n}\n`;\nHelloWorldApp.main();\n")),(0,l.kt)("h4",{id:"raw-string"},"Raw String"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"console.log(`\\u00A9`); // \xa9\nconsole.log(String.raw`\\u00A9`); // \\u00A9\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'console.log(`first line\\nsecond line`);\n// first line\n// second line\nconsole.log(String.raw`first line\\nsecond line`);\n// "first line\\nsecond line"\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function printRaw(strings) {\n  console.log('Actual characters:');\n\n  for (const string of strings) {\n    console.log(string);\n  }\n\n  console.log('Escaped characters;');\n\n  for (const rawString of strings.raw) {\n    console.log(rawString);\n  }\n}\n\nprintRaw`\\u00A9${'and'}\\n`;\n// Actual characters:\n// \xa9\n// (\u6362\u884c\u7b26)\n// Escaped characters:\n// \\u00A9\n// \\n\n")),(0,l.kt)("h3",{id:"symbol"},"Symbol"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"A Symbol is a ",(0,l.kt)("strong",{parentName:"li"},"unique")," and ",(0,l.kt)("strong",{parentName:"li"},"immutable")," primitive value\nand may be used as the key of an Object property."),(0,l.kt)("li",{parentName:"ul"},"Symbols don't auto-convert to strings and can't convert to numbers."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Symbol.for(key)")," create global Symbol registry.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// eslint-disable-next-line symbol-description\nconst genericSymbol = Symbol();\n// eslint-disable-next-line symbol-description\nconst otherGenericSymbol = Symbol();\nconsole.log(genericSymbol === otherGenericSymbol); // false\n\nconst fooSymbol = Symbol('foo');\nconst otherFooSymbol = Symbol('foo');\nconsole.log(fooSymbol === otherFooSymbol); // false\n\nconst fooGlobalSymbol = Symbol.for('foobar'); // \u521b\u5efa\u65b0\u7b26\u53f7\nconst otherFooGlobalSymbol = Symbol.for('foobar'); // \u91cd\u7528\u5df2\u6709\u7b26\u53f7\nconsole.log(fooGlobalSymbol === otherFooGlobalSymbol); // true\n")),(0,l.kt)("h4",{id:"symbol-conversion"},"Symbol Conversion"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Convert To"),(0,l.kt)("th",{parentName:"tr",align:null},"Explicit Conversion"),(0,l.kt)("th",{parentName:"tr",align:null},"Coercion (Implicit Conversion)"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"boolean")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Boolean(sym)")," \u2192 OK"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"!sym")," \u2192 OK")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"number")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Number(sym)")," \u2192 TypeError"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"sym * 2")," \u2192 TypeError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"string")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String(sym)")," \u2192 OK"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"'' + sym")," \u2192 TypeError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"sym.toString()")," \u2192 OK"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"${sym}")," \u2192 TypeError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"object")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object(sym)")," \u2192 OK"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.keys(sym)")," \u2192 OK")))),(0,l.kt)("h4",{id:"built-in-symbol-methods"},"Built-in Symbol Methods"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#static_properties"},"Symbol methods"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[Symbol.iterator]()"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"for of"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[Symbol.asyncIterator]()"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"for await of"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[Symbol.match/replace/search/split](target)"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"string.match/replace/search/split(classWithSymbolFunction)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[Symbol.hasInstance](instance)"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"instance of"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[Symbol.species]()"),": constructor for making derived objects."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[Symbol.toPrimitive](hint)"),": \u5f3a\u5236\u7c7b\u578b\u8f6c\u6362."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[Symbol.toStringTag]()"),": string used by ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.prototype.toString()"),".")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"iterator"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const arr = ['a', 'b', 'c'];\nconst iter = arr[Symbol.iterator]();\n\niter.next(); // { value: 'a', done: false }\niter.next(); // { value: 'b', done: false }\niter.next(); // { value: 'c', done: false }\niter.next(); // { value: undefined, done: true }\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"hasInstance"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Bar {}\nclass Baz extends Bar {\n  static [Symbol.hasInstance](instance) {\n    return false;\n  }\n}\n\nconst b = new Baz();\n\nconsole.log(Bar[Symbol.hasInstance](b)); // true\nconsole.log(b instanceof Bar); // true\nconsole.log(Baz[Symbol.hasInstance](b)); // false\nconsole.log(b instanceof Baz); // false\n\nconst ReferenceType = {\n  [Symbol.hasInstance](value) {\n    return (\n      value !== null &&\n      (typeof value === 'object' || typeof value === 'function')\n    );\n  },\n};\n\nconst obj1 = {};\nconsole.log(obj1 instanceof Object); // true\nconsole.log(obj1 instanceof ReferenceType); // true\n\nconst obj2 = Object.create(null);\nconsole.log(obj2 instanceof Object); // false\nconsole.log(obj2 instanceof ReferenceType); // true\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"species"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class MyClass {\n  static get [Symbol.species]() {\n    return this;\n  }\n\n  constructor(value) {\n    this.value = value;\n  }\n\n  clone() {\n    return new this.constructor[Symbol.species](this.value);\n  }\n}\n\nclass MyDerivedClass1 extends MyClass {\n  // empty\n}\n\nclass MyDerivedClass2 extends MyClass {\n  static get [Symbol.species]() {\n    return MyClass;\n  }\n}\n\nconst instance1 = new MyDerivedClass1('foo');\nconst instance2 = new MyDerivedClass2('bar');\nconst clone1 = instance1.clone();\nconst clone2 = instance2.clone();\n\nconsole.log(clone1 instanceof MyClass); // true\nconsole.log(clone1 instanceof MyDerivedClass1); // true\nconsole.log(clone2 instanceof MyClass); // true\nconsole.log(clone2 instanceof MyDerivedClass2); // false\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"toPrimitive"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Temperature {\n  constructor(degrees) {\n    this.degrees = degrees;\n  }\n\n  [Symbol.toPrimitive](hint) {\n    switch (hint) {\n      case 'string':\n        return `${this.degrees}\\u00B0`; // degrees symbol\n      case 'number':\n        return this.degrees;\n      case 'default':\n        return `${this.degrees} degrees`;\n    }\n  }\n}\n\nconst freezing = new Temperature(32);\n\nconsole.log(`${freezing}!`); // \"32 degrees!\"\nconsole.log(freezing / 2); // 16\nconsole.log(String(freezing)); // \"32\uc9f8\"\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"toStringTag"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Person {\n  constructor(name) {\n    this.name = name;\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'Person';\n  }\n}\n\nconst me = new Person('Me');\n\nconsole.log(me.toString()); // \"[object Person]\"\nconsole.log(Object.prototype.toString.call(me)); // \"[object Person]\"\n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Value"),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"toString")," Tag"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"undefined"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Undefined"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"null"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Null"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Array object"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Array"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"string object"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"arguments"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Arguments"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"callable"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Function"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"error object"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Error"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"boolean object"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Boolean"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"number object"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Number"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"date object"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Date"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"regular expression object"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"RegExp"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"(Otherwise)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object"))))),(0,l.kt)("h3",{id:"bigint"},"Bigint"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Decimal: ",(0,l.kt)("inlineCode",{parentName:"li"},"123n"),"."),(0,l.kt)("li",{parentName:"ul"},"Binary: ",(0,l.kt)("inlineCode",{parentName:"li"},"0b1101n"),"."),(0,l.kt)("li",{parentName:"ul"},"Octal: ",(0,l.kt)("inlineCode",{parentName:"li"},"0o777n"),"."),(0,l.kt)("li",{parentName:"ul"},"Hexadecimal: ",(0,l.kt)("inlineCode",{parentName:"li"},"0xFFn"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Takes a bigint as an argument and returns a bigint\n */\nfunction nthPrime(nth) {\n  if (typeof nth !== 'bigint') {\n    throw new TypeError('Not bigint');\n  }\n\n  function isPrime(p) {\n    for (let i = 2n; i < p; i++) {\n      if (p % i === 0n) return false;\n    }\n\n    return true;\n  }\n\n  for (let i = 2n; ; i++) {\n    if (isPrime(i)) {\n      if (--nth === 0n) return i;\n    }\n  }\n}\n\nassert.deepEqual(\n  [1n, 2n, 3n, 4n, 5n].map(nth => nthPrime(nth)),\n  [2n, 3n, 5n, 7n, 11n]\n);\n")),(0,l.kt)("h4",{id:"bigint-conversion"},"Bigint Conversion"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"x")),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"BigInt(x)")))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},"Throws TypeError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")),(0,l.kt)("td",{parentName:"tr",align:null},"Throws TypeError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"boolean")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"0n"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"true")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"1n"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"number")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"123")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"123n"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Non-integer \u2192 throws RangeError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"bigint")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"x"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"string")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"'123'")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"123n"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"Unparsable \u2192 throws SyntaxError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"symbol")),(0,l.kt)("td",{parentName:"tr",align:null},"Throws TypeError")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"object")),(0,l.kt)("td",{parentName:"tr",align:null},"Configurable (",(0,l.kt)("inlineCode",{parentName:"td"},"[Symbol.toPrimitive]()"),"/",(0,l.kt)("inlineCode",{parentName:"td"},"valueOf()"),")")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"BigInt(undefined);\n// TypeError: Cannot convert undefined to a BigInt\nBigInt(null);\n// TypeError: Cannot convert null to a BigInt\nBigInt('abc');\n// SyntaxError: Cannot convert abc to a BigInt\nBigInt('123n');\n// SyntaxError: Cannot convert 123n to a BigInt\nBigInt('123');\n// 123n\nBigInt('0xFF');\n// 255n\nBigInt('0b1101');\n// 13n\nBigInt('0o777');\n// 511n\nBigInt(123.45);\n// RangeError: The number 123.45 cannot be converted to a BigInt\nBigInt(123);\n// 123n\nBigInt({\n  valueOf() {\n    return 123n;\n  },\n});\n// 123n\n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Convert To"),(0,l.kt)("th",{parentName:"tr",align:null},"Explicit Conversion"),(0,l.kt)("th",{parentName:"tr",align:null},"Coercion (Implicit Conversion)"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"boolean")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Boolean(0n)")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"false")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"!0n")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"true"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Boolean(int)")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"true")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"!int")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"false"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"number")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Number(7n)")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"7")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"+int")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"string")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"String(7n)")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"'7'")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"''+7n")," \u2192 ",(0,l.kt)("inlineCode",{parentName:"td"},"'7'"))))),(0,l.kt)("h4",{id:"bigint-static-properties"},"Bigint Static Properties"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"BigInt.asIntN(width, theInt)"),":\nCasts theInt to width bits (signed)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"BigInt.asUintN(width, theInt)"),":\nCasts theInt to width bits (unsigned).")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const uint64a = BigInt.asUintN(64, 12345n);\nconst uint64b = BigInt.asUintN(64, 67890n);\nconst result = BigInt.asUintN(64, uint64a * uint64b);\n")),(0,l.kt)("h3",{id:"wrapper-objects-for-primitives"},"Wrapper Objects for Primitives"),(0,l.kt)("p",null,"Using the wrapper function without the new keyword\nis a useful way of coercing a value into a primitive type."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Not recommended (primitive object wrapper):\n// eslint-disable-next-line no-new-wrappers\nconst objectType = typeof new String(37); // object\n\n// Safe (type coercion with wrapper function):\nconst stringType = typeof String(37); // string\n\n// Primitive strings:\n// eslint-disable-next-line no-self-compare\nconst truthy = '37' === '37'; // true\n\n// Object-wrapped string:\n// eslint-disable-next-line no-new-wrappers\nconst falsy = new String(37) === '37'; // false\n\n// Type-coerced string:\nconst truthy = String(37) === '37'; // true\n\n// BAD!\n// eslint-disable-next-line no-new-wrappers\nconst falseObject = new Boolean(false);\nconst result = falseObject && true;\nconsole.log(result); // true\nconsole.log(typeof falseObject); // object\nconsole.log(falseObject instanceof Boolean); // true\n\nconst prim = true;\nassert.equal(typeof prim, 'boolean');\nassert.equal(prim instanceof Boolean, false);\n\nconst wrapped = Object(prim);\nassert.equal(typeof wrapped, 'object');\nassert.equal(wrapped instanceof Boolean, true);\nassert.equal(wrapped.valueOf(), prim); // unwrap\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Box and Unbox")," for primitive values:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u521b\u5efa\u7684\u539f\u59cb\u503c\u5305\u88c5\u5bf9\u8c61\u53ef\u4ee5\u8ba9\u539f\u59cb\u503c\u62e5\u6709\u5bf9\u8c61\u7684\u884c\u4e3a."),(0,l.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u521b\u5efa\u7684\u539f\u59cb\u503c\u5305\u88c5\u5bf9\u8c61\u53ea\u5b58\u5728\u4e8e\u8bbf\u95ee\u5b83\u7684\u90a3\u884c\u4ee3\u7801\u6267\u884c\u671f\u95f4."),(0,l.kt)("li",{parentName:"ul"},"\u5e38\u6570\u503c",(0,l.kt)("strong",{parentName:"li"},"\u52a0\u62ec\u53f7"),"\u53ef\u8f6c\u5316\u4e3a\u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u5bf9 primitive values \u8fdb\u884c ES6 \u89e3\u6784\u8bed\u6cd5.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const s1 = 'some text';\nconst s2 = s1.substring(2); // Call method on primitive string.\n// let _s1 = new String(s1);\n// const s2 = _s1.substring(2);\n// _s1 = null;\n\nconst s3 = 'some text';\ns3.color = 'red';\nconsole.log(s3.color); // undefined\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// primitive string\nconst greet = 'Hello there';\n// primitive is converted to an object\n// in order to use the split() method\nconst hello = greet.split(' ')[0]; // \"Hello\"\n// attempting to augment a primitive is not an error\ngreet.smile = true;\n// but it doesn't actually work\nconst undef = typeof greet.smile; // \"undefined\"\n")),(0,l.kt)("p",null,"\u4e0d\u4f7f\u7528 new \u5173\u952e\u5b57,\u5305\u88c5\u7c7b\u6784\u9020\u51fd\u6570\u8fd4\u56de\u503c\u4e3a\u57fa\u672c\u7c7b\u578b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'const numberType = typeof Number(1); // "number"\nconst numberType = typeof Number(\'1\'); // "number"\n// eslint-disable-next-line no-new-wrappers\nconst numberType = typeof Number(new Number()); // "number"\nconst stringType = typeof String(1); // "string"\nconst booleanType = typeof Boolean(1); // "boolean"\n')),(0,l.kt)("h2",{id:"reference-values"},"Reference Values"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Object e.g Date, RegExp."),(0,l.kt)("li",{parentName:"ul"},"Function."),(0,l.kt)("li",{parentName:"ul"},"Array."),(0,l.kt)("li",{parentName:"ul"},"Map."),(0,l.kt)("li",{parentName:"ul"},"Set."),(0,l.kt)("li",{parentName:"ul"},"WeakMap."),(0,l.kt)("li",{parentName:"ul"},"WeakSet.")),(0,l.kt)("h3",{id:"array"},"Array"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e0e Object \u540c\u6e90."),(0,l.kt)("li",{parentName:"ul"},"\u5173\u8054\u6570\u7ec4: ",(0,l.kt)("inlineCode",{parentName:"li"},'arrayName["string"] = value;')," \u5b9e\u9645\u4e3a Array \u5bf9\u8c61\u6dfb\u52a0\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"li"},"{string:value}"),"."),(0,l.kt)("li",{parentName:"ul"},"\u7f13\u5b58\u6570\u7ec4\u957f\u5ea6:",(0,l.kt)("inlineCode",{parentName:"li"},"int l = list.length"),"(\u8bbf\u95ee",(0,l.kt)("inlineCode",{parentName:"li"},"length"),"\u9020\u6210\u8fd0\u7b97)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[]"),"\u6570\u7ec4, ",(0,l.kt)("inlineCode",{parentName:"li"},"{}"),"\u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},"\u6570\u7ec4\u5728\u6570\u503c\u8fd0\u7b97\u73af\u5883\u4e2d\u8f6c\u5316\u4e3a 0 (\u7a7a\u6570\u7ec4)/ num (\u5355\u4e00\u5143\u7d20\u6570\u7ec4)/NaN (\u591a\u5143\u7d20\u6570\u7ec4/NaN \u6570\u7ec4).")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const array = [...Array(5).keys()]; // => [0, 1, 2, 3, 4]\n")),(0,l.kt)("h4",{id:"array-length"},"Array Length"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6570\u7ec4\u4e0b\u6807\u6ee1\u8db3 [0, 2^32-1) \u5373\u53ef"),(0,l.kt)("li",{parentName:"ul"},"\u8fd0\u7528\u5927\u4e8e length \u7684\u4e0b\u6807, length \u81ea\u52a8\u589e\u5927, \u4e0d\u4f1a\u53d1\u751f\u6570\u7ec4\u8fb9\u754c\u9519\u8bef"),(0,l.kt)("li",{parentName:"ul"},"length \u7b49\u4e8e \u6570\u7ec4\u6700\u540e\u4e00\u4e2a\u6574\u6570\u5c5e\u6027\u540d+1, length \u4e0d\u4e00\u5b9a\u7b49\u4e8e \u6570\u7ec4\u4e2d\u6709\u6548\u5143\u7d20\u4e2a\u6570")),(0,l.kt)("h4",{id:"array-literals"},"Array Literals"),(0,l.kt)("p",null,"\u4e0d\u4f7f\u7528\u6784\u9020\u51fd\u6570,\u4f7f\u7528\u6570\u7ec4\u5b57\u9762\u91cf\u521b\u5efa\u6570\u7ec4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const arr1 = new Array(3); // \u6570\u7ec4\u957f\u5ea6\nconst arr2 = new Array(3.14); // RangeError\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"if (typeof Array.isArray === 'undefined') {\n  Array.isArray = function (arg) {\n    // \u5176\u4f59\u5bf9\u8c61\u8fd4\u56de\u503c [object Object/Number/String/Boolean]\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n}\n")),(0,l.kt)("h4",{id:"array-of"},"Array Of"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Array.of(1); // [1]\nArray.of(1, 2, 3); // [1, 2, 3]\nArray.of(undefined); // [undefined]\n")),(0,l.kt)("h4",{id:"array-from"},"Array From"),(0,l.kt)("p",null,"\u5f3a\u5927\u7684",(0,l.kt)("strong",{parentName:"p"},"\u51fd\u6570\u5f0f"),"\u65b9\u6cd5:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f2a\u6570\u7ec4\u5bf9\u8c61 (Array-like object)."),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u679a\u4e3e\u5bf9\u8c61 (Iterable object)."),(0,l.kt)("li",{parentName:"ul"},"\u6d45\u514b\u9686\u6570\u7ec4 (Shallow Clone)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"map")," \u51fd\u6570.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface ArrayLike<T> {\n  length: number;\n  [n: number]: T;\n}\n\ninterface Array {\n  from<T>(iterable: Iterable<T> | ArrayLike<T>): T[];\n  from<T, U>(\n    iterable: Iterable<T> | ArrayLike<T>,\n    mapFunc: (v: T, i: number) => U,\n    thisArg?: any\n  ): U[];\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Set\n// Map\n\n// NodeList \u5bf9\u8c61\nconst ps = document.querySelectorAll('p');\nArray.from(ps).forEach(function (p) {\n  console.log(p);\n});\n\n// arguments \u5bf9\u8c61\nfunction foo() {\n  // eslint-disable-next-line prefer-rest-params\n  const args = Array.from(arguments);\n  // ...\n}\n\nArray.from('hello');\n// => ['h', 'e', 'l', 'l', 'o']\n\nconst namesSet = new Set(['a', 'b']);\nArray.from(namesSet); // ['a', 'b']\n\n// \u514b\u9686\u6570\u7ec4\nArray.from([1, 2, 3]);\n// => [1, 2, 3]\n\nArray.from(arrayLike, x => x * x);\n// =>\nArray.from(arrayLike).map(x => x * x);\n\nArray.from([1, 2, 3], x => x * x);\n// [1, 4, 9]\n\n// random array generation\nArray.from(Array(5).keys());\n// [0, 1, 2, 3, 4]\n")),(0,l.kt)("h4",{id:"array-fill"},"Array Fill"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const numbers = [1, 2, 3, 4];\nnumbers.fill(1, 2);\nconsole.log(numbers.toString()); // 1, 2, 1, 1\nnumbers.fill(0, 1, 3);\nconsole.log(numbers.toString()); // 1, 0, 0, 1\nnumbers.fill(1);\nconsole.log(numbers.toString()); // 1, 1, 1, 1\n")),(0,l.kt)("h4",{id:"array-copywithin"},"Array CopyWithin"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"copyWithin(dest, start, end)"),", \u66ff\u6362\u6570\u7ec4\u5143\u7d20, ",(0,l.kt)("strong",{parentName:"p"},"\u4fee\u6539\u539f\u6570\u7ec4"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"[1, 2, 3, 4, 5].copyWithin(0, 3);\n// => [4, 5, 3, 4, 5]\n[1, 2, 3, 4, 5].copyWithin(0, -2, -1);\n// -2\u76f8\u5f53\u4e8e3\u53f7\u4f4d, -1\u76f8\u5f53\u4e8e4\u53f7\u4f4d\n// => [4, 2, 3, 4, 5]\n\n// \u5c062\u53f7\u4f4d\u5230\u6570\u7ec4\u7ed3\u675f, \u590d\u5236\u52300\u53f7\u4f4d\nconst i32a = new Int32Array([1, 2, 3, 4, 5]);\ni32a.copyWithin(0, 2);\n// => Int32Array [3, 4, 5, 4, 5]\n")),(0,l.kt)("h4",{id:"array-stack"},"Array Stack"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"arr.unshift(value); // \u6dfb\u52a0\u6570\u7ec4\u9996\u5143\u7d20\narr.push(value); // \u6dfb\u52a0\u6570\u7ec4\u5c3e\u5143\u7d20\narr.shift(); // \u5220\u9664\u6570\u7ec4\u9996\u5143\u7d20\narr.pop(); // \u5220\u9664\u6570\u7ec4\u5c3e\u5143\u7d20\n")),(0,l.kt)("h4",{id:"array-slice-and-merge"},"Array Slice and Merge"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"slice \u4e0d\u6539\u53d8\u539f\u6570\u7ec4, splice \u6539\u53d8\u539f\u6570\u7ec4.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"[].slice(start, end); // [start] - [end - 1]\n[].splice(startIndex, lengthToDelete, insertElements); // \u529f\u80fd\u5f3a\u5927\u7684\u591a\u6001\u65b9\u6cd5\n[].concat(otherArray);\n[].join(separator);\n")),(0,l.kt)("h4",{id:"array-query"},"Array Query"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"[].at(index); // ES2022\n[].includes(element); // boolean.\n[].find(callback); // element.\n[].findIndex(callback); // element index.\n[].indexOf(element); // -1 or other.\n[].lastIndexOf(element); // -1 or other.\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// console.log([NaN].indexOf(NaN));\n// -1\n\nconsole.log([NaN].includes(NaN));\n// true\n")),(0,l.kt)("h4",{id:"array-element-filter"},"Array Element Filter"),(0,l.kt)("p",null,"\u76f8\u5f53\u4e8e Haskell \u4e2d\u7684 List Filter:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];\nconst filterResult = numbers.filter((item, index, array) => item > 2);\nconsole.log(filterResult); // 3,4,5,4,3\n")),(0,l.kt)("h4",{id:"array-boolean-filter"},"Array Boolean Filter"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Array.every(filer)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Array.some(filer)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];\nconst everyResult = numbers.every((item, index, array) => item > 2);\nconst someResult = numbers.some((item, index, array) => item > 2);\nconsole.log(everyResult); // false\nconsole.log(someResult); // true\n")),(0,l.kt)("h4",{id:"array-map"},"Array Map"),(0,l.kt)("p",null,"\u76f8\u5f53\u4e8e Haskell \u4e2d\u7684 List Map:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"[].map(item => item + 1); // map over\n")),(0,l.kt)("h4",{id:"array-flat"},"Array Flat"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"[2, [2, 2]] => [2, 2, 2]")),(0,l.kt)("h4",{id:"array-flatmap"},"Array FlatMap"),(0,l.kt)("p",null,"map + flat."),(0,l.kt)("h4",{id:"array-reduce"},"Array Reduce"),(0,l.kt)("p",null,"\u76f8\u5f53\u4e8e Haskell \u4e2d\u7684 fold:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"[].reduce(\n  (previous, current, currentIndex, arr) => current + previous,\n  initial\n); // fold function\n")),(0,l.kt)("h4",{id:"array-traversal"},"Array Traversal"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"array.forEach(val => {}); // \u904d\u5386\u6570\u7ec4\u6240\u6709\u5143\u7d20.\n")),(0,l.kt)("h4",{id:"array-sort"},"Array Sort"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"toExchange"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"return 1"),": a, b \u4ea4\u6362\u4f4d\u7f6e."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"return -1"),": a, b \u4e0d\u4ea4\u6362\u4f4d\u7f6e.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"arr.sort(toExchange);\nstrings.sort((a, b) => a.localeCompare(b));\nstrings.sort((a, b) => new Intl.Collator('en').compare(a, b));\n")),(0,l.kt)("h4",{id:"array-reverse"},"Array Reverse"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"[].reverse();\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Tips\n// \u53cd\u8f6c\u5b57\u7b26\u4e32\nconst reverseStr = normalizedStr.split('').reverse().join('');\n")),(0,l.kt)("h4",{id:"array-spread"},"Array Spread"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Shallow Clone."),(0,l.kt)("li",{parentName:"ul"},"Iterable Consumer.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"arr2.push(...arr1);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = { x: 1, y: 2, z: 3 };\n\nobj[Symbol.iterator] = function* () {\n  yield 1;\n  yield 2;\n  yield 3;\n};\n\nconst array = [...obj]; // print [1, 2, 3]\n")),(0,l.kt)("h4",{id:"array-deep-clone"},"Array Deep Clone"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const nestedArray = [1, [2], 3];\nconst arrayCopy = JSON.parse(JSON.stringify(nestedArray));\n\n// Make some changes\narrayCopy[0] = '1'; // change shallow element\narrayCopy[1][0] = '3'; // change nested element\nconsole.log(arrayCopy); // [ '1', [ '3' ], 3 ]\n\n// Good: Nested array NOT affected\nconsole.log(nestedArray); //  1, [ 2 ], 3 ]\n")),(0,l.kt)("h4",{id:"typed-array"},"Typed Array"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://exploringjs.com/es6/ch_typed-arrays.html"},(0,l.kt)("inlineCode",{parentName:"a"},"Typed Array")),"\n\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"ArrayBuffer")," (\u7528\u4e8e Web GL \u9ad8\u6548\u7387\u5185\u5b58\u64cd\u4f5c) \u5176\u4e2d\u4e00\u79cd\u89c6\u56fe:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"File."),(0,l.kt)("li",{parentName:"ul"},"XMLHttpRequest."),(0,l.kt)("li",{parentName:"ul"},"Fetch."),(0,l.kt)("li",{parentName:"ul"},"Web Worker."),(0,l.kt)("li",{parentName:"ul"},"WebSocket."),(0,l.kt)("li",{parentName:"ul"},"Canvas."),(0,l.kt)("li",{parentName:"ul"},"WebGL."),(0,l.kt)("li",{parentName:"ul"},"Web Audio.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5e94\u8be5\u8fd4\u56de\u7684\u6570\u7ec4\u7c7b\u578b\n// \u5176\u4f59\u53c2\u6570\u662f\u5e94\u8be5\u62fc\u63a5\u5728\u4e00\u8d77\u7684\u5b9a\u578b\u6570\u7ec4\nfunction typedArrayConcat(TypedArrayConstructor, ...typedArrays) {\n  // \u8ba1\u7b97\u6240\u6709\u6570\u7ec4\u4e2d\u5305\u542b\u7684\u5143\u7d20\u603b\u6570\n  const numElements = typedArrays.reduce((x, y) => (x.length || x) + y.length);\n  // \u6309\u7167\u63d0\u4f9b\u7684\u7c7b\u578b\u521b\u5efa\u4e00\u4e2a\u6570\u7ec4, \u4e3a\u6240\u6709\u5143\u7d20\u7559\u51fa\u7a7a\u95f4\n  const resultArray = new TypedArrayConstructor(numElements);\n  // \u4f9d\u6b21\u8f6c\u79fb\u6570\u7ec4\n  let currentOffset = 0;\n  typedArrays.forEach(x => {\n    resultArray.set(x, currentOffset);\n    currentOffset += x.length;\n  });\n  return resultArray;\n}\n\nconst concatArray = typedArrayConcat(\n  Int32Array,\n  Int8Array.of(1, 2, 3),\n  Int16Array.of(4, 5, 6),\n  Float32Array.of(7, 8, 9)\n);\n\nconsole.log(concatArray); // [1, 2, 3, 4, 5, 6, 7, 8, 9]\nconsole.log(concatArray instanceof Int32Array); // true\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const view = new Int16Array([25, 50]);\nconsole.log(view instanceof Int16Array); // true\nconsole.log(view instanceof Array); // false\nconsole.log(Array.isArray(view)); // false\n")),(0,l.kt)("h3",{id:"map"},"Map"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"size"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"has()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"get()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"set()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"delete()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"clear()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"keys()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"values()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"entries()"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const map = new Map([\n  // You define a map via an array of 2-element arrays. The first\n  // element of each nested array is the key, and the 2nd is the value\n  ['name', 'Jean-Luc Picard'],\n  ['age', 59],\n  ['rank', 'Captain'],\n]);\n\n// To get the value associated with a given `key` in a map, you\n// need to call `map.get(key)`. Using `map.key` will **not** work.\nmap.get('name'); // 'Jean-Luc Picard'\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const map = new Map([]);\n\n// eslint-disable-next-line no-new-wrappers\nconst n1 = new Number(5);\n// eslint-disable-next-line no-new-wrappers\nconst n2 = new Number(5);\n\nmap.set(n1, 'One');\nmap.set(n2, 'Two');\n\n// `n1` and `n2` are objects, so `n1 !== n2`. That means the map has\n// separate keys for `n1` and `n2`.\nmap.get(n1); // 'One'\nmap.get(n2); // 'Two'\nmap.get(5); // undefined\n\n// If you were to do this with an object, `n2` would overwrite `n1`\nconst obj = {};\nobj[n1] = 'One';\nobj[n2] = 'Two';\n\nconst two1 = obj[n1]; // 'Two'\nconst two2 = obj[5]; // 'Two'\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const objectClone = new Map(Object.entries(object));\nconst arrayClone = new Map(Array.from(map.entries));\nconst map = new Map([\n  ['name', 'Jean-Luc Picard'],\n  ['age', 59],\n  ['rank', 'Captain'],\n]);\n\n// The `for/of` loop can loop through iterators\nfor (const key of map.keys()) {\n  console.log(key); // 'name', 'age', 'rank'\n}\n\nfor (const value of map.values()) {\n  console.log(value); // 'Jean-Luc Picard', 59, 'Captain'\n}\n\nfor (const [key, value] of map.entries()) {\n  console.log(key); // 'name', 'age', 'rank'\n  console.log(value); // 'Jean-Luc Picard', 59, 'Captain'\n}\n")),(0,l.kt)("h3",{id:"set"},"Set"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"size"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"has()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"add()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"delete()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"clear()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"keys()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"values()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"entries()"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class XSet extends Set {\n  union(...sets) {\n    return XSet.union(this, ...sets);\n  }\n\n  intersection(...sets) {\n    return XSet.intersection(this, ...sets);\n  }\n\n  difference(set) {\n    return XSet.difference(this, set);\n  }\n\n  symmetricDifference(set) {\n    return XSet.symmetricDifference(this, set);\n  }\n\n  cartesianProduct(set) {\n    return XSet.cartesianProduct(this, set);\n  }\n\n  powerSet() {\n    return XSet.powerSet(this);\n  }\n\n  // \u8fd4\u56de\u4e24\u4e2a\u6216\u66f4\u591a\u96c6\u5408\u7684\u5e76\u96c6\n  // new Set([...setA, ...setB]);\n  static union(a, ...bSets) {\n    const unionSet = new XSet(a);\n\n    for (const b of bSets) {\n      for (const bValue of b) {\n        unionSet.add(bValue);\n      }\n    }\n\n    return unionSet;\n  }\n\n  // \u8fd4\u56de\u4e24\u4e2a\u6216\u66f4\u591a\u96c6\u5408\u7684\u4ea4\u96c6\n  // new Set([...setA].filter(x => setB.has(x)))\n  static intersection(a, ...bSets) {\n    const intersectionSet = new XSet(a);\n\n    for (const aValue of intersectionSet) {\n      for (const b of bSets) {\n        if (!b.has(aValue)) {\n          intersectionSet.delete(aValue);\n        }\n      }\n    }\n\n    return intersectionSet;\n  }\n\n  // \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408\u7684\u5dee\u96c6\n  // new Set([...setA].filter(x => !setB.has(x)))\n  static difference(a, b) {\n    const differenceSet = new XSet(a);\n\n    for (const bValue of b) {\n      if (a.has(bValue)) {\n        differenceSet.delete(bValue);\n      }\n    }\n\n    return differenceSet;\n  }\n\n  // \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408\u7684\u5bf9\u79f0\u5dee\u96c6\n  static symmetricDifference(a, b) {\n    // \u6309\u7167\u5b9a\u4e49, \u5bf9\u79f0\u5dee\u96c6\u53ef\u4ee5\u8868\u8fbe\u4e3a:\n    return a.union(b).difference(a.intersection(b));\n  }\n\n  // \u8fd4\u56de\u4e24\u4e2a\u96c6\u5408 (\u6570\u7ec4\u5bf9\u5f62\u5f0f) \u7684\u7b1b\u5361\u513f\u79ef\n  // \u5fc5\u987b\u8fd4\u56de\u6570\u7ec4\u96c6\u5408, \u56e0\u4e3a\u7b1b\u5361\u513f\u79ef\u53ef\u80fd\u5305\u542b\u76f8\u540c\u503c\u7684\u5bf9\n  static cartesianProduct(a, b) {\n    const cartesianProductSet = new XSet();\n\n    for (const aValue of a) {\n      for (const bValue of b) {\n        cartesianProductSet.add([aValue, bValue]);\n      }\n    }\n\n    return cartesianProductSet;\n  }\n\n  // \u8fd4\u56de\u4e00\u4e2a\u96c6\u5408\u7684\u5e42\u96c6\n  static powerSet(a) {\n    const powerSet = new XSet().add(new XSet());\n\n    for (const aValue of a) {\n      for (const set of new XSet(powerSet)) {\n        powerSet.add(new XSet(set).add(aValue));\n      }\n    }\n\n    return powerSet;\n  }\n}\n")),(0,l.kt)("h3",{id:"weakmap-and-weakset"},"WeakMap and WeakSet"),(0,l.kt)("p",null,"WeakMap \u7ed3\u6784\u4e0e Map \u7ed3\u6784\u57fa\u672c\u7c7b\u4f3c,\n\u552f\u4e00\u7684\u533a\u522b\u5c31\u662f WeakMap \u53ea\u63a5\u53d7",(0,l.kt)("strong",{parentName:"p"},"\u975e null \u5bf9\u8c61"),"\u4f5c\u4e3a\u952e\u540d:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5f31\u952e: \u952e\u540d\u6784\u5efa\u7684\u5f15\u7528",(0,l.kt)("strong",{parentName:"li"},"\u65e0\u6cd5\u963b\u6b62\u5bf9\u8c61\u6267\u884c\u5783\u573e\u56de\u6536"),"."),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u53ef\u8fed\u4ee3\u952e: \u952e/\u503c\u968f\u65f6\u53ef\u80fd\u88ab\u5783\u573e\u56de\u6536, \u65e0\u9700\u63d0\u4f9b\u8fed\u4ee3\u80fd\u529b, \u65e0 ",(0,l.kt)("inlineCode",{parentName:"li"},"clear()")," \u65b9\u6cd5.")),(0,l.kt)("p",null,"\u5b83\u7684\u952e\u6240\u5bf9\u5e94\u7684\u5bf9\u8c61\u53ef\u80fd\u4f1a\u5728\u5c06\u6765\u6d88\u5931.\n\u4e00\u4e2a\u5bf9\u5e94 DOM \u5143\u7d20\u7684 WeakMap \u7ed3\u6784,\n\u5f53\u67d0\u4e2a DOM \u5143\u7d20\u88ab\u6e05\u9664,\n\u5176\u6240\u5bf9\u5e94\u7684 WeakMap \u8bb0\u5f55\u5c31\u4f1a\u81ea\u52a8\u88ab\u79fb\u9664."),(0,l.kt)("p",null,"\u6709\u65f6\u5019\u6211\u4eec\u4f1a\u628a\u5bf9\u8c61\u4f5c\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u7684\u952e\u7528\u6765\u5b58\u653e\u5c5e\u6027\u503c,\n\u666e\u901a\u96c6\u5408\u7c7b\u578b\u6bd4\u5982\u7b80\u5355\u5bf9\u8c61 (Object/Map/Set) \u4f1a\u963b\u6b62\u5783\u573e\u56de\u6536\u5668\u5bf9\u8fd9\u4e9b\u4f5c\u4e3a\u5c5e\u6027\u952e\u5b58\u5728\u7684\u5bf9\u8c61\u7684\u56de\u6536,\n\u6709\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u7684\u5371\u9669,\nWeakMap/WeakSet \u5219\u66f4\u52a0",(0,l.kt)("strong",{parentName:"p"},"\u5185\u5b58\u5b89\u5168"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Caching computed results."),(0,l.kt)("li",{parentName:"ul"},"Managing listeners."),(0,l.kt)("li",{parentName:"ul"},"Keeping private data.")),(0,l.kt)("h3",{id:"date"},"Date"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://css-tricks.com/everything-you-need-to-know-about-date-in-javascript"},"Definitive Guide"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const now = new Date();\nnow.getFullYear(); // 1-n\nnow.getMonth(); // Warn: 0-11\nnow.getDate(); // 1-n\nnow.getDay(); // Warn: 0-6\nnow.toString();\nnow.toDateString();\nnow.toTimeString();\nnow.toUTCString();\nnow.toLocaleString();\nnow.toLocaleDateString();\nnow.toLocaleTimeString();\n\nconst daysOfMonth = (year, month) => {\n  // `0` for last month of next month\n  return new Date(year, month + 1, 0).getDate();\n};\n\nconst prevYear = year => {\n  return new Date(year - 1, 0).getFullYear();\n};\n\nconst nextYear = year => {\n  return new Date(year + 1, 0).getFullYear();\n};\n\nconst prevMonth = (year, month) => {\n  return new Date(year, month - 1).getMonth();\n};\n\nconst nextMonth = (year, month) => {\n  return new Date(year, month + 1).getMonth();\n};\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const getDateItemList = (year, month) => {\n  const days = daysOfMonth(year, month);\n  const currentDateItemList = [...Array(days).keys()].map(index => {\n    return DateItem(year, month, 1 + index);\n  });\n\n  const firstDayItem = DateItem(year, month, 1);\n  const firstDayWeekday = firstDayItem.day;\n  const lastMonthDays = daysOfMonth(year, month - 1);\n  const prefixDays = firstDayWeekday === 0 ? 7 : firstDayWeekday;\n  const prefixFirstDay = lastMonthDays - prefixDays + 1;\n  const prefixYear = prevYear(year);\n  const prefixMonth = prevMonth(year, month);\n  const prefixDateItemList = [...Array(prefixDays).keys()].map(index => {\n    return DateItem(prefixYear, prefixMonth, prefixFirstDay + index);\n  });\n\n  const lastDayItem = DateItem(year, month, days);\n  const lastDayWeekday = lastDayItem.day;\n  const suffixDays = lastDayWeekday === 6 ? 7 : 6 - lastDayWeekday;\n  const suffixYear = nextYear(year);\n  const suffixMonth = nextMonth(year, month);\n  const suffixDateItemList = [...Array(suffixDays).keys()].map(index => {\n    return DateItem(suffixYear, suffixMonth, 1 + index);\n  });\n\n  const dateItemList = [\n    ...prefixDateItemList,\n    ...currentDateItemList,\n    ...suffixDateItemList,\n  ];\n\n  return dateItemList;\n};\n")),(0,l.kt)("h2",{id:"variable"},"Variable"),(0,l.kt)("h3",{id:"variable-hoisting"},"Variable Hoisting"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e00\u65b9\u9762\u89c4\u5b9a, ",(0,l.kt)("inlineCode",{parentName:"li"},"var"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"function")," \u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf,\n\u4f9d\u65e7\u662f\u5168\u5c40\u5bf9\u8c61\u7684\u5c5e\u6027, \u610f\u5473\u7740\u4f1a",(0,l.kt)("inlineCode",{parentName:"li"},"Hoisting"),"."),(0,l.kt)("li",{parentName:"ul"},"\u53e6\u4e00\u65b9\u9762\u89c4\u5b9a, ",(0,l.kt)("inlineCode",{parentName:"li"},"let"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"const"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"class")," \u58f0\u660e\u7684\u5168\u5c40\u53d8\u91cf,\n\u4e0d\u5c5e\u4e8e\u5168\u5c40\u5bf9\u8c61\u7684\u5c5e\u6027, \u610f\u5473\u7740\u4e0d\u4f1a",(0,l.kt)("inlineCode",{parentName:"li"},"Hoisting"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"var")," \u53ea\u6709\u51fd\u6570\u4f5c\u7528\u57df, ",(0,l.kt)("inlineCode",{parentName:"li"},"let"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"const")," \u62e5\u6709\u5757\u7ea7\u4f5c\u7528\u57df."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"var")," \u8868\u8fbe\u5f0f\u548c ",(0,l.kt)("inlineCode",{parentName:"li"},"function")," \u58f0\u660e\u90fd\u5c06\u4f1a\u88ab\u63d0\u5347\u5230\u5f53\u524d\u4f5c\u7528\u57df (",(0,l.kt)("strong",{parentName:"li"},"\u5168\u5c40\u4f5c\u7528\u57df/\u51fd\u6570\u4f5c\u7528\u57df"),") \u9876\u90e8,\n\u5176\u4f59\u8868\u8fbe\u5f0f\u987a\u5e8f\u4e0d\u53d8.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null},"Hoisting"),(0,l.kt)("th",{parentName:"tr",align:null},"Scope"),(0,l.kt)("th",{parentName:"tr",align:null},"Creates Global Properties"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"var")),(0,l.kt)("td",{parentName:"tr",align:null},"Declaration"),(0,l.kt)("td",{parentName:"tr",align:null},"Function"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"let")),(0,l.kt)("td",{parentName:"tr",align:null},"Temporal dead zone"),(0,l.kt)("td",{parentName:"tr",align:null},"Block"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"const")),(0,l.kt)("td",{parentName:"tr",align:null},"Temporal dead zone"),(0,l.kt)("td",{parentName:"tr",align:null},"Block"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"class")),(0,l.kt)("td",{parentName:"tr",align:null},"Temporal dead zone"),(0,l.kt)("td",{parentName:"tr",align:null},"Block"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"function")),(0,l.kt)("td",{parentName:"tr",align:null},"Complete"),(0,l.kt)("td",{parentName:"tr",align:null},"Block"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"import")),(0,l.kt)("td",{parentName:"tr",align:null},"Complete"),(0,l.kt)("td",{parentName:"tr",align:null},"Module-global"),(0,l.kt)("td",{parentName:"tr",align:null},"No")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u6211\u4eec\u77e5\u9053\u8fd9\u4e2a\u884c\u4e0d\u901a (\u5047\u8bbe\u6ca1\u6709\u672a\u5b9a\u4e49\u7684\u5168\u5c40\u53d8\u91cf)\nfunction example() {\n  console.log(notDefined); // => throws a ReferenceError\n}\n\n// \u5728\u5f15\u7528\u53d8\u91cf\u540e\u521b\u5efa\u53d8\u91cf\u58f0\u660e\u5c06\u4f1a\u56e0\u53d8\u91cf\u63d0\u5347\u800c\u8d77\u4f5c\u7528.\n// \u6ce8\u610f: \u771f\u6b63\u7684\u503c `true` \u4e0d\u4f1a\u88ab\u63d0\u5347.\nfunction example() {\n  console.log(declaredButNotAssigned); // => undefined\n  var declaredButNotAssigned = true;\n}\n\n// \u89e3\u91ca\u5668\u5c06\u53d8\u91cf\u63d0\u5347\u5230\u51fd\u6570\u7684\u9876\u90e8\n// \u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0a\u8fb9\u7684\u4f8b\u5b50\u91cd\u5199\u4e3a:\nfunction example() {\n  let declaredButNotAssigned;\n  console.log(declaredButNotAssigned); // => undefined\n  declaredButNotAssigned = true;\n}\n\n// \u4f7f\u7528 const \u548c let\nfunction example() {\n  console.log(declaredButNotAssigned); // => throws a ReferenceError\n  console.log(typeof declaredButNotAssigned); // => throws a ReferenceError\n  const declaredButNotAssigned = true;\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function example() {\n  console.log(named); // => undefined\n\n  named(); // => TypeError named is not a function\n\n  superPower(); // => ReferenceError superPower is not defined\n\n  var named = function superPower() {\n    console.log('Flying');\n  };\n}\n")),(0,l.kt)("h3",{id:"let-variable"},"Let Variable"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5757\u7ea7\u4f5c\u7528\u57df\u5185\u5b9a\u4e49\u7684\u53d8\u91cf/\u51fd\u6570, \u5728\u5757\u7ea7\u4f5c\u7528\u57df\u5916 ReferenceError."),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347, \u5bfc\u81f4\u6682\u65f6\u6027\u6b7b\u533a (Temporal Dead Zone)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"let")," variable in ",(0,l.kt)("inlineCode",{parentName:"li"},"for-loop")," closure,\nevery closure for each loop\nbinds the block-scoped variable.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const a = 1;\n\nb = 3; // temporal dead zone: throw reference error\n\nlet b = 2;\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"let")," \u53d8\u91cf\u62e5\u6709\u5757\u7ea7\u4f5c\u7528\u57df (\u6bcf\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"setTimeout")," \u5f15\u7528\u7684\u90fd\u662f\u4e0d\u540c\u7684\u53d8\u91cf\u5b9e\u4f8b):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// for (var i = 0; i < 5; ++i) {\n//   setTimeout(() => console.log(i), 0);\n// }\n// Output 5, 5, 5, 5, 5.\n// \u6240\u6709\u7684 i \u90fd\u662f\u540c\u4e00\u4e2a\u53d8\u91cf, \u8f93\u51fa\u540c\u4e00\u4e2a\u6700\u7ec8\u503c.\n\nfor (let i = 0; i < 5; ++i) {\n  setTimeout(() => console.log(i), 0);\n}\n// Output: 0, 1, 2, 3, 4.\n// JavaScript \u5f15\u64ce\u4f1a\u4e3a\u6bcf\u4e2a\u8fed\u4ee3\u5faa\u73af\u58f0\u660e\u4e00\u4e2a\u65b0\u7684\u8fed\u4ee3\u53d8\u91cf.\n// \u6bcf\u4e2a setTimeout \u5f15\u7528\u7684\u90fd\u662f\u4e0d\u540c\u7684\u53d8\u91cf\u5b9e\u4f8b.\n")),(0,l.kt)("h3",{id:"const-variable"},"Const Variable"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"const \u4e00\u65e6\u58f0\u660e\u53d8\u91cf, \u5c31\u5fc5\u987b\u7acb\u5373\u521d\u59cb\u5316, \u4e0d\u80fd\u7559\u5230\u4ee5\u540e\u8d4b\u503c."),(0,l.kt)("li",{parentName:"ul"},"\u5f15\u7528\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"li"},"Reference"),"\u53d8\u91cf\u65f6, \u53ea\u8868\u793a\u6b64\u53d8\u91cf\u5730\u5740\u4e0d\u53ef\u53d8, \u4f46\u6240\u5f15\u7528\u53d8\u91cf\u7684\u503c/\u5c5e\u6027\u53ef\u53d8\n(",(0,l.kt)("inlineCode",{parentName:"li"},"xxx *const"),", \u5373",(0,l.kt)("inlineCode",{parentName:"li"},"const"),"\u6307\u9488, \u6307\u5411\u4e00\u4e2a\u53d8\u91cf)."),(0,l.kt)("li",{parentName:"ul"},"\u5757\u7ea7\u4f5c\u7528\u57df."),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347, \u5bfc\u81f4\u6682\u65f6\u6027\u6b7b\u533a (Temporal Dead Zone).")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const f = () => g();\nconst g = () => 123;\n\n// We call f() after g() was declared:\nassert.equal(f(), 123);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"funcDecl();\n\nconst MY_STR = 'abc';\nfunction funcDecl() {\n  assert.throws(() => MY_STR, ReferenceError);\n}\n")),(0,l.kt)("h3",{id:"type-detection"},"Type Detection"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function typeOf(o) {\n  const _toString = Object.prototype.toString;\n  const _type = {\n    undefined: 'undefined',\n    number: 'number',\n    boolean: 'boolean',\n    string: 'string',\n    '[object Function]': 'function',\n    '[object Array]': 'array',\n    '[object Date]': 'date',\n    '[object RegExp]': 'regexp',\n    '[object Error]': 'error',\n    '[object JSON]': 'json',\n  };\n\n  return _type[typeof o] || _type[_toString.call(o)] || (o ? 'object' : 'null');\n}\n")),(0,l.kt)("h4",{id:"null-detection"},"Null Detection"),(0,l.kt)("p",null,"\u4e0d\u5e94\u4f7f\u7528 typeof \u68c0\u6d4b null, \u5e94\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"==="),"/",(0,l.kt)("inlineCode",{parentName:"p"},"!=="),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/*\n * ECMAScript \u6807\u51c6\u7684\u91cd\u5927 bug\n */\nconst objectType = typeof null; // => object\n")),(0,l.kt)("h4",{id:"property-detection"},"Property Detection"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7531\u4e8e\u5c5e\u6027\u503c\u53ef\u80fd\u4e3a\u96f6\u503c\u503c\u8868\u8fbe\u5f0f, \u4e0d\u5e94\u4f7f\u7528\u96f6\u503c\u8868\u8fbe\u5f0f(",(0,l.kt)("inlineCode",{parentName:"li"},"0"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"NaN"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"''"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"null"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),") \u68c0\u6d4b\u5c5e\u6027\u503c."),(0,l.kt)("li",{parentName:"ul"},"\u5e94\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"for in")," \u8fdb\u884c\u5c5e\u6027\u68c0\u6d4b.")),(0,l.kt)("h4",{id:"custom-object-detection"},"Custom Object Detection"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"object instanceof Constructor"),":\n\u67e5\u627e\u539f\u578b\u94fe ",(0,l.kt)("inlineCode",{parentName:"li"},"\u6784\u9020\u5668"),(0,l.kt)("strong",{parentName:"li"},"\u539f\u578b\u5bf9\u8c61")," (",(0,l.kt)("inlineCode",{parentName:"li"},"Constructor.prototype"),")."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"prop in object"),": \u67e5\u627e\u539f\u578b\u94fe\u5c5e\u6027\u540d.")),(0,l.kt)("h3",{id:"type-conversion"},"Type Conversion"),(0,l.kt)("h4",{id:"type-conversion-context"},"Type Conversion Context"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b57\u7b26\u4e32 -> \u6574\u6570: ",(0,l.kt)("inlineCode",{parentName:"li"},"+string"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"Number(string)"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"parseInt(string, arg1)"),"."),(0,l.kt)("li",{parentName:"ul"},"any -> ",(0,l.kt)("inlineCode",{parentName:"li"},"bool"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"!!any"),"."),(0,l.kt)("li",{parentName:"ul"},"const -> ",(0,l.kt)("inlineCode",{parentName:"li"},"object"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"(const)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"parseInt(str, base)"),":",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9047\u5230\u975e\u6570\u5b57\u5b57\u7b26\u7acb\u5373\u505c\u6b62\u8fd0\u884c, \u8fd4\u56de\u5f53\u524d\u8f6c\u5316\u503c."),(0,l.kt)("li",{parentName:"ul"},"\u5c06 0 \u5f00\u5934\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u516b\u8fdb\u5236\u6570, 0x \u5f00\u5934\u5b57\u7b26\u4e32\u89e3\u6790\u4e3a\u5341\u516d\u8fdb\u5236\u6570."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"boolean"),"\u5728",(0,l.kt)("inlineCode",{parentName:"li"},"\u6570\u503c\u8fd0\u7b97"),"\u73af\u5883\u4e2d true => 1, false => 0."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u6570\u7ec4"),"\u5728",(0,l.kt)("inlineCode",{parentName:"li"},"\u6570\u503c\u8fd0\u7b97"),"\u73af\u5883\u4e2d\u8f6c\u5316\u4e3a 0 (\u7a7a\u6570\u7ec4)/num (\u5355\u4e00\u5143\u7d20\u6570\u7ec4)/NaN (\u591a\u5143\u7d20\u6570\u7ec4/NaN \u6570\u7ec4)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u5bf9\u8c61"),"\u5728",(0,l.kt)("inlineCode",{parentName:"li"},"\u903b\u8f91\u8fd0\u7b97"),"\u73af\u5883\u4e2d\u8f6c\u5316\u4e3a true , \u5305\u62ec false \u7684\u5c01\u88c5\u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u5bf9\u8c61"),"\u5728",(0,l.kt)("inlineCode",{parentName:"li"},"\u6570\u503c\u8fd0\u7b97"),"\u73af\u5883\u4e2d\u5148\u5229\u7528 valueOf(object), \u518d\u5229\u7528 toString() \u8f6c\u5316\u4e3a\u6570\u5b57, \u82e5\u8f6c\u5316\u5931\u8d25, \u5219\u8fd4\u56de NaN."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u5bf9\u8c61"),"\u4e0e",(0,l.kt)("inlineCode",{parentName:"li"},"\u6570\u503c"),"\u52a0\u53f7\u8fd0\u7b97: \u5148\u6570\u503c\u52a0, (",(0,l.kt)("strong",{parentName:"li"},"\u5931\u8d25\u540e"),")\u518d\u5b57\u7b26\u4e32\u52a0.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// good\nconst totalScore = String(this.reviewScore);\n\n// good\nconst val = Number(inputValue);\n\n// good\nconst val = parseInt(inputValue, 10);\n\n// good\nconst hasAge = Boolean(age);\n\n// best\nconst hasAge = !!age;\n")),(0,l.kt)("h4",{id:"type-conversion-algorithms"},"Type Conversion Algorithms"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function ToString(argument) {\n  if (argument === undefined) {\n    return 'undefined';\n  } else if (argument === null) {\n    return 'null';\n  } else if (argument === true) {\n    return 'true';\n  } else if (argument === false) {\n    return 'false';\n  } else if (TypeOf(argument) === 'number') {\n    return Number.toString(argument);\n  } else if (TypeOf(argument) === 'string') {\n    return argument;\n  } else if (TypeOf(argument) === 'symbol') {\n    return Symbol.toString(argument);\n  } else if (TypeOf(argument) === 'bigint') {\n    return BigInt.toString(argument);\n  } else {\n    // argument is an object\n    const primValue = ToPrimitive(argument, 'string');\n    return ToString(primValue);\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function ToPropertyKey(argument) {\n  const key = ToPrimitive(argument, 'string'); // (A)\n\n  if (TypeOf(key) === 'symbol') {\n    return key;\n  }\n\n  return ToString(key);\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function ToNumeric(value) {\n  const primValue = ToPrimitive(value, 'number');\n\n  if (TypeOf(primValue) === 'bigint') {\n    return primValue;\n  }\n\n  return ToNumber(primValue);\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function ToNumber(argument) {\n  if (argument === undefined) {\n    return NaN;\n  } else if (argument === null) {\n    return +0;\n  } else if (argument === true) {\n    return 1;\n  } else if (argument === false) {\n    return +0;\n  } else if (TypeOf(argument) === 'number') {\n    return argument;\n  } else if (TypeOf(argument) === 'string') {\n    return parseTheString(argument); // not shown here\n  } else if (TypeOf(argument) === 'symbol') {\n    throw new TypeError('Failed!');\n  } else if (TypeOf(argument) === 'bigint') {\n    throw new TypeError('Failed!');\n  } else {\n    // argument is an object\n    const primValue = ToPrimitive(argument, 'number');\n    return ToNumber(primValue);\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * @param hint Which type is preferred for the result string, number etc.\n */\nfunction ToPrimitive(\n  input: any,\n  hint: 'string' | 'number' | 'default' = 'default'\n) {\n  if (TypeOf(input) === 'object') {\n    const exoticToPrim = input[Symbol.toPrimitive]; // (A)\n\n    if (exoticToPrim !== undefined) {\n      const result = exoticToPrim.call(input, hint);\n\n      if (TypeOf(result) !== 'object') {\n        return result;\n      }\n\n      throw new TypeError('[Symbol.toPrimitive]() failed!');\n    }\n\n    if (hint === 'default') {\n      hint = 'number';\n    }\n\n    return OrdinaryToPrimitive(input, hint);\n  } else {\n    // input is already primitive\n    return input;\n  }\n}\n\nfunction OrdinaryToPrimitive(O: object, hint: 'string' | 'number') {\n  const methodNames =\n    hint === 'string' ? ['toString', 'valueOf'] : ['valueOf', 'toString'];\n\n  for (const name of methodNames) {\n    const method = O[name];\n\n    if (IsCallable(method)) {\n      const result = method.call(O);\n\n      if (TypeOf(result) !== 'object') {\n        return result;\n      }\n    }\n  }\n\n  throw new TypeError('Conversion failed!');\n}\n")),(0,l.kt)("h2",{id:"operators"},"Operators"),(0,l.kt)("h3",{id:"loose-comparison"},"Loose Comparison"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"==")," \u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"!="),", ",(0,l.kt)("a",{parentName:"p",href:"https://felix-kling.de/js-loose-comparison"},"JS Loose Comparison"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Type conversion first, then comparison."),(0,l.kt)("li",{parentName:"ul"},"Return comparison between ",(0,l.kt)("inlineCode",{parentName:"li"},"ToNumber(x)")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"ToPrimitive(y)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/** Loose equality (==) */\nfunction abstractEqualityComparison(x, y) {\n  if (TypeOf(x) === TypeOf(y)) {\n    // Use strict equality (===)\n    return strictEqualityComparison(x, y);\n  }\n\n  // Comparing null with undefined\n  if (x === null && y === undefined) {\n    return true;\n  }\n  if (x === undefined && y === null) {\n    return true;\n  }\n\n  // Comparing a number and a string\n  if (TypeOf(x) === 'number' && TypeOf(y) === 'string') {\n    return abstractEqualityComparison(x, Number(y));\n  }\n  if (TypeOf(x) === 'string' && TypeOf(y) === 'number') {\n    return abstractEqualityComparison(Number(x), y);\n  }\n\n  // Comparing a bigint and a string\n  if (TypeOf(x) === 'bigint' && TypeOf(y) === 'string') {\n    const n = StringToBigInt(y);\n\n    if (Number.isNaN(n)) {\n      return false;\n    }\n\n    return abstractEqualityComparison(x, n);\n  }\n  if (TypeOf(x) === 'string' && TypeOf(y) === 'bigint') {\n    return abstractEqualityComparison(y, x);\n  }\n\n  // Comparing a boolean with a non-boolean\n  if (TypeOf(x) === 'boolean') {\n    return abstractEqualityComparison(Number(x), y);\n  }\n  if (TypeOf(y) === 'boolean') {\n    return abstractEqualityComparison(x, Number(y));\n  }\n\n  // Comparing an object with a primitive\n  // (other than undefined, null, a boolean)\n  if (\n    ['string', 'number', 'bigint', 'symbol'].includes(TypeOf(x)) &&\n    TypeOf(y) === 'object'\n  ) {\n    return abstractEqualityComparison(x, ToPrimitive(y));\n  }\n  if (\n    TypeOf(x) === 'object' &&\n    ['string', 'number', 'bigint', 'symbol'].includes(TypeOf(y))\n  ) {\n    return abstractEqualityComparison(ToPrimitive(x), y);\n  }\n\n  // Comparing a bigint with a number\n  if (\n    (TypeOf(x) === 'bigint' && TypeOf(y) === 'number') ||\n    (TypeOf(x) === 'number' && TypeOf(y) === 'bigint')\n  ) {\n    if (\n      [NaN, +Infinity, -Infinity].includes(x) ||\n      [NaN, +Infinity, -Infinity].includes(y)\n    ) {\n      return false;\n    }\n    if (isSameMathematicalValue(x, y)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  return false;\n}\n")),(0,l.kt)("h3",{id:"strict-comparison"},"Strict Comparison"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"===")," \u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"!=="),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Strings: same length, same characters in corresponding positions."),(0,l.kt)("li",{parentName:"ul"},"Numbers: numerically equal."),(0,l.kt)("li",{parentName:"ul"},"Objects: refer to same Object."),(0,l.kt)("li",{parentName:"ul"},"Positive and negative ",(0,l.kt)("inlineCode",{parentName:"li"},"0")," are equal to one another."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"NaN")," is not equal to anything, including ",(0,l.kt)("inlineCode",{parentName:"li"},"NaN"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"null")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined")," types are not equal with ",(0,l.kt)("inlineCode",{parentName:"li"},"==="),", but equal with ",(0,l.kt)("inlineCode",{parentName:"li"},"=="),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const true1 = 0 == false; // true\nconst false1 = 0 === false; // false\nconst true2 = 1 == '1'; // true\nconst false2 = 1 === '1'; // false\nconst true3 = undefined == null; // true\nconst false3 = undefined === null; // false\nconst true4 = '0' == false; // true\nconst false4 = '0' === false; // false\n// eslint-disable-next-line no-self-compare\nconst false5 = [] == []; // false, refer different objects in memory\n// eslint-disable-next-line no-self-compare\nconst false6 = [] === []; // false, refer different objects in memory\n// eslint-disable-next-line no-self-compare\nconst false7 = {} == {}; // false, refer different objects in memory\n// eslint-disable-next-line no-self-compare\nconst false8 = {} === {}; // false, refer different objects in memory\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Object.is"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Case 1: Evaluation result is the same as using ===\nObject.is(25, 25); // true\nObject.is('foo', 'foo'); // true\nObject.is('foo', 'bar'); // false\nObject.is(null, null); // true\nObject.is(undefined, undefined); // true\nObject.is(window, window); // true\nObject.is([], []); // false\nconst foo = { a: 1 };\nconst bar = { a: 1 };\nObject.is(foo, foo); // true\nObject.is(foo, bar); // false: different reference pointers.\n\n// Case 2: Signed zero\nObject.is(0, -0); // false\nObject.is(+0, -0); // false\nObject.is(-0, -0); // true\nObject.is(0n, -0n); // true\n\n// Case 3: NaN\nObject.is(NaN, 0 / 0); // true\nObject.is(NaN, Number.NaN); // true\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"if (!Object.is) {\n  Object.defineProperty(Object, 'is', {\n    value: (x, y) => {\n      // SameValue algorithm\n      if (x === y) {\n        // return true if x and y are not 0, OR\n        // if x and y are both 0 of the same sign.\n        // This checks for cases 1 and 2 above.\n        return x !== 0 || 1 / x === 1 / y;\n      } else {\n        // return true if both x AND y evaluate to NaN.\n        // The only possibility for a variable to not be strictly equal to itself\n        // is when that variable evaluates to NaN (example: Number.NaN, 0/0, NaN).\n        // This checks for case 3.\n        // eslint-disable-next-line no-self-compare\n        return x !== x && y !== y;\n      }\n    },\n  });\n}\n")),(0,l.kt)("h3",{id:"conditional-expression"},"Conditional Expression"),(0,l.kt)("p",null,"\u517b\u6210\u4f7f\u7528\u5206\u53f7\u7ed3\u675f\u53e5\u5b50\u7684\u4e60\u60ef, \u9700\u5206\u884c\u663e\u793a\u7684\u8bed\u53e5\u5fc5\u987b\u786e\u4fdd\u5355\u884c\u4e0d\u4f1a\u5f62\u6210\u5b8c\u6574\u8bed\u4e49:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const i = a ? 1 : b ? 2 : c ? 3 : 4;\n")),(0,l.kt)("h3",{id:"add-operator"},"Add Operator"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"a + b"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u4e00\u4e2a\u662f\u5bf9\u8c61, \u5219\u9075\u5faa\u5bf9\u8c61\u5bf9\u539f\u59cb\u503c\u7684\u8f6c\u6362\u8fc7\u7a0b:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Date \u5bf9\u8c61\u76f4\u63a5\u8c03\u7528 toString \u5b8c\u6210\u8f6c\u6362."),(0,l.kt)("li",{parentName:"ul"},"\u5176\u4ed6\u5bf9\u8c61\u901a\u8fc7 valueOf \u8f6c\u5316,\n\u5982\u679c\u8f6c\u6362\u4e0d\u6210\u529f\u5219\u8c03\u7528 toString."))),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e24\u4e2a\u90fd\u662f\u5bf9\u8c61, \u4e24\u4e2a\u5bf9\u8c61\u90fd\u9075\u5faa\u6b65\u9aa4 1 \u8f6c\u6362\u5230\u5b57\u7b26\u4e32."),(0,l.kt)("li",{parentName:"ul"},"\u4e24\u4e2a\u6570\u5b57, \u8fdb\u884c\u7b97\u6570\u8fd0\u7b97."),(0,l.kt)("li",{parentName:"ul"},"\u4e24\u4e2a\u5b57\u7b26\u4e32, \u76f4\u63a5\u62fc\u63a5."),(0,l.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e00\u4e2a\u6570\u5b57, \u76f4\u63a5\u62fc\u63a5\u4e3a\u5b57\u7b26\u4e32.")),(0,l.kt)("h3",{id:"dot-operator"},"Dot Operator"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},".")," \u4f18\u5148\u7ea7\u9ad8\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"="),":\n",(0,l.kt)("inlineCode",{parentName:"p"},"el.data")," \u4f18\u5148\u6c42\u503c, \u5f15\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"old"),", \u6307\u5411 ",(0,l.kt)("inlineCode",{parentName:"p"},"old.data"),".\n",(0,l.kt)("inlineCode",{parentName:"p"},"5")," => ",(0,l.kt)("inlineCode",{parentName:"p"},"el"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"5")," => ",(0,l.kt)("inlineCode",{parentName:"p"},"el.data")," (",(0,l.kt)("inlineCode",{parentName:"p"},"old.data"),")."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let el = { data: 1 };\nconst old = el;\n\nel.data = el = 5;\nconsole.log(el); // 5\nconsole.log(el.data); // undefined\nconsole.log(old); // { data: 5 }\nconsole.log(old.data); // 5\n")),(0,l.kt)("h3",{id:"logical-operators"},"Logical Operators"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Optional Chaining Operator ",(0,l.kt)("inlineCode",{parentName:"li"},"?."),":\nLegible property chains that don't throw an error\nif a requested reference is missing."),(0,l.kt)("li",{parentName:"ul"},"Nullish coalescing operator ",(0,l.kt)("inlineCode",{parentName:"li"},"??"),":\nBinary operator.\nIf the value of left side expression is ",(0,l.kt)("inlineCode",{parentName:"li"},"null")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),",\nright side of the operator is evaluated."),(0,l.kt)("li",{parentName:"ul"},"Logical assignment operators: ",(0,l.kt)("inlineCode",{parentName:"li"},"&&="),", ",(0,l.kt)("inlineCode",{parentName:"li"},"||="),", ",(0,l.kt)("inlineCode",{parentName:"li"},"??="),".")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Assignment Operator"),(0,l.kt)("th",{parentName:"tr",align:null},"Equivalent To"),(0,l.kt)("th",{parentName:"tr",align:null},"Only Assigns When ",(0,l.kt)("inlineCode",{parentName:"th"},"a")))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"a \\|\\|= b")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"a \\|\\| (a = b)")),(0,l.kt)("td",{parentName:"tr",align:null},"Falsy")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"a &&= b")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"a && (a = b)")),(0,l.kt)("td",{parentName:"tr",align:null},"Truthy")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"a ??= b")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"a ?? (a = b)")),(0,l.kt)("td",{parentName:"tr",align:null},"Nullish")))),(0,l.kt)("h3",{id:"operators-reference"},"Operators Reference"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.joshwcomeau.com/operator-lookup"},"Operator Lookup"))),(0,l.kt)("h2",{id:"control-flow"},"Control Flow"),(0,l.kt)("h3",{id:"switch-case-statement"},"Switch Case Statement"),(0,l.kt)("p",null,"\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"Strategy Pattern")," \u4ee3\u66ff ",(0,l.kt)("inlineCode",{parentName:"p"},"switch"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"case")," \u8bed\u53e5:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function doAction(action) {\n  const actions = {\n    hack() {\n      return 'hack';\n    },\n\n    slash() {\n      return 'slash';\n    },\n\n    run() {\n      return 'run';\n    },\n  };\n\n  if (typeof actions[action] !== 'function') {\n    throw new TypeError('Invalid action.');\n  }\n\n  // \u95ed\u5305\u65b9\u6cd5\u96c6\n  return actions[action]();\n}\n")),(0,l.kt)("h2",{id:"object"},"Object"),(0,l.kt)("h3",{id:"oop-features"},"OOP Features"),(0,l.kt)("p",null,"\u5171\u7528\u65b9\u6cd5, \u5355\u72ec\u5c5e\u6027, \u5c01\u88c5\u7ec6\u8282:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u539f\u578b\u4ee3\u7406 (\u4eab\u5143\u6a21\u5f0f): \u5229\u7528\u4eab\u5143\u6a21\u5f0f\u5171\u4eab\u516c\u6709\u5c5e\u6027\u4e0e\u901a\u7528\u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u4f8b\u72b6\u6001 (\u539f\u578b\u514b\u9686): \u5229\u7528\u539f\u578b\u514b\u9686\u62e5\u6709\u5404\u81ea\u5c5e\u6027\u503c."),(0,l.kt)("li",{parentName:"ul"},"\u5c01\u88c5\u6027 (\u95ed\u5305\u5f0f\u7ee7\u627f): \u5229\u7528\u95ed\u5305\u65b9\u6cd5\u5b9e\u73b0\u5c5e\u6027\u79c1\u6709\u5316.")),(0,l.kt)("h3",{id:"prototype-chain"},"Prototype Chain"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"\u539f\u578b\u94fe",src:t(2100).Z,width:"520",height:"586"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u4f8b\u5316\u5bf9\u8c61\u4ec5\u6709\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"li"},"__proto__"),", \u6ca1\u6709\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"li"},"prototype"),", \u51fd\u6570\u624d\u5177\u6709\u5c5e\u6027 ",(0,l.kt)("inlineCode",{parentName:"li"},"prototype")," (\u6307\u5411\u5f15\u64ce\u4e3a\u5176\u81ea\u52a8\u521b\u5efa\u7684\u539f\u578b\u5bf9\u8c61):\n",(0,l.kt)("inlineCode",{parentName:"li"},"Instance.__proto__ === Constructor.prototype"),"."),(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u5f15\u7528\u7c7b\u578b (\u5305\u62ec\u5bf9\u8c61/\u6570\u7ec4/\u51fd\u6570/\u6784\u9020\u51fd\u6570) \u90fd\u6709\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"li"},"__proto__"),"(\u9690\u5f0f\u539f\u578b)."),(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u51fd\u6570/\u6784\u9020\u51fd\u6570\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"__proto__")," \u90fd\u6307\u5411 ",(0,l.kt)("inlineCode",{parentName:"li"},"Function.prototype"),"."),(0,l.kt)("li",{parentName:"ul"},"\u9664",(0,l.kt)("inlineCode",{parentName:"li"},"Object.prototype.__proto__"),"\u6307\u5411 null \u5916, \u5176\u4f59\u51fd\u6570/\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"__proto__")," \u90fd\u6307\u5411 ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.prototype"),"."),(0,l.kt)("li",{parentName:"ul"},"\u9664",(0,l.kt)("inlineCode",{parentName:"li"},"Object.create()"),"\u5916, \u6240\u65b0\u5efa\u5bf9\u8c61\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"__proto__")," \u6307\u5411\u6784\u9020\u8be5\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"\u539f\u578b\u5bf9\u8c61(prototype)"),"."),(0,l.kt)("li",{parentName:"ul"},"\u9664",(0,l.kt)("inlineCode",{parentName:"li"},"typeof Function.prototype")," \u4e3a 'function' \u5916, \u5176\u4f59\u51fd\u6570/\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61\u90fd\u4e3a '\u5bf9\u8c61'(",(0,l.kt)("inlineCode",{parentName:"li"},"typeof")," \u4e3a 'object')."),(0,l.kt)("li",{parentName:"ul"},"\u5148\u6709",(0,l.kt)("inlineCode",{parentName:"li"},"Object.prototype"),"(\u539f\u578b\u94fe\u9876\u7aef),\n",(0,l.kt)("inlineCode",{parentName:"li"},"Function.prototype")," \u7ee7\u627f",(0,l.kt)("inlineCode",{parentName:"li"},"Object.prototype"),"\u800c\u4ea7\u751f,\n\u6700\u540e",(0,l.kt)("inlineCode",{parentName:"li"},"Object/Function/Array/\u5176\u5b83\u6784\u9020\u51fd\u6570"),"\u7ee7\u627f",(0,l.kt)("inlineCode",{parentName:"li"},"Function.prototype"),"\u800c\u4ea7\u751f.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// True because of `Object` is `function Object()` and inherited from `Function.prototype`\n// Object has its own `prototype` property refer to `Object.prototype`\nconst truthy = Object[[proto]] === Function.prototype;\n\n// True because of `Array` is `function Array()` and inherited from `Function.prototype`\n// Array has its own `prototype` property refer to `Array.prototype`\nconst truthy = Array[[proto]] === Function.prototype;\n\n// True because of Function is `function Function()` and inherited from `Function.prototype`\n// Function has its own `prototype` property refer to `Function.prototype`\nconst truthy = Function[[proto]] === Function.prototype;\n\n// True because of Object.prototype is the top of inheritance chains (null is Object.prototype.__proto__)\n// all `object/function/array instance`.__proto__......__proto__ refer to Object.prototype\nconst truthy = Function[[proto]][[proto]] === Object.prototype;\n\n// True:\nconst truthy = Object instanceof Function;\nconst truthy = Function instanceof Object;\n")),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Prototype Chain")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.__proto__")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"Function.prototype"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Function.prototype.__proto__")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.prototype"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.prototype.__proto__")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"null"),".")))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"__proto__"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[[proto]]")," getter is ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.getPrototypeOf(object)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"[[proto]]")," setter is ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.setPrototypeOf(object, prototype)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Foo(value) {\n  this.val = value;\n}\n\n// Auto create FooPrototype\n// Foo.prototype -> FooPrototype\n// FooPrototype.constructor -> [function Foo]\n// foo.__proto__ -> FooPrototype\nconst foo = new Foo(2);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Person() {}\nconst person1 = new Person();\nconst person2 = new Person();\n\nconsole.log(person1 !== Person); // true\nconsole.log(person1 !== Person.prototype); // true\nconsole.log(Person.prototype !== Person); // true\n\n// eslint-disable-next-line no-proto\nconsole.log(person1.__proto__ === Person.prototype); // true\n// eslint-disable-next-line no-proto\nconsole.log(person1.__proto__.constructor === Person); // true\n// eslint-disable-next-line no-proto\nconsole.log(person1.__proto__ === person2.__proto__); // true\n\n// eslint-disable-next-line no-prototype-builtins\nconsole.log(Person.prototype.isPrototypeOf(person1)); // true\n// eslint-disable-next-line no-prototype-builtins\nconsole.log(Person.prototype.isPrototypeOf(person2)); // true\nconsole.log(Object.getPrototypeOf(person1) === Person.prototype); // true\n\nconsole.log(person1 instanceof Person); // true\nconsole.log(person1 instanceof Object); // true\nconsole.log(Person.prototype instanceof Object); // true\n")),(0,l.kt)("p",null,"\u4e0b\u9762\u4e94\u79cd\u64cd\u4f5c (\u65b9\u6cd5/\u5c5e\u6027/\u8fd0\u7b97\u7b26) \u53ef\u4ee5\u89e6\u53d1 JS \u5f15\u64ce\u8bfb\u53d6\u4e00\u4e2a\u5bf9\u8c61\u7684\u539f\u578b,\n\u53ef\u4ee5\u89e6\u53d1 ",(0,l.kt)("inlineCode",{parentName:"p"},"getPrototypeOf()")," \u4ee3\u7406\u65b9\u6cd5\u7684\u8fd0\u884c:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = {};\nconst p = new Proxy(obj, {\n  getPrototypeOf(target) {\n    return Array.prototype;\n  },\n});\n\nconsole.log(\n  Object.getPrototypeOf(p) === Array.prototype, // true\n  Reflect.getPrototypeOf(p) === Array.prototype, // true\n  // eslint-disable-next-line no-prototype-builtins\n  Array.prototype.isPrototypeOf(p), // true\n  // eslint-disable-next-line no-proto\n  p.__proto__ === Array.prototype, // true\n  p instanceof Array // true\n);\n")),(0,l.kt)("p",null,"Set the inherited property will ",(0,l.kt)("strong",{parentName:"p"},"create own property"),"\n(",(0,l.kt)("strong",{parentName:"p"},"overrides")," value of inherited property):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const proto = {\n  protoProp: 'a',\n};\n\nconst obj = {\n  __proto__: proto,\n  objProp: 'b',\n};\n\n// In the beginning, obj has one own property:\nassert.deepEqual(Object.keys(obj), ['objProp']);\n\nobj.protoProp = 'x';\n\n// Created a new own property:\nassert.deepEqual(Object.keys(obj), ['objProp', 'protoProp']);\n\n// The inherited property itself is unchanged:\nassert.equal(proto.protoProp, 'a');\n\n// The own property overrides the inherited property:\nassert.equal(obj.protoProp, 'x');\n")),(0,l.kt)("h3",{id:"object-conversion"},"Object Conversion"),(0,l.kt)("p",null,"\u5bf9\u8c61\u8f6c\u6362\u4e3a\u5e03\u5c14\u503c:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u76f4\u63a5\u8f6c\u6362\u4e3a true (\u5305\u88c5\u7c7b\u578b\u4e5f\u4e00\u6837), \u4e0d\u8c03\u7528 valueOf \u548c toString.")),(0,l.kt)("p",null,"\u5bf9\u8c61\u8f6c\u6362\u4e3a\u6570\u5b57:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u5bf9\u8c61\u5177\u6709 valueOf \u65b9\u6cd5 (\u8fd4\u56de\u539f\u59cb\u503c),\n\u5219\u5c06\u8be5\u539f\u59cb\u503c\u8f6c\u6362\u4e3a\u6570\u5b57 (\u8f6c\u6362\u5931\u8d25\u4f1a\u8fd4\u56de NaN), \u5e76\u8fd4\u56de\u8fd9\u4e2a\u6570\u5b57."),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u5bf9\u8c61\u5177\u6709 toString \u65b9\u6cd5 (\u8fd4\u56de\u539f\u59cb\u503c),\n\u5219\u5c06\u8be5\u539f\u59cb\u503c\u8f6c\u6362\u4e3a\u6570\u5b57 (\u8f6c\u6362\u5931\u8d25\u4f1a\u8fd4\u56de NaN), \u5e76\u8fd4\u56de\u8fd9\u4e2a\u6570\u5b57."),(0,l.kt)("li",{parentName:"ul"},"\u8f6c\u6362\u5931\u8d25, \u629b\u51fa ",(0,l.kt)("inlineCode",{parentName:"li"},"TypeError"),".")),(0,l.kt)("p",null,"\u5bf9\u8c61\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u5bf9\u8c61\u5177\u6709 toString \u65b9\u6cd5 (\u8fd4\u56de\u539f\u59cb\u503c),\n\u5219\u5c06\u8be5\u539f\u59cb\u503c\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32, \u5e76\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32."),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u5bf9\u8c61\u5177\u6709 valueOf \u65b9\u6cd5 (\u8fd4\u56de\u539f\u59cb\u503c),\n\u5219\u5c06\u8be5\u539f\u59cb\u503c\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32, \u5e76\u8fd4\u56de\u8be5\u5b57\u7b26\u4e32."),(0,l.kt)("li",{parentName:"ul"},"\u8f6c\u6362\u5931\u8d25, \u629b\u51fa ",(0,l.kt)("inlineCode",{parentName:"li"},"TypeError"),".")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"x")),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Object(x)")))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"{}"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"{}"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"boolean")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"new Boolean(x)"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"number")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"new Number(x)"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"bigint")),(0,l.kt)("td",{parentName:"tr",align:null},"An instance of BigInt (",(0,l.kt)("inlineCode",{parentName:"td"},"new")," throws ",(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"),")")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"string")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"new String(x)"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"symbol")),(0,l.kt)("td",{parentName:"tr",align:null},"An instance of Symbol (",(0,l.kt)("inlineCode",{parentName:"td"},"new")," throws ",(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"),")")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"object")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"x"))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u4fdd\u5b58\u539f\u59cb\u7684valueOf\nconst valueOf = Object.prototype.valueOf;\nconst toString = Object.prototype.toString;\n\n// \u6dfb\u52a0valueOf\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.valueOf = function () {\n  console.log('valueOf');\n  return valueOf.call(this);\n};\n// \u6dfb\u52a0toString\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.toString = function () {\n  console.log('toString');\n  return toString.call(this);\n};\nconst a = {};\n// eslint-disable-next-line no-new-wrappers\nconst b = new Boolean(false);\n\nif (a) {\n  console.log(1);\n}\n\nif (b) {\n  console.log(2);\n}\n\n// output:\n// 1\n// 2\n// \u672a\u8c03\u7528valueOf\u548ctoString, \u7b26\u5408 [\u5bf9\u8c61\u5230\u5e03\u5c14\u503c] \u7684\u8f6c\u6362\u89c4\u5219\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u4fdd\u5b58\u539f\u59cb\u7684valueOf\nconst valueOf = Object.prototype.valueOf;\nconst toString = Object.prototype.toString;\n\n// \u6dfb\u52a0valueOf\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.valueOf = function () {\n  console.log('valueOf');\n  return valueOf.call(this);\n};\n// \u6dfb\u52a0toString\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.toString = function () {\n  console.log('toString');\n  return toString.call(this);\n};\n\nlet a = {};\nconsole.log(++a);\n\n// output:\n// valueOf\n// toString\n// NaN\n// 1. valueOf\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u5bf9\u8c61\u672c\u8eab, \u4e0d\u662f\u539f\u59cb\u503c, \u7ee7\u7eed\u6267\u884c\n// 2. toString\u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u201d[object Object]\u201d, \u662f\u539f\u59cb\u503c(\u5b57\u7b26\u4e32), \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6570\u5b57NaN\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u4fdd\u5b58\u539f\u59cb\u7684valueOf\nconst valueOf = Object.prototype.valueOf;\nconst toString = Object.prototype.toString;\n\n// \u6dfb\u52a0valueOf\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.valueOf = function () {\n  console.log('valueOf');\n  return '1'; // \u5f3a\u5236\u8fd4\u56de\u539f\u59cb\u503c\n};\n// \u6dfb\u52a0toString\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.toString = function () {\n  console.log('toString');\n  return toString.call(this);\n};\n\nlet a = {};\nconsole.log(++a);\n\n// output:\n// valueOf\n// 2\n// valueOf \u8fd4\u56de\u539f\u59cb\u503c(\u5b57\u7b26\u4e32), \u76f4\u63a5\u5c06\u8be5\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6570\u5b57, \u5f97\u5230 1\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u4fdd\u5b58\u539f\u59cb\u7684valueOf\nconst valueOf = Object.prototype.valueOf;\nconst toString = Object.prototype.toString;\n\n// \u6dfb\u52a0valueOf\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.valueOf = function () {\n  console.log('valueOf');\n  return valueOf.call(this);\n};\n// \u6dfb\u52a0toString\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.toString = function () {\n  console.log('toString');\n  return toString.call(this);\n};\n\nconst a = {};\nalert(a);\n\n// output:\n// toString\n// \u5f39\u51fa \"[object Object]\"\n// \u8c03\u7528toString\u65b9\u6cd5, \u8fd4\u56de\u4e86\u5b57\u7b26\u4e32\u201d[object Object]\u201d, \u5bf9\u8c61\u6700\u7ec8\u8f6c\u6362\u4e3a\u8be5\u5b57\u7b26\u4e32\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u4fdd\u5b58\u539f\u59cb\u7684valueOf\nconst valueOf = Object.prototype.valueOf;\nconst toString = Object.prototype.toString;\n\n// \u6dfb\u52a0valueOf\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.valueOf = function () {\n  console.log('valueOf');\n  return valueOf.call(this);\n};\n// \u6dfb\u52a0toString\u65e5\u5fd7\n// eslint-disable-next-line no-extend-native\nObject.prototype.toString = function () {\n  console.log('toString');\n  return this;\n};\n\nconst a = {};\nalert(a);\n\n// output:\n// toString\n// valueOf\n// Uncaught TypeError: Cannot convert object to primitive value\n// \u8c03\u7528toString\u65b9\u6cd5, \u8fd4\u56de\u7684\u4e0d\u662f primitive value, \u7ee7\u7eed\u6267\u884c\n// \u8c03\u7528valueOf\u65b9\u6cd5, \u8fd4\u56de\u7684\u4e0d\u662f primitive value, \u7ee7\u7eed\u6267\u884c\n// \u629b\u51fa TypeError\n")),(0,l.kt)("h3",{id:"object-constructor"},"Object Constructor"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u9996\u5b57\u6bcd\u5927\u5199."),(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u51fd\u6570 (\u5305\u62ec\u6784\u9020\u51fd\u6570) \u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"prototype")," \u5c5e\u6027.")),(0,l.kt)("h4",{id:"object-literal-creation"},"Object Literal Creation"),(0,l.kt)("p",null,"\u5bf9\u8c61\u5b57\u9762\u91cf\u7531 ",(0,l.kt)("inlineCode",{parentName:"p"},"Object")," \u6784\u9020\u51fd\u6570\u9690\u5f0f\u6784\u9020;"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = {\n  name: 'sabertazimi',\n};\n\nconsole.log(obj[[proto]] === Object.prototype); // true\n")),(0,l.kt)("h4",{id:"object-new-constructor"},"Object New Constructor"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"new")," \u6784\u9020\u51fd\u6570\u4f5c\u7528\u539f\u7406\u5982\u4e0b:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5f62\u6210\u539f\u578b\u94fe: \u9690\u5f0f\u539f\u578b\u6307\u5411\u6784\u9020\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61 ",(0,l.kt)("inlineCode",{parentName:"li"},"obj.__proto__ = constructor.prototype")),(0,l.kt)("li",{parentName:"ul"},"\u6784\u9020\u51fd\u6570\u5bf9\u8c61 (Constructor) \u4e0e\u539f\u578b\u5bf9\u8c61 (Prototype) \u4e4b\u95f4\u5f62\u6210\u95ed\u73af:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Constructor.prototype = Prototype"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Prototype.constructor = Constructor"),".")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function newInstance(constructor, ...args) {\n  // var this = Object.create(Person.prototype);\n  // this.__proto__ = F.prototype\n  // F.prototype = Person.prototype\n  // \u5373 this.__proto__ = Person.prototype;\n  const obj = {};\n  obj[[proto]] = constructor.prototype;\n  constructor.apply(obj, args);\n  return obj;\n}\n\n// =>\nconst instance = new Constructor(arguments);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Employee(name) {\n  this.name = name;\n  this.getName = function () {\n    return this.name;\n  };\n}\n\nconst employee = newInstance(Employee, 'Jack');\n// =>\nconst employee = new Employee('Jack');\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"new.target"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Foo() {\n  if (!new.target) {\n    throw new Error('Foo() must be called with new');\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Waffle() {\n  // \u5f53\u672a\u4f7f\u7528 `new` \u5173\u952e\u5b57\u65f6, `this` \u6307\u5411\u5168\u5c40\u5bf9\u8c61\n  if (!(this instanceof Waffle)) {\n    return new Waffle();\n  }\n\n  // \u6b63\u5e38\u6784\u9020\u51fd\u6570\n  this.tastes = 'yummy';\n}\n")),(0,l.kt)("h4",{id:"object-create-constructor"},"Object Create Constructor"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u539f\u578b\u5f0f\u7ee7\u627f\u975e\u5e38\u9002\u5408\u4e0d\u9700\u8981\u5355\u72ec\u521b\u5efa\u6784\u9020\u51fd\u6570, \u4f46\u4ecd\u7136\u9700\u8981\u5728\u5bf9\u8c61\u95f4\u5171\u4eab\u4fe1\u606f\u7684\u573a\u5408."),(0,l.kt)("li",{parentName:"ul"},"\u5c5e\u6027\u4e2d\u5305\u542b\u7684\u5f15\u7528\u503c\u59cb\u7ec8\u4f1a\u5728\u76f8\u5173\u5bf9\u8c61\u95f4\u5171\u4eab.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Object.create = function (o) {\n  if (arguments.length > 1) {\n    throw new Error(\n      'Object.create implementation only accepts the first parameter.'\n    );\n  }\n\n  function F() {}\n  F.prototype = o;\n  return new F();\n};\n// 1. `F.prototype === o`.\n// 2. `new F()` lead to `f.__proto__ === F.prototype`.\n// Finally: `f.__proto__ === o`.\n")),(0,l.kt)("h4",{id:"constructor-return-value"},"Constructor Return Value"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u6216 user-defined literal object."),(0,l.kt)("li",{parentName:"ul"},"\u5f53\u8fd4\u56de\u503c\u4e3a",(0,l.kt)("strong",{parentName:"li"},"\u57fa\u672c\u7c7b\u578b"),"\u65f6, \u4ecd\u7136\u53ef\u5f97\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u6307\u9488\u6307\u5411\u7684\u539f\u6709\u5bf9\u8c61.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const ObjectMaker = function () {\n  this.name = 'This is it';\n  // user-defined literal object\n  // \u76f4\u63a5\u5ffd\u7565 this.name.\n  const that = {};\n  that.name = \"And that's that\";\n  return that;\n};\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const MyClass = function () {\n  this.name = 'sven';\n  return 'anne'; // \u8fd4\u56de string.\n};\nconst obj = new MyClass();\nconsole.log(obj.name); // \u8f93\u51fa: sven .\n")),(0,l.kt)("h4",{id:"constructor-instance-detection"},"Constructor Instance Detection"),(0,l.kt)("p",null,"\u82e5\u5728\u5b9e\u4f8b\u5bf9\u8c61\u7684\u539f\u578b\u94fe (",(0,l.kt)("inlineCode",{parentName:"p"},"__proto__"),") \u4e2d\u80fd\u627e\u5230\u6784\u9020\u51fd\u6570\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"prototype")," \u5c5e\u6027 (Prototype \u5bf9\u8c61),\n\u5219\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"p"},"true"),", \u5426\u5219\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"p"},"false"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// true only if\n// 1. Foo.__proto__ === Bar.prototype\n// 2. Foo.__proto__......__proto__ === Bar.prototype\nconsole.log(Foo instanceof Bar);\n")),(0,l.kt)("h3",{id:"object-property-descriptor"},"Object Property Descriptor"),(0,l.kt)("h4",{id:"property-descriptor-definition"},"Property Descriptor Definition"),(0,l.kt)("p",null,"\u5bf9\u8c61\u7684\u5c5e\u6027\u63cf\u8ff0\u7b26:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty(O, Prop, descriptor)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperties(O, descriptors)"),".")),(0,l.kt)("p",null,"\u6570\u636e\u63cf\u8ff0\u7b26:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"value"),": \u5c5e\u6027\u503c, \u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"writable"),": \u662f\u5426\u662f\u53ea\u8bfb property, \u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"enumerable"),": \u662f\u5426\u53ef\u4ee5\u88ab\u679a\u4e3e (",(0,l.kt)("inlineCode",{parentName:"li"},"for in"),"), \u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"configurable"),": \u662f\u5426\u53ef\u4ee5\u88ab\u5220\u9664\u4e0e\u4fee\u6539 descriptor, \u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),".")),(0,l.kt)("p",null,"\u5b58\u53d6\u63cf\u8ff0\u7b26:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"get"),": \u8fd4\u56de property \u503c\u7684\u65b9\u6cd5, \u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"set"),": \u4e3a property \u8bbe\u7f6e\u503c\u7684\u65b9\u6cd5, \u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"enumerable"),": \u662f\u5426\u53ef\u4ee5\u88ab\u679a\u4e3e (",(0,l.kt)("inlineCode",{parentName:"li"},"for in"),"), \u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"configurable"),": \u662f\u5426\u53ef\u4ee5\u88ab\u5220\u9664\u4e0e\u4fee\u6539 descriptor, \u9ed8\u8ba4 ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface DataPropertyDescriptor {\n  value?: any;\n  writable?: boolean;\n  enumerable?: boolean;\n  configurable?: boolean;\n}\n\ninterface AccessorPropertyDescriptor {\n  get?: (this: any) => any;\n  set?: (this: any, v: any) => void;\n  enumerable?: boolean;\n  configurable?: boolean;\n}\n\ntype PropertyDescriptor = DataPropertyDescriptor | AccessorPropertyDescriptor;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Object.defineProperty(o, 'age', {\n  value: 24,\n  writable: true,\n  enumerable: true,\n  configurable: true,\n});\n\nObject.defineProperty(o, 'sex', {\n  value: 'male',\n  writable: false, //  \u4e0d\u53ef\u8d4b\u503c\n  enumerable: false, //  \u4e0d\u53ef\u904d\u5386/\u679a\u4e3e\n  configurable: false,\n});\n\nObject.defineProperties(o, {\n  age: {\n    value: 24,\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  },\n  sex: {\n    value: 'male',\n    writable: false,\n    enumerable: false,\n    configurable: false,\n  },\n});\n\nObject.defineProperties(o, {\n  kind: {\n    value: 'Plate 1x3',\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  },\n  color: {\n    value: 'yellow',\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  },\n  description: {\n    get() {\n      return `${this.kind} (${this.color})`;\n    },\n    enumerable: true,\n    configurable: true,\n  },\n});\n")),(0,l.kt)("h4",{id:"property-descriptor-functions"},"Property Descriptor Functions"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.create(prototype[, descriptors])"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const o = Object.create({\n  say() {\n    alert(this.name);\n  },\n  name: 'Byron',\n});\n\nconst obj = Object.create(Object.prototype, {\n  kind: {\n    value: 'Plate 1x3',\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  },\n  color: {\n    value: 'yellow',\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  },\n  description: {\n    get() {\n      return `${this.kind} (${this.color})`;\n    },\n    enumerable: true,\n    configurable: true,\n  },\n});\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.getOwnPropertyDescriptor(object, property)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.getOwnPropertyDescriptors(object)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n\nconst clone = Object.create(\n  Object.getPrototypeOf(obj),\n  Object.getOwnPropertyDescriptors(obj)\n);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.hasOwn(object, property)"),": Boolean."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"in")," operator: \u68c0\u6d4b\u5b9e\u4f8b\u53ca\u5176\u539f\u578b\u94fe\u4e0a\u6240\u6709\u5c5e\u6027\u540d.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Arrays\nconst trees = ['redwood', 'bay', 'cedar', 'oak', 'maple'];\nconst truthy = 0 in trees;\nconst truthy = 3 in trees;\nconst falsy = 6 in trees;\nconst falsy = 'bay' in trees;\nconst truthy = 'length' in trees;\nconst truthy = Symbol.iterator in trees;\n\n// Predefined objects\nconst truthy = 'PI' in Math;\n\n// Custom objects\nconst car = { make: 'Honda', model: 'Accord', year: 1998 };\nconst truthy = 'make' in car;\nconst truthy = 'model' in car;\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"for...in"),": \u83b7\u53d6\u5b9e\u4f8b\u53ca\u5176\u539f\u578b\u94fe\u4e0a\u6240\u6709\u53ef\u679a\u4e3e\u5c5e\u6027\u540d."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.getOwnPropertySymbols(object)"),": \u83b7\u53d6\u5b9e\u4f8b\u4e0a Symbol \u5c5e\u6027\u540d."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.getOwnPropertyNames(object)"),": \u83b7\u53d6\u5b9e\u4f8b\u4e0a\u975e Symbol \u5c5e\u6027\u540d (\u5305\u62ec\u4e0d\u53ef\u679a\u4e3e\u5c5e\u6027\u540d)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.keys(object)"),": \u83b7\u53d6\u5b9e\u4f8b\u4e0a\u53ef\u679a\u4e3e\u5c5e\u6027\u540d.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const k1 = Symbol('k1');\nconst k2 = Symbol('k2');\nconst o = {\n  1: 1,\n  first: 'first',\n  [k1]: 'sym2',\n  second: 'second',\n  0: 0,\n};\no[k2] = 'sym2';\no[3] = 3;\no.third = 'third';\no[2] = 2;\n\nconsole.log(Object.getOwnPropertyNames(o));\n// ['0', '1', '2', '3', 'first', 'second', 'third']\nconsole.log(Object.getOwnPropertySymbols(o));\n// [Symbol(k1), Symbol(k2)]\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Person() {}\nPerson.prototype.name = 'Nicholas';\nPerson.prototype.age = 29;\nPerson.prototype.job = 'Software Engineer';\nPerson.prototype.sayName = function () {\n  console.log(this.name);\n};\n\nconst keys = Object.keys(Person.prototype);\nconsole.log(keys); // 'name, age, job, sayName'\n\nconst p1 = new Person();\np1.name = 'Rob';\np1.age = 31;\nconst p1keys = Object.keys(p1);\nconsole.log(p1keys); // '[name, age]'\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.values(O)"),":\nobject own enumerable property values."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.entries(O)"),":\nobject own enumerable ",(0,l.kt)("strong",{parentName:"li"},"string-keyed")," property ",(0,l.kt)("inlineCode",{parentName:"li"},"[key, value]")," pairs."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.fromEntries()"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const score = {\n  saber: 42,\n  todd: 19,\n  ken: 4,\n  gan: 41,\n};\n\nObject.keys(score).map(k => score[k]);\n// => [ 42, 19, 4, 41 ]\n\nObject.values(score);\n// => [ 42, 19, 4, 41 ]\n\nObject.entries(score);\n/**\n * =>\n * [\n * [ 'saber', 42 ],\n * [ 'todd', 19 ],\n * [ 'ken', 4 ],\n * [ 'gan', 41 ],\n * ]\n */\n\nfunction findKey(object, callback, thisValue) {\n  for (const [key, value] of Object.entries(object)) {\n    if (callback.call(thisValue, value, key, object)) {\n      return key;\n    }\n  }\n\n  return undefined;\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const object = { x: 42, y: 50, abc: 9001 };\nconst result = Object.fromEntries(\n  Object.entries(object)\n    .filter(([key, value]) => key.length === 1)\n    .map(([key, value]) => [key, value * 2])\n);\n\nconst map = new Map(Object.entries(object));\nconst objectCopy = Object.fromEntries(map);\n\nfunction pick(object, ...keys) {\n  const filteredEntries = Object.entries(object).filter(([key, _value]) =>\n    keys.includes(key)\n  );\n\n  return Object.fromEntries(filteredEntries);\n}\n\nfunction invert(object) {\n  const mappedEntries = Object.entries(object).map(([key, value]) => [\n    value,\n    key,\n  ]);\n\n  return Object.fromEntries(mappedEntries);\n}\n\nfunction mapObject(object, callback, thisValue) {\n  const mappedEntries = Object.entries(object).map(([key, value]) => {\n    const mappedValue = callback.call(thisValue, value, key, object);\n    return [key, mappedValue];\n  });\n\n  return Object.fromEntries(mappedEntries);\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.preventExtensions(O)"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"Object.isExtensible(O)"),":\n\u4e0d\u53ef\u65b0\u589e\u5c5e\u6027, \u53ef\u5220\u9664/\u4fee\u6539\u5c5e\u6027."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.seal(O)"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"Object.isSealed(O)"),":\n\u8bbe\u7f6e ",(0,l.kt)("inlineCode",{parentName:"li"},"configurable")," \u4e3a false (\u4e0d\u53ef\u5220\u9664, \u4e0d\u53ef\u4fee\u6539 descriptor), \u53ef\u4fee\u6539\u5c5e\u6027."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.freeze(O)"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"Object.isFrozen(O)"),":\n\u4e0d\u53ef\u65b0\u589e/\u5220\u9664/\u4fee\u6539\u5c5e\u6027 (Shallow).")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = Object.freeze({ foo: {} });\n\nobj.bar = 123;\n// TypeError: Can't add property bar, object is not extensible\n\nobj.foo = {};\n// TypeError: Cannot assign to read only property 'foo' of #<Object>\n\nobj.foo.qux = 'abc';\nconsole.log(obj.foo.qux);\n// 'abc'\n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Operation (",(0,l.kt)("strong",{parentName:"th"},"Only Enumerable"),")"),(0,l.kt)("th",{parentName:"tr",align:null},"String Key"),(0,l.kt)("th",{parentName:"tr",align:null},"Symbol Key"),(0,l.kt)("th",{parentName:"tr",align:null},"Inherited"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.keys()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.values()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.entries()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.assign()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Spreading ",(0,l.kt)("inlineCode",{parentName:"td"},"{...x}")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"JSON.stringify()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"for...in")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714")))),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Operation (",(0,l.kt)("strong",{parentName:"th"},"Include Non-enumerable"),")"),(0,l.kt)("th",{parentName:"tr",align:null},"String Key"),(0,l.kt)("th",{parentName:"tr",align:null},"Symbol Key"),(0,l.kt)("th",{parentName:"tr",align:null},"Inherited"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.getOwnPropertyNames()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.getOwnPropertySymbols()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.getOwnPropertyDescriptors()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.ownKeys()")),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,l.kt)("td",{parentName:"tr",align:null},"\u2718")))),(0,l.kt)("h3",{id:"private-property-and-method"},"Private Property and Method"),(0,l.kt)("h4",{id:"private-property"},"Private Property"),(0,l.kt)("p",null,"\u5b9e\u73b0\u65b9\u5f0f: \u95ed\u5305"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Gadget() {\n  // private member\n  const name = 'iPod';\n  // public function\n  this.getName = function () {\n    return name;\n  };\n}\n")),(0,l.kt)("h4",{id:"private-method"},"Private Method"),(0,l.kt)("p",null,"getter: \u8fd4\u56de\u57fa\u672c\u7c7b\u578b\u503c/",(0,l.kt)("strong",{parentName:"p"},"\u5f15\u7528"),"\u7c7b\u578b",(0,l.kt)("strong",{parentName:"p"},"\u6df1\u62f7\u8d1d"),"(POLA \u6700\u4f4e\u6388\u6743\u539f\u5219)."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Gadget() {\n  // private member\n  const pref = {};\n  // public function\n  this.getPref = function () {\n    return pref.clone();\n  };\n}\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5373\u4f7f\u51fd\u6570\u6a21\u5f0f + \u63ed\u793a\u6a21\u5f0f"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u79c1\u6709\u5c5e\u6027\u4e0e\u79c1\u6709\u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u79c1\u6709\u65b9\u6cd5\u7684\u516c\u5171(\u8bfb/\u6267\u884c not \u5199)\u63a5\u53e3,\u516c\u5171\u63a5\u53e3\u53d1\u751f\u610f\u5916,\u79c1\u6709\u65b9\u6cd5\u4ecd\u5b89\u5168.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u533f\u540d\u5373\u65f6\u51fd\u6570\u6a21\u5f0f.\nconst obj = (function () {\n  // private member\n  const name = 'tazimi';\n  // private method\n  const getName = function getName() {\n    return name;\n  };\n  // \u95ed\u5305\n  return {\n    // \u516c\u5171\u63a5\u53e3 - \u79c1\u6709\u65b9\u6cd5\n    getName,\n  };\n})();\n")),(0,l.kt)("h3",{id:"static-property-and-method"},"Static Property and Method"),(0,l.kt)("h4",{id:"static-property"},"Static Property"),(0,l.kt)("p",null,"\u5b9e\u73b0\u65b9\u5f0f: \u95ed\u5305/\u539f\u578b\u4ee3\u7406"),(0,l.kt)("h4",{id:"static-method"},"Static Method"),(0,l.kt)("p",null,"\u76f4\u63a5\u5411\u6784\u9020\u51fd\u6570\u6dfb\u52a0\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Object.isArray = function () {};\n")),(0,l.kt)("h3",{id:"object-property"},"Object Property"),(0,l.kt)("p",null,"\u7f16\u5199\u51fd\u6570\u65f6,\u4e00\u822c\u7528[]\u8bbf\u95ee\u5bf9\u8c61\u5c5e\u6027"),(0,l.kt)("h3",{id:"object-method"},"Object Method"),(0,l.kt)("p",null,"\u4e3a prototype \u6dfb\u52a0\u65b9\u6cd5,\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0\u8bed\u6cd5\u7cd6 method()\u7b80\u5316\u4ee3\u7801(\u94fe\u6a21\u5f0f)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"if (typeof Function.prototype.method !== 'function') {\n  // eslint-disable-next-line no-extend-native\n  Function.prototype.method = function (name, implementation) {\n    this.prototype[name] = implementation;\n    return this;\n  };\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const Person = function (name) {\n  this.name = name;\n}\n  .method('getName', function () {\n    return this.name;\n  })\n  .method('setName', function (name) {\n    this.name = name;\n    return this;\n  });\n")),(0,l.kt)("h3",{id:"object-clone"},"Object Clone"),(0,l.kt)("h4",{id:"object-shallow-clone"},"Object Shallow Clone"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Object.assign"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Enumerable: ",(0,l.kt)("strong",{parentName:"li"},"\u53ef\u679a\u4e3e"),"\u5c5e\u6027\u6269\u5c55."),(0,l.kt)("li",{parentName:"ul"},"Own: ",(0,l.kt)("strong",{parentName:"li"},"\u81ea\u6709"),"\u5c5e\u6027\u6269\u5c55."),(0,l.kt)("li",{parentName:"ul"},"Shallow: ",(0,l.kt)("strong",{parentName:"li"},"\u6d45\u62f7\u8d1d"),"\u6269\u5c55."),(0,l.kt)("li",{parentName:"ul"},"Trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"sourceObj.set")," and change ",(0,l.kt)("inlineCode",{parentName:"li"},"sourceObj"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const dest = {};\nconst src = { a: {} };\nObject.assign(dest, src);\n\n// \u6d45\u590d\u5236\u610f\u5473\u7740\u53ea\u4f1a\u590d\u5236\u5bf9\u8c61\u7684\u5f15\u7528\nconsole.log(dest); // { a :{} }\nconsole.log(dest.a === src.a); // true\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"...")," object spread syntax:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Enumerable: ",(0,l.kt)("strong",{parentName:"li"},"\u53ef\u679a\u4e3e"),"\u5c5e\u6027\u6269\u5c55."),(0,l.kt)("li",{parentName:"ul"},"Own: ",(0,l.kt)("strong",{parentName:"li"},"\u81ea\u6709"),"\u5c5e\u6027\u6269\u5c55."),(0,l.kt)("li",{parentName:"ul"},"Shallow: ",(0,l.kt)("strong",{parentName:"li"},"\u6d45\u62f7\u8d1d"),"\u6269\u5c55."),(0,l.kt)("li",{parentName:"ul"},"Not copy prototype (",(0,l.kt)("inlineCode",{parentName:"li"},"__proto__"),")."),(0,l.kt)("li",{parentName:"ul"},"Not copy getter and setter."),(0,l.kt)("li",{parentName:"ul"},"Not trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"sourceObj.set")," and not change ",(0,l.kt)("inlineCode",{parentName:"li"},"sourceObj")," (create new properties).")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Shallow copy\nconst foo = { a: 1 };\nconst bar = { b: 2, c: { d: 3 } };\nconst foobar = { ...foo, ...bar };\nconsole.log(foobar.c === bar.c); // true\n\n// Not copy prototype (`__proto__`)\nclass MyClass {}\nconst original = new MyClass();\nassert.equal(original instanceof MyClass, true);\nconst copy = { ...original };\nassert.equal(copy instanceof MyClass, false);\n")),(0,l.kt)("h4",{id:"object-deep-clone"},"Object Deep Clone"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function deepClone(original) {\n  if (Array.isArray(original)) {\n    return original.map(elem => deepClone(elem));\n  } else if (typeof original === 'object' && original !== null) {\n    return Object.fromEntries(\n      Object.entries(original).map(([key, value]) => [key, deepClone(value)])\n    );\n  } else {\n    // Primitive value: atomic, no need to copy\n    return original;\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function deepUpdate(original, keys, value) {\n  if (keys.length === 0) {\n    return value;\n  }\n\n  const currentKey = keys[0];\n\n  if (Array.isArray(original)) {\n    return original.map((v, index) =>\n      index === currentKey ? deepUpdate(v, keys.slice(1), value) : v\n    );\n  } else if (typeof original === 'object' && original !== null) {\n    return Object.fromEntries(\n      Object.entries(original).map(([k, v]) =>\n        k === currentKey ? [k, deepUpdate(v, keys.slice(1), value)] : [k, v]\n      )\n    );\n  } else {\n    // Primitive value\n    return original;\n  }\n}\n")),(0,l.kt)("h3",{id:"object-inheritance"},"Object Inheritance"),(0,l.kt)("h4",{id:"prototype-proxy-inheritance"},"Prototype Proxy Inheritance"),(0,l.kt)("p",null,"\u53ef\u7528\u4e8e\u6240\u6709\u7ee7\u627f\u6a21\u5f0f\u4e2d, \u51cf\u5c11\u5185\u5b58\u6d88\u8017:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const inherit = (function () {\n  // \u51cf\u5c11\u7ee7\u627f\u8fc7\u7a0b\u4e2d\u7236\u7c7b\u7684\u5b9e\u4f8b\u5316,\u51cf\u5c11\u8d44\u6e90\u6d88\u8017\n  // \u5b9e\u4f8b\u5316\u4e00\u4e2a\u7a7a\u7c7b\u6240\u9700\u8d44\u6e90\u66f4\u5c11\n  const F = function () {};\n  return function (C, P) {\n    // c.__proto__ = C.prototype = f\n    // f.__proto__ = F.prototype\n    // F.prototype = P.prototype\n    // c.__proto__.__proto__ = f.__proto__ = P.prototype\n    F.prototype = P.prototype; // f.__proto__ = F.prototype = P.prototype\n    C.prototype = new F(); // C.prototype = f\n    C.prototype.constructor = C;\n    C.super = P.prototype; // \u6b64\u53e5\u53ef\u63d0\u9ad8\u4ee3\u7801\u7684\u91cd\u7528\u6027\n  };\n})();\n\nChild.prototype.add = function () {\n  return Child.super.add.call(this);\n};\n")),(0,l.kt)("h4",{id:"class-simulation-inheritance"},"Class Simulation Inheritance"),(0,l.kt)("p",null,"\u590d\u5236\u5f0f\u5730\u7ee7\u627f, \u5c06\u4f1a\u6d88\u8017\u5927\u91cf\u5185\u5b58\u5355\u5143:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const classSim = function (Parent, props) {\n  // \u65b0\u7684\u6784\u9020\u51fd\u6570\n  const Child = function (...args) {\n    if (\n      Child.uber &&\n      Object.prototype.hasOwnProperty.call(Child.uber, '_construct')\n    ) {\n      Child.uber._construct.apply(this, args);\n    }\n    if (Object.prototype.hasOwnProperty.call(Child.prototype, '_construct')) {\n      Child.prototype._construct.apply(this, args);\n    }\n  };\n\n  // \u7c7b\u5f0f\u7ee7\u627f\n  Parent = Parent || Object;\n\n  // \u4ee3\u7406\u6784\u9020\u51fd\u6570F\n  const F = function () {};\n  F.prototype = Parent.prototype;\n  Child.prototype = new F();\n  Child.prototype.constructor = Child;\n\n  // \u6dfb\u52a0\u5c5e\u6027\u4e0e\u65b9\u6cd5\n  for (const i in props) {\n    if (Object.prototype.hasOwnProperty.call(props, i)) {\n      Child.prototype[i] = props[i];\n    }\n  }\n\n  // return the \"class\"\n  return Child;\n};\n\nconst SuperMan = classSim(Man, {\n  _construct(what) {\n    console.log(\"SuperMan's constructor\");\n  },\n  getName() {\n    const name = SuperMan.uber.getName.call(this);\n    return `I am ${name}`;\n  },\n});\n")),(0,l.kt)("h4",{id:"composite-inheritance"},"Composite Inheritance"),(0,l.kt)("p",null,"\u539f\u578b\u7ee7\u627f (",(0,l.kt)("strong",{parentName:"p"},"\u8bbe\u7f6e\u539f\u578b"),")\n\u4e0e\u7c7b\u5f0f\u7ee7\u627f (",(0,l.kt)("strong",{parentName:"p"},"\u501f\u7528\u6784\u9020\u51fd\u6570"),")\n\u7ec4\u5408\u7ee7\u627f\u6a21\u5f0f:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"child.prototype = new Parent(); Child.prototype.constructor = Child"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Parent.apply(this, arguments)"),": \u501f\u7528\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u9632\u6b62\u5f15\u7528\u7c7b\u578b\u88ab\u8feb\u5171\u4eab."),(0,l.kt)("li",{parentName:"ul"},"\u6b64\u6a21\u5f0f\u4f1a\u8c03\u7528\u4e24\u6b21\u7236\u7c7b\u6784\u9020\u51fd\u6570, \u4f7f\u5f97\u5b50\u7c7b\u5c5e\u6027\u7ee7\u627f\u4e24\u6b21, \u5b58\u5728\u4e00\u5b9a\u7684\u6548\u7387\u95ee\u9898.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Parent(name) {\n  this.name = name || 'Adam';\n}\n// Adding functionality to the prototype\nParent.prototype.say = function () {\n  return this.name;\n};\n\n// Child constructor\nfunction Child(...args) {\n  // \u89e3\u51b3\u5f15\u7528\u7c7b\u578b\u5171\u4eab\u95ee\u9898\n  Parent.apply(this, args);\n  this.childName = 'Child Name';\n}\n\n// Child.prototype = Object.create(Parent.prototype);\nChild.prototype = new Parent(); // \u8bbe\u7f6e\u539f\u578b\u94fe,\u5efa\u7acb\u7ee7\u627f\u5173\u7cfb\nChild.prototype.constructor = Child; // \u4f7f\u5f97 Prototype \u5bf9\u8c61\u4e0e Constructor \u5bf9\u8c61\u5f62\u6210\u95ed\u73af\n")),(0,l.kt)("h3",{id:"class"},"Class"),(0,l.kt)("h4",{id:"class-prototype"},"Class Prototype"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Class")," \u5b9a\u4e49\u4e0d\u80fd\u63d0\u5347."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Class")," \u5177\u6709\u5757\u4f5c\u7528\u57df."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"typeof Class"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"function"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class A {\n  constructor(value) {\n    this.val = value;\n  }\n}\n\nclass B extends A {\n  constructor(value) {\n    super(value);\n    console.log('New');\n  }\n}\n\nconst b = new B(6);\n\nconsole.log(B[[proto]] === A); // true\nconsole.log(B.prototype.constructor === B); // true\nconsole.log(B.prototype[[proto]] === A.prototype); // true\nconsole.log(b[[proto]] === B.prototype); // true\n\nfunction AA(value) {\n  this.val = value;\n}\n\nfunction BB(value) {\n  AA.call(this, value);\n}\n\nBB.prototype = Object.create(AA.prototype);\nBB.prototype.constructor = BB;\n\nconst bb = new BB(6);\n\nconsole.log(BB[[proto]] === Function.prototype); // true (not consistence to Class)\nconsole.log(BB.prototype.constructor === BB); // true\nconsole.log(BB.prototype[[proto]] === AA.prototype); // true\nconsole.log(bb[[proto]] === BB.prototype); // true\n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null},"Writable"),(0,l.kt)("th",{parentName:"tr",align:null},"Enumerable"),(0,l.kt)("th",{parentName:"tr",align:null},"Configurable"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Foo.prototype")),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"false")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Foo.prototype.constructor")),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"true")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Static properties ",(0,l.kt)("inlineCode",{parentName:"td"},"Foo.*")),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"true")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Prototype properties ",(0,l.kt)("inlineCode",{parentName:"td"},"Foo.prototype.*")),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"true")))),(0,l.kt)("h4",{id:"class-inheritance"},"Class Inheritance"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u9694\u79bb: \u6dfb\u52a0\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u7684\u6240\u6709\u5c5e\u6027\u90fd\u4f1a\u5b58\u5728\u4e8e\u4e0d\u540c\u7684\u5b9e\u4f8b\u4e0a."),(0,l.kt)("li",{parentName:"ul"},"\u5171\u4eab:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5728\u7c7b\u5757\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u65b9\u6cd5\u90fd\u4f1a\u5b9a\u4e49\u5728\u7c7b\u7684\u539f\u578b\u4e0a."),(0,l.kt)("li",{parentName:"ul"},"\u9759\u6001\u5c5e\u6027\u5b9a\u4e49\u5728\u7c7b\u672c\u8eab\u4e0a.")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Person {\n  constructor() {\n    // \u6dfb\u52a0\u5230 this \u7684\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u5b58\u5728\u4e8e\u4e0d\u540c\u7684\u5b9e\u4f8b\u4e0a\n    this.locate = () => console.log('instance', this);\n  }\n\n  // \u5728\u7c7b\u5757\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u5b9a\u4e49\u5728\u7c7b\u7684\u539f\u578b\u4e0a\n  locate() {\n    console.log('prototype', this);\n  }\n\n  // \u5b9a\u4e49\u5728\u7c7b\u672c\u8eab\u4e0a\n  static locate() {\n    console.log('class', this);\n  }\n}\n\nconst p = new Person();\np.locate(); // instance, Person {}\nPerson.prototype.locate(); // prototype, {constructor: ... }\nPerson.locate(); // class, class Person {}\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://exploringjs.com/es6/ch_classes.html#_prototype-chains"},(0,l.kt)("img",{alt:"Class Inheritance",src:t(4640).Z,width:"1104",height:"717"}))),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Class")," Definition"),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Class")," Prototype"),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"Class.prototype")," Prototype"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"C")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Function.prototype")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.prototype"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"C extends null")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Function.prototype")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"null"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"C extends Object")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.prototype"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"C extends B")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"B")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"B.prototype"))))),(0,l.kt)("h5",{id:"super-class"},"Super Class"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"super"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"super")," \u53ea\u80fd\u5728\u6d3e\u751f\u7c7b\u6784\u9020\u51fd\u6570\u548c\u9759\u6001\u65b9\u6cd5\u4e2d\u4f7f\u7528."),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u80fd\u5355\u72ec\u5f15\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"super")," \u5173\u952e\u5b57, \u8981\u4e48\u7528\u5b83\u8c03\u7528\u6784\u9020\u51fd\u6570, \u8981\u4e48\u7528\u5b83\u5f15\u7528\u9759\u6001\u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},"\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"super()")," \u4f1a\u8c03\u7528\u7236\u7c7b\u6784\u9020\u51fd\u6570, \u5e76\u5c06\u8fd4\u56de\u7684\u5b9e\u4f8b\u8d4b\u503c\u7ed9 ",(0,l.kt)("inlineCode",{parentName:"li"},"this"),"."),(0,l.kt)("li",{parentName:"ul"},"\u5728\u7c7b\u6784\u9020\u51fd\u6570\u4e2d, \u4e0d\u80fd\u5728\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"super()")," \u4e4b\u524d\u5f15\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"this"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"super()")," \u7b49\u4ef7\u4e8e\u8c03\u7528\u6784\u9020\u51fd\u6570, \u82e5\u9700\u7ed9\u7236\u7c7b\u6784\u9020\u51fd\u6570\u4f20\u53c2, \u5219\u9700\u624b\u52a8\u4f20\u5165."),(0,l.kt)("li",{parentName:"ul"},"\u82e5\u6ca1\u6709\u663e\u5f0f\u5b9a\u4e49\u6d3e\u751f\u7c7b\u6784\u9020\u51fd\u6570, \u5728\u5b9e\u4f8b\u5316\u6d3e\u751f\u7c7b\u65f6\u4f1a\u81ea\u52a8\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"super()"),", \u4e14\u4f1a\u81ea\u52a8\u4f20\u5165\u6240\u6709\u4f20\u7ed9\u6d3e\u751f\u7c7b\u7684\u53c2\u6570."),(0,l.kt)("li",{parentName:"ul"},"\u82e5\u663e\u5f0f\u5b9a\u4e49\u4e86\u6d3e\u751f\u7c7b\u6784\u9020\u51fd\u6570, \u5219\u5fc5\u987b\u5728\u5176\u4e2d\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"super()")," , \u6216\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},"\u5b9e\u4f8b\u5316\u65f6\u68c0\u6d4b ",(0,l.kt)("inlineCode",{parentName:"li"},"new.target")," \u662f\u4e0d\u662f\u62bd\u8c61\u57fa\u7c7b, \u53ef\u4ee5\u963b\u6b62\u5bf9\u62bd\u8c61\u57fa\u7c7b\u7684\u5b9e\u4f8b\u5316.")),(0,l.kt)("h5",{id:"abstract-base-class"},"Abstract Base Class"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Shape {\n  constructor() {\n    if (new.target === Shape) {\n      throw new TypeError('This class cannot be instantiated directly.');\n    }\n  }\n}\n\nclass Rectangle extends Shape {\n  constructor(length, width) {\n    super();\n    this.length = length;\n    this.width = width;\n  }\n}\n\nconst x = new Shape(); // throws error\nconst y = new Rectangle(3, 4); // no error\nconsole.log(y instanceof Shape); // true\n")),(0,l.kt)("h4",{id:"class-expression"},"Class Expression"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Anonymous class expression\nconst Person = class {};\n\n// Named class expression\nconst Person = class PersonName {\n  identify() {\n    console.log(Person.name, PersonName.name);\n  }\n};\n\nconst p = new Person();\np.identify(); // PersonName PersonName\nconsole.log(Person.name); // PersonName\nconsole.log(PersonName); // ReferenceError: PersonName is not defined\n")),(0,l.kt)("h4",{id:"class-constructor"},"Class Constructor"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class A {\n  constructor() {\n    console.log(new.target.name);\n  }\n}\n\nclass B extends A {\n  constructor() {\n    super();\n    console.log('New');\n  }\n}\n\nconst a = new A(); // logs \"A\"\nconst b = new B(); // logs \"B\"\n\nclass C {\n  constructor() {\n    console.log(new.target);\n  }\n}\n\nclass D extends C {\n  constructor() {\n    super();\n    console.log('New');\n  }\n}\n\nconst c = new C(); // logs class C{constructor(){console.log(new.target);}}\nconst d = new D(); // logs class D extends C{constructor(){super();}}\n")),(0,l.kt)("h4",{id:"class-private-member"},"Class Private Member"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Private access."),(0,l.kt)("li",{parentName:"ul"},"Aren't stored in ",(0,l.kt)("inlineCode",{parentName:"li"},".prototype"),"."),(0,l.kt)("li",{parentName:"ul"},"Aren't create instance own properties.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Dong {\n  constructor() {\n    this.#name = 'dog';\n    this.#age = 20;\n    this.friend = 'cat';\n  }\n\n  hello() {\n    return `I'm ${this.#name} ${this.#age} years old`;\n  }\n}\n")),(0,l.kt)("p",null,"Private member can only be accessed inside body of its class,\ncan\u2019t even access it from a subclass:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class SuperClass {\n  #superProp = 'superProp';\n}\n\nclass SubClass extends SuperClass {\n  getSuperProp() {\n    return this.#superProp;\n  }\n}\n// SyntaxError: Private field '#superProp'\n// must be declared in an enclosing class\n\nclass Color {\n  #name;\n\n  constructor(name) {\n    this.#name = name;\n  }\n\n  static getName(obj) {\n    return obj.#name;\n  }\n}\n\nclass Person {\n  #name;\n\n  constructor(name) {\n    this.#name = name;\n  }\n}\n\n// Can\u2019t access the private slot #name of a Person:\nassert.equal(Color.getName(new Color('green')), 'green');\nassert.throws(() => Color.getName(new Person('Jane')), {\n  name: 'TypeError',\n  message:\n    'Cannot read private member #name from' +\n    ' an object whose class did not declare it',\n});\n")),(0,l.kt)("p",null,"Private member never clash,\nthey aren't stored in ",(0,l.kt)("inlineCode",{parentName:"p"},".prototype")," objects and aren't inherited:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class SuperClass {\n  #privateField = 'super';\n\n  getSuperPrivateField() {\n    return this.#privateField;\n  }\n}\n\nclass SubClass extends SuperClass {\n  #privateField = 'sub';\n\n  getSubPrivateField() {\n    return this.#privateField;\n  }\n}\n\nconst inst = new SubClass();\nassert.equal(inst.getSuperPrivateField(), 'super');\nassert.equal(inst.getSubPrivateField(), 'sub');\n")),(0,l.kt)("p",null,"Private member can't be accessed by ",(0,l.kt)("inlineCode",{parentName:"p"},"Reflect.ownKeys()"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class InstPrivateClass {\n  #privateField1 = 'private field 1';\n  #privateField2;\n  constructor(value) {\n    this.#privateField2 = value;\n  }\n}\n\n// No instance properties were created\nconst inst = new InstPrivateClass('constructor argument');\nassert.deepEqual(Reflect.ownKeys(inst), []);\n")),(0,l.kt)("p",null,"Private member ",(0,l.kt)("inlineCode",{parentName:"p"},"WeakMap")," polyfill:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const classPrivateFieldGet = (receiver, state) => {\n  return state.get(receiver);\n};\n\nconst classPrivateFieldSet = (receiver, state, value) => {\n  state.set(receiver, value);\n};\n\nconst dongName = new WeakMap();\nconst dongAge = new WeakMap();\n\nclass Dong {\n  constructor() {\n    classPrivateFieldSet(this, dongName, 'dong');\n    classPrivateFieldSet(this, dongAge, 20);\n  }\n\n  hello() {\n    return `I'm ${classPrivateFieldGet(this, dongName)}, ${classPrivateFieldGet(\n      this,\n      dongAge\n    )} years old`;\n  }\n}\n")),(0,l.kt)("h4",{id:"class-public-fields"},"Class Public Fields"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class SuperClass {\n  superProp = console.log('superProp');\n\n  constructor() {\n    console.log('super-constructor');\n  }\n}\n\nclass SubClass extends SuperClass {\n  subProp = console.log('subProp');\n\n  constructor() {\n    console.log('BEFORE super()');\n    super();\n    console.log('AFTER super()');\n  }\n}\n\nconst sub = new SubClass();\n// Output:\n// 'BEFORE super()'\n// 'superProp'\n// 'super-constructor'\n// 'subProp'\n// 'AFTER super()'\n")),(0,l.kt)("h4",{id:"class-static-blocks"},"Class Static Blocks"),(0,l.kt)("p",null,"Static blocks have access to class private member.\nIts mainly useful whenever set up multiple static fields."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Foo {\n  static #count = 0;\n\n  get count() {\n    return Foo.#count;\n  }\n\n  static {\n    try {\n      const lastInstances = loadLastInstances();\n      Foo.#count += lastInstances.length;\n    } catch {}\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Translator {\n  static translations = {\n    yes: 'ja',\n  };\n\n  static englishWords = [];\n  static germanWords = [];\n  static {\n    for (const [english, german] of Object.entries(translations)) {\n      this.englishWords.push(english);\n      this.germanWords.push(german);\n    }\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class SuperClass {\n  static superField1 = console.log('superField1');\n  static {\n    assert.equal(this, SuperClass);\n    console.log('static block 1 SuperClass');\n  }\n\n  static superField2 = console.log('superField2');\n  static {\n    console.log('static block 2 SuperClass');\n  }\n}\n\nclass SubClass extends SuperClass {\n  static subField1 = console.log('subField1');\n  static {\n    assert.equal(this, SubClass);\n    console.log('static block 1 SubClass');\n  }\n\n  static subField2 = console.log('subField2');\n  static {\n    console.log('static block 2 SubClass');\n  }\n}\n\n// Output:\n// 'superField1'\n// 'static block 1 SuperClass'\n// 'superField2'\n// 'static block 2 SuperClass'\n// 'subField1'\n// 'static block 1 SubClass'\n// 'subField2'\n// 'static block 2 SubClass'\n")),(0,l.kt)("h4",{id:"class-best-practice"},"Class Best Practice"),(0,l.kt)("p",null,"Avoid using ",(0,l.kt)("inlineCode",{parentName:"p"},"class")," when:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Singleton:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Only instantiate your class ",(0,l.kt)("strong",{parentName:"li"},"once in a given runtime"),"."))),(0,l.kt)("li",{parentName:"ul"},"Stateless:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Data structure ",(0,l.kt)("strong",{parentName:"li"},"no need for local state"),"."),(0,l.kt)("li",{parentName:"ul"},"Data structure ",(0,l.kt)("strong",{parentName:"li"},"no need for extending"),"."))),(0,l.kt)("li",{parentName:"ul"},"Redundant:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Minimal public methods."),(0,l.kt)("li",{parentName:"ul"},"Constructors are only used for dependency injection."),(0,l.kt)("li",{parentName:"ul"},"Constructors are always called with same arguments."))),(0,l.kt)("li",{parentName:"ul"},"Want to avoid using ",(0,l.kt)("inlineCode",{parentName:"li"},"this"),".")),(0,l.kt)("h3",{id:"global-object"},"Global Object"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://exploringjs.com/deep-js/ch_global-scope.html"},(0,l.kt)("img",{alt:"Global Scope",src:t(1481).Z,width:"1447",height:"823"}))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u7acb\u5373\u51fd\u6570\u6a21\u5f0f:\n// \u6b64\u65f6\u8fd4\u56de\u503c\u4e0d\u662f\u51fd\u6570\u672c\u8eab, \u800c\u662f\u51fd\u6570\u6267\u884c\u540e\u7684 return \u8bed\u53e5\u8fd4\u56de\u503c.\nconst global = (function () {\n  // \u8fd4\u56de\u5168\u5c40\u5bf9\u8c61\n  return this;\n})();\n")),(0,l.kt)("p",null,"Global Object \u5c5e\u6027:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"undefined."),(0,l.kt)("li",{parentName:"ul"},"NaN."),(0,l.kt)("li",{parentName:"ul"},"Infinity."),(0,l.kt)("li",{parentName:"ul"},"Object."),(0,l.kt)("li",{parentName:"ul"},"Array."),(0,l.kt)("li",{parentName:"ul"},"Function."),(0,l.kt)("li",{parentName:"ul"},"Boolean."),(0,l.kt)("li",{parentName:"ul"},"String."),(0,l.kt)("li",{parentName:"ul"},"Number."),(0,l.kt)("li",{parentName:"ul"},"Date."),(0,l.kt)("li",{parentName:"ul"},"RegExp."),(0,l.kt)("li",{parentName:"ul"},"Symbol."),(0,l.kt)("li",{parentName:"ul"},"Error."),(0,l.kt)("li",{parentName:"ul"},"EvalError."),(0,l.kt)("li",{parentName:"ul"},"RangeError."),(0,l.kt)("li",{parentName:"ul"},"ReferenceError."),(0,l.kt)("li",{parentName:"ul"},"SyntaxError."),(0,l.kt)("li",{parentName:"ul"},"TypeError."),(0,l.kt)("li",{parentName:"ul"},"URIError."),(0,l.kt)("li",{parentName:"ul"},"encodeURI."),(0,l.kt)("li",{parentName:"ul"},"encodeURIComponent."),(0,l.kt)("li",{parentName:"ul"},"decodeURI."),(0,l.kt)("li",{parentName:"ul"},"decodeURIComponent."),(0,l.kt)("li",{parentName:"ul"},"eval.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"(function () {\n  // Grab browser's default global variables.\n  const iframe = window.document.createElement('iframe');\n  iframe.src = 'about:blank';\n  window.document.body.appendChild(iframe);\n  const browserGlobals = Object.keys(iframe.contentWindow);\n  window.document.body.removeChild(iframe);\n\n  // Get the global variables added at runtime by filtering out the browser's\n  // default global variables from the current window object.\n  const runtimeGlobals = Object.keys(window).filter(key => {\n    const isFromBrowser = browserGlobals.includes(key);\n    return !isFromBrowser;\n  });\n\n  console.log('Runtime globals', runtimeGlobals);\n})();\n")),(0,l.kt)("h2",{id:"function"},"Function"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u662f\u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u63d0\u4f9b\u5c40\u90e8\u4f5c\u7528\u57df."),(0,l.kt)("li",{parentName:"ul"},"Object \u662f Function \u7684\u5b9e\u4f8b\u5bf9\u8c61, ",(0,l.kt)("strong",{parentName:"li"},"Function.prototype"),"\u662f Object \u7684\u5b9e\u4f8b\u5bf9\u8c61.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const truthy = Object[[proto]] === Function.prototype; // true\nconst truthy = Function[[proto]] === Function.prototype; // true\nconst truthy = Function[[proto]][[proto]] === Object.prototype; // true\n")),(0,l.kt)("h3",{id:"implicit-invocation"},"Implicit Invocation"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Function Invocation")," \u666e\u901a\u8c03\u7528\u6a21\u5f0f: ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u7ed1\u5b9a\u81f3\u5168\u5c40\u5bf9\u8c61/",(0,l.kt)("inlineCode",{parentName:"li"},"undefined")," (",(0,l.kt)("inlineCode",{parentName:"li"},"strict mode"),")",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"setTimeout \u548c setInterval \u4e2d\u4f20\u5165\u7684 Callbacks\n\u4f1a\u81ea\u52a8\u8f6c\u53d8\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"Function Invocation"),",\n",(0,l.kt)("inlineCode",{parentName:"li"},"this")," bind to global/undefined object."),(0,l.kt)("li",{parentName:"ul"},"React Class Component \u4e2d\u4f20\u5165\u7684 Event Handlers\n\u4f1a\u81ea\u52a8\u8f6c\u53d8\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"Function Invocation"),",\n\u9700\u8981\u663e\u5f0f\u5730 ",(0,l.kt)("inlineCode",{parentName:"li"},"this.handleClick = this.handleClick.bind(this);")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Method Invocation")," \u65b9\u6cd5\u8c03\u7528\u6a21\u5f0f: ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u7ed1\u5b9a\u81f3\u6b64\u65b9\u6cd5\u6240\u5c5e\u7684\u5bf9\u8c61.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Non-strict mode:\nwindow.identity = 'The Window';\n\nconst object = {\n  identity: 'My Object',\n  getIdentityFunc() {\n    return function () {\n      return this.identity;\n    };\n  },\n};\n\n// Function invocation:\n// Anonymous closure function `this` bind to `window`.\nconsole.log(object.getIdentityFunc()()); // 'The Window'\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"add(1, 2); // `this` -> `global`\n\nconst obj = {\n  value: 1,\n  foo() {\n    // \u82e5\u4e0d\u5c06 `this` \u8d4b\u503c\u7ed9 `that`, \u800c\u5728\u5185\u90e8\u51fd\u6570\u4e2d\u76f4\u63a5\u4f7f\u7528 `this.value`,\n    // \u5219\u4f1a\u53d1\u751f\u9519\u8bef: \u5185\u90e8\u51fd\u6570\u7684 `this` \u6307\u5411\u5168\u5c40\u5bf9\u8c61\u800c\u4e0d\u662f `obj`.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const that = this;\n\n    function inner() {\n      return that.value;\n    }\n\n    return inner();\n  },\n};\n\nobj.foo(); // 1\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Hero {\n  constructor(heroName) {\n    this.heroName = heroName;\n  }\n\n  logName() {\n    console.log(this.heroName);\n  }\n}\n\nconst batman = new Hero('Batman');\nsetTimeout(batman.logName, 1000);\n// after 1 second logs \"undefined\"\n")),(0,l.kt)("h3",{id:"explicit-invocation"},"Explicit Invocation"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Apply"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"Bind"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"Call")," Invocation:\n\u51fd\u6570\u5f15\u7528\u4e0d\u53ef\u4ee5\u6539\u53d8\u51fd\u6570\u5b9a\u4e49\u4f5c\u7528\u57df (scope), \u4f46\u53ef\u4ee5\u6539\u53d8\u51fd\u6570\u6267\u884c\u4f5c\u7528\u57df (context)."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"this.construct = Foo;\nthis.construct(options);\n// =>\nFoo.call(this, options);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Function.call(contextObj, arg1, arg2, ...)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Function.apply(contextArray, [arg1, arg2, ...]/arguments)")),(0,l.kt)("li",{parentName:"ul"},"call \u6548\u7387\u9ad8\u4e8e apply.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"window.function.call();\nwindow.function.apply();\n// js\u89e3\u91ca\u5668\u4e34\u65f6\u5c06\u6570\u7ec4/\u5b57\u7b26\u4e32\u5305\u88c5\u6210\u5bf9\u8c61\u539f\u578b.\n[].arrayStaticFunction.call();\n[].arrayStaticFunction.apply();\nArray.prototype.arrayStaticFunction.call();\nArray.prototype.arrayStaticFunction.apply();\n''.stringStaticFunction.call();\n''.stringStaticFunction.apply();\nString.prototype.stringStaticFunction.call();\nString.prototype.stringStaticFunction.apply();\n")),(0,l.kt)("p",null,"\u76f8\u5f53\u4e8e:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"context.function(arguments);\n")),(0,l.kt)("h4",{id:"explicit-bind-invocation"},"Explicit Bind Invocation"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Change function runtime context (ignore innovation pattern ",(0,l.kt)("inlineCode",{parentName:"li"},"function/method/new/call/apply"),")."),(0,l.kt)("li",{parentName:"ul"},"Curry function."),(0,l.kt)("li",{parentName:"ul"},"Can't change ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," in arrow function.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const boundFunc = func.bind(context, arg1, arg2, argN);\n")),(0,l.kt)("h4",{id:"explicit-call-and-apply-invocation"},"Explicit Call and Apply Invocation"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function bind(o, m) {\n  return function (...args) {\n    return m.apply(o, args);\n  };\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const one = {\n  name: 'object',\n  say(greet) {\n    return `${greet}, ${this.name}`;\n  },\n};\nconst two = { name: 'another object' };\nconst twoSay = bind(two, one.say);\n\ntwoSay('yo'); // \"yo, another object\"\n")),(0,l.kt)("h3",{id:"constructor-invocation"},"Constructor Invocation"),(0,l.kt)("p",null,"Constructor invocation (",(0,l.kt)("inlineCode",{parentName:"p"},"new")," call):"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u7ed1\u5b9a\u81f3\u4f20\u5165\u7684\u7a7a\u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"new.target")," \u5f15\u7528\u6784\u9020\u51fd\u6570.")),(0,l.kt)("h3",{id:"arrow-function-invocation"},"Arrow Function Invocation"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"No ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," binding (",(0,l.kt)("strong",{parentName:"li"},"lexical scope"),"):",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"this")," defined where arrow function defined (not called)."),(0,l.kt)("li",{parentName:"ul"},"Not suited as method:\n",(0,l.kt)("inlineCode",{parentName:"li"},"this")," in arrow function bound to lexical scope, not bound to method receiver."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"apply"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"call"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"bind")," can't change ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," in arrow function."))),(0,l.kt)("li",{parentName:"ul"},"No ",(0,l.kt)("inlineCode",{parentName:"li"},"arguments")," binding (",(0,l.kt)("strong",{parentName:"li"},"lexical scope"),")."),(0,l.kt)("li",{parentName:"ul"},"Not suited as ",(0,l.kt)("inlineCode",{parentName:"li"},"new")," constructor:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"No ",(0,l.kt)("inlineCode",{parentName:"li"},"super")," binding (",(0,l.kt)("strong",{parentName:"li"},"lexical scope"),")."),(0,l.kt)("li",{parentName:"ul"},"No ",(0,l.kt)("inlineCode",{parentName:"li"},"new.target")," binding (",(0,l.kt)("strong",{parentName:"li"},"lexical scope"),")."))),(0,l.kt)("li",{parentName:"ul"},"No ",(0,l.kt)("inlineCode",{parentName:"li"},"function.prototype"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = {\n  foo() {\n    const inner = () => {\n      return this.value;\n    };\n\n    return inner();\n  },\n};\n\nconst func = obj.foo;\n\nobj.foo(); // `this` in `inner` function refer to `obj`\nfunc(); // `this` in `inner` function refer to `window`\n")),(0,l.kt)("h3",{id:"this-binding-invocation"},"This Binding Invocation"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"function")," Call"),(0,l.kt)("th",{parentName:"tr",align:null},"Method Call"),(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"th"},"new")," Call"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Traditional ",(0,l.kt)("inlineCode",{parentName:"td"},"function")," (sloppy)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"window")),(0,l.kt)("td",{parentName:"tr",align:null},"receiver"),(0,l.kt)("td",{parentName:"tr",align:null},"instance")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Traditional ",(0,l.kt)("inlineCode",{parentName:"td"},"function")," (strict)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},"receiver"),(0,l.kt)("td",{parentName:"tr",align:null},"instance")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Method (sloppy)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"window")),(0,l.kt)("td",{parentName:"tr",align:null},"receiver"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Method (strict)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},"receiver"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Generator ",(0,l.kt)("inlineCode",{parentName:"td"},"function")," (sloppy)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"window")),(0,l.kt)("td",{parentName:"tr",align:null},"receiver"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Generator ",(0,l.kt)("inlineCode",{parentName:"td"},"function")," (strict)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},"receiver"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Generator method (sloppy)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"window")),(0,l.kt)("td",{parentName:"tr",align:null},"receiver"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Generator method (strict)"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"undefined")),(0,l.kt)("td",{parentName:"tr",align:null},"receiver"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Arrow ",(0,l.kt)("inlineCode",{parentName:"td"},"function")),(0,l.kt)("td",{parentName:"tr",align:null},"lexical"),(0,l.kt)("td",{parentName:"tr",align:null},"lexical"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Class"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"TypeError")),(0,l.kt)("td",{parentName:"tr",align:null},"SC protocol")))),(0,l.kt)("h3",{id:"context-and-scope"},"Context and Scope"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u4e0a\u4e0b\u6587\u90fd\u6709\u4e00\u4e2a\u5173\u8054\u7684\u53d8\u91cf\u5bf9\u8c61 (",(0,l.kt)("strong",{parentName:"li"},"Variable Object"),"),\n\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u53d8\u91cf\u548c\u51fd\u6570\u90fd\u5b58\u5728\u4e8e\u8fd9\u4e2a\u5bf9\u8c61\u4e0a."),(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u6267\u884c\u73af\u5883\u62e5\u6709\u72ec\u7acb\u7684\u4f5c\u7528\u57df\u94fe, \u4f8b\u5982\u72ec\u7acb",(0,l.kt)("strong",{parentName:"li"},"\u6d3b\u52a8\u5bf9\u8c61")," -> \u72ec\u7acb\u5168\u5c40\u5bf9\u8c61:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"scope chain")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"(list) [0]\u6d3b\u52a8\u5bf9\u8c61")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"[1]\u5168\u5c40\u5bf9\u8c61"),"."),(0,l.kt)("li",{parentName:"ul"},"ES6 Block Scope -> Function Scope -> Global Scope."))),(0,l.kt)("li",{parentName:"ul"},"\u5168\u5c40\u4e0a\u4e0b\u6587\u4e2d\u5173\u8054\u7684\u53d8\u91cf\u5bf9\u8c61 (",(0,l.kt)("strong",{parentName:"li"},"Variable Object"),"), \u4f1a\u5728\u4ee3\u7801\u6267\u884c\u671f\u95f4\u59cb\u7ec8\u5b58\u5728."),(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u4e0a\u4e0b\u6587\u5c06\u5176\u6d3b\u52a8\u5bf9\u8c61 (",(0,l.kt)("strong",{parentName:"li"},"Activation Object"),") \u7528\u4f5c\u53d8\u91cf\u5bf9\u8c61 (",(0,l.kt)("strong",{parentName:"li"},"Variable Object"),"):",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u6bcf\u6b21\u8fd0\u884c\u65f6,\n\u90fd\u4f1a\u65b0\u5efa\u6267\u884c\u73af\u5883\u4e0a\u4e0b\u6587\u4e0e\u4f5c\u7528\u57df\u94fe,\n\u6267\u884c\u5b8c\u540e\u9500\u6bc1\u4e0a\u4e0b\u6587\u4e0e\u4f5c\u7528\u57df\u94fe."),(0,l.kt)("li",{parentName:"ul"},"\u5b58\u5728\u95ed\u5305\u65f6, \u51fd\u6570\u4e0a\u4e0b\u6587\u5173\u8054\u7684\u4f5c\u7528\u57df\u94fe\u4e2d\u88ab\u5f15\u7528\u7684\u6d3b\u52a8\u5bf9\u8c61\u4e0d\u4f1a\u88ab\u9500\u6bc1."))),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u52a8\u6001\u6539\u53d8\u4f5c\u7528\u57df\u94fe\u7684\u8bed\u53e5:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"with"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"try catch"),": \u5f02\u5e38\u5bf9\u8c61\u5165\u5217, \u4f4d\u4e8e\u4f5c\u7528\u57df\u94fe\u94fe\u9996.")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function createComparisonFunction(propertyName) {\n  return function (object1, object2) {\n    const value1 = object1[propertyName];\n    const value2 = object2[propertyName];\n\n    if (value1 < value2) {\n      return -1;\n    } else if (value1 > value2) {\n      return 1;\n    } else {\n      return 0;\n    }\n  };\n}\n\nconst compare = createComparisonFunction('name');\nconst result = compare({ name: 'Nicholas' }, { name: 'Matt' });\n")),(0,l.kt)("p",null,"\u6267\u884c\u4e0a\u8ff0\u4ee3\u7801\u540e\u7684\u4e0a\u4e0b\u6587\u6808\u4e0e\u4f5c\u7528\u57df\u94fe\u5982\u4e0b\u56fe\u6240\u793a:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Context Stack and Scope Chain",src:t(9103).Z,width:"1383",height:"865"})),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"createComparisonFunction()")," \u7684\u6d3b\u52a8\u5bf9\u8c61\u5e76\u4e0d\u80fd\u5728\u5b83\u6267\u884c\u5b8c\u6bd5\u540e\u9500\u6bc1,\n\u56e0\u4e3a\u533f\u540d\u51fd\u6570\u7684\u4f5c\u7528\u57df\u94fe\u4e2d\u4ecd\u7136\u5b58\u5728\u5bf9\u5b83\u7684\u5f15\u7528.\n\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"createComparisonFunction()")," \u6267\u884c\u5b8c\u6bd5\u540e,\n\u5176\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u4f5c\u7528\u57df\u94fe\u4f1a\u9500\u6bc1,\n\u4f46\u5b83\u7684\u6d3b\u52a8\u5bf9\u8c61\u4ecd\u7136\u4f1a\u4fdd\u7559\u5728\u5185\u5b58\u4e2d,\n\u76f4\u5230\u533f\u540d\u51fd\u6570\u88ab\u9500\u6bc1\u540e\u624d\u4f1a\u88ab\u9500\u6bc1."),(0,l.kt)("h3",{id:"function-name"},"Function Name"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u51fd\u6570\u5bf9\u8c61\u90fd\u4f1a\u66b4\u9732\u4e00\u4e2a\u53ea\u8bfb\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"name")," \u5c5e\u6027, \u5176\u4e2d\u5305\u542b\u5173\u4e8e\u51fd\u6570\u7684\u4fe1\u606f."),(0,l.kt)("li",{parentName:"ul"},"The spec operation\n",(0,l.kt)("a",{parentName:"li",href:"https://tc39.es/ecma262/multipage/ordinary-and-exotic-objects-behaviours.html#sec-setfunctionname"},(0,l.kt)("inlineCode",{parentName:"a"},"SetFunctionName(F, name, [, prefix])")),"\nsets up function ",(0,l.kt)("inlineCode",{parentName:"li"},"name"),":",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Getters and setters get prefixes ",(0,l.kt)("inlineCode",{parentName:"li"},"get")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"set"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Function.prototype.bind()")," get prefix ",(0,l.kt)("inlineCode",{parentName:"li"},"bound"),"."),(0,l.kt)("li",{parentName:"ul"},"Function declaration name are set up when entering a scope (hoisted)."),(0,l.kt)("li",{parentName:"ul"},"Named function expression name are set up via ",(0,l.kt)("inlineCode",{parentName:"li"},"SetFunctionName()"),"."),(0,l.kt)("li",{parentName:"ul"},"Arrow function and anonymous function expression name aren't set up\n(",(0,l.kt)("inlineCode",{parentName:"li"},"SetFunctionName()")," is not invoked).")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function foo() {}\nconst bar = function () {};\nconst baz = () => {};\n\nconsole.log(foo.name); // foo\nconsole.log(bar.name); // bar\nconsole.log(baz.name); // baz\nconsole.log((() => {}).name); // (\u7a7a\u5b57\u7b26\u4e32)\n// eslint-disable-next-line no-new-func\nconsole.log(new Function().name); // anonymous\nconsole.log(foo.bind(null).name); // bound foo\n\nconst dog = {\n  years: 1,\n\n  get age() {\n    return this.years;\n  },\n\n  set age(newAge) {\n    this.years = newAge;\n  },\n};\n\nconst propertyDescriptor = Object.getOwnPropertyDescriptor(dog, 'age');\nconsole.log(propertyDescriptor.get.name); // get age\nconsole.log(propertyDescriptor.set.name); // set age\n")),(0,l.kt)("h3",{id:"function-prototype"},"Function Prototype"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u5b9e\u4f8b\u5316\u5bf9\u8c61\u6ca1\u6709 prototype \u5c5e\u6027"),"."),(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u51fd\u6570\u90fd\u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"prototype")," \u5c5e\u6027."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"prototype")," \u5c5e\u6027\u6307\u5411\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61 (\u7531 JS \u5f15\u64ce\u81ea\u52a8\u521b\u5efa)."),(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u51fd\u6570\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"__proto__")," \u90fd\u6307\u5411 ",(0,l.kt)("inlineCode",{parentName:"li"},"Function.prototype"),".")),(0,l.kt)("h3",{id:"function-arguments"},"Function Arguments"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u7684\u53c2\u6570\u5728\u5185\u90e8\u8868\u73b0\u4e3a\u4e00\u4e2a\u6570\u7ec4:\n\u51fd\u6570\u4e0d\u5173\u5fc3\u53c2\u6570\u4e2a\u6570\u4e0e\u53c2\u6570\u7c7b\u578b, \u4e0d\u5b58\u5728\u9a8c\u8bc1\u547d\u540d\u53c2\u6570\u7684\u673a\u5236."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"arguments")," \u4e0d\u662f\u771f\u6b63\u7684\u6570\u7ec4, \u4f46\u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"length")," \u5c5e\u6027 (\u5b9e\u53c2\u4e2a\u6570).")),(0,l.kt)("h4",{id:"arguments-callee"},"Arguments Callee"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5f15\u7528 arguments \u6240\u5c5e function, \u53ef\u4ee5\u5229\u7528 callee \u5b9e\u73b0\u533f\u540d\u9012\u5f52\u51fd\u6570."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"arguments.callee.length"),": \u5373 ",(0,l.kt)("inlineCode",{parentName:"li"},"function.length"),", \u5f62\u53c2\u4e2a\u6570."),(0,l.kt)("li",{parentName:"ul"},"\u4e25\u683c\u6a21\u5f0f\u4e0b\u7981\u6b62\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"arguments.callee"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"try {\n  // eslint-disable-next-line no-caller\n  if (arguments.length !== arguments.callee.length) {\n    throw new Error('\u4f20\u9012\u7684\u53c2\u6570\u4e2a\u6570\u4e0d\u5339\u914d');\n  }\n} catch (err) {\n  console.log(err);\n  return this;\n}\n")),(0,l.kt)("h3",{id:"function-parameters"},"Function Parameters"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u51fd\u6570\u53c2\u6570\u90fd\u662f\u6309\u503c\u4f20\u9012 (\u590d\u5236\u539f\u5b50\u503c/\u5f15\u7528\u503c)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"function.length"),":\n",(0,l.kt)("strong",{parentName:"li"},"number of parameters")," before the first one with a default value."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u65e0\u526f\u4f5c\u7528"),"\u7684\u51fd\u6570: \u6ce8\u610f\u662f\u5426\u9700\u8981\u62f7\u8d1d\u4f20\u5165\u5bf9\u8c61, \u4f7f\u539f\u6709\u5bf9\u8c61\u4e0d\u53d7\u51fd\u6570\u5f71\u54cd, \u5e76\u8fd4\u56de\u65b0\u5bf9\u8c61.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = {\n  value: 2,\n};\n\nfunction setValueEffect(obj, val) {\n  obj.value = val;\n  return obj;\n}\n\nfunction setValuePure(obj, val) {\n  const instance = extend({}, obj, { value: val });\n  return instance;\n}\n")),(0,l.kt)("p",null,"\u9ed8\u8ba4\u53c2\u6570:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528\u539f\u5b50\u503c/\u5bf9\u8c61\u503c/\u51fd\u6570\u8fd4\u56de\u503c."),(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u8c03\u7528\u4e14\u672a\u4f20\u53c2\u65f6, \u9ed8\u8ba4\u53c2\u6570\u624d\u4f1a\u8fdb\u884c\u6c42\u503c."),(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u53c2\u6570\u6309\u7167\u4ece\u5de6\u5f80\u53f3\u7684\u987a\u5e8f\u8fdb\u884c\u6c42\u503c.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Mark required parameters via a function that throws an exception\nfunction foo(required = throwException()) {}\n\n// Enforcing a maximum parameters\nfunction f(x, y, ...empty) {\n  if (empty.length > 0) {\n    throw new Error('Redundant parameters!');\n  }\n}\n")),(0,l.kt)("h3",{id:"function-declaration"},"Function Declaration"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u58f0\u660e\u63d0\u5347: \u51fd\u6570\u58f0\u660e\u4f1a\u5728\u4ee3\u7801\u6267\u884c\u4e4b\u524d\u83b7\u5f97\u5b9a\u4e49.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"console.log(foo.name);\n\n// Function Declaration \u51fd\u6570\u58f0\u660e:\nfunction foo() {}\n\nconst obj = {\n  say: function say() {},\n};\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u58f0\u660e\u5bf9\u4e8e\u51fd\u6570\u5185\u90e8\u800c\u8a00\u65e0\u6cd5\u4fee\u6539:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const b = 10;\n(function b() {\n  // eslint-disable-next-line no-func-assign\n  b = 20;\n  console.log(b);\n})();\n\n// print out function b { ... }\n")),(0,l.kt)("h3",{id:"function-expression"},"Function Expression"),(0,l.kt)("p",null,"\u4efb\u4f55\u65f6\u5019,\n\u53ea\u8981\u51fd\u6570\u88ab\u5f53\u4f5c\u503c\u6765\u4f7f\u7528,\n\u5b83\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\u8868\u8fbe\u5f0f:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u51fd\u6570\u8868\u8fbe\u5f0f:\nconst foo = function foo() {};\n\n// `function f() {}` \u662f\u547d\u540d\u51fd\u6570\u8868\u8fbe\u5f0f:\nconst factorial = function f(num) {\n  if (num <= 1) {\n    return 1;\n  } else {\n    return num * f(num - 1);\n  }\n};\n")),(0,l.kt)("p",null,"The name ",(0,l.kt)("inlineCode",{parentName:"p"},"funcExpr")," only exists inside the function body:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const func = function funcExpr() {\n  return funcExpr;\n};\n\nassert.equal(func(), func);\nassert.throws(() => funcExpr(), ReferenceError);\n")),(0,l.kt)("h3",{id:"immediately-invoked-function-expression"},"Immediately Invoked Function Expression"),(0,l.kt)("h4",{id:"iife-pattern"},"IIFE Pattern"),(0,l.kt)("p",null,"\u7acb\u5373\u51fd\u6570\u6a21\u5f0f, \u901a\u8fc7\u8c03\u7528\u7acb\u5373\u533f\u540d\u51fd\u6570,\n\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61, \u66b4\u9732\u516c\u5171\u63a5\u53e3 (Exposed to Public):"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"IIFE Syntax:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u8868\u8fbe\u5f0f."),(0,l.kt)("li",{parentName:"ul"},"\u672b\u5c3e\u6dfb\u52a0\u62ec\u53f7(\u4f20\u53c2), \u4f7f\u51fd\u6570\u7acb\u5373\u6267\u884c."),(0,l.kt)("li",{parentName:"ul"},"\u5c06\u6574\u4e2a\u51fd\u6570\u7f6e\u4e8e\u62ec\u53f7\u5185."))),(0,l.kt)("li",{parentName:"ul"},"\u95ed\u5305: \u5b9a\u4e49\u79c1\u6709\u53d8\u91cf\u4e0e\u7279\u6743\u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u5bf9\u8c61: \u5373\u4f7f\u901a\u8fc7\u5916\u90e8\u4ee3\u7801\u6539\u53d8\u8fd4\u56de\u5bf9\u8c61\u7684\u63a5\u53e3, \u4e5f\u4e0d\u4f1a\u5f71\u54cd\u539f\u63a5\u53e3.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"(function () {\n  console.log('watch out');\n})();\n")),(0,l.kt)("h4",{id:"iife-return-value"},"IIFE Return Value"),(0,l.kt)("p",null,"Left hand side \u4e0d\u88ab\u8d4b\u4e88 function \u503c, \u800c\u88ab\u8d4b\u4e88\u51fd\u6570\u6267\u884c\u540e\u7684\u8fd4\u56de\u503c:\n\u6b64\u8fd4\u56de\u503c\u53ef\u8bbe\u4e3a\u51fd\u6570, \u53ef\u4ea7\u751f\u95ed\u5305."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const getResult = (function () {\n  const res = 2 + 2;\n  return function () {\n    return res;\n  };\n})();\n")),(0,l.kt)("h4",{id:"iife-usage"},"IIFE Usage"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u5f97\u533f\u540d\u51fd\u6570\u5185\u90e8\u7684\u4ee3\u7801\u80fd\u591f\u7acb\u5373\u6267\u884c."),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u6cc4\u6f0f\u53ea\u4f7f\u7528\u4e00\u6b21\u7684\u5c40\u90e8\u53d8\u91cf\u4e0e\u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u547d\u540d\u7a7a\u95f4, \u9632\u6b62\u53d8\u91cf\u547d\u540d\u51b2\u7a81.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = (function () {\n  // private member\n  let name = 'tazimi';\n\n  // private method\n  // excluded in return object\n\n  // privileged method\n  function getName() {\n    return name;\n  }\n\n  function setName(n) {\n    if (typeof n === 'string') {\n      name = n;\n    }\n    return this;\n  }\n\n  // public method\n  function logName() {\n    console.log(name);\n  }\n\n  // \u95ed\u5305\n  // \u516c\u5171\u63a5\u53e3: \u7279\u6743/\u516c\u5171\u65b9\u6cd5\n  return {\n    // \u7279\u6743\u65b9\u6cd5\n    getName,\n    setName,\n\n    // \u516c\u5171\u65b9\u6cd5\n    log: logName,\n  };\n})();\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const App = App || {};\nApp.utils = {};\n\n(function () {\n  let val = 5;\n\n  this.getValue = function () {\n    return val;\n  };\n\n  this.setValue = function (newVal) {\n    val = newVal;\n  };\n\n  // also introduce a new sub-namespace\n  this.tools = {};\n}.apply(App.utils));\n\n// inject new behavior into the tools namespace\n// which we defined via the utilities module\n\n(function () {\n  this.diagnose = function () {\n    return 'diagnosis';\n  };\n}.apply(App.utils.tools));\n")),(0,l.kt)("h3",{id:"tail-call-optimization"},"Tail Call Optimization"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Tail call optimization only work in strict mode\ndue to ",(0,l.kt)("inlineCode",{parentName:"li"},"func.arguments")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"func.caller")," (forbidden in strict mode):\n",(0,l.kt)("inlineCode",{parentName:"li"},"func.arguments")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"func.caller")," will reference outer function stack frame,\nso can't reduce outer function stack frame."),(0,l.kt)("li",{parentName:"ul"},"Tail call optimization reduce function stack frame.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Following function is not tail recursive:\nfunction factorial(x) {\n  if (x <= 0) {\n    return 1;\n  } else {\n    return x * factorial(x - 1); // (A): Not tail position.\n  }\n}\n\nfunction factorial(n) {\n  return facRec(n, 1);\n}\n\n// Following function is tail recursive:\nfunction facRec(x, acc) {\n  if (x <= 1) {\n    return acc;\n  } else {\n    return facRec(x - 1, x * acc); // (A): Tail position.\n  }\n}\n")),(0,l.kt)("h3",{id:"closure"},"Closure"),(0,l.kt)("p",null,"Closure is a ",(0,l.kt)("strong",{parentName:"p"},"function"),"\nthat remembers the variables from the place where it is defined (lexical scope),\nregardless of where it is executed later:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u5916\u90e8\u4e0d\u53ef\u5bf9\u51fd\u6570\u5185\u90e8\u8fdb\u884c\u8d4b\u503c\u6216\u5f15\u7528."),(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u4e2d\u7684\u95ed\u5305\u51fd\u6570\u53ef\u5bf9\u51fd\u6570\u8fdb\u884c\u8d4b\u503c\u6216\u5f15\u7528 (\u51fd\u6570\u5bf9\u4e8e\u95ed\u5305\u6765\u8bf4\u662f\u5916\u90e8, \u5373\u5185\u90e8\u5f15\u7528\u5916\u90e8)."),(0,l.kt)("li",{parentName:"ul"},"\u7279\u6743\u6027\u8d28 (Private Getter): \u4ece\u5916\u90e8\u901a\u8fc7\u95ed\u5305\u65b9\u6cd5\u8bbf\u95ee\u5185\u90e8 (\u51fd\u6570\u4f5c\u7528\u57df) \u5c40\u90e8\u53d8\u91cf."),(0,l.kt)("li",{parentName:"ul"},"Local Scope -> Outer Functions Scope -> Global Scope.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// global scope\nconst e = 10;\n\nfunction sum(a) {\n  return function (b) {\n    return function (c) {\n      // outer functions scope\n      return function (d) {\n        // local scope\n        return a + b + c + d + e;\n      };\n    };\n  };\n}\n\nconsole.log(sum(1)(2)(3)(4)); // log 20\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// BAD\nfunction MyObject(name, message) {\n  this.name = name.toString();\n  this.message = message.toString();\n  this.getName = function () {\n    return this.name;\n  };\n\n  this.getMessage = function () {\n    return this.message;\n  };\n}\n\n// GOOD: avoid unnecessary\nfunction MyObject(name, message) {\n  this.name = name.toString();\n  this.message = message.toString();\n}\nMyObject.prototype.getName = function () {\n  return this.name;\n};\nMyObject.prototype.getMessage = function () {\n  return this.message;\n};\n")),(0,l.kt)("h4",{id:"closure-structure"},"Closure Structure"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f18\u5148\u7ea7: this > \u5c40\u90e8\u53d8\u91cf > \u5f62\u53c2 > arguments > \u51fd\u6570\u540d."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"innerFunc()")," has access to ",(0,l.kt)("inlineCode",{parentName:"li"},"outerVar")," from its lexical scope,\neven being ",(0,l.kt)("strong",{parentName:"li"},"executed outside of its lexical scope"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function outerFunc() {\n  const outerVar = 'I am outside!';\n\n  function innerFunc() {\n    console.log(outerVar); // => logs \"I am outside!\"\n  }\n\n  return innerFunc;\n}\n\nconst myInnerFunc = outerFunc();\nmyInnerFunc();\n")),(0,l.kt)("h4",{id:"closure-usage"},"Closure Usage"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u95ed\u5305\u5b9e\u73b0\u5c01\u88c5."),(0,l.kt)("li",{parentName:"ul"},"\u95ed\u5305\u5b9e\u73b0\u79c1\u6709\u5c5e\u6027\u4e0e\u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},"\u95ed\u5305\u5b9e\u73b0\u5de5\u5382\u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},"\u95ed\u5305\u5b9e\u73b0\u5bf9\u8c61\u7f13\u5b58.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const createLoginLayer = (function (creator) {\n  let singleton;\n\n  return function () {\n    if (!singleton) singleton = creator();\n    return singleton;\n  };\n})(loginCreator);\n")),(0,l.kt)("h3",{id:"callback-function"},"Callback Function"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// check if callback is callable\nif (typeof callback !== 'function') {\n  callback = false;\n}\n\n// now callback:\nif (callback) {\n  callback();\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const findNodes = function (callback) {\n  let i = 100000;\n  const nodes = [];\n  let found;\n\n  // check if callback is callable\n  if (typeof callback !== 'function') {\n    callback = false;\n  }\n\n  while (i) {\n    i -= 1;\n\n    // now callback:\n    if (callback) {\n      callback(found);\n    }\n\n    nodes.push(found);\n  }\n\n  return nodes;\n};\n")),(0,l.kt)("p",null,"\u5f53\u56de\u8c03\u51fd\u6570\u4e3a\u5bf9\u8c61\u65b9\u6cd5\u65f6 (\u7279\u522b\u65f6\u65b9\u6cd5\u4e2d\u4f7f\u7528 this \u6307\u9488),\n\u9700\u540c\u65f6\u4f20\u5165\u5bf9\u8c61\u53c2\u6570,\n\u5e76\u5229\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"apply/call")," \u6539\u53d8\u6267\u884c\u73af\u5883."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const findNodes = function (callbackObj, callback) {\n  if (typeof callback === 'function') {\n    callback.call(callbackObj, found);\n  }\n};\n\nconst findNodes = function (callbackObj, callback) {\n  if (typeof callback === 'string') {\n    callback = callbackObj[callback];\n  }\n\n  if (typeof callback === 'function') {\n    callback.call(callbackObj, found);\n  }\n};\n")),(0,l.kt)("h3",{id:"lazy-function-definition"},"Lazy Function Definition"),(0,l.kt)("p",null,"Lazy Function Definition (Self-Defining Function):"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u6b21\u6267\u884c\u65f6,\u8fdb\u884c\u521d\u59cb\u5316\u5e76\u91cd\u65b0\u5b9a\u4e49\u51fd\u6570\u53d8\u91cf."),(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u6b21\u6267\u884c\u65f6,\u4e0d\u518d\u8fdb\u884c\u521d\u59cb\u5316(\u51fd\u6570\u88ab\u91cd\u5b9a\u4e49\u81f3\u771f\u6b63\u51fd\u6570)."),(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u6b21\u6267\u884c\u4e3a promise, \u5c06\u91cd\u590d\u4f7f\u7528\u7684\u90e8\u5206\u8fdb\u884c\u521d\u59cb\u5316, \u4e4b\u540e\u7684\u8c03\u7528\u4e0d\u518d\u6d6a\u8d39\u65b0\u7a7a\u95f4, ",(0,l.kt)("strong",{parentName:"li"},"\u63d0\u5347\u6027\u80fd"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// definition\nlet foo = function () {\n  // initialize code;\n  const t = new Date();\n\n  foo = function () {\n    return t;\n  };\n\n  // \u4f7f\u5f97\u7b2c\u4e00\u6b21\u8c03\u7528\u53ef\u4ee5\u4ea7\u751f\u9884\u671f\u503c,\u4fdd\u8bc1\u6bcf\u6b21\u8c03\u7528\u7684\u884c\u4e3a\u4fdd\u6301\u4e00\u81f4\n  return foo();\n};\n\n// first run: same behavior as second run\nconsole.log(foo()); // t\n// second run\nconsole.log(foo()); // t\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let addEvent = function (el, type, handle) {\n  addEvent = el.addEventListener\n    ? function (el, type, handle) {\n        el.addEventListener(type, handle, false);\n      }\n    : function (el, type, handle) {\n        el.attachEvent(`on${type}`, handle);\n      };\n\n  // \u4fdd\u6301\u6bcf\u6b21\u8c03\u7528\u5bf9\u5916\u8868\u73b0\u884c\u4e3a\u4e00\u81f4\n  addEvent(el, type, handle);\n};\n")),(0,l.kt)("h3",{id:"polymorphism-function"},"Polymorphism Function"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const greet = function greet(options, ...rest) {\n  // \u8fd0\u7528 if/switch \u65b9\u6cd5\u5206\u60c5\u51b5\u8c03\u7528\u51fd\u6570, \u5b9e\u73b0\u591a\u6001\u65b9\u6cd5.\n  if (typeof options === 'string' && typeof methods[options] === 'function') {\n    // \u65b9\u6cd5\u96c6\u4e2d\u542b\u6709\u6b64\u65b9\u6cd5:\n    return methods[options](...rest);\n  }\n};\n")),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u591a\u6001\u4e0e\u9762\u5411\u5bf9\u8c61")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u591a\u6001\u6700\u6839\u672c\u7684\u4f5c\u7528:\n\u901a\u8fc7\u628a\u8fc7\u7a0b\u5316\u7684\u6761\u4ef6\u5206\u652f\u8bed\u53e5\u8f6c\u5316\u4e3a\u5bf9\u8c61\u7684\u591a\u6001\u6027,\n\u4ece\u800c\u6d88\u9664\u6761\u4ef6\u5206\u652f\u8bed\u53e5."),(0,l.kt)("p",{parentName:"div"},"\u6bcf\u4e2a\u5bf9\u8c61\u7684\u804c\u8d23, \u6210\u4e3a\u8be5\u5bf9\u8c61\u7684\u5c5e\u6027\u4e0e\u65b9\u6cd5,\n\u88ab\u5b89\u88c5\u5728\u5bf9\u8c61\u5185\u90e8, \u6bcf\u4e2a\u5bf9\u8c61\u8d1f\u8d23\u5b83\u4eec\u81ea\u5df1\u7684\u884c\u4e3a.\n\u8fd9\u4e9b\u5bf9\u8c61\u53ef\u4ee5\u6839\u636e\u540c\u4e00\u4e2a\u6d88\u606f, \u6709\u6761\u4e0d\u7d0a\u5730\u5206\u522b\u8fdb\u884c\u5404\u81ea\u7684\u5de5\u4f5c."))),(0,l.kt)("h3",{id:"eval-function"},"Eval Function"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u8981\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"eval()"),"\u51fd\u6570"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u8981\u4f7f\u7528\u5b57\u7b26\u4e32\u4f5c\u53c2\u6570 new Function();(\u4f1a\u8c03\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"eval"),"\u51fd\u6570)"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u8981\u4f7f\u7528\u5b57\u7b26\u4e32\u4f5c",(0,l.kt)("inlineCode",{parentName:"li"},"setTimeOut"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"setInterval"),"\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570(\u4f1a\u8c03\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"eval"),"\u51fd\u6570)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Anti-pattern:\nconst property = 'name';\n// eslint-disable-next-line no-eval\nalert(eval(`obj.${property}`));\n// Preferred:\nconst property = 'name';\nalert(obj[property]);\n\n// Anti-pattern:\n// eslint-disable-next-line no-implied-eval\nsetTimeout('myFunc()', 1000);\n// eslint-disable-next-line no-implied-eval\nsetTimeout('myFunc(1, 2, 3)', 1000);\n// Preferred:\nsetTimeout(myFunc, 1000);\nsetTimeout(function () {\n  myFunc(1, 2, 3);\n}, 1000);\n")),(0,l.kt)("h2",{id:"iterator"},"Iterator"),(0,l.kt)("h3",{id:"iteration-protocol"},"Iteration Protocol"),(0,l.kt)("p",null,"Iteration ",(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols"},"protocol"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u53ea\u8981\u5b9e\u73b0\u4e86 ",(0,l.kt)("inlineCode",{parentName:"li"},"[Symbol.iterator]()")," \u63a5\u53e3, \u4fbf\u53ef\u6210\u4e3a\u53ef\u8fed\u4ee3\u6570\u636e\u7ed3\u6784 (",(0,l.kt)("inlineCode",{parentName:"li"},"Iterable"),"):",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"String: ",(0,l.kt)("inlineCode",{parentName:"li"},"StringIterator"),"."),(0,l.kt)("li",{parentName:"ul"},"Array: ",(0,l.kt)("inlineCode",{parentName:"li"},"ArrayIterator"),"."),(0,l.kt)("li",{parentName:"ul"},"Map: ",(0,l.kt)("inlineCode",{parentName:"li"},"MapIterator"),"."),(0,l.kt)("li",{parentName:"ul"},"Set: ",(0,l.kt)("inlineCode",{parentName:"li"},"SetIterator"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"arguments")," \u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},"DOM collection (",(0,l.kt)("inlineCode",{parentName:"li"},"NodeList"),"): ",(0,l.kt)("inlineCode",{parentName:"li"},"ArrayIterator"),"."))),(0,l.kt)("li",{parentName:"ul"},"\u63a5\u6536\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u539f\u751f\u8bed\u8a00\u7279\u6027:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"for...in"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"for...of"),"."),(0,l.kt)("li",{parentName:"ul"},"Destructing: \u6570\u7ec4\u89e3\u6784."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"..."),": \u6269\u5c55\u64cd\u4f5c\u7b26 (",(0,l.kt)("inlineCode",{parentName:"li"},"Spread Operator"),")."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Array.from()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"new Map()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"new Set()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.all()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.race()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"yield *")," \u64cd\u4f5c\u7b26."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"for...in"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"for...of")," \u9690\u5f62\u8c03\u7528\u8fed\u4ee3\u5668\u7684\u65b9\u5f0f, \u79f0\u4e3a\u5185\u90e8\u8fed\u4ee3\u5668, \u4f7f\u7528\u65b9\u4fbf, \u4e0d\u53ef\u81ea\u5b9a\u4e49\u8fed\u4ee3\u8fc7\u7a0b."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"{ next, done, value }")," \u663e\u5f0f\u8c03\u7528\u8fed\u4ee3\u5668\u7684\u65b9\u5f0f, \u79f0\u4e3a\u5916\u90e8\u8fed\u4ee3\u5668, \u4f7f\u7528\u590d\u6742, \u53ef\u4ee5\u81ea\u5b9a\u4e49\u8fed\u4ee3\u8fc7\u7a0b."),(0,l.kt)("li",{parentName:"ul"},"All built-in ES6 iterators are ",(0,l.kt)("inlineCode",{parentName:"li"},"Self Iterable Iterator"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface Iterable<T> {\n  [Symbol.iterator](): Iterator<T>;\n}\n\ninterface Iterator<T> {\n  next(...args: []): IteratorResult<T>;\n  return?(value?: T): IteratorResult<T>; // Closable iterator\n  throw?(e?: any): IteratorResult<T>;\n}\n\ninterface IterableIterator<T> extends Iterator<T> {\n  [Symbol.iterator](): IterableIterator<T>;\n}\n\ninterface AsyncIterable<T> {\n  [Symbol.asyncIterator](): AsyncIterator<T>;\n}\n\ninterface AsyncIterator<T> {\n  next(...args: []): Promise<IteratorResult<T>>;\n  return?(value?: T | PromiseLike<T>): Promise<IteratorResult<T>>; // Closable iterator\n  throw?(e?: any): Promise<IteratorResult<T>>;\n}\n\ninterface AsyncIterableIterator<T> extends AsyncIterator<T> {\n  [Symbol.asyncIterator](): AsyncIterableIterator<T>;\n}\n\ninterface IteratorResult<T> {\n  done: boolean;\n  value: T;\n}\n")),(0,l.kt)("h3",{id:"synchronous-iterator"},"Synchronous Iterator"),(0,l.kt)("h4",{id:"iterable-object"},"Iterable Object"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function methodsIterator() {\n  let index = 0;\n  const methods = Object.keys(this)\n    .filter(key => {\n      return typeof this[key] === 'function';\n    })\n    .map(key => this[key]);\n\n  // iterator object\n  return {\n    next: () => ({\n      // Conform to Iterator protocol\n      done: index >= methods.length,\n      value: methods[index++],\n    }),\n  };\n}\n\nconst myMethods = {\n  toString() {\n    return '[object myMethods]';\n  },\n  sumNumbers(a, b) {\n    return a + b;\n  },\n  numbers: [1, 5, 6],\n  [Symbol.iterator]: methodsIterator, // Conform to Iterable Protocol\n};\n\nfor (const method of myMethods) {\n  console.log(method); // logs methods `toString` and `sumNumbers`\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function zip(...iterables) {\n  const iterators = iterables.map(i => i[Symbol.iterator]());\n  let done = false;\n\n  return {\n    [Symbol.iterator]() {\n      return this;\n    },\n    next() {\n      if (!done) {\n        const items = iterators.map(i => i.next());\n        done = items.some(item => item.done);\n\n        if (!done) {\n          return { value: items.map(i => i.value) };\n        }\n\n        // Done for the first time: close all iterators\n        for (const iterator of iterators) {\n          if (typeof iterator.return === 'function') {\n            iterator.return();\n          }\n        }\n      }\n\n      // We are done\n      return { done: true };\n    },\n  };\n}\n\nconst zipped = zip(['a', 'b', 'c'], ['d', 'e', 'f', 'g']);\n\nfor (const x of zipped) {\n  console.log(x);\n}\n// Output:\n// ['a', 'd']\n// ['b', 'e']\n// ['c', 'f']\n")),(0,l.kt)("h4",{id:"iterable-class"},"Iterable Class"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Counter {\n  constructor(limit) {\n    this.limit = limit;\n  }\n\n  [Symbol.iterator]() {\n    let count = 1;\n    const limit = this.limit;\n\n    return {\n      next() {\n        if (count <= limit) {\n          return { done: false, value: count++ };\n        } else {\n          return { done: true };\n        }\n      },\n      return() {\n        console.log('Exiting early');\n        return { done: true };\n      },\n    };\n  }\n}\n\nconst counter1 = new Counter(5);\nfor (const i of counter1) {\n  if (i > 2) {\n    break;\n  }\n  console.log(i);\n}\n// 1\n// 2\n// Exiting early\n\nconst counter2 = new Counter(5);\ntry {\n  for (const i of counter2) {\n    if (i > 2) {\n      throw new Error('err');\n    }\n\n    console.log(i);\n  }\n} catch (e) {}\n// 1\n// 2\n// Exiting early\n\nconst counter3 = new Counter(5);\nconst [a, b] = counter3;\n// Exiting early\n")),(0,l.kt)("h4",{id:"class-iterator"},"Class Iterator"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Class Iterator:\nclass MatrixIterator {\n  constructor(matrix) {\n    this.x = 0;\n    this.y = 0;\n    this.matrix = matrix;\n  }\n\n  next() {\n    if (this.y === this.matrix.height) return { done: true };\n\n    const value = {\n      x: this.x,\n      y: this.y,\n      value: this.matrix.get(this.x, this.y),\n    };\n\n    this.x++;\n\n    if (this.x === this.matrix.width) {\n      this.x = 0;\n      this.y++;\n    }\n\n    return { value, done: false };\n  }\n}\n\n// Iterable Class:\nclass Matrix {\n  constructor(width, height, element = (x, y) => undefined) {\n    this.width = width;\n    this.height = height;\n    this.content = [];\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        this.content[y * width + x] = element(x, y);\n      }\n    }\n  }\n\n  get(x, y) {\n    return this.content[y * this.width + x];\n  }\n\n  set(x, y, value) {\n    this.content[y * this.width + x] = value;\n  }\n\n  [Symbol.iterator]() {\n    return new MatrixIterator(this);\n  }\n}\n\nconst matrix = new Matrix(2, 2, (x, y) => `value ${x},${y}`);\n\nfor (const { x, y, value } of matrix) {\n  console.log(x, y, value);\n}\n// \u2192 0 0 value 0, 0\n// \u2192 1 0 value 1, 0\n// \u2192 0 1 value 0, 1\n// \u2192 1 1 value 1, 1\n")),(0,l.kt)("h3",{id:"asynchronous-iterator"},"Asynchronous Iterator"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const AsyncIterable = {\n  [Symbol.asyncIterator]() {\n    return AsyncIterator;\n  },\n};\n\nconst AsyncIterator = {\n  next() {\n    return Promise.resolve(IteratorResult);\n  },\n  return() {\n    return Promise.resolve(IteratorResult);\n  },\n  throw(e) {\n    return Promise.reject(e);\n  },\n};\n\nconst IteratorResult = {\n  value: any,\n  done: boolean,\n};\n\n// Tasks will chained:\nait\n  .next()\n  .then(({ value, done }) => ait.next())\n  .then(({ value, done }) => ait.next())\n  .then(({ done }) => done);\n\n// Tasks will run in parallel:\nait.next().then();\nait.next().then();\nait.next().then();\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function remotePostsAsyncIteratorsFactory() {\n  let i = 1;\n  let done = false;\n\n  const asyncIterableIterator = {\n    // the next method will always return a Promise\n    async next() {\n      // do nothing if we went out-of-bounds\n      if (done) {\n        return Promise.resolve({\n          done: true,\n          value: undefined,\n        });\n      }\n\n      const res = await fetch(\n        `https://jsonplaceholder.typicode.com/posts/${i++}`\n      ).then(r => r.json());\n\n      // the posts source is ended\n      if (Object.keys(res).length === 0) {\n        done = true;\n        return Promise.resolve({\n          done: true,\n          value: undefined,\n        });\n      } else {\n        return Promise.resolve({\n          done: false,\n          value: res,\n        });\n      }\n    },\n    [Symbol.asyncIterator]() {\n      return this;\n    },\n  };\n\n  return asyncIterableIterator;\n}\n\n(async () => {\n  const ait = remotePostsAsyncIteratorsFactory();\n\n  await ait.next(); // { done:false, value:{id: 1, ...} }\n  await ait.next(); // { done:false, value:{id: 2, ...} }\n  await ait.next(); // { done:false, value:{id: 3, ...} }\n  // ...\n  await ait.next(); // { done:false, value:{id: 100, ...} }\n  await ait.next(); // { done:true, value:undefined }\n})();\n")),(0,l.kt)("h3",{id:"closable-iterator"},"Closable Iterator"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"An iterator is closable if it has a method ",(0,l.kt)("inlineCode",{parentName:"li"},"return()"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface ClosableIterator {\n  next(): IteratorResult;\n  return(value?: any): IteratorResult;\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Not all iterators are closable: e.g ",(0,l.kt)("inlineCode",{parentName:"li"},"Array Iterator"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const iterable = ['a', 'b', 'c'];\nconst iterator = iterable[Symbol.iterator]();\nconsole.log('return' in iterator);\n// => false\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If an iterator is not closable,\nyou can continue iterating over it after an abrupt exit."),(0,l.kt)("li",{parentName:"ul"},"If an iterator is closable,\nyou can't continue iterating over it after an abrupt exit.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* elements() {\n  yield 'a';\n  yield 'b';\n  yield 'c';\n}\n\nfunction twoLoops(iterator) {\n  // eslint-disable-next-line no-unreachable-loop\n  for (const x of iterator) {\n    console.log(x);\n    break;\n  }\n\n  for (const x of iterator) {\n    console.log(x);\n  }\n}\n\nclass PreventReturn {\n  constructor(iterator) {\n    this.iterator = iterator;\n  }\n\n  [Symbol.iterator]() {\n    return this;\n  }\n\n  next() {\n    return this.iterator.next();\n  }\n\n  return(value = undefined) {\n    return { done: false, value };\n  }\n}\n\ntwoLoops(elements());\n// Output:\n// a\n\ntwoLoops(new PreventReturn(elements()));\n// Output:\n// a\n// b\n// c\n\ntwoLoops(['a', 'b', 'c'][Symbol.iterator]());\n// Output:\n// a\n// b\n// c\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Manually call ",(0,l.kt)("inlineCode",{parentName:"li"},"iterator.return()"),":")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function take(n, iterable) {\n  const iter = iterable[Symbol.iterator]();\n\n  return {\n    [Symbol.iterator]() {\n      return this;\n    },\n    next() {\n      if (n > 0) {\n        n--;\n        return iter.next();\n      } else {\n        iter?.return();\n        return { done: true };\n      }\n    },\n    return() {\n      n = 0;\n      iter?.return();\n    },\n  };\n}\n")),(0,l.kt)("h2",{id:"generator"},"Generator"),(0,l.kt)("h3",{id:"generator-definition"},"Generator Definition"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u540d\u79f0\u524d\u9762\u52a0\u4e00\u4e2a\u661f\u53f7 (",(0,l.kt)("inlineCode",{parentName:"li"},"*"),") \u8868\u793a\u5b83\u662f\u4e00\u4e2a\u751f\u6210\u5668\u51fd\u6570."),(0,l.kt)("li",{parentName:"ul"},"\u7bad\u5934\u51fd\u6570\u4e0d\u80fd\u7528\u6765\u5b9a\u4e49\u751f\u6210\u5668\u51fd\u6570."),(0,l.kt)("li",{parentName:"ul"},"\u8c03\u7528\u751f\u6210\u5668\u51fd\u6570\u4f1a\u4ea7\u751f\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61, \u5176\u662f\u4e00\u4e2a",(0,l.kt)("strong",{parentName:"li"},"\u81ea\u5f15\u7528\u53ef\u8fed\u4ee3\u5bf9\u8c61"),":\n\u5176\u672c\u8eab\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668, \u540c\u65f6\u5b9e\u73b0\u4e86 ",(0,l.kt)("inlineCode",{parentName:"li"},"Iterable")," \u63a5\u53e3 (\u8fd4\u56de ",(0,l.kt)("inlineCode",{parentName:"li"},"this"),").")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface GeneratorFunction {\n  (...args: any[]): Generator;\n  readonly length: number;\n  readonly name: string;\n  readonly prototype: Generator;\n}\n\ninterface Generator<T> extends Iterator<T> {\n  next(...args: []): IteratorResult<T>;\n  return(value: T): IteratorResult<T>; // Required\n  throw(e: any): IteratorResult<T>; // Required\n  [Symbol.iterator](): Generator<T>;\n}\n\ninterface AsyncGeneratorFunction {\n  (...args: any[]): AsyncGenerator;\n  readonly length: number;\n  readonly name: string;\n  readonly prototype: AsyncGenerator;\n}\n\ninterface AsyncGenerator<T> extends AsyncIterator<T> {\n  next(...args: []): Promise<IteratorResult<T>>;\n  return(value: T | PromiseLike<T>): Promise<IteratorResult<T>>; // Required\n  throw(e: any): Promise<IteratorResult<T>>; // Required\n  [Symbol.asyncIterator](): AsyncGenerator<T>;\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* generatorFn() {}\nconsole.log(generatorFn);\n// f* generatorFn() {}\n\nconsole.log(generatorFn()[Symbol.iterator]);\n// f [Symbol.iterator]() {native code}\n\nconsole.log(generatorFn());\n// generatorFn {<suspended>}\n\nconsole.log(generatorFn()[Symbol.iterator]());\n// generatorFn {<suspended>}\n\nconst g = generatorFn(); // IterableIterator\nconsole.log(g === g[Symbol.iterator]());\n// true\n")),(0,l.kt)("h3",{id:"generator-roles"},"Generator Roles"),(0,l.kt)("p",null,"Generators can play 3 roles:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Iterators (data producers):\ngenerators can produce sequences of values via loops and recursion."),(0,l.kt)("li",{parentName:"ul"},"Observers (data consumers):\ngenerators become data consumers that pause\nuntil a new value is pushed into them via ",(0,l.kt)("inlineCode",{parentName:"li"},"next(value)"),"\n(",(0,l.kt)("inlineCode",{parentName:"li"},"yield")," can receive a value from ",(0,l.kt)("inlineCode",{parentName:"li"},"next(value)"),")."),(0,l.kt)("li",{parentName:"ul"},"Coroutines (data producers and consumers):\ngenerators are pauseable and can be both data producers and data consumers,\ngenerators can be coroutines (cooperatively multi-tasked tasks).")),(0,l.kt)("h3",{id:"generator-basic-usage"},"Generator Basic Usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* gen() {\n  yield 1;\n  yield 2;\n  yield 3;\n}\n\nconst g = gen();\n\ng.next(); // { value: 1, done: false }\ng.next(); // { value: 2, done: false }\ng.next(); // { value: 3, done: false }\ng.next(); // { value: undefined, done: true }\ng.return(); // { value: undefined, done: true }\ng.return(1); // { value: 1, done: true }\n")),(0,l.kt)("h4",{id:"default-iterator-generator"},"Default Iterator Generator"),(0,l.kt)("p",null,"\u751f\u6210\u5668\u51fd\u6570\u548c\u9ed8\u8ba4\u8fed\u4ee3\u5668",(0,l.kt)("strong",{parentName:"p"},"\u88ab\u8c03\u7528"),"\u4e4b\u540e\u90fd\u4ea7\u751f\u8fed\u4ee3\u5668\n(\u751f\u6210\u5668\u5bf9\u8c61\u662f",(0,l.kt)("strong",{parentName:"p"},"\u81ea\u5f15\u7528\u53ef\u8fed\u4ee3\u5bf9\u8c61"),", \u81ea\u8eab\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668),\n\u6240\u4ee5\u751f\u6210\u5668\u9002\u5408\u4f5c\u4e3a\u9ed8\u8ba4\u8fed\u4ee3\u5668:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const users = {\n  james: false,\n  andrew: true,\n  alexander: false,\n  daisy: false,\n  luke: false,\n  clare: true,\n\n  *[Symbol.iterator]() {\n    // this === 'users'\n    for (const key in this) {\n      if (this[key]) yield key;\n    }\n  },\n};\n\nfor (const key of users) {\n  console.log(key);\n}\n// andrew\n// clare\n\nclass Foo {\n  constructor() {\n    this.values = [1, 2, 3];\n  }\n\n  *[Symbol.iterator]() {\n    yield* this.values;\n  }\n}\n\nconst f = new Foo();\n\nfor (const x of f) {\n  console.log(x);\n}\n// 1\n// 2\n// 3\n")),(0,l.kt)("h4",{id:"early-return-generator"},"Early Return Generator"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"return()")," \u65b9\u6cd5\u4f1a\u5f3a\u5236\u751f\u6210\u5668\u8fdb\u5165\u5173\u95ed\u72b6\u6001."),(0,l.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u7ed9 ",(0,l.kt)("inlineCode",{parentName:"li"},"return()")," \u7684\u503c, \u5c31\u662f\u7ec8\u6b62\u8fed\u4ee3\u5668\u5bf9\u8c61\u7684\u503c.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* gen() {\n  yield 1;\n  yield 2;\n  yield 3;\n}\n\nconst g = gen();\n\ng.next(); // { value: 1, done: false }\ng.return('foo'); // { value: \"foo\", done: true }\ng.next(); // { value: undefined, done: true }\n")),(0,l.kt)("h4",{id:"error-handling-generator"},"Error Handling Generator"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"throw()")," \u65b9\u6cd5\u4f1a\u5728\u6682\u505c\u7684\u65f6\u5019\u5c06\u4e00\u4e2a\u63d0\u4f9b\u7684\u9519\u8bef\u6ce8\u5165\u5230\u751f\u6210\u5668\u5bf9\u8c61\u4e2d.\n\u5982\u679c\u9519\u8bef\u672a\u88ab\u5904\u7406, \u751f\u6210\u5668\u5c31\u4f1a\u5173\u95ed."),(0,l.kt)("li",{parentName:"ul"},"\u5047\u5982\u751f\u6210\u5668\u51fd\u6570\u5185\u90e8\u5904\u7406\u4e86\u8fd9\u4e2a\u9519\u8bef, \u90a3\u4e48\u751f\u6210\u5668\u5c31\u4e0d\u4f1a\u5173\u95ed, \u53ef\u4ee5\u6062\u590d\u6267\u884c.\n\u9519\u8bef\u5904\u7406\u4f1a\u8df3\u8fc7\u5bf9\u5e94\u7684 yield (\u8df3\u8fc7\u4e00\u4e2a\u503c).")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* generator() {\n  try {\n    yield 1;\n  } catch (e) {\n    console.log(e);\n  }\n\n  yield 2;\n  yield 3;\n  yield 4;\n  yield 5;\n}\n\nconst it = generator();\n\nit.next(); // {value: 1, done: false}\n\n// the error will be handled and printed (\"Error: Handled!\"),\n// then the flow will continue, so we will get the\n// next yielded value as result.\nit.throw(Error('Handled!')); // {value: 2, done: false}\n\nit.next(); // {value: 3, done: false}\n\n// now the generator instance is paused on the\n// third yield that is not inside a try-catch.\n// the error will be re-thrown out\nit.throw(Error('Not handled!')); // !!! Uncaught Error: Not handled! !!!\n\n// now the iterator is exhausted\nit.next(); // {value: undefined, done: true}\n")),(0,l.kt)("h3",{id:"generator-advanced-usage"},"Generator Advanced Usage"),(0,l.kt)("h4",{id:"next-value-generator"},"Next Value Generator"),(0,l.kt)("p",null,"\u5f53\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"next")," \u4f20\u9012\u503c\u8fdb\u884c\u8c03\u7528\u65f6,\n\u4f20\u5165\u7684\u503c\u4f1a\u88ab\u5f53\u4f5c\u4e0a\u4e00\u6b21\u751f\u6210\u5668\u51fd\u6570\u6682\u505c\u65f6 ",(0,l.kt)("inlineCode",{parentName:"p"},"yield")," \u5173\u952e\u5b57\u7684\u8fd4\u56de\u503c\u5904\u7406.\n\u7b2c\u4e00\u6b21\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"g.next()")," \u4f20\u5165\u53c2\u6570\u662f\u6beb\u65e0\u610f\u4e49,\n\u56e0\u4e3a\u9996\u6b21\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"next")," \u51fd\u6570\u65f6,\n\u751f\u6210\u5668\u51fd\u6570\u5e76\u6ca1\u6709\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"yield")," \u5173\u952e\u5b57\u5904\u6682\u505c:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* lazyCalculator(operator) {\n  const firstOperand = yield;\n  const secondOperand = yield;\n\n  switch (operator) {\n    case '+':\n      yield firstOperand + secondOperand;\n      return;\n    case '-':\n      yield firstOperand - secondOperand;\n      return;\n    case '*':\n      yield firstOperand * secondOperand;\n      return;\n    case '/':\n      yield firstOperand / secondOperand;\n      return;\n    default:\n      throw new Error('Unsupported operation!');\n  }\n}\n\nconst g = gen('*');\ng.next(); // { value: undefined, done: false }\ng.next(10); // { value: undefined, done: false }\ng.next(2); // { value: 20, done: false }\ng.next(); // { value: undefined, done: true }\n")),(0,l.kt)("h4",{id:"default-asynchronous-iterator-generator"},"Default Asynchronous Iterator Generator"),(0,l.kt)("p",null,"Default asynchronous iterator:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const asyncSource = {\n  async *[Symbol.asyncIterator]() {\n    yield await new Promise(resolve => setTimeout(resolve, 1000, 1));\n  },\n};\n\nfor await (const chunk of asyncSource) {\n  console.log(chunk);\n}\n")),(0,l.kt)("h4",{id:"asynchronous-generator"},"Asynchronous Generator"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"async function* remotePostsAsyncGenerator() {\n  let i = 1;\n\n  while (true) {\n    const res = await fetch(\n      `https://jsonplaceholder.typicode.com/posts/${i++}`\n    ).then(r => r.json());\n\n    // when no more remote posts will be available,\n    // it will break the infinite loop.\n    // the async iteration will end\n    if (Object.keys(res).length === 0) {\n      break;\n    }\n\n    yield res;\n  }\n}\n\nfor await (const chunk of remotePostsAsyncGenerator()) {\n  console.log(chunk);\n}\n")),(0,l.kt)("h4",{id:"asynchronous-events-stream"},"Asynchronous Events Stream"),(0,l.kt)("p",null,"Asynchronous UI events stream (RxJS):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Observable {\n  constructor() {\n    this.promiseQueue = [];\n    // \u4fdd\u5b58\u7528\u4e8e\u961f\u5217\u4e0b\u4e00\u4e2a promise \u7684 resolve \u65b9\u6cd5\n    this.resolve = null;\n    // \u628a\u6700\u521d\u7684 promise \u63a8\u5230\u961f\u5217, \u8be5 promise \u4f1a resolve \u4e3a\u7b2c\u4e00\u4e2a\u89c2\u5bdf\u5230\u7684\u4e8b\u4ef6\n    this.enqueue();\n  }\n\n  // \u521b\u5efa\u65b0 promise, \u4fdd\u5b58\u5176 resolve \u65b9\u6cd5, \u5e76\u628a\u5b83\u4fdd\u5b58\u5230\u961f\u5217\u4e2d\n  enqueue() {\n    this.promiseQueue.push(new Promise(resolve => (this.resolve = resolve)));\n  }\n\n  // \u4ece\u961f\u5217\u524d\u7aef\u79fb\u9664 promise, \u5e76\u8fd4\u56de\u5b83\n  dequeue() {\n    return this.promiseQueue.shift();\n  }\n\n  async *fromEvent(element, eventType) {\n    // \u5728\u6709\u4e8b\u4ef6\u751f\u6210\u65f6, \u7528\u4e8b\u4ef6\u5bf9\u8c61\u6765 resolve \u961f\u5217\u5934\u90e8\u7684 promise\n    // \u540c\u65f6\u628a\u53e6\u4e00\u4e2a promise \u52a0\u5165\u961f\u5217\n    element.addEventListener(eventType, event => {\n      this.resolve(event);\n      this.enqueue();\n    });\n\n    // \u6bcf\u6b21 resolve \u961f\u5217\u5934\u90e8\u7684 promise \u540e, \u90fd\u4f1a\u5411\u5f02\u6b65\u8fed\u4ee3\u5668\u8fd4\u56de\u76f8\u5e94\u7684\u4e8b\u4ef6\u5bf9\u8c61\n    while (true) {\n      yield await this.dequeue();\n    }\n  }\n}\n\nconst observable = new Observable();\nconst button = document.querySelector('button');\nconst mouseClickIterator = observable.fromEvent(button, 'click');\n\nfor await (const clickEvent of mouseClickIterator) {\n  console.log(clickEvent);\n}\n")),(0,l.kt)("p",null,"Generator based asynchronous control flow goodness for nodejs and the browser,\nusing promises, letting you write non-blocking code in a nice-ish way\n(just like ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tj/co"},"tj/co"),")."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function coroutine(generatorFunc) {\n  const generator = generatorFunc();\n\n  function nextResponse(value) {\n    const response = generator.next(value);\n\n    if (response.done) {\n      return;\n    }\n\n    if (value instanceof Promise) {\n      value.then(nextResponse);\n    } else {\n      nextResponse(response.value);\n    }\n  }\n\n  nextResponse();\n}\n\ncoroutine(function* bounce() {\n  yield bounceUp;\n  yield bounceDown;\n});\n")),(0,l.kt)("p",null,"\u5229\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"async"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"await")," \u53ef\u4ee5\u5b9e\u73b0\u76f8\u540c\u6548\u679c:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function co(gen) {\n  return new Promise((resolve, reject) => {\n    const g = gen();\n\n    function next(param) {\n      const { done, value } = g.next(param);\n\n      if (!done) {\n        // Resolve chain.\n        Promise.resolve(value).then(res => next(res));\n      } else {\n        resolve(value);\n      }\n    }\n\n    // First invoke g.next() without params.\n    next();\n  });\n}\n\nfunction promise1() {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve('1');\n    }, 1000);\n  });\n}\n\nfunction promise2(value) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(`value:${value}`);\n    }, 1000);\n  });\n}\n\nfunction* readFileGenerator() {\n  const value = yield promise1();\n  const result = yield promise2(value);\n  return result;\n}\n\nasync function readFile() {\n  const value = await promise1();\n  const result = await promise2(value);\n  return result;\n}\n\nco(readFileGenerator).then(res => console.log(res));\n// const g = readFileGenerator();\n// const value = g.next();\n// const result = g.next(value);\n// resolve(result);\n\nreadFile().then(res => console.log(res));\n")),(0,l.kt)("h4",{id:"delegating-generator"},"Delegating Generator"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"yield *")," \u80fd\u591f\u8fed\u4ee3\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61 (",(0,l.kt)("inlineCode",{parentName:"p"},"yield* iterable"),"):"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u8fed\u4ee3\u6807\u51c6\u5e93\u63d0\u4f9b\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"Iterable")," \u96c6\u5408."),(0,l.kt)("li",{parentName:"ul"},"\u751f\u6210\u5668\u51fd\u6570\u4ea7\u751f\u7684\u751f\u6210\u5668\u5bf9\u8c61\u662f\u4e00\u4e2a",(0,l.kt)("strong",{parentName:"li"},"\u81ea\u5f15\u7528\u53ef\u8fed\u4ee3\u5bf9\u8c61"),",\n\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"yield *")," \u805a\u5408\u751f\u6210\u5668 (",(0,l.kt)("inlineCode",{parentName:"li"},"Delegating Generator"),").")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* generatorFn() {\n  console.log('iter value:', yield* [1, 2, 3]);\n}\n\nfor (const x of generatorFn()) {\n  console.log('value:', x);\n}\n// value: 1\n// value: 2\n// value: 3\n// iter value: undefined\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* innerGeneratorFn() {\n  yield 'foo';\n  return 'bar';\n}\n\nfunction* outerGeneratorFn(genObj) {\n  console.log('iter value:', yield* innerGeneratorFn());\n}\n\nfor (const x of outerGeneratorFn()) {\n  console.log('value:', x);\n}\n// value: foo\n// iter value: bar\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* chunkify(array, n) {\n  yield array.slice(0, n);\n  array.length > n && (yield* chunkify(array.slice(n), n));\n}\n\nasync function* getRemoteData() {\n  let hasMore = true;\n  let page;\n\n  while (hasMore) {\n    const { next_page, results } = await fetch(URL, { params: { page } }).then(\n      r => r.json()\n    );\n\n    // Return 5 elements with each iteration.\n    yield* chunkify(results, 5);\n\n    hasMore = next_page !== null;\n    page = next_page;\n  }\n}\n\nfor await (const chunk of getRemoteData()) {\n  console.log(chunk);\n}\n")),(0,l.kt)("h4",{id:"recursive-generator"},"Recursive Generator"),(0,l.kt)("p",null,"\u5728\u751f\u6210\u5668\u51fd\u6570\u5185\u90e8,\n\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"yield *")," \u53bb\u8fed\u4ee3\u81ea\u8eab\u4ea7\u751f\u7684\u751f\u6210\u5668\u5bf9\u8c61,\n\u5b9e\u73b0\u9012\u5f52\u7b97\u6cd5."),(0,l.kt)("p",null,"Tree traversal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Tree traversal\nclass BinaryTree {\n  constructor(value, left = null, right = null) {\n    this.value = value;\n    this.left = left;\n    this.right = right;\n  }\n\n  *[Symbol.iterator]() {\n    yield this.value;\n\n    if (this.left) {\n      // Short for: yield* this.left[Symbol.iterator]()\n      yield* this.left;\n    }\n\n    if (this.right) {\n      // Short for: yield* this.right[Symbol.iterator]()\n      yield* this.right;\n    }\n  }\n}\n\nconst tree = new BinaryTree(\n  'a',\n  new BinaryTree('b', new BinaryTree('c'), new BinaryTree('d')),\n  new BinaryTree('e')\n);\n\nfor (const x of tree) {\n  console.log(x);\n}\n// Output:\n// a\n// b\n// c\n// d\n// e\n")),(0,l.kt)("p",null,"Graph traversal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Graph traversal\nfunction* graphTraversal(nodes) {\n  for (const node of nodes) {\n    if (!visitedNodes.has(node)) {\n      yield node;\n      yield* graphTraversal(node.neighbors);\n    }\n  }\n}\n")),(0,l.kt)("p",null,"DOM traversal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function* domTraversal(element) {\n  yield element;\n  element = element.firstElementChild;\n\n  while (element) {\n    yield* domTraversal(element);\n    element = element.nextElementSibling;\n  }\n}\n\nfor (const element of domTraversal(document.getElementById('subTree'))) {\n  console.log(element.nodeName);\n}\n")),(0,l.kt)("p",null,"\u7ed3\u5408 ",(0,l.kt)("inlineCode",{parentName:"p"},"Promise"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"async"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"await")," \u53ef\u4ee5\u5b9e\u73b0\u5f02\u6b65\u9012\u5f52\u7b97\u6cd5:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"import { promises as fs } from 'fs';\nimport { basename, dirname, join } from 'path';\n\nasync function* walk(dir: string): AsyncGenerator<string> {\n  for await (const d of await fs.opendir(dir)) {\n    const entry = join(dir, d.name);\n\n    if (d.isDirectory()) {\n      yield* walk(entry);\n    } else if (d.isFile()) {\n      yield entry;\n    }\n  }\n}\n\nasync function run(arg = '.') {\n  if ((await fs.lstat(arg)).isFile()) {\n    return runTestFile(arg);\n  }\n\n  for await (const file of walk(arg)) {\n    if (\n      !dirname(file).includes('node_modules') &&\n      (basename(file) === 'test.js' || file.endsWith('.test.js'))\n    ) {\n      console.log(file);\n      await runTestFile(file);\n    }\n  }\n}\n")),(0,l.kt)("h2",{id:"destructuring-pattern-matching"},"Destructuring Pattern Matching"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u5efa\u8bae\u53ea\u8981\u6709\u53ef\u80fd, \u5c31\u4e0d\u8981\u5728\u6a21\u5f0f\u4e2d\u653e\u7f6e\u5706\u62ec\u53f7"),"."),(0,l.kt)("li",{parentName:"ul"},"\u8d4b\u503c\u8bed\u53e5\u7684\u975e\u6a21\u5f0f\u90e8\u5206, \u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7."),(0,l.kt)("li",{parentName:"ul"},"Every time access value via ",(0,l.kt)("inlineCode",{parentName:"li"},"."),":\nstop and think whether use destructuring instead."),(0,l.kt)("li",{parentName:"ul"},"Destructure as early as possible."),(0,l.kt)("li",{parentName:"ul"},"Remember to include default values, especially in nested destructuring.")),(0,l.kt)("h3",{id:"destructuring-default-value"},"Destructuring Default Value"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"ES6 \u5185\u90e8\u4f7f\u7528\u4e25\u683c\u76f8\u7b49\u8fd0\u7b97\u7b26 (===), \u5224\u65ad\u4e00\u4e2a\u4f4d\u7f6e\u662f\u5426\u6709\u503c. \u82e5\u6b64\u4f4d\u7f6e\u65e0\u503c, \u5219\u4f7f\u7528\u9ed8\u8ba4\u503c."),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e00\u4e2a\u6570\u7ec4\u6210\u5458\u4e0d\u4e25\u683c\u7b49\u4e8e undefined, \u9ed8\u8ba4\u503c\u4e0d\u4f1a\u751f\u6548.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const [x = 1] = [undefined];\nconsole.log(x); // 1\n\nconst [x = 1] = [null];\nconsole.log(x); // null\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let [x = 1, y = x] = []; // x=1; y=1\nlet [x = 1, y = x] = [2]; // x=2; y=2\nlet [x = 1, y = x] = [1, 2]; // x=1; y=2\nlet [x = y, y = 1] = []; // ReferenceError\n")),(0,l.kt)("h3",{id:"object-destructuring"},"Object Destructuring"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u89e3\u6784\u8d4b\u503c\u7684\u89c4\u5219: \u53ea\u8981\u7b49\u53f7\u53f3\u8fb9\u7684\u503c\u4e0d\u662f\u5bf9\u8c61, \u5c31\u5148\u5c06\u5176",(0,l.kt)("strong",{parentName:"li"},"\u8f6c\u4e3a\u5bf9\u8c61"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"null")," \u65e0\u6cd5\u8f6c\u5316\u4e3a\u5bf9\u8c61:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const { prop: x } = undefined; // TypeError\nconst { prop: y } = null; // TypeError\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const { bar, foo } = { foo: 'aaa', bar: 'bbb' };\nconsole.log(foo); // \"aaa\"\nconsole.log(bar); // \"bbb\"\n\nconst { baz } = { foo: 'aaa', bar: 'bbb' };\nconsole.log(baz); // undefined\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u771f\u6b63\u88ab\u8d4b\u503c\u7684\u662f\u540e\u8005, \u800c\u4e0d\u662f\u524d\u8005:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const { foo: baz } = { foo: 'aaa', bar: 'bbb' };\nconsole.log(baz); // \"aaa\"\n\nconst { first: f, last: l } = { first: 'hello', last: 'world' };\nconsole.log(f); // 'hello'\nconsole.log(l); // 'world'\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Left-hand side of a normal assignment:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = {};\n[first, ...obj.prop] = ['a', 'b', 'c'];\n// first = 'a'; obj.prop = ['b', 'c']\n\nconst arr = [];\n({ bar: arr[0] } = { bar: true });\nconsole.log(arr); // [true]\n")),(0,l.kt)("h4",{id:"json-object-destructuring"},"JSON Object Destructuring"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const jsonData = {\n  id: 42,\n  status: 'OK',\n  data: [867, 5309],\n};\n\nconst { id, status, data: number } = jsonData;\n\nconsole.log(id, status, number);\n// 42, \"OK\", [867, 5309]\n")),(0,l.kt)("h4",{id:"import-destructuring"},"Import Destructuring"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const { SourceMapConsumer, SourceNode } = require('source-map');\n")),(0,l.kt)("h4",{id:"number-and-boolean-destructuring"},"Number and Boolean Destructuring"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"number"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"boolean")," \u4f1a\u81ea\u52a8\u6784\u9020\u539f\u59cb\u503c\u5305\u88c5\u5bf9\u8c61:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let { toString: s } = 123;\nconst truthy = s === Number.prototype.toString; // true\n\nlet { toString: s } = true;\nconst truthy = s === Boolean.prototype.toString; // true\n")),(0,l.kt)("h3",{id:"iterator-destructuring"},"Iterator Destructuring"),(0,l.kt)("p",null,"\u7b49\u53f7\u53f3\u8fb9\u5fc5\u987b\u4e3a\u6570\u7ec4\u7b49\u5b9e\u73b0\u4e86 Iterator \u63a5\u53e3\u7684\u5bf9\u8c61, \u5426\u5219\u62a5\u9519:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Array."),(0,l.kt)("li",{parentName:"ul"},"Set."),(0,l.kt)("li",{parentName:"ul"},"Generator function.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const [foo, [[bar], baz]] = [1, [[2], 3]];\nconsole.log(foo); // 1\nconsole.log(bar); // 2\nconsole.log(baz); // 3\n\nconst [, , third] = ['foo', 'bar', 'baz'];\nconsole.log(third); // \"baz\"\n\nconst [x, , y] = [1, 2, 3];\nconsole.log(x); // 1\nconsole.log(y); // 3\n\nconst [head, ...tail] = [1, 2, 3, 4];\nconsole.log(head); // 1\nconsole.log(tail); // [2, 3, 4]\n\nconst [x, y, ...z] = ['a'];\nconsole.log(x); // \"a\"\nconsole.log(y); // undefined\nconsole.log(z); // []\n\n// Generator \u51fd\u6570\nfunction* fibs() {\n  let a = 0;\n  let b = 1;\n\n  while (true) {\n    yield a;\n    [a, b] = [b, a + b];\n  }\n}\n\nconst [first, second, third, fourth, fifth, sixth] = fibs();\nconsole.log(sixth); // 5\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Left-hand side of a normal assignment:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let x = 1;\nlet y = 2;\n[x, y] = [y, x];\n")),(0,l.kt)("h4",{id:"map-and-list-destructuring"},"Map and List Destructuring"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"for index in Iterable<T>"),": key."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"for [key, value] of Iterable<T>"),": entry.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const map = new Map();\nmap.set('first', 'hello');\nmap.set('second', 'world');\n\nfor (const [key, value] of map) {\n  console.log(`${key} is ${value}`);\n}\n// first is hello\n// second is world\n\n// \u83b7\u53d6\u952e\u540d\nfor (const [key] of map) {\n  // ...\n}\n\n// \u83b7\u53d6\u952e\u503c\nfor (const [, value] of map) {\n  // ...\n}\n")),(0,l.kt)("h4",{id:"string-destructuring"},"String Destructuring"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'const [a, b, c, d, e] = \'hello\';\nconsole.log(a); // "h"\nconsole.log(b); // "e"\nconsole.log(c); // "l"\nconsole.log(d); // "l"\nconsole.log(e); // "o"\n\nconst { length: len } = \'hello\';\nconsole.log(len); // 5\n')),(0,l.kt)("h3",{id:"function-parameters-destructuring"},"Function Parameters Destructuring"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53ef\u7528\u4e8e\u5de5\u5382 (",(0,l.kt)("inlineCode",{parentName:"li"},"factory"),") / \u8bbe\u7f6e (",(0,l.kt)("inlineCode",{parentName:"li"},"options"),") \u6a21\u5f0f\u4f20\u53c2\u4e00\u822c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"options")," \u5bf9\u8c61,"),(0,l.kt)("li",{parentName:"ul"},"\u5177\u6709\u56fa\u5b9a\u7684\u5c5e\u6027\u540d."),(0,l.kt)("li",{parentName:"ul"},"\u4e00\u6b21\u6027\u5b9a\u4e49\u591a\u4e2a\u53c2\u6570."),(0,l.kt)("li",{parentName:"ul"},"\u4e00\u6b21\u6027\u5b9a\u4e49\u591a\u4e2a\u53c2\u6570\u7684\u9ed8\u8ba4\u503c.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u53c2\u6570\u662f\u4e00\u7ec4\u6709\u6b21\u5e8f\u7684\u503c\nfunction f1([x, y, z]) {}\nf1([1, 2, 3]);\n\n// \u53c2\u6570\u662f\u4e00\u7ec4\u65e0\u6b21\u5e8f\u7684\u503c\nfunction f2({ x, y, z }) {}\nf2({ z: 3, y: 2, x: 1 });\n\n// \u53ef\u7701\u7565 const foo = config.foo || 'default foo';\njQuery.ajax = function (\n  url,\n  {\n    async = true,\n    beforeSend = function () {},\n    cache = true,\n    complete = function () {},\n    crossDomain = false,\n    global = true,\n    // ... more config\n  }\n) {\n  // ... do stuff\n};\n")),(0,l.kt)("h3",{id:"function-return-value-destructuring"},"Function Return Value Destructuring"),(0,l.kt)("p",null,"\u8fd4\u56de\u591a\u4e2a\u503c:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\nfunction example1() {\n  return [1, 2, 3];\n}\n\nconst [a, b, c] = example1();\n\n// \u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\nfunction example2() {\n  return {\n    foo: 1,\n    bar: 2,\n  };\n}\n\nconst { foo, bar } = example2();\n")),(0,l.kt)("h2",{id:"promise"},"Promise"),(0,l.kt)("p",null,"Callback style asynchronous programming:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Callback hell."),(0,l.kt)("li",{parentName:"ul"},"Complicated error handling."),(0,l.kt)("li",{parentName:"ul"},"Complicated composition.")),(0,l.kt)("p",null,"Promise style asynchronous programming:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Avoid callback hell:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Return ",(0,l.kt)("inlineCode",{parentName:"li"},"new Promise()"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"Promise.resolve()"),"."),(0,l.kt)("li",{parentName:"ul"},"Return ",(0,l.kt)("inlineCode",{parentName:"li"},"promise.then((value) => {})"),"."))),(0,l.kt)("li",{parentName:"ul"},"Simple error handling:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Catch error: ",(0,l.kt)("inlineCode",{parentName:"li"},"promise.catch((err) => {})"),"."),(0,l.kt)("li",{parentName:"ul"},"Cleanup: ",(0,l.kt)("inlineCode",{parentName:"li"},"promise.finally(() => {})"),"."))),(0,l.kt)("li",{parentName:"ul"},"Simple composition:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.all"),": Converts an ",(0,l.kt)("inlineCode",{parentName:"li"},"Array")," of ",(0,l.kt)("inlineCode",{parentName:"li"},"Promises")," to a ",(0,l.kt)("inlineCode",{parentName:"li"},"Promise")," for an ",(0,l.kt)("inlineCode",{parentName:"li"},"Array"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.race"),".")))),(0,l.kt)("h3",{id:"promise-resolve"},"Promise Resolve"),(0,l.kt)("p",null,"Resolve only accept ",(0,l.kt)("strong",{parentName:"p"},"one")," value:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"return new Promise(resolve => resolve([a, b]));\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const thenable = {\n  then(resolve, reject) {\n    resolve(42);\n  },\n};\nconst promise = Promise.resolve(thenable);\npromise.then(value => {\n  console.log(value); // 42\n});\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Promise.resolve")," \u662f\u4e00\u4e2a\u5e42\u7b49\u65b9\u6cd5 (\u72b6\u6001\u673a\u5e42\u7b49):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const p = Promise.resolve(7);\nsetTimeout(console.log, 0, p === Promise.resolve(p));\n// true\nsetTimeout(console.log, 0, p === Promise.resolve(Promise.resolve(p)));\n// true\n\nconst p = new Promise(() => {});\nsetTimeout(console.log, 0, p);\n// Promise <pending>\nsetTimeout(console.log, 0, Promise.resolve(p));\n// Promise <pending>\nsetTimeout(console.log, 0, p === Promise.resolve(p));\n// true\n")),(0,l.kt)("h3",{id:"promise-reject"},"Promise Reject"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"let p1 = Promise.resolve('foo');\nlet p2 = p1.then();\nstetTimeout(console.log, 0, p2); // Promise <resolved>: foo\n\n// eslint-disable-next-line prefer-promise-reject-errors\np1 = Promise.reject('foo');\np2 = p1.then();\n// Uncaught (in promise) foo\nsetTimeout(console.log, 0, p2); // Promise <rejected>: foo\n\nconst p3 = p1.then(null, () => undefined);\nconst p4 = p1.then(null, () => {});\nconst p5 = p1.then(null, () => Promise.resolve());\nsetTimeout(console.log, 0, p3); // Promise <resolved>: undefined\nsetTimeout(console.log, 0, p4); // Promise <resolved>: undefined\nsetTimeout(console.log, 0, p5); // Promise <resolved>: undefined\n\nconst p6 = p1.then(null, () => 'bar');\nconst p7 = p1.then(null, () => Promise.resolve('bar'));\nsetTimeout(console.log, 0, p6); // Promise <resolved>: bar\nsetTimeout(console.log, 0, p7); // Promise <resolved>: bar\n\nconst p8 = p1.then(null, () => new Promise(() => {}));\n// eslint-disable-next-line prefer-promise-reject-errors\nconst p9 = p1.then(null, () => Promise.reject());\n// Uncaught (in promise): undefined\nsetTimeout(console.log, 0, p8); // Promise <pending>\nsetTimeout(console.log, 0, p9); // Promise <rejected>: undefined\n\nconst p10 = p1.then(null, () => {\n  // eslint-disable-next-line no-throw-literal\n  throw 'bar';\n});\n// Uncaught (in promise) bar\nsetTimeout(console.log, 0, p10); // Promise <rejected>: bar\n\nconst p11 = p1.then(null, () => Error('bar'));\nsetTimeout(console.log, 0, p11); // Promise <resolved>: Error: bar\n")),(0,l.kt)("h3",{id:"promise-catch"},"Promise Catch"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// eslint-disable-next-line prefer-promise-reject-errors\nconst p = Promise.reject();\nconst onRejected = function (e) {\n  setTimeout(console.log, 0, 'rejected');\n};\n// \u8bed\u6cd5\u7cd6:\np.then(null, onRejected); // rejected\np.catch(onRejected); // rejected\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const p1 = new Promise(() => {});\nconst p2 = p1.catch();\nsetTimeout(console.log, 0, p1); // Promise <pending>\nsetTimeout(console.log, 0, p2); // Promise <pending>\nsetTimeout(console.log, 0, p1 === p2); // false\n")),(0,l.kt)("h3",{id:"promise-finally"},"Promise Finally"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const p1 = new Promise(() => {});\nconst p2 = p1.finally();\nsetTimeout(console.log, 0, p1); // Promise <pending>\nsetTimeout(console.log, 0, p2); // Promise <pending>\nsetTimeout(console.log, 0, p1 === p2); // false\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const p1 = Promise.resolve('foo');\n\n// \u539f\u6837\u540e\u4f20:\nconst p2 = p1.finally();\nconst p3 = p1.finally(() => undefined);\nconst p4 = p1.finally(() => {});\nconst p5 = p1.finally(() => Promise.resolve());\nconst p6 = p1.finally(() => 'bar');\nconst p7 = p1.finally(() => Promise.resolve('bar'));\nconst p8 = p1.finally(() => Error('bar'));\nsetTimeout(console.log, 0, p2); // Promise <resolved>: foo\nsetTimeout(console.log, 0, p3); // Promise <resolved>: foo\nsetTimeout(console.log, 0, p4); // Promise <resolved>: foo\nsetTimeout(console.log, 0, p5); // Promise <resolved>: foo\nsetTimeout(console.log, 0, p6); // Promise <resolved>: foo\nsetTimeout(console.log, 0, p7); // Promise <resolved>: foo\nsetTimeout(console.log, 0, p8); // Promise <resolved>: foo\n\n// \u7279\u6b8a\u5904\u7406:\nconst p9 = p1.finally(() => new Promise(() => {}));\nsetTimeout(console.log, 0, p9); // Promise <pending>\n// eslint-disable-next-line prefer-promise-reject-errors\nconst p10 = p1.finally(() => Promise.reject());\n// Uncaught (in promise): undefined\nsetTimeout(console.log, 0, p10); // Promise <rejected>: undefined\nconst p11 = p1.finally(() => {\n  // eslint-disable-next-line no-throw-literal\n  throw 'bar';\n});\n// Uncaught (in promise) baz\nsetTimeout(console.log, 0, p11); // Promise <rejected>: bar\n")),(0,l.kt)("h3",{id:"promise-thenable-and-catch"},"Promise Thenable and Catch"),(0,l.kt)("p",null,"The main difference between the forms\n",(0,l.kt)("inlineCode",{parentName:"p"},"promise.then(success, error)")," and\n",(0,l.kt)("inlineCode",{parentName:"p"},"promise.then(success).catch(error)"),":\nin case if success callback returns a rejected promise,\nthen only the second form is going to catch that rejection."),(0,l.kt)("p",null,"\u6b63\u5e38\u60c5\u51b5\u4e0b, \u5728\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"throw()")," \u5173\u952e\u5b57\u629b\u51fa\u9519\u8bef\u65f6,\nJavaScript \u8fd0\u884c\u65f6\u7684\u9519\u8bef\u5904\u7406\u673a\u5236\u4f1a\u505c\u6b62\u6267\u884c\u629b\u51fa\u9519\u8bef\u4e4b\u540e\u7684\u4efb\u4f55\u6307\u4ee4.\n\u4f46\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"Promise")," \u4e2d\u629b\u51fa\u9519\u8bef\u65f6, \u56e0\u4e3a\u9519\u8bef\u5b9e\u9645\u4e0a\u662f\u4ece\u6d88\u606f\u961f\u5217\u4e2d\u5f02\u6b65\u629b\u51fa\u7684,\n\u6240\u4ee5\u5e76\u4e0d\u4f1a\u963b\u6b62\u8fd0\u884c\u65f6\u7ee7\u7eed\u6267\u884c\u540c\u6b65\u6307\u4ee4 (",(0,l.kt)("inlineCode",{parentName:"p"},"Node.js")," \u4e2d\u4ecd\u7136\u4f1a\u505c\u6b62\u6267\u884c\u4efb\u4f55\u6307\u4ee4)."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"throw new Error('foo');\nconsole.log('bar'); // \u8fd9\u4e00\u884c\u4e0d\u4f1a\u6267\u884c\n// Uncaught Error: foo\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Promise.reject(Error('foo'));\nconsole.log('bar');\n// bar\n// Uncaught (in promise) Error: foo\n\nconst p1 = new Promise((resolve, reject) => reject(Error('foo'))); // 1.\nconst p2 = new Promise((resolve, reject) => {\n  throw new Error('foo'); // 2.\n});\nconst p3 = Promise.resolve().then(() => {\n  throw new Error('foo'); // 4.\n});\nconst p4 = Promise.reject(Error('foo')); // 3.\n// Uncaught (in promise) Error: foo\n//   at Promise (test.html:1)\n//   at new Promise (<anonymous>)\n//   at test.html:1\n// Uncaught (in promise) Error: foo\n//   at Promise (test.html:2)\n//   at new Promise (<anonymous>)\n//   at test.html:2\n// Uncaught (in promise) Error: foo\n//   at test.html:4\n// Uncaught (in promise) Error: foo\n//   at Promise.resolve.then (test.html:3)\n")),(0,l.kt)("h3",{id:"promise-chain"},"Promise Chain"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Promises on the same chain execute orderly."),(0,l.kt)("li",{parentName:"ul"},"Promises on two separate chains execute in random order.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const users = ['User1', 'User2', 'User3', 'User4'];\n\nconst response = [];\n\nconst getUser = user => () => {\n  return axios.get(`/users/userId=${user}`).then(res => response.push(res));\n};\n\nconst getUsers = users => {\n  const [getFirstUser, getSecondUser, getThirdUser, getFourthUser] =\n    users.map(getUser);\n\n  getFirstUser()\n    .then(getSecondUser)\n    .then(getThirdUser)\n    .then(getFourthUser)\n    .catch(console.log);\n};\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const users = ['User1', 'User2', 'User3', 'User4'];\n\nlet response = [];\n\nfunction getUsers(users) {\n  const promises = [];\n  promises[0] = axios.get(`/users/userId=${users[0]}`);\n  promises[1] = axios.get(`/users/userId=${users[1]}`);\n  promises[2] = axios.get(`/users/userId=${users[2]}`);\n  promises[3] = axios.get(`/users/userId=${users[3]}`);\n\n  Promise.all(promises)\n    .then(userDataArr => (response = userDataArr))\n    .catch(err => console.log(err));\n}\n")),(0,l.kt)("h3",{id:"promise-combinator-array-functions"},"Promise Combinator Array Functions"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.all(iterable)")," fail-fast:\nIf at least one promise in the promises array rejects,\nthen the promise returned rejects too.\nShort-circuits when an input value is rejected."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.any(iterable)"),":\nResolves if any of the given promises are resolved.\nShort-circuits when an input value is fulfilled."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.race(iterable)"),":\nShort-circuits when an input value is settled\n(fulfilled or rejected)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.allSettled(iterable)"),":\nReturns when all given promises are settled\n(fulfilled or rejected).")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Promise.all(urls.map(fetch))\n  .then(responses => Promise.all(responses.map(res => res.text())))\n  .then(texts => {\n    //\n  });\n\nconst loadData = async () => {\n  try {\n    const urls = ['...', '...'];\n\n    const results = await Promise.all(urls.map(fetch));\n    const dataPromises = await results.map(result => result.json());\n    const finalData = Promise.all(dataPromises);\n\n    return finalData;\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst data = loadData().then(data => console.log(data));\n")),(0,l.kt)("h3",{id:"promise-polyfill"},"Promise Polyfill"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Promise {\n  // `executor` takes 2 parameters, `resolve()` and `reject()`. The executor\n  // function is responsible for calling `resolve()` or `reject()` to say that\n  // the async operation succeeded (resolved) or failed (rejected).\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('Executor must be a function');\n    }\n\n    // Internal state. `$state` is the state of the promise, and `$chained` is\n    // an array of the functions we need to call once this promise is settled.\n    this.$state = 'PENDING';\n    this.$chained = [];\n\n    // Implement `resolve()` and `reject()` for the executor function to use\n    const resolve = res => {\n      // A promise is considered \"settled\" when it is no longer\n      // pending, that is, when either `resolve()` or `reject()`\n      // was called once. Calling `resolve()` or `reject()` twice\n      // or calling `reject()` after `resolve()` was already called\n      // are no-ops.\n      if (this.$state !== 'PENDING') {\n        return;\n      }\n\n      // If `res` is a \"thenable\", lock in this promise to match the\n      // resolved or rejected state of the thenable.\n      const then = res !== null ? res.then : null;\n      if (typeof then === 'function') {\n        // In this case, the promise is \"resolved\", but still in the 'PENDING'\n        // state. This is what the ES6 spec means when it says \"A resolved promise\n        // may be pending, fulfilled or rejected\" in\n        // http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects\n        return then(resolve, reject);\n      }\n\n      this.$state = 'FULFILLED';\n      this.$internalValue = res;\n\n      // If somebody called `.then()` while this promise was pending, need\n      // to call their `onFulfilled()` function\n      for (const { onFulfilled } of this.$chained) {\n        onFulfilled(res);\n      }\n\n      return res;\n    };\n\n    const reject = err => {\n      if (this.$state !== 'PENDING') {\n        return;\n      }\n\n      this.$state = 'REJECTED';\n      this.$internalValue = err;\n\n      for (const { onRejected } of this.$chained) {\n        onRejected(err);\n      }\n    };\n\n    // Call the executor function with `resolve()` and `reject()` as in the spec.\n    try {\n      // If the executor function throws a sync exception, we consider that\n      // a rejection. Keep in mind that, since `resolve()` or `reject()` can\n      // only be called once, a function that synchronously calls `resolve()`\n      // and then throws will lead to a fulfilled promise and a swallowed error\n      executor(resolve, reject);\n    } catch (err) {\n      reject(err);\n    }\n  }\n\n  // `onFulfilled` is called if the promise is fulfilled, and `onRejected`\n  // if the promise is rejected. For now, you can think of 'fulfilled' and\n  // 'resolved' as the same thing.\n  then(onFulfilled, onRejected) {\n    return new Promise((resolve, reject) => {\n      // Ensure that errors in `onFulfilled()` and `onRejected()` reject the\n      // returned promise, otherwise they'll crash the process. Also, ensure\n      // that the promise\n      const _onFulfilled = res => {\n        try {\n          // If `onFulfilled()` returns a promise, trust `resolve()` to handle\n          // it correctly.\n          // store new value to new Promise\n          resolve(onFulfilled(res));\n        } catch (err) {\n          reject(err);\n        }\n      };\n\n      const _onRejected = err => {\n        try {\n          // store new value to new Promise\n          reject(onRejected(err));\n        } catch (_err) {\n          reject(_err);\n        }\n      };\n\n      switch (this.$state) {\n        case 'FULFILLED':\n          _onFulfilled(this.$internalValue);\n          break;\n        case 'REJECTED':\n          _onRejected(this.$internalValue);\n          break;\n        default:\n          this.$chained.push({\n            onFulfilled: _onFulfilled,\n            onRejected: _onRejected,\n          });\n      }\n    });\n  }\n\n  catch(onRejected) {\n    return this.then(null, onRejected);\n  }\n\n  finally() {\n    return this.then(null, null);\n  }\n\n  static all(iterable) {\n    return new Promise((resolve, reject) => {\n      let index = 0;\n      let elementCount = 0;\n      let result;\n\n      for (const promise of iterable) {\n        const currentIndex = index;\n        promise.then(\n          // eslint-disable-next-line no-loop-func\n          value => {\n            result[currentIndex] = value;\n            elementCount++;\n\n            if (elementCount === result.length) {\n              resolve(result);\n            }\n          },\n          err => {\n            reject(err);\n          }\n        );\n        index++;\n      }\n\n      if (index === 0) {\n        resolve([]);\n        return;\n      }\n\n      result = new Array(index);\n    });\n  }\n\n  static race(iterable) {\n    return new Promise((resolve, reject) => {\n      for (const promise of iterable) {\n        promise.then(\n          value => {\n            resolve(value);\n          },\n          err => {\n            reject(err);\n          }\n        );\n      }\n    });\n  }\n\n  static allSettled(iterable) {\n    return new Promise((resolve, reject) => {\n      let index = 0;\n      let elementCount = 0;\n      let result;\n\n      function addElementToResult(i, elem) {\n        result[i] = elem;\n        elementCount++;\n\n        if (elementCount === result.length) {\n          resolve(result);\n        }\n      }\n\n      for (const promise of iterable) {\n        const currentIndex = index;\n        promise.then(\n          value =>\n            addElementToResult(currentIndex, {\n              status: 'fulfilled',\n              value,\n            }),\n          reason =>\n            addElementToResult(currentIndex, {\n              status: 'rejected',\n              reason,\n            })\n        );\n        index++;\n      }\n\n      if (index === 0) {\n        resolve([]);\n        return;\n      }\n\n      result = new Array(index);\n    });\n  }\n}\n")),(0,l.kt)("h3",{id:"memorize-async-function"},"Memorize Async Function"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const memo = {};\nconst progressQueues = {};\n\nfunction memoProcessData(key) {\n  return new Promise((resolve, reject) => {\n    if (Object.prototype.hasOwnProperty.call(memo, key)) {\n      resolve(memo[key]);\n      return;\n    }\n\n    if (!Object.prototype.hasOwnProperty.call(progressQueues, key)) {\n      // Called for a new key\n      // Create an entry for it in progressQueues\n      progressQueues[key] = [[resolve, reject]];\n    } else {\n      // Called for a key that's still being processed\n      // Enqueue it's handlers and exit.\n      progressQueues[key].push([resolve, reject]);\n      return;\n    }\n\n    processData(key)\n      .then(data => {\n        memo[key] = data;\n        for (const [resolver] of progressQueues[key]) resolver(data);\n      })\n      .catch(error => {\n        for (const [, rejector] of progressQueues[key]) rejector(error);\n      })\n      .finally(() => {\n        delete progressQueues[key];\n      });\n  });\n}\n")),(0,l.kt)("h2",{id:"async-and-await"},"Async and Await"),(0,l.kt)("h3",{id:"await-features"},"Await Features"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"async")," \u5f02\u6b65\u51fd\u6570\u5982\u679c\u4e0d\u5305\u542b ",(0,l.kt)("inlineCode",{parentName:"li"},"await")," \u5173\u952e\u5b57, \u5176\u6267\u884c (\u9664\u8fd4\u56de\u503c\u5916) \u57fa\u672c\u4e0a\u8ddf\u666e\u901a\u51fd\u6570\u6ca1\u6709\u4ec0\u4e48\u533a\u522b."),(0,l.kt)("li",{parentName:"ul"},"JavaScript \u8fd0\u884c\u65f6\u5728\u78b0\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"await")," \u5173\u952e\u5b57\u65f6, \u4f1a\u8bb0\u5f55\u5728\u54ea\u91cc\u6682\u505c\u6267\u884c."),(0,l.kt)("li",{parentName:"ul"},"\u7b49\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"await")," \u53f3\u8fb9\u7684\u503c\u53ef\u7528\u4e86, JavaScript \u8fd0\u884c\u65f6\u4f1a\u5411\u6d88\u606f\u961f\u5217\u4e2d\u63a8\u9001\u4e00\u4e2a\u4efb\u52a1, \u8fd9\u4e2a\u4efb\u52a1\u4f1a\u6062\u590d\u5f02\u6b65\u51fd\u6570\u7684\u6267\u884c."),(0,l.kt)("li",{parentName:"ul"},"\u5373\u4f7f ",(0,l.kt)("inlineCode",{parentName:"li"},"await")," \u540e\u9762\u8ddf\u7740\u4e00\u4e2a\u7acb\u5373\u53ef\u7528\u7684\u503c, \u51fd\u6570\u7684\u5176\u4f59\u90e8\u5206\u4e5f\u4f1a\u88ab\u5f02\u6b65\u6c42\u503c.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"async function foo() {\n  console.log(2);\n}\n\nconsole.log(1);\nfoo();\nconsole.log(3);\n// 1\n// 2\n// 3\n\nasync function bar() {\n  console.log(2);\n  await null;\n  console.log(4);\n}\n\nconsole.log(1);\nbar();\nconsole.log(3);\n// 1\n// 2\n// 3\n// 4\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Await ",(0,l.kt)("inlineCode",{parentName:"li"},"thenable")," object (implements ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," interface):")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"async function bar() {\n  const thenable = {\n    then(callback) {\n      callback('bar');\n    },\n  };\n  return thenable;\n}\n\nbar().then(console.log);\n// bar\n\nasync function baz() {\n  const thenable = {\n    then(callback) {\n      callback('baz');\n    },\n  };\n  console.log(await thenable);\n}\n\nbaz();\n// baz\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"async"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"await")," implement generator based asynchronous control flow:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const fetchJson = co.wrap(function* (url) {\n  try {\n    const response = yield fetch(url);\n    const text = yield response.text();\n    return JSON.parse(text);\n  } catch (error) {\n    console.log(`ERROR: ${error.stack}`);\n  }\n});\n\nasync function fetchJson(url) {\n  try {\n    const response = await fetch(url);\n    const text = await response.text();\n    return JSON.parse(text);\n  } catch (error) {\n    console.log(`ERROR: ${error.stack}`);\n  }\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"async")," \u51fd\u6570\u81ea\u52a8\u5c06\u8fd4\u56de\u503c\u5305\u88c5\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"Promise"),":")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// BAD.\nasync function downloadContent(urls) {\n  const promiseArray = urls.map(fetch);\n  return await Promise.all(promiseArray);\n}\n\n// GOOD.\nasync function downloadContent(urls) {\n  const promiseArray = urls.map(fetch);\n  return Promise.all(promiseArray);\n}\n")),(0,l.kt)("h3",{id:"await-arrays"},"Await Arrays"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If you want to execute await calls in series,\nuse a for-loop (or any loop without a callback)."),(0,l.kt)("li",{parentName:"ul"},"Don't ever use await with ",(0,l.kt)("inlineCode",{parentName:"li"},"forEach")," (",(0,l.kt)("inlineCode",{parentName:"li"},"forEach")," is not promise-aware),\nuse a for-loop (or any loop without a callback) instead."),(0,l.kt)("li",{parentName:"ul"},"Don't await inside filter and reduce,\nalways await an array of promises with map, then filter or reduce accordingly."),(0,l.kt)("li",{parentName:"ul"},"Avoid wrong parallel logic (too sequential):")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Wrong:\nconst books = await bookModel.fetchAll();\nconst author = await authorModel.fetch(authorId);\n\n// Correct:\nconst bookPromise = bookModel.fetchAll();\nconst authorPromise = authorModel.fetch(authorId);\nconst book = await bookPromise;\nconst author = await authorPromise;\n\nasync function getAuthors(authorIds) {\n  // WRONG, this will cause sequential calls\n  // const authors = authorIds.map(id => await authorModel.fetch(id));\n  // CORRECT:\n  const promises = authorIds.map(id => authorModel.fetch(id));\n  const authors = await Promise.all(promises);\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"async function randomDelay(id) {\n  const delay = Math.random() * 1000;\n  return new Promise(resolve =>\n    setTimeout(() => {\n      console.log(`${id} finished`);\n      resolve(id);\n    }, delay)\n  );\n}\n\nasync function sequential() {\n  const t0 = Date.now();\n\n  for (let i = 0; i < 5; ++i) {\n    await randomDelay(i);\n  }\n\n  console.log(`${Date.now() - t0}ms elapsed`);\n}\n\nsequential();\n// 0 finished\n// 1 finished\n// 2 finished\n// 3 finished\n// 4 finished\n// 2877ms elapsed\n\nasync function parallel() {\n  const t0 = Date.now();\n  const promises = Array(5)\n    .fill(null)\n    .map((_, i) => randomDelay(i));\n\n  for (const p of promises) {\n    console.log(`awaited ${await p}`);\n  }\n\n  console.log(`${Date.now() - t0}ms elapsed`);\n}\n\nparallel();\n// 4 finished\n// 2 finished\n// 1 finished\n// 0 finished\n// 3 finished\n// awaited 0\n// awaited 1\n// awaited 2\n// awaited 3\n// awaited 4\n// 645ms elapsed\n")),(0,l.kt)("h2",{id:"asynchronous-javascript"},"Asynchronous JavaScript"),(0,l.kt)("h3",{id:"sleep-function"},"Sleep Function"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function sleep(time) {\n  return new Promise(resolve => setTimeout(resolve, time));\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"sleep(2000).then(() => {\n  // do something after 2000 milliseconds\n  console.log('resolved');\n});\n\nasync function add(n1, n2) {\n  await sleep(2222);\n  console.log(n1 + n2);\n}\n\nadd(1, 2);\n")),(0,l.kt)("h3",{id:"race-condition"},"Race Condition"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Keep latest updates."),(0,l.kt)("li",{parentName:"ul"},"Recover from failures."),(0,l.kt)("li",{parentName:"ul"},"Online and offline sync (",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pouchdb/pouchdb"},"PouchDB"),")."),(0,l.kt)("li",{parentName:"ul"},"Tools: ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/redux-saga/redux-saga"},"redux-saga"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  data() {\n    return {\n      text: '',\n      results: [],\n      nextRequestId: 1,\n      displayedRequestId: 0,\n    };\n  },\n  watch: {\n    async text(value) {\n      const requestId = this.nextRequestId++;\n      const results = await search(value);\n\n      // guarantee display latest search results (when input keep changing)\n      if (requestId < this.displayedRequestId) {\n        return;\n      }\n\n      this.displayedRequestId = requestId;\n      this.results = results;\n    },\n  },\n};\n")),(0,l.kt)("h3",{id:"web-worker"},"Web Worker"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u591a\u7ebf\u7a0b\u5e76\u884c\u6267\u884c."),(0,l.kt)("li",{parentName:"ul"},"\u5229\u7528 ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel"},"BroadcastChannel API"),"\n\u53ef\u4ee5\u521b\u5efa Shared Worker, \u5373\u5171\u4eab Workers \u5728\u540c\u4e00\u6e90 (origin) \u4e0b\u9762\u7684\u5404\u79cd\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u8bbf\u95ee\u5b83,\n\u5305\u62ec: ",(0,l.kt)("inlineCode",{parentName:"li"},"iframe"),"/\u6d4f\u89c8\u5668\u4e2d\u7684\u4e0d\u540c Tab \u9875 (",(0,l.kt)("inlineCode",{parentName:"li"},"Browsing Context"),")."),(0,l.kt)("li",{parentName:"ul"},"Use Case:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Graphic App (Ray Tracing)."),(0,l.kt)("li",{parentName:"ul"},"Encryption."),(0,l.kt)("li",{parentName:"ul"},"Prefetching Data."),(0,l.kt)("li",{parentName:"ul"},"PWA (Service Worker)."),(0,l.kt)("li",{parentName:"ul"},"Spell Checking.")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},"<button onclick=\"startComputation()\">Start computation</button>\n\n<script>\n  const worker = new Worker('worker.js');\n\n  worker.addEventListener(\n    'message',\n    function (e) {\n      console.log(e.data);\n    },\n    false\n  );\n\n  function startComputation() {\n    worker.postMessage({ cmd: 'average', data: [1, 2, 3, 4] });\n  }\n<\/script>\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// worker.js\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener(\n  'message',\n  function (e) {\n    const data = e.data;\n    switch (data.cmd) {\n      case 'average': {\n        const result = calculateAverage(data);\n        // eslint-disable-next-line no-restricted-globals\n        self.postMessage(result);\n        break;\n      }\n      default:\n        // eslint-disable-next-line no-restricted-globals\n        self.postMessage('Unknown command');\n    }\n  },\n  false\n);\n")),(0,l.kt)("h4",{id:"web-worker-runtime"},"Web Worker Runtime"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Web Worker \u65e0\u6cd5\u8bbf\u95ee\u4e00\u4e9b\u975e\u5e38\u5173\u952e\u7684 JavaScript \u7279\u6027:\nDOM (\u7ebf\u7a0b\u4e0d\u5b89\u5168), ",(0,l.kt)("inlineCode",{parentName:"li"},"window")," \u5bf9\u8c61, ",(0,l.kt)("inlineCode",{parentName:"li"},"document")," \u5bf9\u8c61, ",(0,l.kt)("inlineCode",{parentName:"li"},"parent")," \u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"self")," \u4e0a\u53ef\u7528\u7684\u5c5e\u6027\u662f ",(0,l.kt)("inlineCode",{parentName:"li"},"window")," \u5bf9\u8c61\u4e0a\u5c5e\u6027\u7684\u4e25\u683c\u5b50\u96c6,\n",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope"},(0,l.kt)("inlineCode",{parentName:"a"},"WorkerGlobalScope")),":",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"navigation")," \u5bf9\u8c61: ",(0,l.kt)("inlineCode",{parentName:"li"},"appName"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"appVersion"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"userAgent"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"platform"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"location")," \u5bf9\u8c61: \u6240\u6709\u5c5e\u6027\u53ea\u8bfb."),(0,l.kt)("li",{parentName:"ul"},"ECMAScript \u5bf9\u8c61: ",(0,l.kt)("inlineCode",{parentName:"li"},"Object"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"Array"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"Date"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"console")," \u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"setTimeout"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"setInterval")," \u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"XMLHttpRequest")," \u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"fetch")," \u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"caches")," \u5bf9\u8c61: ",(0,l.kt)("inlineCode",{parentName:"li"},"ServicerWorker")," ",(0,l.kt)("inlineCode",{parentName:"li"},"CacheStorage")," \u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"self")," \u5bf9\u8c61: \u6307\u5411\u5168\u5c40 worker \u5bf9\u8c61."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"close")," \u65b9\u6cd5: \u505c\u6b62 worker."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"importScripts")," \u65b9\u6cd5: \u52a0\u8f7d\u5916\u90e8\u4f9d\u8d56."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/MessagePort"},(0,l.kt)("inlineCode",{parentName:"a"},"MessagePort")),"\n\u65b9\u6cd5: ",(0,l.kt)("inlineCode",{parentName:"li"},"postMessage"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"onmessage"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"onmessageerror"),"."))),(0,l.kt)("li",{parentName:"ul"},"\u5de5\u4f5c\u8005\u7ebf\u7a0b\u7684\u811a\u672c\u6587\u4ef6\u53ea\u80fd\u4ece\u4e0e\u7236\u9875\u9762\u76f8\u540c\u7684\u6e90\u52a0\u8f7d,\n\u4ece\u5176\u4ed6\u6e90\u52a0\u8f7d\u5de5\u4f5c\u8005\u7ebf\u7a0b\u7684\u811a\u672c\u6587\u4ef6\u4f1a\u5bfc\u81f4\u9519\u8bef.\n\u5728\u5de5\u4f5c\u8005\u7ebf\u7a0b\u5185\u90e8\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"importScripts()")," \u53ef\u4ee5\u52a0\u8f7d\u5176\u4ed6\u6e90\u7684\u811a\u672c.")),(0,l.kt)("h4",{id:"web-worker-basic-usage"},"Web Worker Basic Usage"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5148 ",(0,l.kt)("inlineCode",{parentName:"li"},"on"),", \u540e ",(0,l.kt)("inlineCode",{parentName:"li"},"post"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"main.js"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"worker.js")," \u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"onmessage")," \u4e0e ",(0,l.kt)("inlineCode",{parentName:"li"},"postMessage")," \u76f8\u4e92\u89e6\u53d1."),(0,l.kt)("li",{parentName:"ul"},"\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u505c\u6b62 Worker:\n\u4ece\u4e3b\u9875\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"worker.terminate()")," \u6216\u5728 worker \u5185\u90e8\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"self.close()"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/*\n * JSONParser.js\n */\n// eslint-disable-next-line no-restricted-globals\nself.onmessage = function (event) {\n  const jsonText = event.data;\n  const jsonData = JSON.parse(jsonText);\n\n  // eslint-disable-next-line no-restricted-globals\n  self.postMessage(jsonData);\n};\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/*\n * main.js\n */\nconst worker = new Worker('JSONParser.js');\n\nworker.onmessage = function (event) {\n  const jsonData = event.data;\n  evaluateData(jsonData);\n};\n\nworker.postMessage(jsonText);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// main.js\nfunction work() {\n  onmessage = ({ data: { jobId, message } }) => {\n    console.log(`I am worker, I receive:-----${message}`);\n    postMessage({ jobId, result: 'message from worker' });\n  };\n}\n\nconst makeWorker = f => {\n  const pendingJobs = {};\n  const workerScriptBlobUrl = URL.createObjectURL(\n    new Blob([`(${f.toString()})()`])\n  );\n  const worker = new Worker(workerScriptBlobUrl);\n\n  worker.onmessage = ({ data: { result, jobId } }) => {\n    // \u8c03\u7528 resolve, \u6539\u53d8 Promise \u72b6\u6001\n    pendingJobs[jobId](result);\n    delete pendingJobs[jobId];\n  };\n\n  return (...message) =>\n    new Promise(resolve => {\n      const jobId = String(Math.random());\n      pendingJobs[jobId] = resolve;\n      worker.postMessage({ jobId, message });\n    });\n};\n\nconst testWorker = makeWorker(work);\n\ntestWorker('message from main thread').then(message => {\n  console.log(`I am main thread, I receive:-----${message}`);\n});\n")),(0,l.kt)("h4",{id:"web-worker-pool"},"Web Worker Pool"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'class TaskWorker extends Worker {\n  constructor(notifyAvailable, ...workerArgs) {\n    super(...workerArgs);\n\n    // \u521d\u59cb\u5316\u4e3a\u4e0d\u53ef\u7528\u72b6\u6001\n    this.available = false;\n    this.resolve = null;\n    this.reject = null;\n\n    // \u7ebf\u7a0b\u6c60\u4f1a\u4f20\u9012\u56de\u8c03\n    // \u4ee5\u4fbf\u5de5\u4f5c\u8005\u7ebf\u7a0b\u53d1\u51fa\u5b83\u9700\u8981\u65b0\u4efb\u52a1\u7684\u4fe1\u53f7\n    this.notifyAvailable = notifyAvailable;\n\n    // \u7ebf\u7a0b\u811a\u672c\u5728\u5b8c\u5168\u521d\u59cb\u5316\u4e4b\u540e\n    // \u4f1a\u53d1\u9001\u4e00\u6761"ready"\u6d88\u606f\n    this.onmessage = () => this.setAvailable();\n  }\n\n  // \u7531\u7ebf\u7a0b\u6c60\u8c03\u7528, \u4ee5\u5206\u6d3e\u65b0\u4efb\u52a1\n  dispatch({ resolve, reject, postMessageArgs }) {\n    this.available = false;\n    this.onmessage = ({ data }) => {\n      resolve(data);\n      this.setAvailable();\n    };\n    this.onerror = e => {\n      reject(e);\n      this.setAvailable();\n    };\n    this.postMessage(...postMessageArgs);\n  }\n\n  setAvailable() {\n    this.available = true;\n    this.resolve = null;\n    this.reject = null;\n    this.notifyAvailable();\n  }\n}\n\nclass WorkerPool {\n  constructor(poolSize, ...workerArgs) {\n    this.taskQueue = [];\n    this.workers = [];\n\n    // \u521d\u59cb\u5316\u7ebf\u7a0b\u6c60\n    for (let i = 0; i < poolSize; ++i) {\n      this.workers.push(\n        new TaskWorker(() => this.dispatchIfAvailable(), ...workerArgs)\n      );\n    }\n  }\n\n  // \u628a\u4efb\u52a1\u63a8\u5165\u961f\u5217\n  enqueue(...postMessageArgs) {\n    return new Promise((resolve, reject) => {\n      this.taskQueue.push({ resolve, reject, postMessageArgs });\n      this.dispatchIfAvailable();\n    });\n  }\n\n  // \u628a\u4efb\u52a1\u53d1\u9001\u7ed9\u4e0b\u4e00\u4e2a\u7a7a\u95f2\u7684\u7ebf\u7a0b\n  dispatchIfAvailable() {\n    if (!this.taskQueue.length) {\n      return;\n    }\n\n    for (const worker of this.workers) {\n      if (worker.available) {\n        const a = this.taskQueue.shift();\n        worker.dispatch(a);\n        break;\n      }\n    }\n  }\n\n  // \u7ec8\u6b62\u6240\u6709\u5de5\u4f5c\u8005\u7ebf\u7a0b\n  close() {\n    for (const worker of this.workers) {\n      worker.terminate();\n    }\n  }\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// worker.js\nself.onmessage = ({ data }) => {\n  const view = new Float32Array(data.arrayBuffer);\n  let sum = 0;\n  // \u6c42\u548c\n  for (let i = data.startIdx; i < data.endIdx; ++i) {\n    // \u4e0d\u9700\u8981\u539f\u5b50\u64cd\u4f5c, \u56e0\u4e3a\u53ea\u9700\u8981\u8bfb\n    sum += view[i];\n  }\n  // \u628a\u7ed3\u679c\u53d1\u9001\u7ed9\u5de5\u4f5c\u8005\u7ebf\u7a0b\n  self.postMessage(sum);\n};\n// \u53d1\u9001\u6d88\u606f\u7ed9 TaskWorker\n// \u901a\u77e5\u5de5\u4f5c\u8005\u7ebf\u7a0b\u51c6\u5907\u597d\u63a5\u6536\u4efb\u52a1\u4e86\nself.postMessage('ready');\n\n// main.js\nconst totalFloats = 1e8;\nconst numTasks = 20;\nconst floatsPerTask = totalFloats / numTasks;\nconst numWorkers = 4;\n\n// \u521b\u5efa\u7ebf\u7a0b\u6c60\nconst pool = new WorkerPool(numWorkers, './worker.js');\n\n// \u586b\u5145\u6d6e\u70b9\u503c\u6570\u7ec4\nconst arrayBuffer = new SharedArrayBuffer(4 * totalFloats);\nconst view = new Float32Array(arrayBuffer);\n\nfor (let i = 0; i < totalFloats; ++i) {\n  view[i] = Math.random();\n}\n\nconst partialSumPromises = [];\n\nfor (let i = 0; i < totalFloats; i += floatsPerTask) {\n  partialSumPromises.push(\n    pool.enqueue({\n      startIdx: i,\n      endIdx: i + floatsPerTask,\n      arrayBuffer,\n    })\n  );\n}\n\n// \u6c42\u548c\nPromise.all(partialSumPromises)\n  .then(partialSums => partialSums.reduce((x, y) => x + y))\n  .then(console.log);\n// (\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d, \u548c\u5e94\u8be5\u7ea6\u7b49\u4e8e 1E8/2)\n// 49997075.47203197\n")),(0,l.kt)("h4",{id:"web-worker-performance"},"Web Worker Performance"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Web Worker performance ",(0,l.kt)("a",{parentName:"li",href:"https://mp.weixin.qq.com/s/IJHI9JB3nMQPi46b6yGVWw"},"guide"),".")),(0,l.kt)("h3",{id:"abort-controller"},"Abort Controller"),(0,l.kt)("h4",{id:"abort-fetching"},"Abort Fetching"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"import { useParams } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\n\ninterface Post {\n  id: number;\n  title: string;\n  body: string;\n}\n\nfunction usePostLoading() {\n  const { postId } = useParams<{ postId: string }>();\n  const [isLoading, setIsLoading] = useState(false);\n  const [post, setPost] = useState<Post | null>(null);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    setIsLoading(true);\n    fetch(`https://jsonplaceholder.typicode.com/posts/${postId}`, {\n      signal: abortController.signal,\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n\n        return Promise.reject(Error('The request failed.'));\n      })\n      .then((fetchedPost: Post) => {\n        setPost(fetchedPost);\n      })\n      .catch(err => {\n        if (abortController.signal.aborted) {\n          console.log('The user aborted the request');\n        } else {\n          console.error(err.message);\n        }\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n\n    return () => {\n      abortController.abort();\n    };\n  }, [postId]);\n\n  return {\n    post,\n    isLoading,\n  };\n}\n\nexport default usePostLoading;\n")),(0,l.kt)("h4",{id:"abort-promise"},"Abort Promise"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function wait(time: number, signal?: AbortSignal) {\n  return new Promise<void>((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      resolve();\n    }, time);\n    signal?.addEventListener('abort', () => {\n      clearTimeout(timeoutId);\n      reject(Error('Aborted.'));\n    });\n  });\n}\n\nconst abortController = new AbortController();\n\nsetTimeout(() => {\n  abortController.abort();\n}, 1000);\n\nwait(5000, abortController.signal)\n  .then(() => {\n    console.log('5 seconds passed');\n  })\n  .catch(() => {\n    console.log('Waiting was interrupted');\n  });\n")),(0,l.kt)("h3",{id:"asynchronous-api-comparison"},"Asynchronous API Comparison"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"promise")," \u548c ",(0,l.kt)("inlineCode",{parentName:"li"},"async/await")," \u4e13\u95e8\u7528\u4e8e\u5904\u7406\u5f02\u6b65\u64cd\u4f5c."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"generator")," \u5e76\u4e0d\u662f\u4e13\u95e8\u4e3a\u5f02\u6b65\u8bbe\u8ba1, \u5b83\u8fd8\u6709\u5176\u4ed6\u529f\u80fd (\u5bf9\u8c61\u8fed\u4ee3/\u63a7\u5236\u8f93\u51fa/Iterator Interface/etc)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"promise")," \u7f16\u5199\u4ee3\u7801\u76f8\u6bd4 ",(0,l.kt)("inlineCode",{parentName:"li"},"generator/async/await")," \u66f4\u4e3a\u590d\u6742\u5316, \u4e14\u53ef\u8bfb\u6027\u4e5f\u7a0d\u5dee."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"generator/async/await")," \u9700\u8981\u4e0e ",(0,l.kt)("inlineCode",{parentName:"li"},"promise")," \u5bf9\u8c61\u642d\u914d\u5904\u7406\u5f02\u6b65\u60c5\u51b5."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"async/await")," \u4f7f\u7528\u4e0a\u66f4\u4e3a\u7b80\u6d01, \u5c06\u5f02\u6b65\u4ee3\u7801\u4ee5\u540c\u6b65\u7684\u5f62\u5f0f\u8fdb\u884c\u7f16\u5199, \u662f\u5904\u7406\u5f02\u6b65\u7f16\u7a0b\u7684\u6700\u7ec8\u65b9\u6848.")),(0,l.kt)("h2",{id:"module"},"Module"),(0,l.kt)("h3",{id:"crust-principles"},"CRUST Principles"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Consistent: ES6 API design ",(0,l.kt)("inlineCode",{parentName:"li"},"Array.XXX(fn)"),"."),(0,l.kt)("li",{parentName:"ul"},"Resilient: jQuery sizzle API design ",(0,l.kt)("inlineCode",{parentName:"li"},"$(element)"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"$(selector)"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"$(selector, context)"),"."),(0,l.kt)("li",{parentName:"ul"},"Unambiguous."),(0,l.kt)("li",{parentName:"ul"},"Simple: Simple ",(0,l.kt)("inlineCode",{parentName:"li"},"fetch")," API design."),(0,l.kt)("li",{parentName:"ul"},"Tiny: Tiny surface areas.")),(0,l.kt)("h3",{id:"namespace-module-pattern"},"Namespace Module Pattern"),(0,l.kt)("h4",{id:"namespace-module-constructor"},"Namespace Module Constructor"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u547d\u540d\u7a7a\u95f4."),(0,l.kt)("li",{parentName:"ul"},"\u4f9d\u8d56\u6a21\u5f0f."),(0,l.kt)("li",{parentName:"ul"},"\u79c1\u6709\u5c5e\u6027/\u7279\u6743\u65b9\u6cd5."),(0,l.kt)("li",{parentName:"ul"},"\u521d\u59cb\u5316\u6a21\u5f0f."),(0,l.kt)("li",{parentName:"ul"},"\u63ed\u793a\u6a21\u5f0f: \u516c\u5171\u63a5\u53e3."),(0,l.kt)("li",{parentName:"ul"},"\u5373\u65f6\u51fd\u6570\u6a21\u5f0f.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"APP.namespace = function (namespaceString) {\n  let parts = namespaceString.split('.');\n  let parent = APP;\n  let i;\n  // strip redundant leading global\n  if (parts[0] === 'APP') {\n    // remove leading global\n    parts = parts.slice(1);\n  }\n  for (i = 0; i < parts.length; i += 1) {\n    // create a property if it doesn't exist\n    if (typeof parent[parts[i]] === 'undefined') {\n      parent[parts[i]] = {};\n    }\n    // \u5173\u952e: \u5411\u5185\u5d4c\u5957\n    parent = parent[parts[i]];\n  }\n  // \u8fd4\u56de\u6700\u5185\u5c42\u6a21\u5757\u540d\n  return parent;\n};\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// assign returned value to a local var\nconst module2 = APP.namespace('APP.modules.module2');\nconst truthy = module2 === APP.modules.module2; // true\n// skip initial `APP`\nAPP.namespace('modules.module51');\n// long namespace\nAPP.namespace('once.upon.a.time.there.was.this.long.nested.property');\n")),(0,l.kt)("h4",{id:"namespace-module-usage"},"Namespace Module Usage"),(0,l.kt)("p",null,"\u901a\u8fc7\u4f20\u53c2\u533f\u540d\u51fd\u6570, \u521b\u5efa\u547d\u540d\u7a7a\u95f4, \u8fdb\u884c\u6a21\u5757\u5305\u88f9:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const app = {};\n\n(function (exports) {\n  (function (exports) {\n    const api = {\n      moduleExists: function test() {\n        return true;\n      },\n    };\n    // \u95ed\u5305\u5f0f\u7ee7\u627f,\u6269\u5c55exports\u5bf9\u8c61\u4e3aapi\u5bf9\u8c61\n    $.extend(exports, api);\n  })(typeof exports === 'undefined' ? window : exports);\n  // \u5c06api\u5bf9\u8c61\u7ed1\u5b9a\u81f3app\u5bf9\u8c61\u4e0a\n})(app);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// global object\nconst APP = {};\n// constructors\nAPP.Parent = function () {};\nAPP.Child = function () {};\n// a variable\nAPP.some_var = 1;\n// an object container\nAPP.modules = {};\n// nested objects\nAPP.modules.module1 = {};\nAPP.modules.module1.data = { a: 1, b: 2 };\nAPP.modules.module2 = {};\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u547d\u540d\u7a7a\u95f4\u6a21\u5f0f\nAPP.namespace('APP.utilities.array');\n\n// \u5f62\u53c2: \u5bfc\u5165\u5168\u5c40\u53d8\u91cf\nAPP.utilities.array = (function (app, global) {\n  // \u4f9d\u8d56\u6a21\u5f0f\n  const uObj = app.utilities.object;\n  const uLang = app.utilities.lang;\n\n  // \u79c1\u6709\u5c5e\u6027\n  const arrStr = '[object Array]';\n  const toStr = Object.prototype.toString;\n\n  // \u79c1\u6709\u65b9\u6cd5\n  const inArray = function (haystack, needle) {\n    for (let i = 0, max = haystack.length; i < max; i += 1) {\n      if (haystack[i] === needle) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n  const isArray = function (a) {\n    return toStr.call(a) === arrayString;\n  };\n\n  // \u521d\u59cb\u5316\u6a21\u5f0f:\n  // \u521d\u59cb\u5316\u4ee3\u7801, \u53ea\u6267\u884c\u4e00\u6b21.\n\n  // \u63ed\u793a\u516c\u5171\u63a5\u53e3.\n  return {\n    isArray,\n    indexOf: inArray,\n  };\n})(APP, this);\n")),(0,l.kt)("h3",{id:"sandbox-module-pattern"},"Sandbox Module Pattern"),(0,l.kt)("h4",{id:"sandbox-module-constructor"},"Sandbox Module Constructor"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u79c1\u6709\u5c5e\u6027\u7ed1\u5b9a\u81f3 this/prototype."),(0,l.kt)("li",{parentName:"ul"},"\u7279\u6743\u65b9\u6cd5\u7ed1\u5b9a\u81f3 modules/prototype.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function Sandbox(...args) {\n  // the last argument is the callback\n  const callback = args.pop();\n  // modules can be passed as an array or as individual parameters\n  let modules = args[0] && typeof args[0] === 'string' ? args : args[0];\n\n  // make sure the function is called\n  // as a constructor\n  if (!(this instanceof Sandbox)) {\n    return new Sandbox(modules, callback);\n  }\n\n  // add properties to `this` as needed:\n  this.a = 1;\n  this.b = 2;\n\n  // now add modules to the core `this` object\n  // no modules or \"*\" both mean \"use all modules\"\n  if (!modules || modules === '*') {\n    modules = [];\n    for (const i in Sandbox.modules) {\n      if (Object.prototype.hasOwnProperty.call(Sandbox.modules, i)) {\n        modules.push(i);\n      }\n    }\n  }\n\n  // initialize the required modules\n  for (let i = 0; i < modules.length; i += 1) {\n    Sandbox.modules[modules[i]](this);\n  }\n\n  // call the callback\n  callback(this);\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// any prototype properties as needed\nSandbox.prototype = {\n  name: 'My Application',\n  version: '1.0',\n  getName() {\n    return this.name;\n  },\n};\n")),(0,l.kt)("p",null,"\u9759\u6001\u5c5e\u6027: \u4f7f\u7528\u6dfb\u52a0\u7684\u65b9\u6cd5/\u6a21\u5757:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Sandbox.modules = {};\nSandbox.modules.dom = function (box) {\n  box.getElement = function () {};\n  box.getStyle = function () {};\n  box.foo = 'bar';\n};\nSandbox.modules.event = function (box) {\n  // access to the Sandbox prototype if needed:\n  // box.constructor.prototype.m = \"mmm\";\n  box.attachEvent = function () {};\n  box.detachEvent = function () {};\n};\nSandbox.modules.ajax = function (box) {\n  box.makeRequest = function () {};\n  box.getResponse = function () {};\n};\n")),(0,l.kt)("h4",{id:"sandbox-module-usage"},"Sandbox Module Usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Sandbox(['ajax', 'event'], function (box) {\n  // console.log(box);\n});\n\nSandbox('*', function (box) {\n  // console.log(box);\n});\nSandbox(function (box) {\n  // console.log(box);\n});\n\nSandbox('dom', 'event', function (box) {\n  // work with dom and event\n  Sandbox('ajax', function (box) {\n    // another sandbox \"box\" object\n    // this \"box\" is not the same as\n    // the \"box\" outside this function\n    // ...\n    // done with Ajax\n  });\n  // no trace of Ajax module here\n});\n")),(0,l.kt)("h3",{id:"commonjs-pattern"},"CommonJS Pattern"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u65e0\u8bba\u4e00\u4e2a\u6a21\u5757\u5728 ",(0,l.kt)("inlineCode",{parentName:"li"},"require()")," \u4e2d\u88ab\u5f15\u7528\u591a\u5c11\u6b21, \u6a21\u5757\u6c38\u8fdc\u662f\u5355\u4f8b, \u53ea\u4f1a\u88ab\u52a0\u8f7d\u4e00\u6b21."),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u7b2c\u4e00\u6b21\u52a0\u8f7d\u540e\u4f1a\u88ab\u7f13\u5b58, \u540e\u7eed\u52a0\u8f7d\u4f1a\u53d6\u5f97\u7f13\u5b58\u7684\u6a21\u5757."),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u52a0\u8f7d\u662f\u6a21\u5757\u7cfb\u7edf\u6267\u884c\u7684\u540c\u6b65\u64cd\u4f5c, ",(0,l.kt)("inlineCode",{parentName:"li"},"require()")," \u53ef\u4ee5\u4f4d\u4e8e\u6761\u4ef6\u8bed\u53e5\u4e2d.")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/sabertazimi/hust-web/blob/v2.7.0/js/bundler/index.js"},"Minimal CJS bundler"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"require.cache = Object.create(null);\n\n// Construct 'require', 'module' and 'exports':\nfunction require(moduleId) {\n  if (!(moduleId in require.cache)) {\n    const code = readFile(moduleId);\n    const module = { exports: {} };\n    require.cache[moduleId] = module;\n    // eslint-disable-next-line no-new-func\n    const wrapper = Function('require, exports, module', code);\n    // Bind code to module.exports:\n    wrapper(require, module.exports, module);\n  }\n  return require.cache[moduleId].exports;\n}\n")),(0,l.kt)("h3",{id:"amd-pattern"},"AMD Pattern"),(0,l.kt)("p",null,"Asynchronous module definition:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// ID \u4e3a 'moduleA' \u7684\u6a21\u5757\u5b9a\u4e49:\n// moduleA \u4f9d\u8d56 moduleB.\n// moduleB \u4f1a\u5f02\u6b65\u52a0\u8f7d.\ndefine('moduleA', ['moduleB'], function (moduleB) {\n  return {\n    stuff: moduleB.doStuff(),\n  };\n});\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"define('moduleA', ['require', 'exports'], function (require, exports) {\n  const moduleB = require('moduleB');\n\n  if (condition) {\n    const moduleC = require('moduleC');\n  }\n\n  exports.stuff = moduleB.doStuff();\n});\n")),(0,l.kt)("h3",{id:"umd-pattern"},"UMD Pattern"),(0,l.kt)("p",null,"Universal module definition:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5224\u65ad\u662f\u5426\u652f\u6301 AMD (define), \u5b58\u5728\u5219\u4f7f\u7528 AMD \u65b9\u5f0f\u52a0\u8f7d\u6a21\u5757."),(0,l.kt)("li",{parentName:"ul"},"\u5224\u65ad\u662f\u5426\u652f\u6301 Node.js \u7684\u6a21\u5757 (exports), \u5b58\u5728\u5219\u4f7f\u7528 Node.js \u6a21\u5757\u6a21\u5f0f.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * UMD Boilerplate.\n */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], function () {\n      return factory(root);\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.myPlugin = factory(root);\n  }\n})(\n  typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n    ? window\n    : this,\n  function (window) {\n    'use strict';\n\n    // Module code goes here...\n    return {};\n  }\n);\n")),(0,l.kt)("h3",{id:"es6-module"},"ES6 Module"),(0,l.kt)("h4",{id:"es6-module-features"},"ES6 Module Features"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Singleton:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u662f\u5355\u4f8b."),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u53ea\u80fd\u52a0\u8f7d\u4e00\u6b21:\n\u540c\u4e00\u4e2a\u6a21\u5757\u65e0\u8bba\u5728\u4e00\u4e2a\u9875\u9762\u4e2d\u88ab\u52a0\u8f7d\u591a\u5c11\u6b21,\n\u4e5f\u4e0d\u7ba1\u5b83\u662f\u5982\u4f55\u52a0\u8f7d\u7684, \u5b9e\u9645\u4e0a\u90fd\u53ea\u4f1a\u52a0\u8f7d\u4e00\u6b21."))),(0,l.kt)("li",{parentName:"ul"},"Imports:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u53ef\u4ee5\u8bf7\u6c42\u52a0\u8f7d\u5176\u4ed6\u6a21\u5757."),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u652f\u6301\u5faa\u73af\u4f9d\u8d56."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Static")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"Read-only")," imports."))),(0,l.kt)("li",{parentName:"ul"},"Exports:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u53ef\u4ee5\u5b9a\u4e49\u516c\u5171\u63a5\u53e3."),(0,l.kt)("li",{parentName:"ul"},"\u5176\u4ed6\u6a21\u5757\u53ef\u4ee5\u57fa\u4e8e\u8fd9\u4e2a\u516c\u5171\u63a5\u53e3\u89c2\u5bdf\u548c\u4ea4\u4e92."))),(0,l.kt)("li",{parentName:"ul"},"Local Scope:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u4e0d\u5171\u4eab\u5168\u5c40\u547d\u540d\u7a7a\u95f4."),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u9876\u7ea7 ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u7684\u503c\u662f ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined")," (\u4f20\u7edf\u811a\u672c\u4e2d\u662f ",(0,l.kt)("inlineCode",{parentName:"li"},"window"),")."),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"var")," \u58f0\u660e\u4e0d\u4f1a\u6dfb\u52a0\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},"window")," \u5bf9\u8c61."))),(0,l.kt)("li",{parentName:"ul"},"Async:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u5728\u6d4f\u89c8\u5668\u4e2d\u662f\u5f02\u6b65\u52a0\u8f7d\u548c\u6267\u884c\u7684."),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u4ee3\u7801\u53ea\u5728\u52a0\u8f7d\u540e\u6267\u884c."),(0,l.kt)("li",{parentName:"ul"},"\u89e3\u6790\u5230 ",(0,l.kt)("inlineCode",{parentName:"li"},'<script type="module">')," \u6807\u7b7e\u540e\u4f1a\u7acb\u5373\u4e0b\u8f7d\u6a21\u5757\u6587\u4ef6,\n\u4f46",(0,l.kt)("strong",{parentName:"li"},"\u6267\u884c\u4f1a\u5ef6\u8fdf"),"\u5230 HTML \u6587\u6863\u89e3\u6790\u5b8c\u6210 (",(0,l.kt)("inlineCode",{parentName:"li"},"<script defer>"),")."))),(0,l.kt)("li",{parentName:"ul"},"Strict:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u4ee3\u7801\u9ed8\u8ba4\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u6267\u884c."))),(0,l.kt)("li",{parentName:"ul"},"Static:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Static")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"Read-only")," imports: \u6a21\u5757\u662f\u9759\u6001\u7ed3\u6784."),(0,l.kt)("li",{parentName:"ul"},"Static analysis."),(0,l.kt)("li",{parentName:"ul"},"Tree shaking."),(0,l.kt)("li",{parentName:"ul"},"Compact bundling."),(0,l.kt)("li",{parentName:"ul"},"Faster imports lookup.")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u652f\u6301\u6a21\u5757\u7684\u6d4f\u89c8\u5668\u4f1a\u6267\u884c\u8fd9\u6bb5\u811a\u672c --\x3e\n\x3c!-- \u4e0d\u652f\u6301\u6a21\u5757\u7684\u6d4f\u89c8\u5668\u4e0d\u4f1a\u6267\u884c\u8fd9\u6bb5\u811a\u672c --\x3e\n<script type="module" src="module.js"><\/script>\n\n\x3c!-- \u652f\u6301\u6a21\u5757\u7684\u6d4f\u89c8\u5668\u4e0d\u4f1a\u6267\u884c\u8fd9\u6bb5\u811a\u672c --\x3e\n\x3c!-- \u4e0d\u652f\u6301\u6a21\u5757\u7684\u6d4f\u89c8\u5668\u4f1a\u6267\u884c\u8fd9\u6bb5\u811a\u672c --\x3e\n<script nomodule src="script.js"><\/script>\n')),(0,l.kt)("h4",{id:"es6-module-syntax"},"ES6 Module Syntax"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"import { lastName as surname } from './profile.js';\nimport module from './module.js';\nimport * as Bar from './bar.js'; // Object.freeze(Bar)\nimport './foo.js'; // Load effects\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"export const firstName = 'Michael';\nexport const lastName = 'Jackson';\nexport const year = 1958;\nexport function foo() {}\nexport function* bar() {}\nexport class Foo {}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// profile.js\nconst firstName = 'Michael';\nconst lastName = 'Jackson';\nconst year = 1958;\n\nexport { firstName, lastName, year };\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u63a5\u53e3\u6539\u540d\nexport { foo as myFoo } from 'module';\nexport { default as Article } from './Article';\n\n// \u6574\u4f53\u8f93\u51fa\nexport * from 'utils';\n")),(0,l.kt)("h4",{id:"es6-module-imports"},"ES6 Module Imports"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// index.mjs\nimport './index2.mjs?someURLInfo=5';\n\n// index2.mjs\nnew URL(import.meta.url).searchParams.get('someURLInfo'); // 5\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const urlOfData = new URL('data.txt', import.meta.url);\n")),(0,l.kt)("h4",{id:"es6-module-exports"},"ES6 Module Exports"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"CommonJS \u6a21\u5757\u662f\u8fd0\u884c\u65f6\u52a0\u8f7d, ES6 \u6a21\u5757\u662f\u7f16\u8bd1\u65f6\u8f93\u51fa\u63a5\u53e3."),(0,l.kt)("li",{parentName:"ul"},"CommonJS \u662f\u5355\u4e2a\u503c\u5bfc\u51fa, ES6 Module \u53ef\u4ee5\u5bfc\u51fa\u591a\u4e2a."),(0,l.kt)("li",{parentName:"ul"},"CommonJS \u662f\u52a8\u6001\u8bed\u6cd5\u53ef\u4ee5\u5199\u5728\u5224\u65ad\u91cc, ES6 Module \u662f\u9759\u6001\u8bed\u6cd5\u53ea\u80fd\u5199\u5728\u9876\u5c42."),(0,l.kt)("li",{parentName:"ul"},"CommonJS \u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u662f\u5f53\u524d\u6a21\u5757, ES6 Module \u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"this")," \u662f ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),"."),(0,l.kt)("li",{parentName:"ul"},"CommonJS \u6a21\u5757\u8f93\u51fa\u7684\u662f\u4e00\u4e2a\u503c\u7684\u62f7\u8d1d,\nES6 \u6a21\u5757 ",(0,l.kt)("inlineCode",{parentName:"li"},"export")," \u5206\u591a\u79cd\u60c5\u51b5:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"export default xxx")," \u8f93\u51fa ",(0,l.kt)("inlineCode",{parentName:"li"},"value"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},"defaultThing")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"anotherDefaultThing")," shows ES6 export default value,"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"export xxx")," \u8f93\u51fa ",(0,l.kt)("inlineCode",{parentName:"li"},"reference"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},"importedThing")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"module.thing")," shows ES6 export live reference,"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"strong"},"Destructuring"))," behavior create a brand new value."),(0,l.kt)("li",{parentName:"ol"},"function/class special case:\n",(0,l.kt)("inlineCode",{parentName:"li"},"export default function/class thing() {}; // function/class expressions"),"\nexport default reference,\n",(0,l.kt)("inlineCode",{parentName:"li"},"function/class thing() {}; export default thing; // function/class statements"),"\nexport default value.")))),(0,l.kt)("p",null,"Export default value:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// module.js\nlet thing = 'initial';\n\nexport { thing };\nexport default thing;\n\nsetTimeout(() => {\n  thing = 'changed';\n}, 500);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'// main.js\nimport { default as defaultThing, thing } from \'./module.js\';\nimport anotherDefaultThing from \'./module.js\';\n\nsetTimeout(() => {\n  console.log(thing); // "changed"\n  console.log(defaultThing); // "initial"\n  console.log(anotherDefaultThing); // "initial"\n}, 1000);\n')),(0,l.kt)("p",null,"Export live reference:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// module.js\nexport let thing = 'initial';\n\nsetTimeout(() => {\n  thing = 'changed';\n}, 500);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// main.js\nimport { thing as importedThing } from './module.js';\nconst module = await import('./module.js');\nlet { thing } = await import('./module.js'); // Destructuring behavior\n\nsetTimeout(() => {\n  console.log(importedThing); // \"changed\"\n  console.log(module.thing); // \"changed\"\n  console.log(thing); // \"initial\"\n}, 1000);\n")),(0,l.kt)("p",null,"To sum up:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// Live reference:\nimport { thing } from './module.js';\nimport { thing as otherName } from './module.js';\n\n// Current value:\nconst { thing } = await import('./module.js');\n\n// Live reference:\nexport { thing };\nexport { thing as otherName };\nexport { thing as default };\nexport default function thing() {}\n\n// Current value:\nexport default thing;\nexport default 'hello!';\n")),(0,l.kt)("h2",{id:"proxy-and-reflect"},"Proxy and Reflect"),(0,l.kt)("p",null,"Modify default object behavior with ",(0,l.kt)("inlineCode",{parentName:"p"},"Proxy")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"Reflect"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"new Proxy(target, handler)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Proxy.revocable(target, handler)"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Proxy(target, {\n  set(target, name, value, receiver) {\n    const success = Reflect.set(target, name, value, receiver);\n    if (success) {\n      log(`property ${name} on ${target} set to ${value}`);\n    }\n    return success;\n  },\n});\n")),(0,l.kt)("h3",{id:"proxy"},"Proxy"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Change original object will change proxy object."),(0,l.kt)("li",{parentName:"ul"},"change proxy object will change original object via ",(0,l.kt)("inlineCode",{parentName:"li"},"set")," related API."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Proxy.prototype")," \u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"undefined"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"target !== proxy"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const target = {\n  id: 'target',\n};\nconst handler = {};\nconst proxy = new Proxy(target, handler);\n\n// Proxy.prototype \u662f undefined\nconsole.log(target instanceof Proxy); // TypeError\nconsole.log(proxy instanceof Proxy); // TypeError\n// \u4e25\u683c\u76f8\u7b49\u53ef\u4ee5\u7528\u6765\u533a\u5206\u4ee3\u7406\u548c\u76ee\u6807\nconsole.log(target === proxy); // false\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"this")," binding should process carefully:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const proxy = new Proxy(new Date(), {});\nproxy.getDate(); // `getDate` rely on internal slots\n// TypeError: `this` is not a Date object.\n\nconst handler = {\n  get(target, propKey, receiver) {\n    if (propKey === 'getDate') {\n      return target.getDate.bind(target);\n    }\n\n    return Reflect.get(target, propKey, receiver);\n  },\n};\nconst proxy = new Proxy(new Date('2020-12-24'), handler);\nproxy.getDate(); // 24\n")),(0,l.kt)("h3",{id:"reflect"},"Reflect"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.get(target, propKey)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.set(target, propKey, value)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.has(target, propKey)"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},"in")," operator."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.defineProperty(target, propKey, attributes)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.getOwnPropertyDescriptor(target, propKey)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.deleteProperty(target, propKey)"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},"delete")," operator."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.ownKeys(target)"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},"Object.keys()")," + ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.getOwnPropertyNames()")," + ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.getOwnPropertySymbols()"),",\nall keys."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.getPrototypeOf(target)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.setPrototypeOf(target, prototype)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.isExtensible(target)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.preventExtensions(target)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.apply(target, thisArgument, argumentsList)"),":\nfunction call."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Reflect.construct(target, argumentsList)"),":\n",(0,l.kt)("inlineCode",{parentName:"li"},"new target(...argumentsList)")," operator.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Proxy Behavior"),(0,l.kt)("th",{parentName:"tr",align:null},"Overrides Behavior"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.get()")),(0,l.kt)("td",{parentName:"tr",align:null},"Reading a property value")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.set()")),(0,l.kt)("td",{parentName:"tr",align:null},"Writing to a property")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.has()")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"in")," operator")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.deleteProperty()")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"delete")," operator")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.getPrototypeOf()")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.getPrototypeOf()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.setPrototypeOf()")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.setPrototypeOf()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.isExtensible()")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.isExtensible()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.preventExtensions()")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.preventExtensions()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.getOwnPropertyDescriptor()")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.getOwnPropertyDescriptor()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.defineProperty()")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Object.defineProperty()"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.ownKeys()")),(0,l.kt)("td",{parentName:"tr",align:null},"All ",(0,l.kt)("inlineCode",{parentName:"td"},"Object")," keys methods")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.apply()")),(0,l.kt)("td",{parentName:"tr",align:null},"Calling a function")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Reflect.construct()")),(0,l.kt)("td",{parentName:"tr",align:null},"Calling a function with ",(0,l.kt)("inlineCode",{parentName:"td"},"new"))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const target = {\n  foo: 'bar',\n};\nconst proxy = new Proxy(target, Reflect);\nconsole.log(proxy.foo); // bar\nconsole.log(target.foo); // bar\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'Reflect.ownKeys({ z: 3, y: 2, x: 1 }); // [ "z", "y", "x" ]\nReflect.ownKeys([]); // ["length"]\n\nconst sym = Symbol.for(\'comet\');\nconst sym2 = Symbol.for(\'meteor\');\nconst obj = {\n  [sym]: 0,\n  str: 0,\n  \'773\': 0,\n  \'0\': 0,\n  [sym2]: 0,\n  \'-1\': 0,\n  \'8\': 0,\n  \'second str\': 0,\n};\n\nReflect.ownKeys(obj);\n// [ "0", "8", "773", "str", "-1", "second str", Symbol(comet), Symbol(meteor) ]\n// Indexes in numeric order,\n// strings in insertion order,\n// symbols in insertion order.\n')),(0,l.kt)("h3",{id:"proxy-usage"},"Proxy Usage"),(0,l.kt)("h4",{id:"default-zero-value-protection"},"Default Zero Value Protection"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const withZeroValue = (target, zeroValue = 0) =>\n  new Proxy(target, {\n    get: (obj, prop) => (prop in obj ? obj[prop] : zeroValue),\n  });\n\nlet pos = { x: 4, y: 19 };\nconsole.log(pos.z); // => undefined\npos = withZeroValue(pos);\nconsole.log(pos.z); // => 0\n")),(0,l.kt)("h4",{id:"hiding-properties-protection"},"Hiding Properties Protection"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const hide = (target, prefix = '_') =>\n  new Proxy(target, {\n    has: (obj, prop) => !prop.startsWith(prefix) && prop in obj,\n    ownKeys: obj =>\n      Reflect.ownKeys(obj).filter(\n        prop => typeof prop !== 'string' || !prop.startsWith(prefix)\n      ),\n    get: (obj, prop, rec) => (prop in rec ? obj[prop] : undefined),\n  });\n\nconst userData = hide({\n  firstName: 'Tom',\n  mediumHandle: '@bar',\n  _favoriteRapper: 'Drake',\n});\n\nconst falsy = '_favoriteRapper' in userData; // has: false\nconst keys = Object.keys(userData); // ownKeys: ['firstName', 'mediumHandle']\nconsole.log(userData._favoriteRapper); // get: undefined\n")),(0,l.kt)("h4",{id:"read-only-object-protection"},"Read Only Object Protection"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'const NOPE = () => {\n  throw new Error("Can\'t modify read-only object");\n};\n\nconst NOPE_HANDLER = {\n  set: NOPE,\n  defineProperty: NOPE,\n  deleteProperty: NOPE,\n  preventExtensions: NOPE,\n  setPrototypeOf: NOPE,\n  get: (obj, prop) => {\n    if (prop in obj) {\n      return Reflect.get(obj, prop);\n    }\n\n    throw new ReferenceError(`Unknown prop "${prop}"`);\n  },\n};\n\nconst readOnly = target => new Proxy(target, NODE_HANDLER);\n')),(0,l.kt)("h4",{id:"range-validation"},"Range Validation"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"in")," operator capture:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const range = (min, max) =>\n  new Proxy(Object.create(null), {\n    has: (_, prop) => +prop >= min && +prop <= max,\n  });\n\nconst X = 10.5;\nconst nums = [1, 5, X, 50, 100];\n\nif (X in range(1, 100)) {\n  // => true\n}\n\nnums.filter(n => n in range(1, 10));\n// => [1, 5]\n")),(0,l.kt)("h4",{id:"property-validation"},"Property Validation"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"set")," operator capture:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const target = {\n  onlyNumbersGoHere: 0,\n};\n\nconst proxy = new Proxy(target, {\n  set(target, property, value) {\n    if (typeof value !== 'number') {\n      return false;\n    } else {\n      return Reflect.set(target, property, value);\n    }\n  },\n});\n\nproxy.onlyNumbersGoHere = 1;\nconsole.log(proxy.onlyNumbersGoHere); // 1\nproxy.onlyNumbersGoHere = '2';\nconsole.log(proxy.onlyNumbersGoHere); // 1\n")),(0,l.kt)("h4",{id:"function-parameter-validation"},"Function Parameter Validation"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"apply")," operator capture:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function median(...nums) {\n  return nums.sort()[Math.floor(nums.length / 2)];\n}\n\nconst proxy = new Proxy(median, {\n  apply(target, thisArg, argumentsList) {\n    for (const arg of argumentsList) {\n      if (typeof arg !== 'number') {\n        throw new TypeError('Non-number argument provided');\n      }\n    }\n\n    return Reflect.apply(target, thisArg, argumentsList);\n  },\n});\n\nconsole.log(proxy(4, 7, 1)); // 4\nconsole.log(proxy(4, '7', 1));\n// TypeError: Non-number argument provided\n\nclass Person {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nconst PersonProxy = new Proxy(Person, {\n  apply(TrapTarget, thisArg, argumentList) {\n    return new TrapTarget(...argumentList);\n  },\n});\n\nconst me = PersonProxy('Nicholas');\nconsole.log(me.name); // \"Nicholas\"\nconsole.log(me instanceof Person); // true\nconsole.log(me instanceof PersonProxy); // true\n")),(0,l.kt)("h4",{id:"constructor-parameter-validation"},"Constructor Parameter Validation"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"new")," operator capture:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class User {\n  constructor(id) {\n    this.id_ = id;\n  }\n}\n\nconst ProxyUser = new Proxy(User, {\n  construct(target, argumentsList, newTarget) {\n    if (argumentsList[0] === undefined) {\n      throw new Error('User cannot be instantiated without id');\n    } else {\n      return Reflect.construct(target, argumentsList, newTarget);\n    }\n  },\n});\n\nconst obj = new ProxyUser(1);\nconst throwError = new ProxyUser();\n// Error: User cannot be instantiated without id\n")),(0,l.kt)("h4",{id:"negative-array-indices-protection"},"Negative Array Indices Protection"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const negativeArray = els =>\n  new Proxy(target, {\n    get: (target, propKey, receiver) =>\n      Reflect.get(\n        target,\n        +propKey < 0 ? String(target.length + +propKey) : propKey,\n        receiver\n      ),\n  });\n")),(0,l.kt)("h4",{id:"array-manipulation-protection"},"Array Manipulation Protection"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function toUint32(value) {\n  return Math.floor(Math.abs(Number(value))) % Math.pow(2, 32);\n}\n\nfunction isArrayIndex(key) {\n  const numericKey = toUint32(key);\n  return String(numericKey) === key && numericKey < Math.pow(2, 32) - 1;\n}\n\nclass MyArray {\n  constructor(length = 0) {\n    this.length = length;\n\n    return new Proxy(this, {\n      set(trapTarget, key, value) {\n        const currentLength = Reflect.get(trapTarget, 'length');\n\n        // the special case\n        if (isArrayIndex(key)) {\n          const numericKey = Number(key);\n\n          if (numericKey >= currentLength) {\n            Reflect.set(trapTarget, 'length', numericKey + 1);\n          }\n        } else if (key === 'length') {\n          if (value < currentLength) {\n            for (let index = currentLength - 1; index >= value; index--) {\n              Reflect.deleteProperty(trapTarget, index);\n            }\n          }\n        }\n\n        // always do this regardless of key type\n        return Reflect.set(trapTarget, key, value);\n      },\n    });\n  }\n}\n\nconst colors = new MyArray(3);\nconsole.log(colors instanceof MyArray); // true\nconsole.log(colors.length); // 3\n\ncolors[0] = 'red';\ncolors[1] = 'green';\ncolors[2] = 'blue';\ncolors[3] = 'black';\nconsole.log(colors.length); // 4\n\ncolors.length = 2;\nconsole.log(colors.length); // 2\nconsole.log(colors[3]); // undefined\nconsole.log(colors[2]); // undefined\nconsole.log(colors[1]); // \"green\"\nconsole.log(colors[0]); // \"red\"\n")),(0,l.kt)("h4",{id:"exception-protection"},"Exception Protection"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function createExceptionProxy(target) {\n  return new Proxy(target, {\n    get: (target, prop) => {\n      if (!(prop in target)) {\n        return;\n      }\n\n      if (typeof target[prop] === 'function') {\n        return createExceptionZone(target, prop);\n      }\n\n      return target[prop];\n    },\n  });\n}\n\nfunction createExceptionZone(target, prop) {\n  return (...args) => {\n    let result;\n    ExceptionsZone.run(() => {\n      result = target[prop](...args);\n    });\n    return result;\n  };\n}\n\nclass ExceptionsZone {\n  static exceptionHandler = new ExceptionHandler();\n\n  static run(callback) {\n    try {\n      callback();\n    } catch (e) {\n      this.exceptionHandler.handle(e);\n    }\n  }\n}\n\nclass ExceptionHandler {\n  handle(exception) {\n    console.log('\u8bb0\u5f55\u9519\u8bef: ', exception.message, exception.stack);\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const obj = {\n  name: 'obj',\n  say() {\n    console.log(`Hi, I'm ${this.name}`);\n  },\n  coding() {\n    // xxx.\n    throw new Error('bug');\n  },\n  coding2() {\n    // xxx.\n    throw new Error('bug2');\n  },\n};\n\nconst proxy = createProxy(obj);\n\nproxy.say();\nproxy.coding();\n")),(0,l.kt)("h4",{id:"proxy-pattern-implementation"},"Proxy Pattern Implementation"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Remote mock and placeholder:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Data mock."),(0,l.kt)("li",{parentName:"ul"},"Image placeholder."))),(0,l.kt)("li",{parentName:"ul"},"Cache:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Database objects access caching."),(0,l.kt)("li",{parentName:"ul"},"Memoized functions."))),(0,l.kt)("li",{parentName:"ul"},"Profiling."),(0,l.kt)("li",{parentName:"ul"},"Observer and watcher: Vue 3 reactivity, ImmerJS draft state.")),(0,l.kt)("h3",{id:"proxy-and-defineproperty"},"Proxy and DefineProperty"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Simple: ",(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u4f7f\u7528\u4e0a\u6bd4 ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty")," \u65b9\u4fbf.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty")," \u53ea\u80fd\u76d1\u542c\u5bf9\u8c61, \u5bfc\u81f4 ",(0,l.kt)("inlineCode",{parentName:"li"},"Vue 2")," ",(0,l.kt)("inlineCode",{parentName:"li"},"data")," \u5c5e\u6027\u5fc5\u987b\u901a\u8fc7\u4e00\u4e2a\u8fd4\u56de\u5bf9\u8c61\u7684\u51fd\u6570\u65b9\u5f0f\u521d\u59cb\u5316,"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Vue 3")," \u66f4\u52a0\u591a\u5143\u5316, \u53ef\u4ee5\u76d1\u542c\u4efb\u610f\u6570\u636e."))),(0,l.kt)("li",{parentName:"ul"},"Performant: ",(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u4ee3\u7406\u6574\u4e2a\u5bf9\u8c61, ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty")," \u53ea\u4ee3\u7406\u5bf9\u8c61\u4e0a\u7684\u67d0\u4e2a\u5c5e\u6027.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty")," \u7531\u4e8e\u6bcf\u6b21\u53ea\u80fd\u76d1\u542c\u5bf9\u8c61\u4e00\u4e2a\u952e\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"get"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"set"),", \u5bfc\u81f4\u9700\u8981\u5faa\u73af\u76d1\u542c\u6d6a\u8d39\u6027\u80fd."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u53ef\u4ee5\u4e00\u6b21\u6027\u76d1\u542c\u5230\u6240\u6709\u5c5e\u6027."))),(0,l.kt)("li",{parentName:"ul"},"Lazy: ",(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u6027\u80fd\u4f18\u4e8e ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty"),".",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u5bf9\u8c61\u5185\u90e8\u8981\u5168\u90e8\u9012\u5f52\u4ee3\u7406, \u5219 ",(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u53ef\u4ee5\u53ea\u5728\u8c03\u7528\u65f6\u9012\u5f52."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty")," \u9700\u8981\u5728\u4e00\u5f00\u59cb\u5c31\u5168\u90e8\u9012\u5f52."))),(0,l.kt)("li",{parentName:"ul"},"Feature:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u8c61\u4e0a\u5b9a\u4e49\u65b0\u5c5e\u6027\u65f6, \u53ea\u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u53ef\u4ee5\u76d1\u542c\u5230."),(0,l.kt)("li",{parentName:"ul"},"\u6570\u7ec4\u65b0\u589e\u5220\u9664\u4fee\u6539\u65f6, \u53ea\u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u53ef\u4ee5\u76d1\u542c\u5230."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty")," \u65e0\u6cd5\u76d1\u542c\u6570\u7ec4, ",(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u5219\u53ef\u4ee5\u76f4\u63a5\u76d1\u542c\u6570\u7ec4\u53d8\u5316."),(0,l.kt)("li",{parentName:"ul"},"Vue2: \u91cd\u5199\u6570\u7ec4\u65b9\u6cd5\u76d1\u542c\u6570\u7ec4\u53d8\u5316, Vue3: ",(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u76d1\u542c\u6570\u7ec4\u53d8\u5316."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Proxy")," \u4e0d\u517c\u5bb9 IE, ",(0,l.kt)("inlineCode",{parentName:"li"},"Object.defineProperty")," \u4e0d\u517c\u5bb9 IE8 \u53ca\u4ee5\u4e0b.")),(0,l.kt)("h2",{id:"error-and-exception"},"Error and Exception"),(0,l.kt)("h3",{id:"error"},"Error"),(0,l.kt)("h4",{id:"error-type"},"Error Type"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Error."),(0,l.kt)("li",{parentName:"ul"},"EvalError."),(0,l.kt)("li",{parentName:"ul"},"RangeError."),(0,l.kt)("li",{parentName:"ul"},"ReferenceError."),(0,l.kt)("li",{parentName:"ul"},"SyntaxError."),(0,l.kt)("li",{parentName:"ul"},"TypeError."),(0,l.kt)("li",{parentName:"ul"},"URIError."),(0,l.kt)("li",{parentName:"ul"},"AggregateError."),(0,l.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u9519\u8bef.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Error {\n  // Instance properties\n  message: string;\n  cause?: any; // ES2022\n  stack: string; // non-standard but widely supported\n\n  constructor(message = '', options?: ErrorOptions) {\n    this.name = 'Error';\n    this.message = message;\n    this.cause = options?.cause; // ES2022: error chain.\n  }\n}\n\ninterface ErrorOptions {\n  cause?: string | Error; // ES2022\n}\n\nclass CustomError extends Error {\n  constructor(message, options) {\n    super(message, options);\n    this.name = 'CustomError';\n  }\n}\n")),(0,l.kt)("h4",{id:"error-object"},"Error Object"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const err = {\n  name: 'XXError',\n  message: 'something wrong',\n  extra: 'This was rather embarrassing',\n  remedy: genericErrorHandler, // \u5904\u7406\u9519\u8bef\u7684\u51fd\u6570\u540d.\n};\n\ntry {\n  throwError();\n} catch (e) {\n  console.log(e.message);\n  e.remedy(); // genericErrorHandler.\n}\n")),(0,l.kt)("h3",{id:"exception"},"Exception"),(0,l.kt)("h4",{id:"call-stack-overflow"},"Call Stack Overflow"),(0,l.kt)("p",null,"\u8c03\u7528\u6808\u5c3a\u5bf8\u9650\u5236\u5f02\u5e38, \u5e94\u7acb\u5373\u5b9a\u4f4d\u5728\u4ee3\u7801\u4e2d\u7684\u9012\u5f52\u5b9e\u4f8b\u4e0a:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"try {\n  recursion();\n} catch (ex) {\n  console.error('error info');\n}\n")),(0,l.kt)("h4",{id:"exception-handling"},"Exception Handling"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"try catch"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Promise.catch"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"window.addEventListener('error', handler, true)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"window.addEventListener('unhandledrejection', handler, true)"),"."),(0,l.kt)("li",{parentName:"ul"},"Web Worker heartbeat monitoring."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"process.on('uncaughtException', handleError)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"process.on('SIGHUP', handleExit)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"process.on('SIGINT', handleExit)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"process.on('SIGQUIT', handleExit)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"process.on('SIGTERM', handleExit)"),"."),(0,l.kt)("li",{parentName:"ul"},"AOP (Aspect Oriented Programming): Middleware/Interceptor/Monkey Patch."),(0,l.kt)("li",{parentName:"ul"},"\u5728\u53ef\u80fd\u5931\u8d25\u7684\u5730\u65b9\u629b\u51fa\u5f02\u5e38, \u5bf9\u5931\u8d25\u5904\u505a\u6807\u7b7e, \u6613\u4e8e",(0,l.kt)("strong",{parentName:"li"},"\u8c03\u8bd5\u4e0e\u6d4b\u8bd5"),"."),(0,l.kt)("li",{parentName:"ul"},"\u4fee\u590d bug \u540e, \u53ef\u8003\u8651\u662f\u5426\u5728\u6b64\u5904\u629b\u51fa\u5f02\u5e38."),(0,l.kt)("li",{parentName:"ul"},"Avoid using try-catch inside a loop:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const object = ['foo', 'bar'];\n\ntry {\n  for (let i = 0; i < object.length; i++) {\n    // do something that throws an exception\n  }\n} catch (e) {\n  // handle exception\n}\n")),(0,l.kt)("h2",{id:"regular-expression"},"Regular Expression"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const re = /pattern/gim;\n")),(0,l.kt)("h3",{id:"regexp-flags"},"RegExp Flags"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#advanced_searching_with_flags"},"Flags"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"g")," (global): \u5168\u5c40\u5339\u914d."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"i")," (ignoreCase): \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u5339\u914d."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"m")," (multiline): \u591a\u884c\u5339\u914d."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"y")," (sticky): \u7c98\u9644\u6a21\u5f0f, \u4fee\u9970\u7b26\u53f7\u9690\u542b\u4e86\u5934\u90e8\u5339\u914d\u7684\u6807\u5fd7."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"u")," (unicode): Unicode \u6a21\u5f0f."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"s")," (dotAll): Allows ",(0,l.kt)("inlineCode",{parentName:"li"},".")," to match ",(0,l.kt)("inlineCode",{parentName:"li"},"newline")," characters.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function codePointLength(text) {\n  const result = text.match(/[\\s\\S]/gu);\n  return result ? result.length : 0;\n}\n\nconst s = '\ud842\udfb7\ud842\udfb7';\nconst length = s.length; // 4\ncodePointLength(s); // 2\n")),(0,l.kt)("h3",{id:"regexp-character-classes"},"RegExp Character Classes"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Character_Classes"},"Character classes"),":"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Characters"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Meaning"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},".")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"[^\\n\\r\\u2020\\u2029]"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\d")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"[0-9]"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\D")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"[^0-9]"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\w")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"[0-9a-zA-Z_]"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\W")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"[^0-9a-zA-Z_]"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\s")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"[\\r\\n\\f\\t\\v]"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\S")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"[^\\r\\n\\f\\t\\v]"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\b")),(0,l.kt)("td",{parentName:"tr",align:"left"},"start/end of word")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\B")),(0,l.kt)("td",{parentName:"tr",align:"left"},"not start/end of word")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\p{UnicodeProperty}")),(0,l.kt)("td",{parentName:"tr",align:"left"},"match unicode")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"\\P{UnicodeProperty}")),(0,l.kt)("td",{parentName:"tr",align:"left"},"not match unicode")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"^")),(0,l.kt)("td",{parentName:"tr",align:"left"},"start of string")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"$")),(0,l.kt)("td",{parentName:"tr",align:"left"},"end of string")))),(0,l.kt)("h3",{id:"regexp-quantifiers"},"RegExp Quantifiers"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Quantifiers"},"Quantifiers"),":"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Quantifiers"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Repeat Times"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"*")),(0,l.kt)("td",{parentName:"tr",align:"left"},"0+")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"+")),(0,l.kt)("td",{parentName:"tr",align:"left"},"1+")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"?")),(0,l.kt)("td",{parentName:"tr",align:"left"},"0 ~ 1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"{n}")),(0,l.kt)("td",{parentName:"tr",align:"left"},"n")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"{n,}")),(0,l.kt)("td",{parentName:"tr",align:"left"},"n+")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"{n,m}")),(0,l.kt)("td",{parentName:"tr",align:"left"},"n ~ m")))),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Lazy Quantifiers"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Repeat Times (As ",(0,l.kt)("strong",{parentName:"th"},"Less")," As Possible)"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"*?")),(0,l.kt)("td",{parentName:"tr",align:"left"},"0+")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"+?")),(0,l.kt)("td",{parentName:"tr",align:"left"},"1+")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"??")),(0,l.kt)("td",{parentName:"tr",align:"left"},"0 ~ 1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"{n,}?")),(0,l.kt)("td",{parentName:"tr",align:"left"},"n+")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"{n,m}?")),(0,l.kt)("td",{parentName:"tr",align:"left"},"n ~ m")))),(0,l.kt)("h3",{id:"regexp-group-and-ranges"},"RegExp Group and Ranges"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges"},"Groups"),"."),(0,l.kt)("li",{parentName:"ul"},"\u96f6\u5bbd\u65ad\u8a00: lookahead ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Assertions"},"assertion"),".")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u5206\u7c7b"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u4ee3\u7801/\u8bed\u6cd5"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6355\u83b7"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"(exp)")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5339\u914d exp,\u5e76\u6355\u83b7\u6587\u672c\u5230\u81ea\u52a8\u547d\u540d\u7684\u7ec4\u91cc")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"}),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"(?<name>exp)")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5339\u914d exp,\u5e76\u6355\u83b7\u6587\u672c\u5230\u540d\u79f0\u4e3a name \u7684\u7ec4\u91cc")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"}),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"(?:exp)")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5339\u914d exp,\u4e0d\u6355\u83b7\u5339\u914d\u7684\u6587\u672c, \u4e5f\u4e0d\u7ed9\u6b64\u5206\u7ec4\u5206\u914d\u7ec4\u53f7")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"\u96f6\u5bbd\u65ad\u8a00"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"(?<=exp)")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5339\u914d\u5de6\u4fa7\u662f exp \u7684\u4f4d\u7f6e")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"}),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"(?<!exp)")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5339\u914d\u5de6\u4fa7\u4e0d\u662f exp \u7684\u4f4d\u7f6e")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"}),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"(?=exp)")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5339\u914d\u53f3\u4fa7\u662f exp \u7684\u4f4d\u7f6e")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"}),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"(?!exp)")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5339\u914d\u53f3\u4fa7\u4e0d\u662f exp \u7684\u4f4d\u7f6e")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6ce8\u91ca"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},"(?#comment)")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u7528\u4e8e\u63d0\u4f9b\u6ce8\u91ca\u8ba9\u4eba\u9605\u8bfb")))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"(?<=\\d)th")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"9th"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"(?<!\\d)th")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"health"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"six(?=\\d)")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"six6"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"hi(?!\\d)")," -> ",(0,l.kt)("inlineCode",{parentName:"li"},"high"),".")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const string = 'Favorite GitHub Repos: tc39/ecma262 v8/v8.dev';\nconst regex = /\\b(?<owner>[a-z0-9]+)\\/(?<repo>[a-z0-9\\.]+)\\b/g;\n\nfor (const match of string.matchAll(regex)) {\n  console.log(`${match[0]} at ${match.index} with '${match.input}'`);\n  console.log(`owner: ${match.groups.owner}`);\n  console.log(`repo: ${match.groups.repo}`);\n}\n")),(0,l.kt)("h3",{id:"regexp-back-reference"},"RegExp Back Reference"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"$1 $2 $3"),": \u7b2c n \u4e2a\u5b50\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u7ed3\u679c\u5b57\u7b26."),(0,l.kt)("li",{parentName:"ul"},"\u4f4d\u7f6e\u7f16\u53f7 (\u5de6\u62ec\u53f7\u7684\u987a\u5e8f): ",(0,l.kt)("inlineCode",{parentName:"li"},"\\1 \\2 \\3"),": \u7b2c n \u4e2a\u5b50\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u7ed3\u679c\u5b57\u7b26."),(0,l.kt)("li",{parentName:"ul"},"Named capture group back reference: ",(0,l.kt)("inlineCode",{parentName:"li"},"\\k<Name>"),"."),(0,l.kt)("li",{parentName:"ul"},"\u53cd\u5411\u5f15\u7528\u53ef\u4ee5\u89e3\u51b3\u6b63\u5219\u8868\u8fbe\u5f0f\u56de\u6eaf\u5931\u63a7\u7684\u95ee\u9898 (ReDoS).")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const regExp = /((<\\/?\\w+>.*)\\2)/g;\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const text = 'ooo111ooo222ooo333ooo123';\nconst regExp = /(\\d)\\1\\1/g;\nconst result = text.match(regExp);\nconsole.log(result); // [111, 222, 333]\n")),(0,l.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"RegExp Static Property")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Most ",(0,l.kt)("inlineCode",{parentName:"p"},"RegExp.XXX"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"RegExp.$X")," static property aren't standard.\nAvoid use them in production:"),(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"RegExp.input ($_)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"RegExp.lastMatch ($&)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"RegExp.lastParen ($+)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"RegExp.leftContext"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"RegExp.rightContext ($')"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"RegExp.$1-$9"),".")))),(0,l.kt)("h3",{id:"regexp-functions"},"RegExp Functions"),(0,l.kt)("p",null,"RegExp ",(0,l.kt)("a",{parentName:"p",href:"https://exploringjs.com/impatient-js/ch_regexps.html#methods-for-working-with-regular-expressions"},"functions"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"String:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"split"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"match"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"search"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"replace"),"."))),(0,l.kt)("li",{parentName:"ul"},"RegExp:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"test"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"exec"),".")))),(0,l.kt)("h4",{id:"regexp-test"},"RegExp Test"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"/[a-z|A-Z|0-9]/gim.test(str);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const ignoreList = [\n  // # All\n  '^npm-debug\\\\.log$', // Error log for npm\n  '^\\\\..*\\\\.swp$', // Swap file for vim state\n\n  // # macOS\n  '^\\\\.DS_Store$', // Stores custom folder attributes\n  '^\\\\.AppleDouble$', // Stores additional file resources\n  '^\\\\.LSOverride$', // Contains the absolute path to the app to be used\n  '^Icon\\\\r$', // Custom Finder icon: http://superuser.com/questions/298785/icon-file-on-os-x-desktop\n  '^\\\\._.*', // Thumbnail\n  '^\\\\.Spotlight-V100(?:$|\\\\/)', // Directory that might appear on external disk\n  '\\\\.Trashes', // File that might appear on external disk\n  '^__MACOSX$', // Resource fork\n\n  // # Linux\n  '~$', // Backup file\n\n  // # Windows\n  '^Thumbs\\\\.db$', // Image file cache\n  '^ehthumbs\\\\.db$', // Folder config file\n  '^Desktop\\\\.ini$', // Stores custom folder attributes\n  '@eaDir$', // \"hidden\" folder where the server stores thumbnails\n];\n\nexport const junkRegex = new RegExp(ignoreList.join('|'));\n\nexport function isJunk(filename) {\n  return junkRegex.test(filename);\n}\n")),(0,l.kt)("h4",{id:"rexexp-exec"},"RexExp Exec"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec"},(0,l.kt)("inlineCode",{parentName:"a"},"exec()")),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Search starts at substring specified by ",(0,l.kt)("inlineCode",{parentName:"li"},"lastIndex")," property.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const input = 'A string with 3 numbers in it... 42 and 88.';\nconst number = /\\b\\d+\\b/g;\n\nfor (\n  let match = number.exec(input);\n  match !== null;\n  match = number.exec(input)\n) {\n  console.log('Found', match[0], 'at', match.index);\n}\n// Found 3 at 14\n// Found 42 at 33\n// Found 88 at 40\n")),(0,l.kt)("h4",{id:"regexp-replace"},"RegExp Replace"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"str.replace(regExp, str / func);\n")),(0,l.kt)("h5",{id:"regexp-replace-arguments"},"RegExp Replace Arguments"),(0,l.kt)("p",null,"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u82e5\u4e3a\u51fd\u6570\u5f0f\u53c2\u6570, ",(0,l.kt)("inlineCode",{parentName:"p"},"replace")," \u65b9\u6cd5\u4f1a\u5411\u5b83\u4f20\u9012\u4e00\u7cfb\u5217\u53c2\u6570:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u4e2a\u53c2\u6570: \u5339\u914d\u7ed3\u679c\u5b57\u7b26\u4e32."),(0,l.kt)("li",{parentName:"ul"},"\u7b2c n \u4e2a\u53c2\u6570: \u5b50\u8868\u8fbe\u5f0f\u5339\u914d\u7ed3\u679c\u5b57\u7b26\u4e32."),(0,l.kt)("li",{parentName:"ul"},"\u5012\u6570\u7b2c\u4e8c\u4e2a\u53c2\u6570: \u5339\u914d\u6587\u672c\u5728\u6e90\u5b57\u7b26\u4e32\u4e2d\u7684\u4e0b\u6807\u4f4d\u7f6e."),(0,l.kt)("li",{parentName:"ul"},"\u6700\u540e\u4e00\u4e2a\u53c2\u6570: \u6e90\u5b57\u7b26\u4e32\u81ea\u8eab.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function upper(all, letter) {\n  return letter.toUpperCase();\n}\n\nassert(\n  'border-bottom-width'.replace(/-(\\w)/g, upper) === 'borderBottomWidth',\n  'Camel cased a hyphenated string.'\n);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const RE_DATE = /(?<year>[0-9]{4})-(?<month>[0-9]{2})-(?<day>[0-9]{2})/;\nconsole.log('1999-12-31'.replace(RE_DATE, '$<month>/$<day>/$<year>'));\n// 12/31/1999\n\nconst RE_DATE = /(?<year>[0-9]{4})-(?<month>[0-9]{2})-(?<day>[0-9]{2})/;\nconsole.log(\n  '1999-12-31'.replace(\n    RE_DATE,\n    (g0, y, m, d, offset, input, { year, month, day }) =>\n      `${month}/${day}/${year}`\n  )\n);\n// 12/31/1999\n")),(0,l.kt)("h5",{id:"regexp-replace-performance"},"RegExp Replace Performance"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 2 \u4e2a\u5b50\u8868\u8fbe\u5f0f\u4fee\u526a\u5b57\u7b26\u4e32, \u5b57\u7b26\u4e32\u603b\u957f\u5ea6\u5f71\u54cd\u6027\u80fd."),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u5faa\u73af\u4fee\u526a\u5b57\u7b26\u4e32 (\u5206\u522b\u7528 \u6b63/\u8d1f\u5faa\u73af \u4fee\u526a \u9996/\u5c3e\u7a7a\u767d\u7b26), \u7a7a\u767d\u5b57\u7b26\u957f\u5ea6\u5f71\u54cd\u6027\u80fd.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"if (!String.prototype.trim) {\n  // eslint-disable-next-line no-extend-native\n  String.prototype.trim = function () {\n    return this.replace(/^\\s+/, '').replace(/\\s+$/, '');\n  };\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"if (!String.prototype.trim) {\n  // eslint-disable-next-line no-extend-native\n  String.prototype.trim = function () {\n    const str = this.replace(/^\\s+/, '');\n    let end = str.length - 1;\n    const ws = /\\s/;\n\n    while (ws.test(str.charAt(end))) {\n      end--;\n    }\n\n    return str.slice(0, end + 1);\n  };\n}\n")),(0,l.kt)("h3",{id:"regexp-best-practice"},"RegExp Best Practice"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u4f7f\u7528 new RegExp(),\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5b57\u9762\u91cf"),(0,l.kt)("li",{parentName:"ul"},"\u5c06\u6b63\u5219\u8868\u8fbe\u5f0f\u8d4b\u503c\u7ed9\u53d8\u91cf, \u9632\u6b62\u6b63\u5219\u8868\u8fbe\u5f0f\u91cd\u590d\u521b\u5efa"),(0,l.kt)("li",{parentName:"ul"},"\u4ee5\u7b80\u5355(\u552f\u4e00\u6027)\u5b57\u5143\u5f00\u59cb, \u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"^/$ x \\u363A [a-z] \\b"),", \u907f\u514d\u4ee5\u5206\u7ec4\u8868\u8fbe\u5f0f\u5f00\u59cb:\ne.g ",(0,l.kt)("inlineCode",{parentName:"li"},"\\s\\s*")," \u4f18\u4e8e ",(0,l.kt)("inlineCode",{parentName:"li"},"\\s{1,}"),"."),(0,l.kt)("li",{parentName:"ul"},"\u51cf\u5c11\u8868\u8fbe\u5f0f\u7684\u91cd\u53e0\u5339\u914d."),(0,l.kt)("li",{parentName:"ul"},"\u51cf\u5c11\u5206\u652f\u8868\u8fbe\u5f0f,\u5e76\u5c06\u6700\u5e38\u7528\u7684\u5206\u652f\u653e\u5728\u6700\u524d\u9762."),(0,l.kt)("li",{parentName:"ul"},"\u65e0\u9700\u53cd\u5411\u5f15\u7528\u65f6, \u4f7f\u7528\u975e\u6355\u83b7\u7ec4:\ne.g ",(0,l.kt)("inlineCode",{parentName:"li"},"(?:...)")," \u4f18\u4e8e ",(0,l.kt)("inlineCode",{parentName:"li"},"(...)"),".")),(0,l.kt)("h3",{id:"regexp-use-case"},"RegExp Use Case"),(0,l.kt)("h4",{id:"common-pattern"},"Common Pattern"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/abc/"),": Characters sequence."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/[abc]/"),": Characters set."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/[^abc]/"),": Non characters set."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/[0-9]/"),": Characters range."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/x+/"),": 1+ (Greedy)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/x+?/"),": 1+ (Lazy)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/x*/"),": 0+."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/x?/"),": 0/1."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/x{2,4}/"),": 2 ~ 4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/(abc)/"),": Captured group."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/a|b|c/"),": Or patterns."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/\\d/"),": Digit character."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/\\w/"),': Alphanumeric character ("word character").'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/\\s/"),": Whitespace character."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/./"),": Character except ",(0,l.kt)("inlineCode",{parentName:"li"},"newlines"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/\\b/"),": Word boundary."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/^/"),": Start of input."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"/$/"),": End of input."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"\u975eX\u6355\u83b7\u7ec4")," + ",(0,l.kt)("inlineCode",{parentName:"li"},"\u7279\u5f81\u5b57\u7b26")," + ",(0,l.kt)("inlineCode",{parentName:"li"},"\u975eY\u6355\u83b7\u7ec4"),":")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// URLSearchParams [key, value]\nconst pattern = /([^&=]+)=([^&]*)/g;\n")),(0,l.kt)("h4",{id:"\u4e2d\u82f1\u6587"},"\u4e2d\u82f1\u6587"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"/^[\\u4e00-\\u9fa5a-zA-Z]+$/i")),(0,l.kt)("h4",{id:"\u6570\u5b57"},"\u6570\u5b57"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"/^[1-9]*$/i")),(0,l.kt)("h4",{id:"\u7a7a\u5b57\u7b26\u4e0e\u7a7a\u683c\u5b57\u7b26"},"\u7a7a\u5b57\u7b26\u4e0e\u7a7a\u683c\u5b57\u7b26"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"/[(^\\s+)(\\s+$)]/g")),(0,l.kt)("h4",{id:"markdown-table"},"Markdown Table"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"/(?<=\\|\\w+) /g"),": second place to insert ",(0,l.kt)("inlineCode",{parentName:"p"},"|"),"."),(0,l.kt)("h2",{id:"javascript-api"},"JavaScript API"),(0,l.kt)("h3",{id:"strict-mode"},"Strict Mode"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode"},"Strict Mode"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"this")," is ",(0,l.kt)("inlineCode",{parentName:"li"},"null")," in non-method functions."),(0,l.kt)("li",{parentName:"ul"},"Variables must be declared (",(0,l.kt)("inlineCode",{parentName:"li"},"Reference Error"),")."),(0,l.kt)("li",{parentName:"ul"},"Functions must be declared at the top level of a scope (",(0,l.kt)("inlineCode",{parentName:"li"},"Syntax Error"),")."),(0,l.kt)("li",{parentName:"ul"},"Forbidden unqualified identifiers deletion (",(0,l.kt)("inlineCode",{parentName:"li"},"Type Error"),")."),(0,l.kt)("li",{parentName:"ul"},"Forbidden setting and deleting immutable properties (",(0,l.kt)("inlineCode",{parentName:"li"},"Type Error"),")."),(0,l.kt)("li",{parentName:"ul"},"Forbidden access ",(0,l.kt)("inlineCode",{parentName:"li"},"arguments.callee"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"arguments.caller")," (",(0,l.kt)("inlineCode",{parentName:"li"},"Type Error"),")."),(0,l.kt)("li",{parentName:"ul"},"Forbidden variables escaped from ",(0,l.kt)("inlineCode",{parentName:"li"},"eval()")," (",(0,l.kt)("inlineCode",{parentName:"li"},"Reference Error"),")."),(0,l.kt)("li",{parentName:"ul"},"Forbidden set ",(0,l.kt)("inlineCode",{parentName:"li"},"eval"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"arguments")," to variable identifiers (",(0,l.kt)("inlineCode",{parentName:"li"},"Syntax Error"),")."),(0,l.kt)("li",{parentName:"ul"},"Forbidden ",(0,l.kt)("inlineCode",{parentName:"li"},"with")," statement (",(0,l.kt)("inlineCode",{parentName:"li"},"Syntax Error"),")."),(0,l.kt)("li",{parentName:"ul"},"Forbidden octal numbers (",(0,l.kt)("inlineCode",{parentName:"li"},"Syntax Error"),")."),(0,l.kt)("li",{parentName:"ul"},"ES6 classes are automatically in strict mode."),(0,l.kt)("li",{parentName:"ul"},"ES6 modules are automatically in strict mode.")),(0,l.kt)("h3",{id:"timer"},"Timer"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"setTimeout."),(0,l.kt)("li",{parentName:"ul"},"setImmediate."),(0,l.kt)("li",{parentName:"ul"},"setInterval: \u5b8c\u5168\u65e0\u6cd5\u4fdd\u8bc1\u4e24\u4e2a timer \u6267\u884c\u65f6\u95f4\u95f4\u9694 (\u53ef\u80fd\u8fde\u7eed\u6267\u884c, \u4e5f\u53ef\u80fd\u95f4\u9694\u8fc7\u957f)."),(0,l.kt)("li",{parentName:"ul"},"requestAnimationFrame."),(0,l.kt)("li",{parentName:"ul"},"requestIdleCallback.")),(0,l.kt)("p",null,"Combine ",(0,l.kt)("inlineCode",{parentName:"p"},"setInterval"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"setTimeout")," function with closure function,\nimplement ",(0,l.kt)("strong",{parentName:"p"},"time slicing scheduler"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function processArray(items, process, done) {\n  const todo = items.slice();\n\n  setTimeout(function task() {\n    process(todo.shift());\n\n    if (todo.length > 0) {\n      setTimeout(task, 25);\n    } else {\n      done(items);\n    }\n  }, 25);\n}\n")),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"s ",(0,l.kt)("inlineCode",{parentName:"h5"},"this")," Binding in Timer Function")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"\u6240\u6709\u8d85\u65f6\u6267\u884c\u7684\u4ee3\u7801 (\u51fd\u6570) \u90fd\u4f1a\u5728\u5168\u5c40\u4f5c\u7528\u57df\u4e2d\u7684\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u4e2d\u8fd0\u884c,\n\u56e0\u6b64\u51fd\u6570\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"this")," \u503c\u5728\u975e\u4e25\u683c\u6a21\u5f0f\u4e0b\u59cb\u7ec8\u6307\u5411 ",(0,l.kt)("inlineCode",{parentName:"p"},"window"),", \u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"undefined"),".\n\u82e5\u7ed9 ",(0,l.kt)("inlineCode",{parentName:"p"},"setTimeout()")," \u63d0\u4f9b\u4e86\u4e00\u4e2a\u7bad\u5934\u51fd\u6570, \u5219 ",(0,l.kt)("inlineCode",{parentName:"p"},"this")," \u4f1a\u4fdd\u7559\u4e3a\u5b9a\u4e49\u5b83\u65f6\u6240\u5728\u7684\u8bcd\u6c47\u4f5c\u7528\u57df."))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"requestAnimationFrame")," game loop:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function runAnimation(frameFunc) {\n  let lastTime = null;\n\n  function frame(time) {\n    if (lastTime !== null) {\n      const timeStep = Math.min(time - lastTime, 100) / 1000;\n      if (frameFunc(timeStep) === false) return;\n    }\n\n    lastTime = time;\n    requestAnimationFrame(frame);\n  }\n\n  requestAnimationFrame(frame);\n}\n")),(0,l.kt)("h3",{id:"math"},"Math"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.max"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.min()"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.ceil()"),": \u5411\u4e0a\u820d\u5165\u4e3a\u6700\u63a5\u8fd1\u7684\u6574\u6570."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.floor()"),": \u5411\u4e0b\u820d\u5165\u4e3a\u6700\u63a5\u8fd1\u7684\u6574\u6570."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.round()"),": \u56db\u820d\u4e94\u5165."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.fround()"),": \u8fd4\u56de\u6570\u503c\u6700\u63a5\u8fd1\u7684\u5355\u7cbe\u5ea6 (32 \u4f4d) \u6d6e\u70b9\u503c\u8868\u793a."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.abs(x)"),": \u8fd4\u56de x \u7684\u7edd\u5bf9\u503c."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.exp(x)"),": \u8fd4\u56de ",(0,l.kt)("inlineCode",{parentName:"li"},"Math.E")," \u7684 x \u6b21\u5e42."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.expm1(x)"),": \u7b49\u4e8e ",(0,l.kt)("inlineCode",{parentName:"li"},"Math.exp(x) - 1"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.log(x)"),": \u8fd4\u56de x \u7684\u81ea\u7136\u5bf9\u6570."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.log1p(x)"),": \u7b49\u4e8e ",(0,l.kt)("inlineCode",{parentName:"li"},"1 + Math.log(x)"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.pow(x, power)"),": \u8fd4\u56de x \u7684 power \u6b21\u5e42."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.hypot(...nums)"),": \u8fd4\u56de nums \u4e2d\u6bcf\u4e2a\u6570\u5e73\u65b9\u548c\u7684\u5e73\u65b9\u6839."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.clz32(x)"),": \u8fd4\u56de 32 \u4f4d\u6574\u6570 x \u7684\u524d\u7f6e\u96f6\u7684\u6570\u91cf."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.sign(x)"),": \u8fd4\u56de\u8868\u793a x \u7b26\u53f7\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"1"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"0"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"-0"),"/",(0,l.kt)("inlineCode",{parentName:"li"},"-1"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.trunc(x)"),": \u8fd4\u56de x \u7684\u6574\u6570\u90e8\u5206, \u5220\u9664\u6240\u6709\u5c0f\u6570."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.sqrt(x)"),": \u8fd4\u56de x \u7684\u5e73\u65b9\u6839."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.cbrt(x)"),": \u8fd4\u56de x \u7684\u7acb\u65b9\u6839."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.acos(x)"),": \u8fd4\u56de x \u7684\u53cd\u4f59\u5f26."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.acosh(x)"),": \u8fd4\u56de x \u7684\u53cd\u53cc\u66f2\u4f59\u5f26."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.asin(x)"),": \u8fd4\u56de x \u7684\u53cd\u6b63\u5f26."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.asinh(x)"),": \u8fd4\u56de x \u7684\u53cd\u53cc\u66f2\u6b63\u5f26."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.atan(x)"),": \u8fd4\u56de x \u7684\u53cd\u6b63\u5207."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.atanh(x)"),": \u8fd4\u56de x \u7684\u53cd\u53cc\u66f2\u6b63\u5207."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.atan2(y, x)"),": \u8fd4\u56de ",(0,l.kt)("inlineCode",{parentName:"li"},"y/x")," \u7684\u53cd\u6b63\u5207."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.cos(x)"),": \u8fd4\u56de x \u7684\u4f59\u5f26."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.sin(x)"),": \u8fd4\u56de x \u7684\u6b63\u5f26."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Math.tan(x)"),": \u8fd4\u56de x \u7684\u6b63\u5207.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const epsilon = Math.E;\nconst log10 = Math.LN10;\nconst log2 = Math.LN2;\nconst log2e = Math.LOG2E;\nconst log10e = Math.LOG10E;\nconst pi = Math.PI;\nconst squareRoot = Math.SQRT1_2;\nconst squareRoot2 = Math.SQRT2;\n\nMath.abs(num);\nMath.exp(num);\nMath.log(num);\nMath.pow(num, power);\nMath.sqrt(num);\nMath.acos(x);\nMath.asin(x);\nMath.atan(x);\nMath.atan2(y, x);\nMath.cos(x);\nMath.sin(x);\nMath.tan(x);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"console.log(Math.max(3, 54, 32, 16)); // 54\nconsole.log(Math.min(3, 54, 32, 16)); // 3\nconsole.log(Math.ceil(25.9)); // 26\nconsole.log(Math.ceil(25.5)); // 26\nconsole.log(Math.ceil(25.1)); // 26\nconsole.log(Math.round(25.9)); // 26\nconsole.log(Math.round(25.5)); // 26\nconsole.log(Math.round(25.1)); // 25\nconsole.log(Math.fround(0.4)); // 0.4000000059604645\nconsole.log(Math.fround(0.5)); // 0.5\nconsole.log(Math.fround(25.9)); // 25.899999618530273\nconsole.log(Math.floor(25.9)); // 25\nconsole.log(Math.floor(25.5)); // 25\nconsole.log(Math.floor(25.1)); // 25\n")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null},"-2.9"),(0,l.kt)("th",{parentName:"tr",align:null},"-2.5"),(0,l.kt)("th",{parentName:"tr",align:null},"-2.1"),(0,l.kt)("th",{parentName:"tr",align:null},"2.1"),(0,l.kt)("th",{parentName:"tr",align:null},"2.5"),(0,l.kt)("th",{parentName:"tr",align:null},"2.9"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Math.floor")),(0,l.kt)("td",{parentName:"tr",align:null},"-3"),(0,l.kt)("td",{parentName:"tr",align:null},"-3"),(0,l.kt)("td",{parentName:"tr",align:null},"-3"),(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"2")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Math.ceil")),(0,l.kt)("td",{parentName:"tr",align:null},"-2"),(0,l.kt)("td",{parentName:"tr",align:null},"-2"),(0,l.kt)("td",{parentName:"tr",align:null},"-2"),(0,l.kt)("td",{parentName:"tr",align:null},"3"),(0,l.kt)("td",{parentName:"tr",align:null},"3"),(0,l.kt)("td",{parentName:"tr",align:null},"3")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Math.round")),(0,l.kt)("td",{parentName:"tr",align:null},"-3"),(0,l.kt)("td",{parentName:"tr",align:null},"-2"),(0,l.kt)("td",{parentName:"tr",align:null},"-2"),(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"3"),(0,l.kt)("td",{parentName:"tr",align:null},"3")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"Math.trunc")),(0,l.kt)("td",{parentName:"tr",align:null},"-2"),(0,l.kt)("td",{parentName:"tr",align:null},"-2"),(0,l.kt)("td",{parentName:"tr",align:null},"-2"),(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"2")))),(0,l.kt)("h3",{id:"atomics"},"Atomics"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics"},"Atomics API"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const sharedArrayBuffer = new SharedArrayBuffer(4);\nconst dataView = new Uint32Array(sharedArrayBuffer);\n\nconst index = 0;\nconst increment = 5;\n\nAtomics.add(dataView, index, increment);\nAtomics.sub(dataView, index, increment);\nAtomics.or(dataView, index, 0b1111);\nAtomics.and(dataView, index, 0b1100);\nAtomics.xor(dataView, index, 0b1111);\nAtomics.load(dataView, index);\nAtomics.store(dataView, index, 3);\nAtomics.exchange(dataView, index, 4);\nAtomics.compareExchange(dataView, index, expect, 6);\n")),(0,l.kt)("h3",{id:"uri-and-url"},"URI and URL"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"encodeURI()"),": \u4e0d\u4f1a\u7f16\u7801\u5c5e\u4e8e URL \u7ec4\u4ef6\u7684\u7279\u6b8a\u5b57\u7b26, \u6bd4\u5982\u5192\u53f7/\u659c\u6760/\u95ee\u53f7."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"encodeURIComponent()"),": \u7f16\u7801\u5b83\u53d1\u73b0\u7684\u6240\u6709\u975e\u6807\u51c6\u5b57\u7b26.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'const uri = \'http://www.foo.com/illegal value.js#start\';\n// "http://www.foo.com/illegal%20value.js#start"\nconsole.log(encodeURI(uri));\n// "http%3A%2F%2Fwww.foo.com%2Fillegal%20value.js%23start"\nconsole.log(encodeURIComponent(uri));\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const uri = 'http%3A%2F%2Fwww.foo.com%2Fillegal%20value.js%23start';\n// http%3A%2F%2Fwww.foo.com%2Fillegal value.js%23start\nconsole.log(decodeURI(uri));\n// http:// www.foo.com/illegal value.js#start\nconsole.log(decodeURIComponent(uri));\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/URL"},"URL"),":"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"hash"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"host"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"hostname"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"href"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"pathname"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"port"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"protocol"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"search"),": ",(0,l.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/USVString"},"USVString"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"searchParams"),": URL search map."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"username"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"password"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"origin"),": read only.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const href = new URL('other.mjs', 'https://example.com/code/main.mjs').href;\n// 'https://example.com/code/other.mjs'\nconst href = new URL('../other.mjs', 'https://example.com/code/main.mjs').href;\n// 'https://example.com/other.mjs'\n\nconst blob = new Blob(['export const itsAModule = true'], {\n  type: 'text/javascript',\n});\n\nconst blobUrl = URL.createObjectURL(blob);\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams"},"URLSearchParams"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'// window.location.search\nconst qs = \'?q=javascript&num=10\';\nconst searchParams = new URLSearchParams(qs);\n\nfor (const param of searchParams) {\n  console.log(param);\n}\n// ["q", "javascript"]\n// ["num", "10"]\n\nalert(searchParams.toString()); // " q=javascript&num=10"\nsearchParams.has(\'num\'); // true\nsearchParams.get(\'num\'); // 10\nsearchParams.set(\'page\', \'3\');\nalert(searchParams.toString()); // " q=javascript&num=10&page=3"\nsearchParams.delete(\'q\');\nalert(searchParams.toString()); // " num=10&page=3"\n')),(0,l.kt)("h3",{id:"encoding-and-decoding"},"Encoding and Decoding"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder"},"TextEncoder API"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const textEncoder = new TextEncoder();\nconst decodedText = 'foo';\nconst encodedText = textEncoder.encode(decodedText);\n// f \u7684 UTF-8 \u7f16\u7801\u662f 0x66 (\u5373\u5341\u8fdb\u5236 102)\n// o \u7684 UTF-8 \u7f16\u7801\u662f 0x6F (\u5373\u4e8c\u8fdb\u5236 111)\nconsole.log(encodedText); // Uint8Array(3) [102, 111, 111]\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const textEncoder = new TextEncoder();\nconst fooArr = new Uint8Array(3);\nconst fooResult = textEncoder.encodeInto('foo', fooArr);\nconsole.log(fooArr); // Uint8Array(3) [102, 111, 111]\nconsole.log(fooResult); // { read: 3, written: 3 }\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"async function* chars() {\n  const decodedText = 'foo';\n  for (const char of decodedText) {\n    yield await new Promise(resolve => setTimeout(resolve, 1000, char));\n  }\n}\n\nconst decodedTextStream = new ReadableStream({\n  async start(controller) {\n    for await (const chunk of chars()) {\n      controller.enqueue(chunk);\n    }\n\n    controller.close();\n  },\n});\n\nconst encodedTextStream = decodedTextStream.pipeThrough(\n  new TextEncoderStream()\n);\n\nconst readableStreamDefaultReader = encodedTextStream.getReader();\n\nwhile (true) {\n  const { done, value } = await readableStreamDefaultReader.read();\n\n  if (done) {\n    break;\n  } else {\n    console.log(value);\n  }\n}\n// Uint8Array[102]\n// Uint8Array[111]\n// Uint8Array[111]\n")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder"},"TextDecoder API"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const textDecoder = new TextDecoder();\n// f \u7684 UTF-8 \u7f16\u7801\u662f 0x66 (\u5373\u5341\u8fdb\u5236 102)\n// o \u7684 UTF-8 \u7f16\u7801\u662f 0x6F (\u5373\u4e8c\u8fdb\u5236 111)\nconst encodedText = Uint8Array.of(102, 111, 111);\nconst decodedText = textDecoder.decode(encodedText);\nconsole.log(decodedText); // foo\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const response = await fetch(url);\nconst stream = response.body.pipeThrough(new TextDecoderStream());\nconst decodedStream = stream.getReader();\n\nfor await (const decodedChunk of decodedStream) {\n  console.log(decodedChunk);\n}\n")),(0,l.kt)("h3",{id:"internationalization"},"Internationalization"),(0,l.kt)("h4",{id:"number-i18n"},"Number i18n"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const nfFrench = new Intl.NumberFormat('fr');\nnf.format(12345678901234567890n);\n// => 12 345 678 901 234 567 890\n")),(0,l.kt)("h4",{id:"string-i18n"},"String i18n"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const lfEnglish = new Intl.ListFormat('en');\n// const lfEnglish = new Intl.ListFormat('en', { type: 'disjunction' }); => 'or'\n\nlfEnglish.format(['Ada', 'Grace', 'Ida']);\n// => 'Ada, Grace and Ida'\n\nconst formatter = new Intl.ListFormat('en', {\n  style: 'long',\n  type: 'conjunction',\n});\nconsole.log(formatter.format(vehicles));\n// expected output: \"Motorcycle, Bus, and Car\"\n\nconst formatter2 = new Intl.ListFormat('de', {\n  style: 'short',\n  type: 'disjunction',\n});\nconsole.log(formatter2.format(vehicles));\n// expected output: \"Motorcycle, Bus oder Car\"\n\nconst formatter3 = new Intl.ListFormat('en', { style: 'narrow', type: 'unit' });\nconsole.log(formatter3.format(vehicles));\n// expected output: \"Motorcycle Bus Car\"\n")),(0,l.kt)("h4",{id:"time-i18n"},"Time i18n"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const rtfEnglish = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });\n\nrtf.format(-1, 'day'); // 'yesterday'\nrtf.format(0, 'day'); // 'today'\nrtf.format(1, 'day'); // 'tomorrow'\nrtf.format(-1, 'week'); // 'last week'\nrtf.format(0, 'week'); // 'this week'\nrtf.format(1, 'week'); // 'next week'\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const dtfEnglish = new Intl.DateTimeFormat('en', {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n});\n\ndtfEnglish.format(new Date()); // => 'May 7, 2019'\ndtfEnglish.formatRange(start, end); // => 'May 7 - 9, 2019'\n")),(0,l.kt)("h2",{id:"functional-javascript"},"Functional JavaScript"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Predictable (pure and immutable)."),(0,l.kt)("li",{parentName:"ul"},"Safe (pure and immutable)."),(0,l.kt)("li",{parentName:"ul"},"Transparent (pure and immutable)."),(0,l.kt)("li",{parentName:"ul"},"Modular (composite).")),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Functional JavaScript")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Functional programming is the art of composing higher-order functions\nto advance the state of a program in a pure manner."))),(0,l.kt)("h3",{id:"functional-javascript-pros"},"Functional JavaScript Pros"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Type safe and state safe."),(0,l.kt)("li",{parentName:"ul"},"Explicit flow of data."),(0,l.kt)("li",{parentName:"ul"},"Concurrency safety.")),(0,l.kt)("h3",{id:"functional-javascript-cons"},"Functional JavaScript Cons"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Verbose."),(0,l.kt)("li",{parentName:"ul"},"More object creation."),(0,l.kt)("li",{parentName:"ul"},"More garbage collection."),(0,l.kt)("li",{parentName:"ul"},"More memory usage.")),(0,l.kt)("p",null,"With help of ",(0,l.kt)("inlineCode",{parentName:"p"},"immutable.js"),",\nobject creation/garbage collection/memory usage can be alleviated."),(0,l.kt)("p",null,"For example, in vanilla.js, ",(0,l.kt)("inlineCode",{parentName:"p"},"map2 === map1")," become ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),",\nbut in immutable.js ",(0,l.kt)("inlineCode",{parentName:"p"},"map2 === map1")," become ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),"\n(copy free due to immutable data)."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const map1 = { b: 2 };\nconst map2 = map1.set('b', 2);\n")),(0,l.kt)("h3",{id:"partial-application"},"Partial Application"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const partialFromBind = (fn, ...args) => {\n  return fn.bind(null, ...args);\n};\n\nconst partial = (fn, ...args) => {\n  return (...rest) => {\n    return fn(...args, ...rest);\n  };\n};\n")),(0,l.kt)("h3",{id:"currying"},"Currying"),(0,l.kt)("p",null,"Chain of multiple single argument functions:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"function curry(fn, ...stored_args) {\n  return function (...new_args) {\n    const args = stored_args.concat(new_args);\n    return fn(...args);\n  };\n}\n\nconst add = x => y => x + y;\n\nconst addOne = curry(add, 1);\n// addOne(3) === 4;\nconst addFive = curry(addOne, 1, 3);\n// addFive(4) === 9;\n")),(0,l.kt)("h3",{id:"compose"},"Compose"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const compose =\n  (...fns) =>\n  x =>\n    fns.reduceRight((promise, fn) => promise.then(fn), Promise.resolve(x));\n\nconst addTwo = x => x + 2;\nconst addThree = x => x + 3;\nconst addFive = x => x + 5;\nconst addTen = compose(addTwo, addThree, addFive);\n\naddTen(8).then(console.log); // 18\n")),(0,l.kt)("h3",{id:"flow"},"Flow"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const flow =\n  (...fns) =>\n  x =>\n    fns.reduce((promise, fn) => promise.then(fn), Promise.resolve(x));\n\nconst addTwo = x => x + 2;\nconst addThree = x => x + 3;\nconst addFive = x => x + 5;\nconst addTen = flow(addTwo, addThree, addFive);\n\naddTen(8).then(console.log); // 18\n")),(0,l.kt)("h3",{id:"pipe"},"Pipe"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const pipe = (x, ...fns) =>\n  fns.reduce((promise, fn) => promise.then(fn), Promise.resolve(x));\n\nconst addTwo = x => x + 2;\nconst addThree = x => x + 3;\nconst addFive = x => x + 5;\nconst addTen = pipe(8, addTwo, addThree, addFive);\n\naddTen.then(console.log); // 18\n")),(0,l.kt)("h3",{id:"immutable"},"Immutable"),(0,l.kt)("h4",{id:"immutable-array"},"Immutable Array"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const RE_INDEX_PROP_KEY = /^[0-9]+$/;\nconst ALLOWED_PROPERTIES = new Set([\n  'length',\n  'constructor',\n  'slice',\n  'concat',\n]);\n\nfunction createImmutableArray(arrayLike, mapFn) {\n  const arr = Array.from(arrayLike, mapFn);\n\n  const handler = {\n    get(target, propKey, receiver) {\n      if (RE_INDEX_PROP_KEY.test(propKey) || ALLOWED_PROPERTIES.has(propKey)) {\n        return Reflect.get(target, propKey, receiver);\n      }\n\n      throw new TypeError(`Property \"${propKey}\" can\u2019t be accessed`);\n    },\n    set(target, propKey, value, receiver) {\n      throw new TypeError('Setting is not allowed');\n    },\n    deleteProperty(target, propKey) {\n      throw new TypeError('Deleting is not allowed');\n    },\n  };\n\n  return new Proxy(arr, handler);\n}\n\nconst array = createImmutableArray(['a', 'b', 'c']);\n\n// Non-destructive operations are allowed:\nassert.deepEqual(array.slice(1), ['b', 'c']);\nassert.equal(array[1], 'b');\n\n// Destructive operations are not allowed:\nassert.throws(() => (array[1] = 'x'), /^TypeError: Setting is not allowed$/);\nassert.throws(\n  () => array.shift(),\n  /^TypeError: Property \"shift\" can\u2019t be accessed$/\n);\n")),(0,l.kt)("h4",{id:"immutable-map"},"Immutable Map"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class ImmutableMap {\n  #map;\n\n  constructor(iterable) {\n    this.#map = new Map(iterable);\n  }\n\n  static _setUpPrototype() {\n    // Only forward non-destructive methods to the map:\n    for (const methodName of ['get', 'has', 'keys', 'size']) {\n      ImmutableMap.prototype[methodName] = function (...args) {\n        return this.#map[methodName](...args);\n      };\n    }\n  }\n}\n\nImmutableMap._setUpPrototype();\n\nconst map = new ImmutableMap([\n  [false, 'no'],\n  [true, 'yes'],\n]);\n\n// Non-destructive operations work as usual:\nassert.equal(map.get(true), 'yes');\nassert.equal(map.has(false), true);\nassert.deepEqual([...map.keys()], [false, true]);\n\n// Destructive operations are not available:\nassert.throws(\n  () => map.set(false, 'never!'),\n  /^TypeError: map.set is not a function$/\n);\nassert.throws(() => map.clear(), /^TypeError: map.clear is not a function$/);\n")),(0,l.kt)("h4",{id:"immutable-class"},"Immutable Class"),(0,l.kt)("p",null,"Copying class instances without side effects:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  clone() {\n    return new Point(this.x, this.y);\n  }\n\n  static from(other) {\n    return new Point(other.x, other.y);\n  }\n}\n\nclass Color {\n  constructor(name) {\n    this.name = name;\n  }\n\n  clone() {\n    return new Color(this.name);\n  }\n\n  static from(other) {\n    return new Color(other.name);\n  }\n}\n\nclass ColorPoint extends Point {\n  constructor(x, y, color) {\n    super(x, y);\n    this.color = color;\n  }\n\n  clone() {\n    return new ColorPoint(this.x, this.y, this.color.clone());\n  }\n\n  static from(other) {\n    return new ColorPoint(other.x, other.y, Color.from(other.color));\n  }\n}\n")),(0,l.kt)("h3",{id:"lodash"},"Lodash"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"chunk."),(0,l.kt)("li",{parentName:"ul"},"shuffle."),(0,l.kt)("li",{parentName:"ul"},"take."),(0,l.kt)("li",{parentName:"ul"},"difference."),(0,l.kt)("li",{parentName:"ul"},"intersection."),(0,l.kt)("li",{parentName:"ul"},"isEmpty."),(0,l.kt)("li",{parentName:"ul"},"orderBy."),(0,l.kt)("li",{parentName:"ul"},"merge."),(0,l.kt)("li",{parentName:"ul"},"cloneDeep."),(0,l.kt)("li",{parentName:"ul"},"debounce."),(0,l.kt)("li",{parentName:"ul"},"throttle."),(0,l.kt)("li",{parentName:"ul"},"startCase."),(0,l.kt)("li",{parentName:"ul"},"kebabCase."),(0,l.kt)("li",{parentName:"ul"},"snakeCase."),(0,l.kt)("li",{parentName:"ul"},"camelCase.")),(0,l.kt)("h3",{id:"rxjs"},"RxJS"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Async iteration: pull streams and single consumers."),(0,l.kt)("li",{parentName:"ul"},"Reactive programming: push streams and potentially multiple consumers.")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Data Stream",src:t(6086).Z,width:"1566",height:"766"})),(0,l.kt)("h4",{id:"stream"},"Stream"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class PushArray extends Array {\n  static EVENT_NAME = 'new_value';\n  #eventEmitter = new EventEmitter();\n\n  push(value) {\n    this.#eventEmitter.emit(PushArray.EVENT_NAME, value);\n    return super.push(value);\n  }\n\n  subscribe({ next }) {\n    this.#eventEmitter.on(PushArray.EVENT_NAME, value => {\n      next(value);\n    });\n  }\n\n  unsubscribe() {\n    this.#eventEmitter.removeAllListeners(PushArray.EVENT_NAME);\n  }\n}\n\n// Source\nconst pushArray = new PushArray(1, 2, 3);\n\n// Consumer\npushArray.subscribe({\n  next(value) {\n    console.log('New value:', value);\n  },\n});\n\n// Producer\npushArray.push(4);\npushArray.push(5);\npushArray.unsubscribe();\npushArray.push(6);\n")),(0,l.kt)("h4",{id:"observable"},"Observable"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface Observer<T> {\n  next(value: T): void;\n  error?(error: Error): void;\n  complete?(): void;\n}\n\ninterface Subscription {\n  unsubscribe(): void;\n}\n\ninterface Observable<T> {\n  // eslint-disable-next-line @typescript-eslint/no-misused-new\n  new (subscriber: (observer: Observer<T>) => Subscription): Observable<T>;\n  observable(): this;\n  readonly species: this;\n\n  static of(...items: Array<mixed>): Observable<T>;\n  static from(x: Observable<T> | Iterable<T>): Observable<T>;\n\n  map<Z>(fn: (value: T) => Z): Observable<Z>;\n  reduce<Z>(\n    acc: (accumulator: Z, value: T, index?: number, array?: Array<T>) => Z,\n    startsWith?: T\n  ): Observable<T>;\n  filter(predicate: (value: T) => boolean): Observable<T>;\n  skip(count: number): Observable<T>;\n\n  subscribe(observer: Function | Observer<T>): Subscription;\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const map = curry(\n  (fn, stream) =>\n    new Observable(observer => {\n      const subs = stream.subscribe({\n        next(value) {\n          try {\n            observer.next(fn(value));\n          } catch (err) {\n            observer.error(err);\n          }\n        },\n        error(e) {\n          observer.error(e);\n        },\n        complete() {\n          observer.complete();\n        },\n      });\n\n      return () => subs.unsubscribe();\n    })\n);\n\nconst reduce = curry((accumulator, initialValue, stream) => {\n  let result = initialValue ?? {};\n\n  return new Observable(observer => {\n    const subs = stream.subscribe({\n      next(value) {\n        result = accumulator(result, value);\n      },\n      error(e) {\n        observer.error(e);\n      },\n      complete() {\n        observer.next(result);\n        observer.complete();\n      },\n    });\n\n    return () => subs.unsubscribe();\n  });\n});\n\nconst filter = curry(\n  (predicate, stream) =>\n    new Observable(observer => {\n      const subs = stream.subscribe({\n        next(value) {\n          if (predicate(value)) {\n            observer.next(value);\n          }\n        },\n        error(e) {\n          observer.error(e);\n        },\n        complete() {\n          observer.complete();\n        },\n      });\n\n      return () => subs.unsubscribe();\n    })\n);\n\nconst skip = curry((count, stream) => {\n  let skipped = 0;\n\n  return new Observable(observer => {\n    const subs = stream.subscribe({\n      next(value) {\n        if (skipped++ >= count) {\n          observer.next(value);\n        }\n      },\n      error(e) {\n        observer.error(e);\n      },\n      complete() {\n        observer.complete();\n      },\n    });\n\n    return () => subs.unsubscribe();\n  });\n});\n\nclass Observable {\n  map(fn) {\n    return map(fn, this);\n  }\n\n  reduce(accumulator, initialValue = {}) {\n    return reduce(accumulator, initialValue, this);\n  }\n\n  filter(predicate) {\n    return filter(predicate, this);\n  }\n\n  skip(count) {\n    return skip(count, this);\n  }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"Observable.of(1, 2, 3, 4)\n  .skip(1)\n  .filter(isEven)\n  .map(square)\n  .reduce(add, 0)\n  .subscribe({\n    next: console.log,\n  });\n")))}d.isMDXComponent=!0},4640:function(e,n,t){n.Z=t.p+"assets/images/ClassInheritance-af68b0adf0b394f97d163fa4d2de226f.png"},9103:function(e,n,t){n.Z=t.p+"assets/images/ContextStackAndScopeChain-1fe54b80b91bd079b55a126e7d2fec4a.png"},6086:function(e,n,t){n.Z=t.p+"assets/images/DataStream-c7ee09b15d0e8d734410199bfdf72101.png"},1481:function(e,n,t){n.Z=t.p+"assets/images/GlobalScope-1c99e41217be6d08f2578d375fd7efd2.png"},2100:function(e,n,t){n.Z=t.p+"assets/images/Prototype-2fb1355f96dd47bebb2d6eee1fd30081.png"},7379:function(e,n,t){n.Z=t.p+"assets/images/TC39-2ca35cdaa1f11b496ccd99fa708ef6de.png"}}]);