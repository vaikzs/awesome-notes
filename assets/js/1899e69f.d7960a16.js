"use strict";(self.webpackChunkawesome_notes=self.webpackChunkawesome_notes||[]).push([[5598],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return c}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),p=u(n),c=l,k=p["".concat(s,".").concat(c)]||p[c]||m[c]||i;return n?a.createElement(k,o(o({ref:t},d),{},{components:n})):a.createElement(k,o({ref:t},d))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,o=new Array(i);o[0]=p;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:l,o[1]=r;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},8513:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return c},frontMatter:function(){return r},metadata:function(){return u},toc:function(){return m}});var a=n(7462),l=n(3366),i=(n(7294),n(3905)),o=["components"],r={author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["CS","Database"]},s="Database Basic Notes",u={unversionedId:"computerScience/database/databaseBasicNotes",id:"computerScience/database/databaseBasicNotes",title:"Database Basic Notes",description:"Basic Concepts",source:"@site/notes/computerScience/database/databaseBasicNotes.md",sourceDirName:"computerScience/database",slug:"/computerScience/database/databaseBasicNotes",permalink:"/awesome-notes/computerScience/database/databaseBasicNotes",editUrl:"https://github.com/sabertazimi/awesome-notes/edit/main/notes/computerScience/database/databaseBasicNotes.md",tags:[{label:"CS",permalink:"/awesome-notes/tags/cs"},{label:"Database",permalink:"/awesome-notes/tags/database"}],version:"current",lastUpdatedBy:"sabertazimi",lastUpdatedAt:1649250539,formattedLastUpdatedAt:"4/6/2022",frontMatter:{author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["CS","Database"]},sidebar:"sidebar",previous:{title:"Compiler Basic Notes",permalink:"/awesome-notes/computerScience/compilers/compilersBasicNotes"},next:{title:"LaTeX Basic Notes",permalink:"/awesome-notes/computerScience/latex/latexBasicNotes"}},d={},m=[{value:"Basic Concepts",id:"basic-concepts",level:2},{value:"Feature",id:"feature",level:3},{value:"Common Words",id:"common-words",level:3},{value:"Data Format",id:"data-format",level:2},{value:"XML",id:"xml",level:3},{value:"DTD",id:"dtd",level:4},{value:"XSD",id:"xsd",level:4},{value:"JSON",id:"json",level:3},{value:"Relational Algebra",id:"relational-algebra",level:2},{value:"Operators",id:"operators",level:3},{value:"Higher-Level Database Design Models",id:"higher-level-database-design-models",level:2},{value:"UML",id:"uml",level:3},{value:"Classes",id:"classes",level:4},{value:"Associations",id:"associations",level:4},{value:"Associations Classes",id:"associations-classes",level:4},{value:"Subclasses",id:"subclasses",level:4},{value:"Composition and Aggregation",id:"composition-and-aggregation",level:4},{value:"Entity Relationship Model",id:"entity-relationship-model",level:3},{value:"SQL",id:"sql",level:2},{value:"Relational Design",id:"relational-design",level:2},{value:"Decomposition",id:"decomposition",level:3},{value:"functional dependencies",id:"functional-dependencies",level:3},{value:"BCNF",id:"bcnf",level:3},{value:"Multi Valued Dependencies",id:"multi-valued-dependencies",level:3},{value:"4NF",id:"4nf",level:3},{value:"Normalized Design",id:"normalized-design",level:3},{value:"Indexes",id:"indexes",level:2},{value:"Transactions",id:"transactions",level:2},{value:"Transaction Standard",id:"transaction-standard",level:3},{value:"ACID Properties",id:"acid-properties",level:3},{value:"Isolation Level",id:"isolation-level",level:4},{value:"Integrity Constraints",id:"integrity-constraints",level:2},{value:"Triggers (DBMS Level Constraints)",id:"triggers-dbms-level-constraints",level:2},{value:"Views",id:"views",level:2},{value:"Modifications on Views",id:"modifications-on-views",level:3},{value:"Implements Modification with Triggers",id:"implements-modification-with-triggers",level:4},{value:"SQL Standard - Updatable Views",id:"sql-standard---updatable-views",level:4},{value:"MongoDB Basic Notes",id:"mongodb-basic-notes",level:2},{value:"MongoDB Set Up",id:"mongodb-set-up",level:3},{value:"MongoDB Installation",id:"mongodb-installation",level:4},{value:"MongoDB Not Upgrade",id:"mongodb-not-upgrade",level:4},{value:"MongoDB Control",id:"mongodb-control",level:4},{value:"MongoDB Uninstall",id:"mongodb-uninstall",level:4},{value:"Shell Instruction",id:"shell-instruction",level:3},{value:"create and drop",id:"create-and-drop",level:4},{value:"create",id:"create",level:5},{value:"drop",id:"drop",level:5},{value:"query",id:"query",level:4},{value:"insert",id:"insert",level:4},{value:"information",id:"information",level:4},{value:"database",id:"database",level:5},{value:"collection",id:"collection",level:5}],p={toc:m};function c(e){var t=e.components,n=(0,l.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"database-basic-notes"},"Database Basic Notes"),(0,i.kt)("h2",{id:"basic-concepts"},"Basic Concepts"),(0,i.kt)("h3",{id:"feature"},"Feature"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Massive"),(0,i.kt)("li",{parentName:"ul"},"Persistent"),(0,i.kt)("li",{parentName:"ul"},"Safe"),(0,i.kt)("li",{parentName:"ul"},"Multi-user"),(0,i.kt)("li",{parentName:"ul"},"Convenient"),(0,i.kt)("li",{parentName:"ul"},"Efficient"),(0,i.kt)("li",{parentName:"ul"},"Reliable")),(0,i.kt)("h3",{id:"common-words"},"Common Words"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"create/drop(from)/insert into/delete from/update"),(0,i.kt)("li",{parentName:"ul"},"restricts"),(0,i.kt)("li",{parentName:"ul"},"sub-queries"),(0,i.kt)("li",{parentName:"ul"},"views(shorthand for queries)"),(0,i.kt)("li",{parentName:"ul"},"left/right join on ..."),(0,i.kt)("li",{parentName:"ul"},"primary/foreign key"),(0,i.kt)("li",{parentName:"ul"},"references")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"(id, name, birth, major, grade) is not normalized,\nbecause grade is not relevant to student id\n(id, name, birth) + (id, major, grade) is normalized\n(name, os, lang) is not normalized, because os isn't relevant to lang\n(name, os) + (name, lang) is normalized\nData-intensive applications may not use DBMS/Query Language at all\ne.g Hadoop, all operations on data stores in files")),(0,i.kt)("h2",{id:"data-format"},"Data Format"),(0,i.kt)("h3",{id:"xml"},"XML"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"single root element"),(0,i.kt)("li",{parentName:"ul"},"matched tags with proper nesting"),(0,i.kt)("li",{parentName:"ul"},"unique attributes within elements")),(0,i.kt)("h4",{id:"dtd"},"DTD"),(0,i.kt)("p",null,"Document Type Definition:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"similar grammar to regular expression(",(0,i.kt)("inlineCode",{parentName:"li"},"*?"),")"),(0,i.kt)("li",{parentName:"ul"},"ID/IDRef should be unique"),(0,i.kt)("li",{parentName:"ul"},"CDATA: character data"),(0,i.kt)("li",{parentName:"ul"},"(#PCDATA): parsed character data (plain text between tags)")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8"?>\n\n<!DOCTYPE Bookstore [\n    <!ELEMENT Bookstore (Book)*>\n    <!ELEMENT Book (Title, Authors, Remark?)>\n    <!ATTLIST Book  ISBN ID #REQUIRED\n                    Price CDATA #REQUIRED\n                    Authors IDREFS #REQUIRED>\n    <!ELEMENT Title (#PCDATA)>\n    <!ELEMENT Remark (#PCDATA | BookRef)*>\n    <!ELEMENT BookRef EMPTY>\n    <!ATTLIST BookRef book IDREF #REQUIRED>\n    <!ELEMENT Authors (Author)*>\n    <!ELEMENT Author (First_Name, Last_Name)>\n    <!ATTLIST Author Ident ID #REQUIRED>\n    <!ELEMENT First_Name (#PCDATA)>\n    <!ELEMENT Last_Name (#PCDATA)>\n]>\n\n<Bookstore>\n    <Book ISBN="ISBN-0-23-23333-233" Price="233" Authors="Sabertazimi">\n        <Title>Kind of sword</Title>\n        <Authors>\n            <Author Ident="Sabertazimi">\n                <First_Name>Yilong</First_Name>\n                <Last_Name>Liu</Last_Name>\n            </Author>\n        </Authors>\n    </Book>\n</Bookstore>\n')),(0,i.kt)("p",null,"Tools: XML Copy Editor, XML Linter:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"xmllint --valid --noout Bookstore.xml\n")),(0,i.kt)("h4",{id:"xsd"},"XSD"),(0,i.kt)("p",null,"XML Schema Definition:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"xmllint -schema Bookstore.xsd -noout Bookstore.xml\n")),(0,i.kt)("h3",{id:"json"},"JSON"),(0,i.kt)("p",null,"JavaScript Object Notation:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"serializing data objects in files"),(0,i.kt)("li",{parentName:"ul"},"human-readable data"),(0,i.kt)("li",{parentName:"ul"},"semi-structured data"),(0,i.kt)("li",{parentName:"ul"},"number/boolean/string/array/object(empty or key-value pair) recursive constructs")),(0,i.kt)("h2",{id:"relational-algebra"},"Relational Algebra"),(0,i.kt)("h3",{id:"operators"},"Operators"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"select operator \u03c3(sigma): ",(0,i.kt)("inlineCode",{parentName:"li"},"\u03c3(sID < 100 ^ sAge > 20)Table_Name")," set constraints"),(0,i.kt)("li",{parentName:"ul"},"project operator \u03c0(pi) : ",(0,i.kt)("inlineCode",{parentName:"li"},"\u03c0(sID, GPA)Table_Name")," select certain columns"),(0,i.kt)("li",{parentName:"ul"},"cross-product operator x: Table1 x Table2,\nm tuples(rows) x n tuples(rows) => ",(0,i.kt)("inlineCode",{parentName:"li"},"m*n")," tuples(rows)"),(0,i.kt)("li",{parentName:"ul"},"natural join operator \u221e: \u03c3(E1.A1 = E2.A1 ^ E1.A2 = E2.A2 ...) (E1 x E2)"),(0,i.kt)("li",{parentName:"ul"},"theta join operator \u221e(condition): \u03c3(condition) (E1 x E2), call condition as \u03f4"),(0,i.kt)("li",{parentName:"ul"},"difference operator -: matching schemas => change rows/tuples"),(0,i.kt)("li",{parentName:"ul"},"union/intersection operator \u222a / \u2229: matching schemas => change rows/tuples"),(0,i.kt)("li",{parentName:"ul"},"rename operator \u03c1: change schemas(attributes name),\ndifferent schemas <=> same schemas (",(0,i.kt)("strong",{parentName:"li"},"union/intersection/self-join"),")"),(0,i.kt)("li",{parentName:"ul"},"assign statement :="),(0,i.kt)("li",{parentName:"ul"},"tree notation")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"\u03c0(sID, GPA) (\u03c3(sID < 100 ^ GPA > 3.7) Student)\n")),(0,i.kt)("h2",{id:"higher-level-database-design-models"},"Higher-Level Database Design Models"),(0,i.kt)("p",null,"Higher-Level Database Design Models ",(0,i.kt)("inlineCode",{parentName:"p"},"-Translator->")," Relational implemented by RDBMS"),(0,i.kt)("h3",{id:"uml"},"UML"),(0,i.kt)("p",null,"Unified Modeling Language: PlantUML"),(0,i.kt)("h4",{id:"classes"},"Classes"),(0,i.kt)("p",null,"for data modeling:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"add PK(primary key)"),(0,i.kt)("li",{parentName:"ul"},"drop methods")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"-----------\n| student |\n|---------|\n|sID   PK |\n|sName    |\n|GPA      |\n|---------|\n|<methods>|\n-----------\n")),(0,i.kt)("h4",{id:"associations"},"Associations"),(0,i.kt)("p",null,"relationships between objects of 2 classes):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"one to one: ",(0,i.kt)("inlineCode",{parentName:"li"},"1..1 --- 1..1"),"."),(0,i.kt)("li",{parentName:"ul"},"many to one: ",(0,i.kt)("inlineCode",{parentName:"li"},"* --- 1..1")),(0,i.kt)("li",{parentName:"ul"},"one to many: ",(0,i.kt)("inlineCode",{parentName:"li"},"1..1 --- *"),"."),(0,i.kt)("li",{parentName:"ul"},"many to many: ",(0,i.kt)("inlineCode",{parentName:"li"},"* --- *"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"-----------                   ---------\n| student |                   |college|\n|---------|                   |       |\n|sID   PK |x..y   Apply   m..n|       |\n|sName    |-------------------|       |\n|GPA      |                   |       |\n|---------|                   |       |\n|<methods>|                   |       |\n-----------                   ---------\n")),(0,i.kt)("h4",{id:"associations-classes"},"Associations Classes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"classes store information of relationship edge between 2 data classes"),(0,i.kt)("li",{parentName:"ul"},"unnecessary if 0..1 or 1..1")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"c1 * --- 1..1 c2\ninformation of relationship edge can stored in c1\nowing to every object of c1 only associated with 1 object of c2\n")),(0,i.kt)("h4",{id:"subclasses"},"Subclasses"),(0,i.kt)("p",null,"children classes"),(0,i.kt)("h4",{id:"composition-and-aggregation"},"Composition and Aggregation"),(0,i.kt)("h3",{id:"entity-relationship-model"},"Entity Relationship Model"),(0,i.kt)("h2",{id:"sql"},"SQL"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"select ... from ... where"),(0,i.kt)("li",{parentName:"ul"},"insert into ... ..."),(0,i.kt)("li",{parentName:"ul"},"delete from ... where ..."),(0,i.kt)("li",{parentName:"ul"},"update ... set ... = ... where ...")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"DROP VIEW IF EXISTS Standings;\nDROP VIEW IF EXISTS Count;\nDROP VIEW IF EXISTS Wins;\nDROP TABLE IF EXISTS Matches;\nDROP TABLE IF EXISTS Players;\n\n-- Players Table\nCREATE TABLE Players (\n  id SERIAL primary key,\n  name varchar(255)\n);\n\n-- Matches Table\nCREATE TABLE Matches (\n  id SERIAL primary key,\n  player int references Players(id),\n  opponent int references Players(id),\n  result int\n);\n\n-- Wins View shows number of wins for each Player\nCREATE VIEW Wins AS\n  SELECT Players.id, COUNT(Matches.opponent) AS n\n  FROM Players\n  LEFT JOIN (SELECT * FROM Matches WHERE result>0) as Matches\n  ON Players.id = Matches.player\n  GROUP BY Players.id;\n\n-- Count View shows number of matches for each Player\nCREATE VIEW Count AS\n  SELECT Players.id, Count(Matches.opponent) AS n\n  FROM Players\n  LEFT JOIN Matches\n  ON Players.id = Matches.player\n  GROUP BY Players.id;\n\n-- Standings View shows number of wins and matches for each Player\nCREATE VIEW Standings AS\n  SELECT Players.id,Players.name,Wins.n as wins,Count.n as matches\n  FROM Players,Count,Wins\n  WHERE Players.id = Wins.id and Wins.id = Count.id;\n")),(0,i.kt)("h2",{id:"relational-design"},"Relational Design"),(0,i.kt)("h3",{id:"decomposition"},"Decomposition"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"start with mega-relations: including all attributes"),(0,i.kt)("li",{parentName:"ul"},"decompose into smaller relations(BCNF/4NF)")),(0,i.kt)("h3",{id:"functional-dependencies"},"functional dependencies"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A -> B => 1-1/n-1 mapping"),(0,i.kt)("li",{parentName:"ul"},"key sets: closure of sets contains all attributes")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"assuming relation R(A, B, C, D, ..., G)\nand closure of A, B {A, B} + ",(0,i.kt)("inlineCode",{parentName:"p"},"A->C->D, B->E->F, F->G"),"\n=> {A, B}+ = {A, B, C, ..., G}\nthen, {A, B} is a key\nif there no exists such closure, then treat all-attributes as a key")),(0,i.kt)("h3",{id:"bcnf"},"BCNF"),(0,i.kt)("p",null,"boyce-codd normal form:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"for each A -> B having A is super key && B isn't key"),(0,i.kt)("li",{parentName:"ul"},"not exists A -> B -> C"),(0,i.kt)("li",{parentName:"ul"},"here's the algorithm:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"/*\n * @brief fixed point algorithm just like most algorithms from compiler\n *\n * by decomposing to transform non-key dependent attributes to key dependent attributes\n */\n\ncompute FDs for R\ncompute key for R using its FDs\n\nwhile (there is relation R' aren't in BCNF) {\n    pick any R' with A -> B that violates BCNF (A is not its key)\n    decompose R' into R1(A, B) and R2(A, rest)\n    compute FDs for R1 and R2\n    compute keys for R1 and R2 using their FDs\n}\n")),(0,i.kt)("h3",{id:"multi-valued-dependencies"},"Multi Valued Dependencies"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"A -> B && rest attributes")," => ",(0,i.kt)("inlineCode",{parentName:"li"},"A ->> B"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"A ->> B")," (1-n mapping), ",(0,i.kt)("inlineCode",{parentName:"li"},"A ->> C")," (1-n mapping),\nno ",(0,i.kt)("inlineCode",{parentName:"li"},"B -> C"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"C ->> B"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"B * C")," redundant tuples/rows."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"A ->>B && A ->>C")," => ",(0,i.kt)("inlineCode",{parentName:"li"},"A ->> B\u2229C"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"A ->>B && B ->>C")," => ",(0,i.kt)("inlineCode",{parentName:"li"},"A ->> C-B"),".")),(0,i.kt)("h3",{id:"4nf"},"4NF"),(0,i.kt)("p",null,"Forth normal form:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"if A ->> B then A is key && B isn't key"),(0,i.kt)("li",{parentName:"ul"},"here's the algorithm:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"/*\n * @brief fixed point algorithm just like most algorithms from compiler\n *\n * by decomposing to transform non-key dependent attributes to key dependent attributes\n */\n\ncompute FDs and MVDs for R\ncompute key for R using its FDs\n\nwhile (there is relation R' aren't in 4NF) {\n    pick any R' with A ->> B that violates 4NF(A is not its key)\n    decompose R' into R1(A, B) and R2(A, rest)\n    compute FDs and MVDs for R1 and R2\n    compute keys for R1 and R2 using their FDs\n}\n")),(0,i.kt)("h3",{id:"normalized-design"},"Normalized Design"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"every row has the same number of columns"),(0,i.kt)("li",{parentName:"ul"},"every row has a unique key(PRIMARY KEY)"),(0,i.kt)("li",{parentName:"ul"},"everything in a row is all relevant to unique key"),(0,i.kt)("li",{parentName:"ul"},"everything in a row is all relevant to each other")),(0,i.kt)("h2",{id:"indexes"},"Indexes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"primary mechanism to improve performance of database"),(0,i.kt)("li",{parentName:"ul"},"persist data structures stored in database (hash tables/B trees/B+ trees)"),(0,i.kt)("li",{parentName:"ul"},"trade off: ",(0,i.kt)("inlineCode",{parentName:"li"},"scale of database")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"workload(query/update rate)"),"\nas input of physical design advisors")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE INDEX IndexName on T(A)\nCREATE INDEX IndexName on T(A1, A2, ..., An)\nCREATE UNIQUE INDEX IndexName on T(A)\nDROP INDEX IndexName\n")),(0,i.kt)("h2",{id:"transactions"},"Transactions"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a sequence of one/more SQL operations treated as a unit"),(0,i.kt)("li",{parentName:"ul"},"target: concurrency and failures recovery")),(0,i.kt)("h3",{id:"transaction-standard"},"Transaction Standard"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"all or nothing(atomicity)"),(0,i.kt)("li",{parentName:"ul"},"transaction begins automatically on first SQL statement"),(0,i.kt)("li",{parentName:"ul"},'on "commit": old transaction ends, new one begins'),(0,i.kt)("li",{parentName:"ul"},"on session termination: current transaction ends"),(0,i.kt)("li",{parentName:"ul"},'"AutoCommit" turns each statement into transaction')),(0,i.kt)("h3",{id:"acid-properties"},"ACID Properties"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Atomicity(Logging)"),(0,i.kt)("li",{parentName:"ul"},"Consistency"),(0,i.kt)("li",{parentName:"ul"},"Isolation: guarantee serializability(Locking)"),(0,i.kt)("li",{parentName:"ul"},"Durability(Logging)")),(0,i.kt)("h4",{id:"isolation-level"},"Isolation Level"),(0,i.kt)("p",null,"weaker isolation level: read uncommitted < read committed < repeatable read < serializable"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"increased concurrency + decreased overhead = increased performance"),(0,i.kt)("li",{parentName:"ul"},"weaker consistency guarantees"),(0,i.kt)("li",{parentName:"ul"},"some system default: repeatable read")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"SET TRANSACTION READ ONLY;\nSET TRANSACTION ISOLATION LEVEL REPEATABLE READ;\n")),(0,i.kt)("h2",{id:"integrity-constraints"},"Integrity Constraints"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE TableName (\n    ... PRIMARY KEY,\n    ... UNIQUE,\n    ... CHECK (Condition),\n    ... references TableName(ForeignKey),\n    ... references TableName(ForeignKey) ON DELETE/UPDATE RESTRICT/SET NULL/CASCADE,\n    ... ,\n    PRIMARY KEY (Attr1, Attr2, ...),\n    UNIQUE (Attr1, Attr2, ...),\n    CHECK (Condition),\n    FOREIGN KEY (Attr1, Attr2, ...) references\n      TableName(Bttr1, Bttr2, ...) [ ON ... (default RESTRICT) ]\n);\n\nCREATE ASSERTION AssertionName\nCHECK (Condition);\n")),(0,i.kt)("h2",{id:"triggers-dbms-level-constraints"},"Triggers (DBMS Level Constraints)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TRIGGER TriggerName\nBEFORE|AFTER|INSTEAD OF Events(INSERT/UPDATE OF/DELETE ON TableName)\n[ referencing-variables ]\n[ FOR EACH ROW ]\nWHEN ( Condition )\n[ BEGIN ]\nAction\n[ END ];\n\nCREATE TRIGGER Cascade\nAfter DELETE ON S\nREFERENCING OLD ROW AS O\nFOR EACH ROW\nDELETE FROM R WHERE A = O.B (R.A = S.B)\n\nCREATE TRIGGER Cascade\nAfter DELETE ON S\nREFERENCING OLD TABLE AS OT\nDELETE FROM R WHERE A IN (SELECT B FROM BT)\n")),(0,i.kt)("h2",{id:"views"},"Views"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"logical layer: hiding data from users"),(0,i.kt)("li",{parentName:"ul"},"modularity and reuse of query")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"VIEW ViewName = VIEWQUERY (R1, R2, ..., Rn)\n\nCREATE VIEW ViewName (T1, T2, ..., Tn) AS\n< Query >\n")),(0,i.kt)("h3",{id:"modifications-on-views"},"Modifications on Views"),(0,i.kt)("p",null,"owing to views are logical layer, it's senseless to modify data on views"),(0,i.kt)("h4",{id:"implements-modification-with-triggers"},"Implements Modification with Triggers"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TRIGGER TriggerName\nINSTEAD OF DELETE/UPDATE OF/INSERT ON ViewName\n[ referencing-variables ]\n[ FOR EACH ROW ]\nWHEN ( Condition )\n[ BEGIN ]\nAction\n[ END ];\n")),(0,i.kt)("h4",{id:"sql-standard---updatable-views"},"SQL Standard - Updatable Views"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"SELECT (no DISTINCT) on single table T"),(0,i.kt)("li",{parentName:"ul"},"no GROUP BY/HAVING or Aggregation"),(0,i.kt)("li",{parentName:"ul"},"attributes can't be NULL/default values"),(0,i.kt)("li",{parentName:"ul"},"sub-queries cant' refer to table T")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE VIEW\n...\nWITH CHECK OPTION;\n")),(0,i.kt)("h2",{id:"mongodb-basic-notes"},"MongoDB Basic Notes"),(0,i.kt)("h3",{id:"mongodb-set-up"},"MongoDB Set Up"),(0,i.kt)("h4",{id:"mongodb-installation"},"MongoDB Installation"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927\necho "deb http://repo.mongodb.org/apt/ubuntu trusty/mongodb-org/3.2 multiverse"\n\\ | sudo tee /etc/apt/sources.list.d/mongodb-org-3.2.list\nsudo apt-get update\nsudo apt-get install -y mongodb-org mongodb-org-server\n\\ mongodb-org-shell mongodb-org-mongos mongodb-org-tools\n')),(0,i.kt)("h4",{id:"mongodb-not-upgrade"},"MongoDB Not Upgrade"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'echo "mongodb-org hold" | sudo dpkg --set-selections\necho "mongodb-org-server hold" | sudo dpkg --set-selections\necho "mongodb-org-shell hold" | sudo dpkg --set-selections\necho "mongodb-org-mongos hold" | sudo dpkg --set-selections\necho "mongodb-org-tools hold" | sudo dpkg --set-selections\n')),(0,i.kt)("h4",{id:"mongodb-control"},"MongoDB Control"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo service mongod start\nsudo service mongod stop\nsudo service mongod restart\n")),(0,i.kt)("h4",{id:"mongodb-uninstall"},"MongoDB Uninstall"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo service mongod stop\nsudo apt-get purge mongodb-org*\nsudo rm -r /var/log/mongodb\nsudo rm -r /var/lib/mongodb\n")),(0,i.kt)("h3",{id:"shell-instruction"},"Shell Instruction"),(0,i.kt)("h4",{id:"create-and-drop"},"create and drop"),(0,i.kt)("h5",{id:"create"},"create"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"use test\nshow dbs\n")),(0,i.kt)("h5",{id:"drop"},"drop"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"use dbToDrop\ndb.dropDatabase()\n")),(0,i.kt)("h4",{id:"query"},"query"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"db.collection.find().pretty()\n")),(0,i.kt)("h4",{id:"insert"},"insert"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"db.collection.insert();\n")),(0,i.kt)("h4",{id:"information"},"information"),(0,i.kt)("h5",{id:"database"},"database"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"db.getName()\ndb.stats()\ndb.version()\ndb.getMongo()\n")),(0,i.kt)("h5",{id:"collection"},"collection"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"db.getCollectionNames()\ndb.printCollectionStats()\n")))}c.isMDXComponent=!0}}]);