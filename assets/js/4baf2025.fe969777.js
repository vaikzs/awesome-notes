"use strict";(self.webpackChunkawesome_notes=self.webpackChunkawesome_notes||[]).push([[6806],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return d}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(t),d=r,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||i;return t?a.createElement(h,l(l({ref:n},p),{},{components:t})):a.createElement(h,l({ref:n},p))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=m;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var c=2;c<i;c++)l[c]=t[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8913:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return u}});var a=t(7462),r=t(3366),i=(t(7294),t(3905)),l=["components"],o={author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Programming","DevOps","Design Pattern"]},s="Design Patterns Basic Notes",c={unversionedId:"programming/devops/designPatternsBasicNotes",id:"programming/devops/designPatternsBasicNotes",title:"Design Patterns Basic Notes",description:"Basic Patterns",source:"@site/notes/programming/devops/designPatternsBasicNotes.md",sourceDirName:"programming/devops",slug:"/programming/devops/designPatternsBasicNotes",permalink:"/awesome-notes/programming/devops/designPatternsBasicNotes",editUrl:"https://github.com/sabertazimi/awesome-notes/edit/main/notes/programming/devops/designPatternsBasicNotes.md",tags:[{label:"Programming",permalink:"/awesome-notes/tags/programming"},{label:"DevOps",permalink:"/awesome-notes/tags/dev-ops"},{label:"Design Pattern",permalink:"/awesome-notes/tags/design-pattern"}],version:"current",lastUpdatedBy:"sabertazimi",lastUpdatedAt:1650660188,formattedLastUpdatedAt:"4/22/2022",frontMatter:{author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Programming","DevOps","Design Pattern"]},sidebar:"sidebar",previous:{title:"Clean Code Basic Notes",permalink:"/awesome-notes/programming/devops/cleanCodeBasicNotes"},next:{title:"Software Testing Basic Notes",permalink:"/awesome-notes/programming/devops/softwareTestingBasicNotes"}},p={},u=[{value:"Basic Patterns",id:"basic-patterns",level:2},{value:"SOLID Principles",id:"solid-principles",level:3},{value:"Single Responsibility Principle",id:"single-responsibility-principle",level:4},{value:"Open-Closed Principle",id:"open-closed-principle",level:4},{value:"Liskov Substitution Principle",id:"liskov-substitution-principle",level:4},{value:"Interface Segregation Principle",id:"interface-segregation-principle",level:4},{value:"Dependency Inversion Principle",id:"dependency-inversion-principle",level:4},{value:"Least Knowledge Principle",id:"least-knowledge-principle",level:3},{value:"Common Design Patterns",id:"common-design-patterns",level:2},{value:"Patterns Classification",id:"patterns-classification",level:3},{value:"Creation Patterns",id:"creation-patterns",level:4},{value:"Structural Patterns",id:"structural-patterns",level:4},{value:"Behavioral Patterns",id:"behavioral-patterns",level:4},{value:"Factory Method Pattern",id:"factory-method-pattern",level:3},{value:"Static Factory Method Pattern",id:"static-factory-method-pattern",level:4},{value:"Dynamic Factory Method Pattern",id:"dynamic-factory-method-pattern",level:4},{value:"Asynchronous Factory Method Pattern",id:"asynchronous-factory-method-pattern",level:4},{value:"Abstract Factory Pattern",id:"abstract-factory-pattern",level:3},{value:"Builder Pattern",id:"builder-pattern",level:3},{value:"Prototype Pattern",id:"prototype-pattern",level:3},{value:"Singleton Pattern",id:"singleton-pattern",level:3},{value:"Class Singleton Pattern",id:"class-singleton-pattern",level:4},{value:"Closure Singleton Pattern",id:"closure-singleton-pattern",level:4},{value:"Adapter Pattern",id:"adapter-pattern",level:3},{value:"Bridge Pattern",id:"bridge-pattern",level:3},{value:"Composite Pattern",id:"composite-pattern",level:3},{value:"Composite Pattern Implementation",id:"composite-pattern-implementation",level:4},{value:"Decorator Pattern",id:"decorator-pattern",level:3},{value:"Facade Pattern",id:"facade-pattern",level:3},{value:"Flyweight Pattern",id:"flyweight-pattern",level:3},{value:"Flyweight Factory Pattern",id:"flyweight-factory-pattern",level:4},{value:"Flyweight Pool Pattern",id:"flyweight-pool-pattern",level:4},{value:"Proxy Pattern",id:"proxy-pattern",level:3},{value:"Chain of Responsibility Pattern",id:"chain-of-responsibility-pattern",level:3},{value:"Command Pattern",id:"command-pattern",level:3},{value:"Iterator Pattern",id:"iterator-pattern",level:3},{value:"Mediator Pattern",id:"mediator-pattern",level:3},{value:"Observer Pattern",id:"observer-pattern",level:3},{value:"Pub-Sub Pattern",id:"pub-sub-pattern",level:3},{value:"Pub-Sub Pattern Implementation",id:"pub-sub-pattern-implementation",level:4},{value:"Pub-Sub Pattern Usage",id:"pub-sub-pattern-usage",level:4},{value:"State Pattern",id:"state-pattern",level:3},{value:"Strategy Pattern",id:"strategy-pattern",level:3},{value:"Template Method Pattern",id:"template-method-pattern",level:3},{value:"Visitor Pattern",id:"visitor-pattern",level:3},{value:"IoC and DI Pattern",id:"ioc-and-di-pattern",level:3},{value:"Inversion of Control",id:"inversion-of-control",level:4},{value:"Depends on Abstraction",id:"depends-on-abstraction",level:4},{value:"Injection Container",id:"injection-container",level:4},{value:"Mixin Pattern",id:"mixin-pattern",level:3},{value:"Prototype Mixin Pattern",id:"prototype-mixin-pattern",level:4},{value:"Class Mixin Pattern",id:"class-mixin-pattern",level:4},{value:"Programming Paradigms",id:"programming-paradigms",level:2},{value:"Taxonomy of Paradigms",id:"taxonomy-of-paradigms",level:3},{value:"Observable Nondeterminism",id:"observable-nondeterminism",level:4},{value:"Named State",id:"named-state",level:4},{value:"Functional Programming",id:"functional-programming",level:3},{value:"Framework Paradigms",id:"framework-paradigms",level:2},{value:"Third-party Libraries Usage",id:"third-party-libraries-usage",level:3},{value:"Framework Paradigms Comparison",id:"framework-paradigms-comparison",level:3},{value:"MVC Pattern",id:"mvc-pattern",level:3},{value:"Controller",id:"controller",level:4},{value:"MVVM Pattern",id:"mvvm-pattern",level:3},{value:"AOP Pattern",id:"aop-pattern",level:3},{value:"jQuery Pattern",id:"jquery-pattern",level:3},{value:"Framework Paradigms Reference",id:"framework-paradigms-reference",level:3},{value:"Domain Driven Design",id:"domain-driven-design",level:2},{value:"Interface Layer",id:"interface-layer",level:3},{value:"Application Layer",id:"application-layer",level:3},{value:"Domain Layer",id:"domain-layer",level:3},{value:"Infrastructure Layer",id:"infrastructure-layer",level:3},{value:"Domain Driven Design Reference",id:"domain-driven-design-reference",level:3},{value:"Scalability Design",id:"scalability-design",level:2},{value:"\u9ad8\u5e76\u53d1\u7cfb\u7edf\u8bbe\u8ba1",id:"\u9ad8\u5e76\u53d1\u7cfb\u7edf\u8bbe\u8ba1",level:2},{value:"Concurrent Code Layer",id:"concurrent-code-layer",level:3},{value:"Concurrent DataBase Layer",id:"concurrent-database-layer",level:3},{value:"Concurrent Architecture Layer",id:"concurrent-architecture-layer",level:3},{value:"\u9ad8\u53ef\u7528\u7cfb\u7edf\u8bbe\u8ba1",id:"\u9ad8\u53ef\u7528\u7cfb\u7edf\u8bbe\u8ba1",level:2},{value:"Resource Isolation",id:"resource-isolation",level:3},{value:"Load Balance Design",id:"load-balance-design",level:3},{value:"Idempotence Design",id:"idempotence-design",level:3},{value:"Write Idempotence Design",id:"write-idempotence-design",level:4},{value:"CAP Theory",id:"cap-theory",level:3},{value:"\u670d\u52a1\u7194\u65ad",id:"\u670d\u52a1\u7194\u65ad",level:3},{value:"\u670d\u52a1\u9650\u6d41",id:"\u670d\u52a1\u9650\u6d41",level:3},{value:"\u670d\u52a1\u9650\u6d41\u7b97\u6cd5",id:"\u670d\u52a1\u9650\u6d41\u7b97\u6cd5",level:4},{value:"\u670d\u52a1\u9650\u6d41\u7b56\u7565",id:"\u670d\u52a1\u9650\u6d41\u7b56\u7565",level:4},{value:"\u670d\u52a1\u9650\u6d41\u4f4d\u7f6e",id:"\u670d\u52a1\u9650\u6d41\u4f4d\u7f6e",level:4},{value:"\u670d\u52a1\u964d\u7ea7",id:"\u670d\u52a1\u964d\u7ea7",level:3},{value:"Reference",id:"reference",level:2}],m={toc:u};function d(e){var n=e.components,o=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},m,o,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"design-patterns-basic-notes"},"Design Patterns Basic Notes"),(0,i.kt)("h2",{id:"basic-patterns"},"Basic Patterns"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Design Patterns")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Software design is the art of managing dependencies and abstractions."))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Minimizing dependencies."),(0,i.kt)("li",{parentName:"ul"},"Introduce fitting abstractions.")),(0,i.kt)("h3",{id:"solid-principles"},"SOLID Principles"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Single Responsibility Principle: \u5355\u4e00\u529f\u80fd\u539f\u5219."),(0,i.kt)("li",{parentName:"ul"},"Open-closed Principle: \u5f00\u95ed\u539f\u5219."),(0,i.kt)("li",{parentName:"ul"},"Liskov Substitution Principle: \u91cc\u6c0f\u66ff\u6362\u539f\u5219."),(0,i.kt)("li",{parentName:"ul"},"Interface Segregation Principle: \u63a5\u53e3\u9694\u79bb\u539f\u5219."),(0,i.kt)("li",{parentName:"ul"},"Dependency Inversion Principle: \u4f9d\u8d56\u53cd\u8f6c\u539f\u5219.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"SOLID Principles")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"\u5355\u4e00\u804c\u8d23\u662f\u6240\u6709\u8bbe\u8ba1\u539f\u5219\u7684\u57fa\u7840."),(0,i.kt)("li",{parentName:"ul"},"\u5f00\u95ed\u539f\u5219\u662f\u8bbe\u8ba1\u7684\u7ec8\u6781\u76ee\u6807."),(0,i.kt)("li",{parentName:"ul"},"\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u5f3a\u8c03\u7684\u662f\u5b50\u7c7b\u66ff\u6362\u7236\u7c7b\u540e\u7a0b\u5e8f\u8fd0\u884c\u65f6\u7684\u6b63\u786e\u6027, \u5b83\u7528\u6765\u5e2e\u52a9\u5b9e\u73b0\u5f00\u95ed\u539f\u5219."),(0,i.kt)("li",{parentName:"ul"},"\u63a5\u53e3\u9694\u79bb\u539f\u5219\u7528\u6765\u5e2e\u52a9\u5b9e\u73b0\u91cc\u6c0f\u66ff\u6362\u539f\u5219, \u540c\u65f6\u5b83\u4e5f\u4f53\u73b0\u4e86\u5355\u4e00\u804c\u8d23."),(0,i.kt)("li",{parentName:"ul"},"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u662f\u8fc7\u7a0b\u5f0f\u8bbe\u8ba1\u4e0e\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u7684\u5206\u6c34\u5cad, \u540c\u65f6\u5b83\u4e5f\u88ab\u7528\u6765\u6307\u5bfc\u63a5\u53e3\u9694\u79bb\u539f\u5219.")))),(0,i.kt)("h4",{id:"single-responsibility-principle"},"Single Responsibility Principle"),(0,i.kt)("p",null,"Too much functionality is in one class and you modify a piece of it,\nit can be difficult to understand how that will affect other dependent modules:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Singleton pattern."),(0,i.kt)("li",{parentName:"ul"},"Decorator pattern."),(0,i.kt)("li",{parentName:"ul"},"Proxy pattern."),(0,i.kt)("li",{parentName:"ul"},"Iterator pattern."),(0,i.kt)("li",{parentName:"ul"},"Visitor pattern.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// BAD\nclass Animal {\n  constructor(name) {\n    super(name);\n  }\n\n  getAnimalName() {\n    return this.name;\n  }\n\n  saveAnimal(animal) {}\n}\n\n// GOOD\nclass Animal {\n  constructor(name) {\n    super(name);\n  }\n\n  getAnimalName() {\n    return this.name;\n  }\n}\n\nclass AnimalDB {\n  getAnimal(animal) {}\n  saveAnimal(animal) {}\n}\n")),(0,i.kt)("h4",{id:"open-closed-principle"},"Open-Closed Principle"),(0,i.kt)("p",null,"Allow users to add new functionalities without changing existing code,\nopen for extension, close for modification:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Polymorphism (\u591a\u6001\u6027)."),(0,i.kt)("li",{parentName:"ul"},"Adapter pattern."),(0,i.kt)("li",{parentName:"ul"},"Decorator pattern."),(0,i.kt)("li",{parentName:"ul"},"Proxy pattern."),(0,i.kt)("li",{parentName:"ul"},"Chain of responsibility pattern."),(0,i.kt)("li",{parentName:"ul"},"Iterator pattern."),(0,i.kt)("li",{parentName:"ul"},"Pub-Sub pattern."),(0,i.kt)("li",{parentName:"ul"},"State pattern."),(0,i.kt)("li",{parentName:"ul"},"Strategy pattern."),(0,i.kt)("li",{parentName:"ul"},"Template Method Pattern.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Coder {\n  constructor(fullName, language, hobby, education, workplace, position) {\n    this.fullName = fullName;\n    this.language = language;\n    this.hobby = hobby;\n    this.education = education;\n    this.workplace = workplace;\n    this.position = position;\n  }\n}\n\n// BAD: filter by any other new property have to change CodeFilter's code.\nclass CoderFilter {\n  filterByName(coders, fullName) {\n    return coders.filter(coder => coder.fullName === fullName);\n  }\n\n  filterByLang(coders, language) {\n    return coders.filter(coder => coder.language === language);\n  }\n\n  filterByHobby(coders, hobby) {\n    return coders.filter(coder => coder.hobby === hobby);\n  }\n}\n\n// GOOD\nclass CoderFilter {\n  filterByProp = (array, propName, value) =>\n    array.filter(element => element[propName] === value);\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"const animals: Array<Animal> = [\n    new Animal('lion'),\n    new Animal('mouse')\n];\n\nfunction AnimalSound(a: Array<Animal>) {\n    for(int i = 0; i <= a.length; i++) {\n        if(a[i].name == 'lion')\n            log('roar');\n        if(a[i].name == 'mouse')\n            log('squeak');\n    }\n}\nAnimalSound(animals);\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"class Animal {\n        makeSound();\n        //...\n}\nclass Lion extends Animal {\n    makeSound() {\n        return 'roar';\n    }\n}\nclass Squirrel extends Animal {\n    makeSound() {\n        return 'squeak';\n    }\n}\nclass Snake extends Animal {\n    makeSound() {\n        return 'hiss';\n    }\n}\n//...\nfunction AnimalSound(a: Array<Animal>) {\n    for(int i = 0; i <= a.length; i++) {\n        log(a[i].makeSound());\n    }\n}\nAnimalSound(animals);\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"class Discount {\n    giveDiscount() {\n        if(this.customer == 'fav') {\n            return this.price * 0.2;\n        }\n        if(this.customer == 'vip') {\n            return this.price * 0.4;\n        }\n    }\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"class VIPDiscount: Discount {\n    getDiscount() {\n        return super.getDiscount() * 2;\n    }\n}\n\nclass SuperVIPDiscount: VIPDiscount {\n    getDiscount() {\n        return super.getDiscount() * 2;\n    }\n}\n")),(0,i.kt)("h4",{id:"liskov-substitution-principle"},"Liskov Substitution Principle"),(0,i.kt)("p",null,"Objects of ParentType can be replaced with objects of SubType without altering.\nAltering shows that SubType should not be subtype of ParentType\n(break Open Closed Principle),\nyou should re-design ParentType and SubType."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"function AnimalLegCount(a: Array<Animal>) {\n    for(int i = 0; i <= a.length; i++) {\n        if(typeof a[i] == Lion)\n            log(LionLegCount(a[i]));\n        if(typeof a[i] == Mouse)\n            log(MouseLegCount(a[i]));\n        if(typeof a[i] == Snake)\n            log(SnakeLegCount(a[i]));\n    }\n}\nAnimalLegCount(animals);\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"class Animal {\n    //...\n    LegCount();\n}\n\n//...\nclass Lion extends Animal{\n    //...\n    LegCount() {\n        //...\n    }\n}\n//...\n\nfunction AnimalLegCount(a: Array<Animal>) {\n    for(let i = 0; i <= a.length; i++) {\n        a[i].LegCount();\n    }\n}\nAnimalLegCount(animals);\n")),(0,i.kt)("h4",{id:"interface-segregation-principle"},"Interface Segregation Principle"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Make ",(0,i.kt)("strong",{parentName:"li"},"fine grained")," interfaces that are client specific."),(0,i.kt)("li",{parentName:"ul"},"Clients should not be forced to depend upon interfaces that they do not use.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"// BAD.\ninterface IShape {\n    drawCircle();\n    drawSquare();\n    drawRectangle();\n}\n\nclass Circle implements IShape {\n    drawCircle(){\n        //...\n    }\n    drawSquare(){\n        //...\n    }\n    drawRectangle(){\n        //...\n    }\n}\nclass Square implements IShape {\n    drawCircle(){\n        //...\n    }\n    drawSquare(){\n        //...\n    }\n    drawRectangle(){\n        //...\n    }\n}\nclass Rectangle implements IShape {\n    drawCircle(){\n        //...\n    }\n    drawSquare(){\n        //...\n    }\n    drawRectangle(){\n        //...\n    }\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"// GOOD.\ninterface IShape {\n    draw();\n}\ninterface ICircle {\n    drawCircle();\n}\ninterface ISquare {\n    drawSquare();\n}\ninterface IRectangle {\n    drawRectangle();\n}\ninterface ITriangle {\n    drawTriangle();\n}\nclass Circle implements ICircle {\n    drawCircle() {\n        //...\n    }\n}\nclass Square implements ISquare {\n    drawSquare() {\n        //...\n    }\n}\nclass Rectangle implements IRectangle {\n    drawRectangle() {\n        //...\n    }\n}\nclass Triangle implements ITriangle {\n    drawTriangle() {\n        //...\n    }\n}\nclass CustomShape implements IShape {\n   draw(){\n      //...\n   }\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"// GOOD.\nclass Circle implements IShape {\n    draw(){\n        //...\n    }\n}\n\nclass Triangle implements IShape {\n    draw(){\n        //...\n    }\n}\n\nclass Square implements IShape {\n    draw(){\n        //...\n    }\n}\n\nclass Rectangle implements IShape {\n    draw(){\n        //...\n    }\n}\n")),(0,i.kt)("h4",{id:"dependency-inversion-principle"},"Dependency Inversion Principle"),(0,i.kt)("p",null,"Dependency should be on ",(0,i.kt)("strong",{parentName:"p"},"abstractions")," not concretions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"High-level modules should not depend upon low-level modules.\nBoth should depend upon ",(0,i.kt)("strong",{parentName:"li"},"abstractions")),(0,i.kt)("li",{parentName:"ul"},"Abstractions should not depend on details.\nDetails should depend upon abstractions"),(0,i.kt)("li",{parentName:"ul"},"Pros:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Loosely coupled modules."),(0,i.kt)("li",{parentName:"ul"},"Better reusability."),(0,i.kt)("li",{parentName:"ul"},"Better testability.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"class XMLHttpService extends XMLHttpRequestService {}\nclass Http {\n    constructor(private xmlHttpService: XMLHttpService) { }\n    get(url: string , options: any) {\n        this.xmlHttpService.request(url,'GET');\n    }\n    post() {\n        this.xmlHttpService.request(url,'POST');\n    }\n    //...\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"interface Connection {\n    request(url: string, opts:any);\n}\n\n// Abstraction not upon on details (but upon on abstractions)\nclass Http {\n    constructor(private httpConnection: Connection) { }\n    get(url: string , options: any) {\n        this.httpConnection.request(url,'GET');\n    }\n    post() {\n        this.httpConnection.request(url,'POST');\n    }\n    //...\n}\n\nclass XMLHttpService implements Connection {\n    const xhr = new XMLHttpRequest();\n    //...\n    request(url: string, opts:any) {\n        xhr.open();\n        xhr.send();\n    }\n}\nclass NodeHttpService implements Connection {\n    request(url: string, opts:any) {\n        //...\n    }\n}\nclass MockHttpService implements Connection {\n    request(url: string, opts:any) {\n        //...\n    }\n}\n")),(0,i.kt)("h3",{id:"least-knowledge-principle"},"Least Knowledge Principle"),(0,i.kt)("p",null,"\u6700\u5c11\u77e5\u8bc6\u539f\u5219 (Law of Demeter):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u8f6f\u4ef6\u5b9e\u4f53 (\u53d8\u91cf/\u5bf9\u8c61/\u7c7b/\u51fd\u6570/\u6a21\u5757/\u7cfb\u7edf) \u5e94\u5f53\u5c3d\u53ef\u80fd\u5c11\u5730\u4e0e\u5176\u4ed6\u5b9e\u4f53\u53d1\u751f\u76f8\u4e92\u4f5c\u7528."),(0,i.kt)("li",{parentName:"ul"},"\u82e5\u4e24\u4e2a\u5bf9\u8c61\u65e0\u9700\u76f4\u63a5\u901a\u4fe1, \u5219\u4e24\u4e2a\u5bf9\u8c61\u4e0d\u5e94\u76f4\u63a5\u76f8\u4e92\u8054\u7cfb, \u5f15\u5165\u4e00\u4e2a\u7b2c\u4e09\u8005\u5bf9\u8c61\u627f\u62c5\u901a\u4fe1\u4f5c\u7528."),(0,i.kt)("li",{parentName:"ul"},"Facade pattern."),(0,i.kt)("li",{parentName:"ul"},"Mediator pattern.")),(0,i.kt)("h2",{id:"common-design-patterns"},"Common Design Patterns"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Common Design Patterns",src:t(7706).Z,width:"529",height:"531"})),(0,i.kt)("h3",{id:"patterns-classification"},"Patterns Classification"),(0,i.kt)("h4",{id:"creation-patterns"},"Creation Patterns"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Factory Method (\u5de5\u5382\u65b9\u6cd5): \u901a\u8fc7\u5c06\u6570\u636e\u548c\u4e8b\u4ef6\u63a5\u53e3\u5316\u6765\u6784\u5efa\u82e5\u5e72\u4e2a\u5b50\u7c7b."),(0,i.kt)("li",{parentName:"ul"},"Abstract Factory (\u62bd\u8c61\u5de5\u5382): \u5efa\u7acb\u82e5\u5e72\u65cf\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b, \u8fd9\u4e2a\u5b9e\u4f8b\u4e0d\u9700\u8981\u5177\u4f53\u7c7b\u7684\u7ec6\u8282\u4fe1\u606f (\u62bd\u8c61\u7c7b)."),(0,i.kt)("li",{parentName:"ul"},"Builder (\u5efa\u9020\u8005): \u5c06\u5bf9\u8c61\u7684\u6784\u5efa\u65b9\u6cd5\u548c\u5176\u8868\u73b0\u5f62\u5f0f\u5206\u79bb\u5f00\u6765, \u603b\u662f\u6784\u5efa\u76f8\u540c\u7c7b\u578b\u7684\u5bf9\u8c61."),(0,i.kt)("li",{parentName:"ul"},"Prototype (\u539f\u578b): \u4e00\u4e2a\u5b8c\u5168\u521d\u59cb\u5316\u7684\u5b9e\u4f8b, \u7528\u4e8e\u62f7\u8d1d\u6216\u8005\u514b\u9686."),(0,i.kt)("li",{parentName:"ul"},"Singleton (\u5355\u4f8b): \u4e00\u4e2a\u7c7b\u53ea\u6709\u552f\u4e00\u7684\u4e00\u4e2a\u5b9e\u4f8b, \u8fd9\u4e2a\u5b9e\u4f8b\u5728\u6574\u4e2a\u7a0b\u5e8f\u4e2d\u6709\u4e00\u4e2a\u5168\u5c40\u7684\u8bbf\u95ee\u70b9.")),(0,i.kt)("h4",{id:"structural-patterns"},"Structural Patterns"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Adapter (\u9002\u914d\u5668\u6a21\u5f0f): \u5c06\u4e0d\u540c\u7c7b\u7684\u63a5\u53e3\u8fdb\u884c\u5339\u914d\u4e0e\u8c03\u6574, \u4f7f\u5f97\u5185\u90e8\u63a5\u53e3\u4e0d\u517c\u5bb9\u7684\u7c7b\u53ef\u4ee5\u534f\u540c\u5de5\u4f5c."),(0,i.kt)("li",{parentName:"ul"},"Bridge (\u6865\u63a5\u6a21\u5f0f): \u5c06\u5bf9\u8c61\u7684\u63a5\u53e3\u4ece\u5176\u5b9e\u73b0\u4e2d\u5206\u79bb\u51fa\u6765, \u8fd9\u6837\u5bf9\u8c61\u7684\u5b9e\u73b0\u548c\u63a5\u53e3\u53ef\u4ee5\u72ec\u7acb\u7684\u53d8\u5316."),(0,i.kt)("li",{parentName:"ul"},"Composite (\u7ec4\u5408\u6a21\u5f0f):\n\u901a\u8fc7\u5c06\u7b80\u5355\u53ef\u7ec4\u5408\u7684\u5bf9\u8c61\u7ec4\u5408\u8d77\u6765, \u6784\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5bf9\u8c61,\n\u8fd9\u4e2a\u5bf9\u8c61\u7684\u80fd\u529b\u5c06\u4f1a\u8d85\u8fc7\u8fd9\u4e9b\u7ec4\u6210\u90e8\u5206\u7684\u80fd\u529b\u7684\u603b\u548c, \u4ea7\u751f\u65b0\u7684\u80fd\u529b."),(0,i.kt)("li",{parentName:"ul"},"Decorator (\u88c5\u9970\u5668): \u52a8\u6001\u7ed9\u5bf9\u8c61\u589e\u52a0\u4e00\u4e9b\u53ef\u66ff\u6362\u7684\u5904\u7406\u6d41\u7a0b."),(0,i.kt)("li",{parentName:"ul"},"Facade (\u5916\u89c2\u6a21\u5f0f): \u4e00\u4e2a\u7c7b\u9690\u85cf\u4e86\u5185\u90e8\u5b50\u7cfb\u7edf\u7684\u590d\u6742\u5ea6, \u53ea\u66b4\u9732\u51fa\u4e00\u4e9b\u7b80\u5355\u7684\u63a5\u53e3."),(0,i.kt)("li",{parentName:"ul"},"Flyweight (\u4eab\u5143\u6a21\u5f0f) \u4e00\u4e2a\u7ec6\u7c92\u5ea6\u5bf9\u8c61, \u7528\u4e8e\u5c06\u5305\u542b\u5728\u5176\u5b83\u5730\u65b9\u7684\u4fe1\u606f \u5728\u4e0d\u540c\u5bf9\u8c61\u4e4b\u95f4\u9ad8\u6548\u5730\u5171\u4eab."),(0,i.kt)("li",{parentName:"ul"},"Proxy (\u4ee3\u7406\u6a21\u5f0f): \u4e00\u4e2a\u5145\u5f53\u5360\u4f4d\u7b26\u7684\u5bf9\u8c61\u7528\u6765\u4ee3\u8868\u4e00\u4e2a\u771f\u5b9e\u7684\u5bf9\u8c61.")),(0,i.kt)("h4",{id:"behavioral-patterns"},"Behavioral Patterns"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Chain of Responsibility (\u54cd\u5e94\u94fe): \u4e00\u79cd\u5c06\u8bf7\u6c42\u5728\u4e00\u4e32\u5bf9\u8c61\u4e2d\u4f20\u9012\u7684\u65b9\u5f0f, \u5bfb\u627e\u53ef\u4ee5\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5bf9\u8c61."),(0,i.kt)("li",{parentName:"ul"},"Command (\u547d\u4ee4): \u5c01\u88c5\u547d\u4ee4\u8bf7\u6c42\u4e3a\u4e00\u4e2a\u5bf9\u8c61, \u4ece\u800c\u4f7f\u8bb0\u5f55\u65e5\u5fd7, \u961f\u5217\u7f13\u5b58\u8bf7\u6c42, \u672a\u5904\u7406\u8bf7\u6c42\u8fdb\u884c\u9519\u8bef\u5904\u7406 \u8fd9\u4e9b\u529f\u80fd\u79f0\u4e3a\u53ef\u80fd."),(0,i.kt)("li",{parentName:"ul"},"Interpreter (\u89e3\u91ca\u5668): \u5c06\u8bed\u8a00\u5143\u7d20\u5305\u542b\u5728\u4e00\u4e2a\u5e94\u7528\u4e2d\u7684\u4e00\u79cd\u65b9\u5f0f, \u7528\u4e8e\u5339\u914d\u76ee\u6807\u8bed\u8a00\u7684\u8bed\u6cd5."),(0,i.kt)("li",{parentName:"ul"},"Iterator (\u8fed\u4ee3\u5668): \u5728\u4e0d\u9700\u8981\u76f4\u5230\u96c6\u5408\u5185\u90e8\u5de5\u4f5c\u539f\u7406\u7684\u60c5\u51b5\u4e0b, \u987a\u5e8f\u8bbf\u95ee\u4e00\u4e2a\u96c6\u5408\u91cc\u9762\u7684\u5143\u7d20."),(0,i.kt)("li",{parentName:"ul"},"Mediator (\u4e2d\u4ecb\u8005\u6a21\u5f0f): \u5728\u7c7b\u4e4b\u95f4\u5b9a\u4e49\u7b80\u5316\u7684\u901a\u4fe1\u65b9\u5f0f, \u7528\u4e8e\u907f\u514d\u7c7b\u4e4b\u95f4\u663e\u5f0f\u7684\u6301\u6709\u5f7c\u6b64\u7684\u5f15\u7528."),(0,i.kt)("li",{parentName:"ul"},"Observer (\u89c2\u5bdf\u8005\u6a21\u5f0f): \u7528\u4e8e\u5c06\u53d8\u5316\u901a\u77e5\u7ed9\u591a\u4e2a\u7c7b\u7684\u65b9\u5f0f, \u53ef\u4ee5\u4fdd\u8bc1\u7c7b\u4e4b\u95f4\u7684\u4e00\u81f4\u6027."),(0,i.kt)("li",{parentName:"ul"},"State (\u72b6\u6001): \u5f53\u5bf9\u8c61\u72b6\u6001\u6539\u53d8\u65f6, \u6539\u53d8\u5bf9\u8c61\u7684\u884c\u4e3a."),(0,i.kt)("li",{parentName:"ul"},"Strategy (\u7b56\u7565): \u5c06\u7b97\u6cd5\u5c01\u88c5\u5230\u7c7b\u4e2d, \u5c06\u9009\u62e9\u548c\u5b9e\u73b0\u5206\u79bb\u5f00\u6765."),(0,i.kt)("li",{parentName:"ul"},"Template Method (\u6a21\u677f\u65b9\u6cd5): \u5728\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u4e3a\u67d0\u4e2a\u7b97\u6cd5\u5efa\u7acb\u4e00\u5c42\u5916\u58f3, \u5c06\u7b97\u6cd5\u7684\u5177\u4f53\u6b65\u9aa4\u4ea4\u4ed8\u7ed9\u5b50\u7c7b\u53bb\u505a."),(0,i.kt)("li",{parentName:"ul"},"Visitor (\u8bbf\u95ee\u8005): \u4e3a\u7c7b\u589e\u52a0\u65b0\u7684\u64cd\u4f5c\u800c\u4e0d\u6539\u53d8\u7c7b\u672c\u8eab.")),(0,i.kt)("h3",{id:"factory-method-pattern"},"Factory Method Pattern"),(0,i.kt)("p",null,"Creating objects without specify exact object class:\nnot calling a constructor directly."),(0,i.kt)("h4",{id:"static-factory-method-pattern"},"Static Factory Method Pattern"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"CoordinateSystem = {\n  CARTESIAN: 0,\n  POLAR: 1,\n};\n\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static get factory() {\n    return new PointFactory();\n  }\n}\n\nclass PointFactory {\n  static newCartesianPoint(x, y) {\n    return new Point(x, y);\n  }\n\n  static newPolarPoint(rho, theta) {\n    return new Point(rho * Math.cos(theta), rho * Math.sin(theta));\n  }\n}\n\nconst point = PointFactory.newPolarPoint(5, Math.PI / 2);\nconst point2 = PointFactory.newCartesianPoint(5, 6);\n")),(0,i.kt)("h4",{id:"dynamic-factory-method-pattern"},"Dynamic Factory Method Pattern"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Vehicle {\n  constructor({\n    type = 'vehicle',\n    state = 'brand new',\n    color = 'white',\n    speed = 0,\n  } = {}) {\n    this.type = type;\n    this.state = state;\n    this.color = color;\n    this.speed = speed;\n  }\n\n  run(...args) {\n    if (args.length === 0) {\n      console.log(`${this.type} - run with: ${this.speed}km/s`);\n    } else if (toString.apply(args[0]) === '[object Number]') {\n      this.speed = args[0];\n    }\n  }\n\n  withColor(...args) {\n    if (args.length === 0) {\n      console.log(`The color of this ${this.type} product is : ${this.color}`);\n    } else if (toString.apply(args[0]) === '[object String]') {\n      this.color = args[0];\n    }\n  }\n\n  reform(funcName, newFunc) {\n    if (\n      typeof this[funcName] === 'function' ||\n      typeof this.prototype[funcName] === 'function'\n    ) {\n      delete this[funcName];\n      this.prototype[funcName] = newFunc;\n    }\n  }\n\n  addFeature(funcName, newFunc) {\n    if (typeof this[funcName] === 'undefined') {\n      this[funcName] = newFunc;\n      this.prototype[funcName] = newFunc;\n    }\n  }\n}\n\nclass Car extends Vehicle {\n  constructor({\n    type = 'car',\n    state = 'brand new',\n    color = 'silver',\n    speed = 10,\n    doors = 4,\n  } = {}) {\n    super({ type, state, color, speed });\n    this.doors = doors;\n  }\n}\n\nclass Truck extends Vehicle {\n  constructor({\n    type = 'truck',\n    state = 'used',\n    color = 'blue',\n    speed = 8,\n    wheelSize = 'large',\n  } = {}) {\n    super({ type, state, color, speed });\n    this.wheelSize = 'large';\n  }\n}\n\nclass VehicleFactory {\n  constructor() {\n    this.VehicleClass = Car;\n  }\n\n  createVehicle(options) {\n    switch (options.vehicleType) {\n      case 'car':\n        this.VehicleClass = Car;\n        break;\n      case 'truck':\n        this.VehicleClass = Truck;\n        break;\n      default:\n        break;\n    }\n\n    return new this.VehicleClass(options);\n  }\n}\n\nclass CarFactory extends VehicleFactory {\n  constructor() {\n    super();\n    this.VehicleClass = Car;\n  }\n}\n\nclass TruckFactory extends VehicleFactory {\n  constructor() {\n    super();\n    this.VehicleClass = Truck;\n  }\n}\n\nconst vehicleFactory = new VehicleFactory();\nconst car = vehicleFactory.createVehicle({\n  vehicleType: 'car',\n  color: 'yellow',\n  doors: 6,\n});\nconst movingTruck = vehicleFactory.createVehicle({\n  vehicleType: 'truck',\n  state: 'like new',\n  color: 'red',\n  wheelSize: 'small',\n});\n\nconst truckFactory = new TruckFactory();\nconst bigTruck = truckFactory.createVehicle({\n  state: 'bad.',\n  color: 'pink',\n  wheelSize: 'so big',\n});\n")),(0,i.kt)("h4",{id:"asynchronous-factory-method-pattern"},"Asynchronous Factory Method Pattern"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class DataContainer {\n  #data;\n  #active = false;\n\n  #init(data) {\n    this.#active = true;\n    this.#data = data;\n    return this;\n  }\n\n  #check() {\n    if (!this.#active) {\n      throw new TypeError('Not created by factory');\n    }\n  }\n\n  getData() {\n    this.#check();\n    return `DATA: ${this.#data}`;\n  }\n\n  static async create() {\n    const data = await Promise.resolve('downloaded');\n    return new this().#init(data);\n  }\n}\n\nDataContainer.create().then(dc =>\n  assert.equal(dc.getData(), 'DATA: downloaded')\n);\n")),(0,i.kt)("h3",{id:"abstract-factory-pattern"},"Abstract Factory Pattern"),(0,i.kt)("p",null,"Encapsulate ",(0,i.kt)("strong",{parentName:"p"},"a group of individual factories"),"\nthat have a common theme without\nspecifying their concrete classes."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Drink {\n  consume() {}\n}\n\nclass Tea extends Drink {\n  consume() {\n    console.log('This is Tea');\n  }\n}\n\nclass Coffee extends Drink {\n  consume() {\n    console.log(`This is Coffee`);\n  }\n}\n\nclass DrinkFactory {\n  prepare(amount) {}\n}\n\nclass TeaFactory extends DrinkFactory {\n  makeTea() {\n    console.log(`Tea Created`);\n    return new Tea();\n  }\n}\n\nclass CoffeeFactory extends DrinkFactory {\n  makeCoffee() {\n    console.log(`Coffee Created`);\n    return new Coffee();\n  }\n}\n\nconst teaDrinkFactory = new TeaFactory();\nconst tea = teaDrinkFactory.makeTea();\ntea.consume();\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class AbstractVehicleFactory {\n  constructor() {\n    // Vehicle types\n    this.types = {};\n  }\n\n  getVehicle(type, customizations) {\n    const Vehicle = this.types[type];\n\n    return Vehicle ? new Vehicle(customizations) : null;\n  }\n\n  registerVehicle(type, Vehicle) {\n    const proto = Vehicle.prototype;\n\n    // Only register classes that fulfill the vehicle contract\n    if (proto.drive && proto.breakDown) {\n      this.types[type] = Vehicle;\n    }\n\n    return this;\n  }\n}\n\n// Usage:\nconst abstractVehicleFactory = new AbstractVehicleFactory()\n  .registerVehicle('car', Car)\n  .registerVehicle('truck', Truck);\n\n// Instantiate a new car based on the abstract vehicle type\nconst car = abstractVehicleFactory.getVehicle('car', {\n  color: 'lime green',\n  state: 'like new',\n});\n\n// Instantiate a new truck in a similar manner\nconst truck = abstractVehicleFactory.getVehicle('truck', {\n  wheelSize: 'medium',\n  color: 'neon yellow',\n});\n")),(0,i.kt)("h3",{id:"builder-pattern"},"Builder Pattern"),(0,i.kt)("p",null,"Flexible object creation with chain style calls."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Person {\n  constructor() {\n    this.streetAddress = '';\n    this.postcode = '';\n    this.city = '';\n    this.companyName = '';\n    this.position = '';\n    this.annualIncome = 0;\n  }\n\n  toString() {\n    return (\n      `Person lives at ${this.streetAddress}, ${this.city}, ${this.postcode}\\n` +\n      `and works at ${this.companyName} as a ${this.position} earning ${this.annualIncome}`\n    );\n  }\n}\n\nclass PersonBuilder {\n  constructor(person = new Person()) {\n    this.person = person;\n  }\n\n  get lives() {\n    return new PersonAddressBuilder(this.person);\n  }\n\n  get works() {\n    return new PersonJobBuilder(this.person);\n  }\n\n  build() {\n    return this.person;\n  }\n}\n\nclass PersonJobBuilder extends PersonBuilder {\n  constructor(person) {\n    super(person);\n    console.log('New');\n  }\n\n  at(companyName) {\n    this.person.companyName = companyName;\n    return this;\n  }\n\n  asA(position) {\n    this.person.position = position;\n    return this;\n  }\n\n  earning(annualIncome) {\n    this.person.annualIncome = annualIncome;\n    return this;\n  }\n}\n\nclass PersonAddressBuilder extends PersonBuilder {\n  constructor(person) {\n    super(person);\n    console.log('New');\n  }\n\n  at(streetAddress) {\n    this.person.streetAddress = streetAddress;\n    return this;\n  }\n\n  withPostcode(postcode) {\n    this.person.postcode = postcode;\n    return this;\n  }\n\n  in(city) {\n    this.person.city = city;\n    return this;\n  }\n}\n\nconst personBuilder = new PersonBuilder();\nconst person = personBuilder.lives\n  .at('ABC Road')\n  .in('Multan')\n  .withPostcode('66000')\n  .works.at('Beijing')\n  .asA('Engineer')\n  .earning(10000)\n  .build();\n")),(0,i.kt)("h3",{id:"prototype-pattern"},"Prototype Pattern"),(0,i.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528\u539f\u578b\u6a21\u5f0f\u6765\u51cf\u5c11\u521b\u5efa\u65b0\u5bf9\u8c61\u7684\u6210\u672c:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Object.create()"),"."),(0,i.kt)("li",{parentName:"ul"},"Object shallow clone.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Car {\n  constructor(name, model) {\n    this.name = name;\n    this.model = model;\n  }\n\n  SetName(name) {\n    console.log(`${name}`);\n  }\n\n  clone() {\n    return new Car(this.name, this.model);\n  }\n}\n\nconst car = new Car();\ncar.SetName('Audi');\n\nconst car2 = car.clone();\ncar2.SetName('BMW');\n")),(0,i.kt)("h3",{id:"singleton-pattern"},"Singleton Pattern"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Singleton Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Redux/VueX global store."),(0,i.kt)("li",{parentName:"ul"},"Window \u5bf9\u8c61."),(0,i.kt)("li",{parentName:"ul"},"\u5168\u5c40\u914d\u7f6e."),(0,i.kt)("li",{parentName:"ul"},"\u5168\u5c40\u7f13\u5b58."),(0,i.kt)("li",{parentName:"ul"},"\u7ebf\u7a0b\u6c60."),(0,i.kt)("li",{parentName:"ul"},"\u5185\u5b58\u6c60.")))),(0,i.kt)("h4",{id:"class-singleton-pattern"},"Class Singleton Pattern"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Singleton {\n  constructor() {\n    const instance = this.constructor.instance;\n    if (instance) return instance;\n    this.constructor.instance = this;\n  }\n\n  say() {\n    console.log('Saying...');\n  }\n}\n")),(0,i.kt)("h4",{id:"closure-singleton-pattern"},"Closure Singleton Pattern"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const createLoginLayer = (function (creator) {\n  let singleton;\n\n  return function () {\n    if (!singleton) singleton = creator();\n    return singleton;\n  };\n})(loginCreator);\n")),(0,i.kt)("h3",{id:"adapter-pattern"},"Adapter Pattern"),(0,i.kt)("p",null,"\u9002\u914d\u5668\u901a\u8fc7\u5185\u90e8\u4f7f\u7528\u65b0\u63a5\u53e3\u89c4\u5b9a\u7684\u5c5e\u6027/\u65b9\u6cd5, \u521b\u5efa\u4e00\u4e2a\u5916\u89c2\u4e0e\u65e7\u63a5\u53e3\u4e00\u81f4\u7684\u65b9\u6cd5\n(\u517c\u5bb9\u65e7\u4ee3\u7801):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"old.method()"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"adapter.method()"),":\n\u5b9e\u73b0\u6b64 method \u65f6, \u4f7f\u7528\u4e86\u65b0\u63a5\u53e3\u89c4\u5b9a\u7684\u5c5e\u6027/\u65b9\u6cd5."),(0,i.kt)("li",{parentName:"ul"},"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Adapter Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"API adapter.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Calculator1 {\n  constructor() {\n    this.operations = function (value1, value2, operation) {\n      switch (operation) {\n        case 'add':\n          return value1 + value2;\n        case 'sub':\n          return value1 - value2;\n        default:\n          throw new Error('Unsupported operations!');\n      }\n    };\n  }\n}\n\nclass Calculator2 {\n  constructor() {\n    this.add = function (value1, value2) {\n      return value1 + value2;\n    };\n\n    this.sub = function (value1, value2) {\n      return value1 - value2;\n    };\n  }\n}\n\nclass CalcAdapter {\n  constructor() {\n    const cal2 = new Calculator2();\n\n    this.operations = function (value1, value2, operation) {\n      switch (operation) {\n        case 'add':\n          return cal2.add(value1, value2);\n        case 'sub':\n          return cal2.sub(value1, value2);\n        default:\n          throw new Error('Unsupported operations!');\n      }\n    };\n  }\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// old interface\nfunction Shipping() {\n  this.request = function (zipStart, zipEnd, weight) {\n    // ...\n    return '$49.75';\n  };\n}\n\n// new interface\nfunction AdvancedShipping() {\n  this.login = function (credentials) {\n    /* ... */\n  };\n  this.setStart = function (start) {\n    /* ... */\n  };\n  this.setDestination = function (destination) {\n    /* ... */\n  };\n  this.calculate = function (weight) {\n    return '$39.50';\n  };\n}\n\n// adapter interface\nfunction AdapterShipping(credentials) {\n  const shipping = new AdvancedShipping();\n\n  shipping.login(credentials);\n\n  return {\n    request(zipStart, zipEnd, weight) {\n      shipping.setStart(zipStart);\n      shipping.setDestination(zipEnd);\n      return shipping.calculate(weight);\n    },\n  };\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const shipping = new Shipping();\nconst adapterShipping = new AdapterShipping(credentials);\n\n// original shipping object and interface\nlet cost = shipping.request('78701', '10010', '2 lbs');\nlog.add(`Old cost: ${cost}`);\n// new shipping object with adapted interface\ncost = adapter.request('78701', '10010', '2 lbs');\n")),(0,i.kt)("h3",{id:"bridge-pattern"},"Bridge Pattern"),(0,i.kt)("p",null,"Split large class or set of closely related classes into two separate hierarchies:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5206\u79bb\u62bd\u8c61\u548c\u5b9e\u73b0 (Separate abstracts and implements)."),(0,i.kt)("li",{parentName:"ul"},"\u5206\u79bb\u5bf9\u8c61\u7684\u4e24\u79cd\u4e0d\u540c\u5c5e\u6027. ",(0,i.kt)("inlineCode",{parentName:"li"},"e.g")," \u4ece 2 \u4e2a\u4e0d\u540c\u7ef4\u5ea6\u4e0a\u6269\u5c55\u5bf9\u8c61.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class VectorRenderer {\n  renderCircle(radius) {\n    console.log(`Drawing a circle of radius ${radius}`);\n  }\n}\n\nclass RasterRenderer {\n  renderCircle(radius) {\n    console.log(`Drawing pixels for circle of radius ${radius}`);\n  }\n}\n\nclass Shape {\n  constructor(renderer) {\n    this.renderer = renderer;\n  }\n}\n\nclass Circle extends Shape {\n  constructor(renderer, radius) {\n    super(renderer);\n    this.radius = radius;\n  }\n\n  draw() {\n    this.renderer.renderCircle(this.radius);\n  }\n\n  resize(factor) {\n    this.radius *= factor;\n  }\n}\n\nconst raster = new RasterRenderer();\nconst vector = new VectorRenderer();\nconst circle = new Circle(vector, 5);\ncircle.draw();\ncircle.resize(2);\ncircle.draw();\n")),(0,i.kt)("h3",{id:"composite-pattern"},"Composite Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5c01\u88c5: \u7ec4\u5408\u6a21\u5f0f\u5c06\u5bf9\u8c61\u7ec4\u5408\u6210\u6811\u5f62\u7ed3\u6784, \u4ee5\u8868\u793a ",(0,i.kt)("inlineCode",{parentName:"li"},"\u90e8\u5206+\u6574\u4f53")," \u7684\u5c42\u6b21\u7ed3\u6784."),(0,i.kt)("li",{parentName:"ul"},"\u591a\u6001: \u7ec4\u5408\u6a21\u5f0f\u901a\u8fc7\u5bf9\u8c61\u7684\u591a\u6001\u6027\u8868\u73b0, \u4f7f\u5f97\u7528\u6237\u5bf9\u5355\u4e2a\u5bf9\u8c61\u548c\u7ec4\u5408\u5bf9\u8c61\u7684\u4f7f\u7528\u5177\u6709\u4e00\u81f4\u6027."),(0,i.kt)("li",{parentName:"ul"},"\u6269\u5c55: \u901a\u8fc7\u5c06\u7b80\u5355\u53ef\u7ec4\u5408\u7684\u5bf9\u8c61\u7ec4\u5408\u8d77\u6765, \u6784\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5bf9\u8c61,\n\u8fd9\u4e2a\u5bf9\u8c61\u7684\u80fd\u529b\u5c06\u4f1a\u8d85\u8fc7\u8fd9\u4e9b\u7ec4\u6210\u90e8\u5206\u7684\u80fd\u529b\u7684\u603b\u548c, \u4ea7\u751f\u65b0\u7684\u80fd\u529b."),(0,i.kt)("li",{parentName:"ul"},"\u7ec4\u5408\u6a21\u5f0f\u662f\u4e00\u79cd ",(0,i.kt)("inlineCode",{parentName:"li"},"HAS-A")," (\u805a\u5408) \u7684\u5173\u7cfb, \u800c\u4e0d\u662f ",(0,i.kt)("inlineCode",{parentName:"li"},"IS-A"),":\n\u7ec4\u5408\u5bf9\u8c61\u5305\u542b\u4e00\u7ec4\u53f6\u5bf9\u8c61, \u4f46 Leaf \u5e76\u4e0d\u662f Composite \u7684\u5b50\u7c7b (\u5c3d\u7ba1\u79f0\u4e3a\u7236\u5b50\u8282\u70b9).\n\u7ec4\u5408\u5bf9\u8c61\u628a\u8bf7\u6c42\u59d4\u6258\u7ed9\u5b83\u6240\u5305\u542b\u7684\u6240\u6709\u53f6\u5bf9\u8c61,\n\u5b83\u4eec\u80fd\u591f\u5408\u4f5c\u7684\u5173\u952e\u662f\u62e5\u6709",(0,i.kt)("strong",{parentName:"li"},"\u76f8\u540c\u7684\u63a5\u53e3"),".")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Composite Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"DOM."),(0,i.kt)("li",{parentName:"ul"},"AST."),(0,i.kt)("li",{parentName:"ul"},"Directory Tree.")))),(0,i.kt)("h4",{id:"composite-pattern-implementation"},"Composite Pattern Implementation"),(0,i.kt)("p",null,"\u6811\u5f62\u7ed3\u6784:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6839\u7ed3\u70b9:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Component \u62bd\u8c61\u5bf9\u8c61/\u63a5\u53e3 \u91c7\u7528\u6700\u5927\u5bbd\u63a5\u53e3,\u5b9a\u4e49\u5185\u70b9\u548c\u53f6\u70b9\u7684\u64cd\u4f5c."),(0,i.kt)("li",{parentName:"ul"},"\u5c06\u5185\u70b9\u7279\u6709\u7684\u64cd\u4f5c\u96c6\u8bbe\u4e3a\u7f3a\u7701\u64cd\u4f5c\u96c6 (\u7a7a\u5b9e\u73b0)."))),(0,i.kt)("li",{parentName:"ul"},"\u5185\u70b9:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6301\u6709\u7236\u7ed3\u70b9\u548c\u5b50\u8282\u70b9\u7684\u5f15\u7528 (\u53ef\u4f7f\u7528 Flyweight \u6a21\u5f0f\u5b9e\u73b0\u5171\u4eab)."),(0,i.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u96c6: \u5185\u70b9\u64cd\u4f5c\u96c6 (\u53ef\u6dfb\u52a0/\u5220\u9664\u7ec4\u4ef6)."))),(0,i.kt)("li",{parentName:"ul"},"\u53f6\u70b9:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u6301\u6709\u7236\u7ed3\u70b9\u5f15\u7528."),(0,i.kt)("li",{parentName:"ul"},"\u64cd\u4f5c\u96c6: \u53f6\u70b9\u64cd\u4f5c\u96c6 (\u4e0d\u53ef\u6dfb\u52a0/\u5220\u9664\u7ec4\u4ef6).")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"interface Component {\n  add: (Component) => void;\n  remove: (Component) => void;\n  do: (Context) => void;\n}\n\nclass Composite implements Component {\n  add(child: Component) {\n    console.log('Add child');\n  }\n\n  remove(child: Component) {\n    console.log('Remove child');\n  }\n\n  do(context: Context) {\n    console.log('Do composite work');\n\n    for (const child of this.children) {\n      child.do(context);\n    }\n  }\n}\n\nclass Leaf implements Component {\n  add(child: Component) {\n    throw new UnsupportedOperationException();\n  }\n\n  remove(child: Component) {\n    if (this.parent === null) return;\n    console.log('Remove self');\n  }\n\n  do(context: Context) {\n    console.log('Do leaf work');\n  }\n}\n\nconst root = new Composite();\nconst c1 = new Composite();\nconst c2 = new Composite();\nconst leaf1 = new Leaf();\nconst leaf2 = new Leaf();\nroot.add(c1);\nroot.add(c2);\nc1.add(leaf1);\nc1.add(leaf2);\nroot.do();\n")),(0,i.kt)("h3",{id:"decorator-pattern"},"Decorator Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u91cd\u5199/\u91cd\u8f7d/\u6269\u5c55\u5bf9\u8c61\u539f\u6709\u7684\u884c\u4e3a (Methods), \u4f46\u4e0d\u6539\u53d8\u5bf9\u8c61\u539f\u6709\u5c5e\u6027."),(0,i.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u6dfb\u52a0\u65b0\u5c5e\u6027, \u5e76\u56f4\u7ed5\u65b0\u5c5e\u6027\u6269\u5c55\u5bf9\u8c61\u7684\u539f\u884c\u4e3a e.g \u539f\u5bf9\u8c61\u53ea\u4f1a\u8bf4\u4e2d\u6587, \u88c5\u9970\u540e\u540c\u65f6\u8bf4\u4e2d\u6587\u4e0e\u82f1\u6587."),(0,i.kt)("li",{parentName:"ul"},"\u907f\u514d\u4e86\u901a\u8fc7\u7ee7\u627f\u6765\u4e3a\u7c7b\u578b\u6dfb\u52a0\u65b0\u804c\u8d23, \u901a\u8fc7\u7ee7\u627f\u7684\u65b9\u5f0f\u5bb9\u6613\u9020\u6210\u5b50\u7c7b\u7684\u81a8\u80c0."),(0,i.kt)("li",{parentName:"ul"},"\u4fdd\u6301\u63a5\u53e3\u7684\u4e00\u81f4\u6027, ",(0,i.kt)("strong",{parentName:"li"},"\u52a8\u6001"),"\u6539\u53d8\u5bf9\u8c61\u7684\u5916\u89c2/\u804c\u8d23."),(0,i.kt)("li",{parentName:"ul"},"ConcreteDecorator \u7c7b: ",(0,i.kt)("inlineCode",{parentName:"li"},"private ClassName component")," \u62e5\u6709\u4e00\u4e2a\u5bf9\u8c61\u5f15\u7528."),(0,i.kt)("li",{parentName:"ul"},"\u5728 JS \u4e2d, \u53ef\u4ee5\u5229\u7528 ",(0,i.kt)("inlineCode",{parentName:"li"},"Closure")," (\u95ed\u5305) + ",(0,i.kt)("inlineCode",{parentName:"li"},"Higher Order Function")," (\u9ad8\u9636\u51fd\u6570) \u5feb\u901f\u5b9e\u73b0\u88c5\u9970\u5668\u6a21\u5f0f."),(0,i.kt)("li",{parentName:"ul"},"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219\u548c\u5355\u4e00\u804c\u8d23\u6a21\u5f0f.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Decorator Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"React HOC Components."),(0,i.kt)("li",{parentName:"ul"},"ES2016 and TypeScript ",(0,i.kt)("inlineCode",{parentName:"li"},"@decorator"),"."),(0,i.kt)("li",{parentName:"ul"},"Guard: form validator."),(0,i.kt)("li",{parentName:"ul"},"Interceptor:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"HTTP request and response decorator."),(0,i.kt)("li",{parentName:"ul"},"Web statistic tool."))),(0,i.kt)("li",{parentName:"ul"},"Transformer."),(0,i.kt)("li",{parentName:"ul"},"AOP: Aspect Oriented Programming.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"function __decorate(decorators, target) {\n  const decorateTarget = target;\n\n  for (const decorator of decorators) {\n    decorateTarget = decorator(decorateTarget) || decorateTarget;\n  }\n\n  return decorateTarget;\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class MacBook {\n  constructor() {\n    this.cost = 997;\n    this.screenSize = 11.6;\n  }\n\n  getCost() {\n    return this.cost;\n  }\n\n  getScreenSize() {\n    return this.screenSize;\n  }\n}\n\n// Decorator 1\nclass Memory extends MacBook {\n  constructor(macBook) {\n    super();\n    this.macBook = macBook;\n  }\n\n  getCost() {\n    return this.macBook.getCost() + 75;\n  }\n}\n\n// Decorator 2\nclass Engraving extends MacBook {\n  constructor(macBook) {\n    super();\n    this.macBook = macBook;\n  }\n\n  getCost() {\n    return this.macBook.getCost() + 200;\n  }\n}\n\n// Decorator 3\nclass Insurance extends MacBook {\n  constructor(macBook) {\n    super();\n    this.macBook = macBook;\n  }\n\n  getCost() {\n    return this.macBook.getCost() + 250;\n  }\n}\n\nlet mb = new MacBook();\nmb = new Memory(mb);\nmb = new Engraving(mb);\nmb = new Insurance(mb);\n\nconsole.log(mb.getCost());\n// Outputs: 1522\nconsole.log(mb.getScreenSize());\n// Outputs: 11.6\n")),(0,i.kt)("h3",{id:"facade-pattern"},"Facade Pattern"),(0,i.kt)("p",null,"\u5c01\u88c5\u590d\u6742\u903b\u8f91:"),(0,i.kt)("p",null,"\u5c06\u591a\u4e2a\u590d\u6742\u7684\u5b50\u7cfb\u7edf",(0,i.kt)("inlineCode",{parentName:"p"},"\u5c01\u88c5 + \u5408\u5e76"),",\n\u5b9e\u73b0\u4e00\u4e2a\u590d\u6742\u529f\u80fd,\n\u4f46\u53ea\u66b4\u9732\u4e00\u4e2a\u7b80\u5355\u7684\u63a5\u53e3."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class CPU {\n  freeze() {\n    console.log('Freezed....');\n  }\n\n  jump(position) {\n    console.log('Go....');\n  }\n\n  execute() {\n    console.log('Run....');\n  }\n}\n\nclass Memory {\n  load(position, data) {\n    console.log('Load....');\n  }\n}\n\nclass HardDrive {\n  read(lba, size) {\n    console.log('Read....');\n  }\n}\n\nclass ComputerFacade {\n  constructor() {\n    this.processor = new CPU();\n    this.ram = new Memory();\n    this.hd = new HardDrive();\n  }\n\n  start() {\n    this.processor.freeze();\n    this.ram.load(\n      this.BOOT_ADDRESS,\n      this.hd.read(this.BOOT_SECTOR, this.SECTOR_SIZE)\n    );\n    this.processor.jump(this.BOOT_ADDRESS);\n    this.processor.execute();\n  }\n}\n\nconst computer = new ComputerFacade();\ncomputer.start();\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"sabertazimi.addMyEvent = function (el, ev, fn) {\n  if (el.addEventListener) {\n    el.addEventListener(ev, fn, false);\n  } else if (el.attachEvent) {\n    el.attachEvent(`on${ev}`, fn);\n  } else {\n    el[`on${ev}`] = fn;\n  }\n};\n")),(0,i.kt)("h3",{id:"flyweight-pattern"},"Flyweight Pattern"),(0,i.kt)("p",null,"\u51cf\u5c0f\u5185\u5b58\u5f00\u9500 (",(0,i.kt)("strong",{parentName:"p"},"Performance Optimization"),"):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u5185\u90e8"),"\u4fe1\u606f: \u5bf9\u8c61\u4e2d\u7684\u5185\u90e8\u65b9\u6cd5\u6240\u9700\u4fe1\u606f/\u5c5e\u6027, \u4e00\u4e2a\u5355\u72ec\u7684\u4eab\u5143\u53ef\u66ff\u4ee3\u5927\u91cf\u5177\u6709\u76f8\u540c\u5185\u5728\u4fe1\u606f\u7684\u5bf9\u8c61."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u5916\u90e8"),"\u72b6\u6001: \u4f5c\u4e3a\u65b9\u6cd5\u53c2\u6570, \u4f7f\u4e4b\u9002\u5e94\u4e0d\u540c\u7684\u5916\u90e8\u72b6\u6001 (Context), \u5b9e\u4f8b\u5bf9\u8c61\u5dee\u5f02."),(0,i.kt)("li",{parentName:"ul"},"\u67d0\u4e2a\u7c7b\u578b\u7684\u5bf9\u8c61\u6709\u5927\u91cf\u7684\u5b9e\u4f8b, \u5bf9\u8fd9\u4e9b\u5b9e\u4f8b\u8fdb\u884c\u5206\u7c7b, \u5408\u5e76\u76f8\u540c\u5206\u7c7b\u7684\u5bf9\u8c61, \u53ea\u521b\u5efa\u5c11\u91cf\u5b9e\u4f8b (\u4eab\u5143)."),(0,i.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u4eab\u5143\u5de5\u5382\u6765\u7ba1\u7406\u4e00\u7ec4\u4eab\u5143:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5f53\u6240\u9700\u4eab\u5143\u5df2\u5b58\u5728\u65f6, \u8fd4\u56de\u5df2\u5b58\u5728\u4eab\u5143."),(0,i.kt)("li",{parentName:"ul"},"\u5f53\u6240\u9700\u4eab\u5143\u4e0d\u5b58\u5728\u65f6, \u521b\u5efa\u65b0\u4eab\u5143.")))),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Flyweight Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Objects pool."),(0,i.kt)("li",{parentName:"ul"},"DOM nodes pool."),(0,i.kt)("li",{parentName:"ul"},"Event delegation."),(0,i.kt)("li",{parentName:"ul"},"Reduce similar object instances.")))),(0,i.kt)("h4",{id:"flyweight-factory-pattern"},"Flyweight Factory Pattern"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Flyweight {\n  constructor(make, model, processor) {\n    this.make = make;\n    this.model = model;\n    this.processor = processor;\n  }\n}\n\nclass FlyweightFactory {\n  static flyweights = new Map();\n\n  static get(make, model, processor) {\n    const id = make + model;\n\n    if (FlyweightFactory.flyweights.has(id)) {\n      return FlyweightFactory.flyweights.get(id);\n    }\n\n    const flyweight = new Flyweight(make, model, processor);\n    FlyweightFactory.flyweights.set(id, flyweight);\n    return flyweight;\n  }\n\n  static getCount() {\n    return FlyweightFactory.flyweights.size;\n  }\n}\n\nclass Computer {\n  constructor(make, model, processor, memory, tag) {\n    this.flyweight = FlyweightFactory.get(make, model, processor);\n    this.memory = memory;\n    this.tag = tag;\n    this.getMake = function () {\n      return this.flyweight.make;\n    };\n  }\n}\n\nclass ComputerCollection {\n  computers = new Map();\n\n  add(make, model, processor, memory, tag) {\n    this.computers.set(tag, new Computer(make, model, processor, memory, tag));\n  }\n\n  get(tag) {\n    return this.computers.get(tag);\n  }\n\n  getCount() {\n    return this.computers.size;\n  }\n}\n\nconst computers = new ComputerCollection();\n\ncomputers.add('Dell', 'Studio XPS', 'Intel', '5G', 'Y755P');\ncomputers.add('Dell', 'Studio XPS', 'Intel', '6G', 'X997T');\ncomputers.add('Dell', 'Studio XPS', 'Intel', '2G', 'NT777');\ncomputers.add('Dell', 'Studio XPS', 'Intel', '2G', '0J88A');\ncomputers.add('HP', 'Envy', 'Intel', '4G', 'CNU883701');\ncomputers.add('HP', 'Envy', 'Intel', '2G', 'TXU003283');\n\nconsole.log(`Computers: ${computers.getCount()}`); // 6.\nconsole.log(`Flyweights: ${FlyweightFactory.getCount()}`); // 2.\n")),(0,i.kt)("h4",{id:"flyweight-pool-pattern"},"Flyweight Pool Pattern"),(0,i.kt)("p",null,"DOM pool:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class ObjectPool<T, P> {\n  objectFactory: () => T;\n  objectPool: [T];\n\n  constructor(objectFactory: () => T) {\n    this.objectFactory = objectFactory;\n    this.objectPool = [];\n  }\n\n  create(...args: P) {\n    return objectPool.length === 0 ? objectFactory(args) : objectPool.shift();\n  }\n\n  recover(obj: T) {\n    objectPool.push(obj);\n  }\n}\n\nconst iframeFactory = new ObjectPool(() => {\n  const iframe = document.createElement('iframe');\n  document.body.appendChild(iframe);\n  iframe.onload = function () {\n    iframe.onload = null;\n    iframeFactory.recover(iframe);\n  };\n  return iframe;\n});\n\nconst iframe1 = iframeFactory.create();\niframe1.src = 'http:// baidu.com';\nconst iframe2 = iframeFactory.create();\niframe2.src = 'http:// QQ.com';\nsetTimeout(function () {\n  const iframe3 = iframeFactory.create();\n  iframe3.src = 'http:// 163.com';\n}, 3000);\n")),(0,i.kt)("h3",{id:"proxy-pattern"},"Proxy Pattern"),(0,i.kt)("p",null,"\u901a\u8fc7\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4e34\u65f6\u5b58\u50a8\u539f\u5bf9\u8c61\u65b9\u6cd5\u8c03\u7528\u4ea7\u751f\u7684\u4e00\u7cfb\u5217\u7ed3\u679c (\u65b0\u5efa\u5bf9\u8c61),\n\u51cf\u5c11\u91cd\u590d\u5bf9\u8c61\u7684\u4ea7\u751f."),(0,i.kt)("li",{parentName:"ul"},"\u4ee3\u7406\u5bf9\u8c61\u53ef\u4ee5\u4e3a\u4e2d\u95f4\u8fc7\u7a0b\u900f\u660e\u5730\u589e\u52a0\u989d\u5916\u903b\u8f91: \u9884\u52a0\u8f7d/\u7f13\u5b58/\u5408\u5e76/\u9a8c\u8bc1/\u8f6c\u6362\u7b49."),(0,i.kt)("li",{parentName:"ul"},"\u6602\u8d35\u7684\u5bf9\u8c61\u521b\u5efa\u6216\u4efb\u52a1\u6267\u884c\u53ef\u4ee5\u5ef6\u8fdf\u5230\u4ee3\u7406\u5bf9\u8c61\u4e2d\u6267\u884c."),(0,i.kt)("li",{parentName:"ul"},"\u4ee3\u7406\u7c7b\u578b: \u8fdc\u7a0b/\u4fdd\u62a4/\u865a\u62df/\u7f13\u5b58\u4ee3\u7406."),(0,i.kt)("li",{parentName:"ul"},"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Proxy Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"\u8fdc\u7a0b\u4ee3\u7406:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u4ee3\u7406\u8f6f\u4ef6."),(0,i.kt)("li",{parentName:"ul"},"\u9632\u706b\u5899\u4ee3\u7406."))),(0,i.kt)("li",{parentName:"ul"},"\u4fdd\u62a4\u4ee3\u7406:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u8de8\u57df\u5904\u7406."),(0,i.kt)("li",{parentName:"ul"},"\u8def\u7531\u4fdd\u62a4\u4ee3\u7406."))),(0,i.kt)("li",{parentName:"ul"},"\u865a\u62df\u4ee3\u7406:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u56fe\u7247\u9884\u52a0\u8f7d."),(0,i.kt)("li",{parentName:"ul"},"\u667a\u80fd\u5f15\u7528\u4ee3\u7406: C++ smart pointer, Rust ",(0,i.kt)("inlineCode",{parentName:"li"},"RefCell"),", Linux file descriptor."),(0,i.kt)("li",{parentName:"ul"},"\u5199\u65f6\u62f7\u8d1d\u4ee3\u7406: \u5185\u5b58\u9875, DLL."))),(0,i.kt)("li",{parentName:"ul"},"\u7f13\u5b58\u4ee3\u7406:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u7f13\u5b58\u51fd\u6570."),(0,i.kt)("li",{parentName:"ul"},"\u7f13\u5b58\u670d\u52a1\u5668: React Query (cache data).")))))),(0,i.kt)("p",null,"\u4ee3\u7406\u6a21\u5f0f\u5f3a\u8c03\u4e00\u79cd\u5173\u7cfb (Proxy \u4e0e\u5b83\u7684\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u7cfb), \u8fd9\u79cd\u5173\u7cfb\u53ef\u4ee5\u9759\u6001\u5730\u8868\u8fbe.\n\u88c5\u9970\u8005\u6a21\u5f0f\u7528\u4e8e\u4e00\u5f00\u59cb\u4e0d\u80fd\u786e\u5b9a\u5bf9\u8c61\u7684\u5168\u90e8\u529f\u80fd.\n\u4ee3\u7406\u6a21\u5f0f\u901a\u5e38\u53ea\u6709\u4e00\u5c42",(0,i.kt)("inlineCode",{parentName:"p"},"\u4ee3\u7406-\u672c\u4f53"),"\u7684\u5f15\u7528,\n\u88c5\u9970\u8005\u6a21\u5f0f\u7ecf\u5e38\u4f1a\u5f62\u6210\u4e00\u6761\u957f\u957f\u7684\u88c5\u9970\u94fe."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Percentage {\n  constructor(percent) {\n    this.percent = percent;\n  }\n\n  toString() {\n    return `${this.percent}&`;\n  }\n\n  valueOf() {\n    return this.percent / 100;\n  }\n}\n\nconst fivePercent = new Percentage(5);\nconsole.log(fivePercent.toString());\nconsole.log(`5% of 50 is ${50 * fivePercent}`);\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"function GeoCoder() {\n  this.getLatLng = function (address) {\n    if (address === 'Amsterdam') {\n      return '52.3700\xb0 N, 4.8900\xb0 E';\n    } else if (address === 'London') {\n      return '51.5171\xb0 N, 0.1062\xb0 W';\n    } else if (address === 'Paris') {\n      return '48.8742\xb0 N, 2.3470\xb0 E';\n    } else if (address === 'Berlin') {\n      return '52.5233\xb0 N, 13.4127\xb0 E';\n    } else {\n      return '';\n    }\n  };\n}\n\nfunction GeoProxy() {\n  const geocoder = new GeoCoder();\n  const geocache = {};\n\n  return {\n    getLatLng(address) {\n      if (!geocache[address]) {\n        geocache[address] = geocoder.getLatLng(address);\n      }\n      log.add(`${address}: ${geocache[address]}`);\n      return geocache[address];\n    },\n    getCount() {\n      let count = 0;\n      for (const code in geocache) {\n        count++;\n      }\n      return count;\n    },\n  };\n}\n")),(0,i.kt)("p",null,"Proxy in ",(0,i.kt)("inlineCode",{parentName:"p"},"Vue"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const original = { name: 'jeff' };\n\nconst reactive = new Proxy(original, {\n  get(target, key) {\n    console.log('Tracking: ', key);\n    return target[key];\n  },\n  set(target, key, value) {\n    console.log('updating UI...');\n    return Reflect.set(target, key, value);\n  },\n});\n\nconsole.log(reactive.name); // 'Tracking: name'\nreactive.name = 'bob'; // 'updating UI...'\n")),(0,i.kt)("h3",{id:"chain-of-responsibility-pattern"},"Chain of Responsibility Pattern"),(0,i.kt)("p",null,"\u4e00\u79cd\u5c06\u8bf7\u6c42\u5728\u4e00\u4e32\u5bf9\u8c61\u4e2d\u4f20\u9012\u7684\u65b9\u5f0f, \u5bfb\u627e\u53ef\u4ee5\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u5bf9\u8c61:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\u53d1\u9001\u8005\u53ea\u9700\u77e5\u9053\u94fe\u4e2d\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9, \u4ece\u800c\u964d\u4f4e\u53d1\u9001\u8005\u548c\u4e00\u7ec4\u63a5\u6536\u8005\u4e4b\u95f4\u7684\u5f3a\u8026\u5408."),(0,i.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\u53d1\u9001\u8005\u53ef\u4ee5\u4efb\u610f\u9009\u62e9\u7b2c\u4e00\u4e2a\u8282\u70b9, \u4ece\u800c\u51cf\u5c11\u8bf7\u6c42\u5728\u94fe\u4e2d\u7684\u4f20\u9012\u6b21\u6570."),(0,i.kt)("li",{parentName:"ul"},"\u804c\u8d23\u94fe\u4e2d\u7684\u8282\u70b9\u6570\u91cf\u548c\u987a\u5e8f\u53ef\u4ee5\u81ea\u7531\u53d8\u5316."),(0,i.kt)("li",{parentName:"ul"},"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"CoR Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Middlewares:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Redux."),(0,i.kt)("li",{parentName:"ul"},"Express/Koa."),(0,i.kt)("li",{parentName:"ul"},"NestJS."))),(0,i.kt)("li",{parentName:"ul"},"AOP: Aspect Oriented Programming."),(0,i.kt)("li",{parentName:"ul"},"DOM event capture and bubble chian."),(0,i.kt)("li",{parentName:"ul"},"JavaScript Prototype chain."),(0,i.kt)("li",{parentName:"ul"},"JavaScript Scope chain.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Creature {\n  constructor(name, attack, defense) {\n    this.name = name;\n    this.attack = attack;\n    this.defense = defense;\n  }\n\n  toString() {\n    return `${this.name} (${this.attack}/${this.defense})`;\n  }\n}\n\n// Link Node.\nclass CreatureModifier {\n  constructor(creature) {\n    this.creature = creature;\n    this.next = null;\n  }\n\n  // Build chains.\n  add(modifier) {\n    if (this.next) this.next.add(modifier);\n    else this.next = modifier;\n  }\n\n  // Pass objects along to chains.\n  handle() {\n    if (this.next) this.next.handle();\n  }\n}\n\nclass NoBonusesModifier extends CreatureModifier {\n  constructor(creature) {\n    super(creature);\n    console.log('New');\n  }\n\n  handle() {\n    console.log('No bonuses for you!');\n  }\n}\n\nclass DoubleAttackModifier extends CreatureModifier {\n  constructor(creature) {\n    super(creature);\n    console.log('New');\n  }\n\n  handle() {\n    console.log(`Doubling ${this.creature.name}'s attack`);\n    this.creature.attack *= 2;\n    super.handle(); // Call next();\n  }\n}\n\nclass IncreaseDefenseModifier extends CreatureModifier {\n  constructor(creature) {\n    super(creature);\n    console.log('New');\n  }\n\n  handle() {\n    if (this.creature.attack <= 2) {\n      console.log(`Increasing ${this.creature.name}'s defense`);\n      this.creature.defense++;\n    }\n    super.handle(); // Call next();\n  }\n}\n\nconst peekachu = new Creature('Peekachu', 1, 1);\nconsole.log(peekachu.toString());\n\nconst root = new CreatureModifier(peekachu);\nroot.add(new DoubleAttackModifier(peekachu));\nroot.add(new IncreaseDefenseModifier(peekachu));\n// Chain: creatureModifier -> doubleAttackModifier -> increaseDefenseModifier.\nroot.handle();\n\nconsole.log(peekachu.toString());\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Koa extends EventEmitter {\n  constructor() {\n    super();\n    this.middlewares = [];\n  }\n\n  use(fn) {\n    this.middlewares.push(fn);\n  }\n\n  compose(middlewares, ctx) {\n    const dispatch = index => {\n      // End of chain.\n      if (index === middlewares.length) {\n        return Promise.resolve();\n      }\n\n      // `next` function: call next middleware recursively.\n      const next = () => dispatch(index + 1);\n\n      // Call current middleware.\n      const middleware = middlewares[index];\n      return Promise.resolve(middleware(ctx, next));\n    };\n\n    return dispatch(0);\n  }\n\n  handleRequest(req, res) {\n    // When ctx.body doesn't change, statusCode contains '404'.\n    res.statusCode = 404;\n\n    // Create context proxy for `req` and `res` operations.\n    const ctx = this.createContext(req, res);\n\n    // Middleware (open api for Koa users).\n    const fn = this.compose(this.middlewares, ctx);\n\n    fn.then(() => {\n      if (typeof ctx.body === 'object' && ctx.body !== null) {\n        res.setHeader('Content-Type', 'application/json;charset=utf8');\n        res.end(JSON.stringify(ctx.body));\n      } else if (ctx.body instanceof Stream) {\n        ctx.body.pipe(res);\n      } else if (typeof ctx.body === 'string' || Buffer.isBuffer(ctx.body)) {\n        res.setHeader('Content-Type', 'text/htmlCharset=utf8');\n        res.end(ctx.body);\n      } else {\n        res.end('Not Found');\n      }\n    }).catch(err => {\n      this.emit('error', err);\n      res.statusCode = 500;\n      res.end('Internal Server Error');\n    });\n  }\n\n  listen(...args) {\n    const server = http.createServer(this.handleRequest.bind(this));\n    server.listen(...args);\n  }\n}\n\nconst app = new Koa();\n\napp.use(async (ctx, next) => {\n  console.log(1);\n  await next();\n  console.log(2);\n});\n\napp.use(async (ctx, next) => {\n  console.log(3);\n\n  const p = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      console.log('3.5');\n      resolve();\n    }, 1000);\n  });\n\n  await p.then();\n  await next();\n  console.log(4);\n  ctx.body = 'Hello Koa';\n});\n\napp.listen(2323, () => {\n  console.log('Koa server are listening to http://localhost:2323 ...');\n});\n")),(0,i.kt)("h3",{id:"command-pattern"},"Command Pattern"),(0,i.kt)("p",null,"\u9700\u8981\u5411\u67d0\u4e9b\u5bf9\u8c61\u53d1\u9001\u8bf7\u6c42:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u89e3\u8026\u547d\u4ee4: \u4e0d\u6e05\u695a\u8bf7\u6c42\u5177\u4f53\u64cd\u4f5c."),(0,i.kt)("li",{parentName:"ul"},"\u89e3\u8026\u63a5\u6536\u8005: \u4e0d\u6e05\u695a\u8bf7\u6c42\u7684\u63a5\u6536\u8005 (\u591a\u4e2a\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u968f\u673a\u5bf9\u8c61).")),(0,i.kt)("p",null,"\u6b64\u65f6\u5e0c\u671b\u7528\u4e00\u79cd\u677e\u8026\u5408\u7684\u65b9\u5f0f\u6765\u8bbe\u8ba1\u7a0b\u5e8f, \u4f7f\u5f97\u8bf7\u6c42\u53d1\u9001\u8005\u548c\u8bf7\u6c42\u63a5\u6536\u8005\u80fd\u591f\u6d88\u9664\u5f7c\u6b64\u7684\u8026\u5408\u5173\u7cfb:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5c06\u65b9\u6cd5/\u52a8\u4f5c\u5c01\u88c5\u6210\u5bf9\u8c61, \u4f7f\u5f97\u5916\u90e8\u901a\u8fc7\u552f\u4e00\u65b9\u6cd5 ",(0,i.kt)("inlineCode",{parentName:"li"},"execute()"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"run()")," \u8c03\u7528\u5185\u90e8\u65b9\u6cd5/\u52a8\u4f5c."),(0,i.kt)("li",{parentName:"ul"},"\u89e3\u8026\u4e09\u8005: \u5ba2\u6237\u521b\u5efa\u547d\u4ee4, \u8c03\u7528\u8005\u6267\u884c\u8be5\u547d\u4ee4, \u63a5\u6536\u8005\u5728\u547d\u4ee4\u6267\u884c\u65f6\u6267\u884c\u76f8\u5e94\u64cd\u4f5c.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u901a\u5e38\u88ab\u5305\u88c5\u4e3a\u4e00\u4e2a\u547d\u4ee4\u5bf9\u8c61."),(0,i.kt)("li",{parentName:"ul"},"\u8c03\u7528\u8005\u63a5\u8fc7\u547d\u4ee4\u5e76\u5c06\u5176\u4fdd\u5b58\u4e0b\u6765, \u5b83\u4f1a\u5728\u67d0\u4e2a\u65f6\u5019\u8c03\u7528\u8be5\u547d\u4ee4\u5bf9\u8c61\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"Command.execute()")," \u65b9\u6cd5."),(0,i.kt)("li",{parentName:"ul"},"\u8c03\u7528\u8005\u8c03\u7528 ",(0,i.kt)("inlineCode",{parentName:"li"},"Command.execute()")," \u540e, \u6700\u7ec8\u5c06\u8c03\u7528\u63a5\u6536\u8005\u65b9\u6cd5 ",(0,i.kt)("inlineCode",{parentName:"li"},"Receiver.action()"),".")))),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Command Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Decouple ",(0,i.kt)("inlineCode",{parentName:"li"},"Executor")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"Receiver"),"."),(0,i.kt)("li",{parentName:"ul"},"Bind ",(0,i.kt)("inlineCode",{parentName:"li"},"Command")," to UI components."),(0,i.kt)("li",{parentName:"ul"},"Command sequences (store commands + ",(0,i.kt)("inlineCode",{parentName:"li"},"Composite")," pattern):\n",(0,i.kt)("inlineCode",{parentName:"li"},"Macro"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"Batch"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"Undo"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"Redo")," feature."),(0,i.kt)("li",{parentName:"ul"},"Command queue (cache commands + ",(0,i.kt)("inlineCode",{parentName:"li"},"Observer")," pattern):\n",(0,i.kt)("inlineCode",{parentName:"li"},"Redis"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"RabbitMQ"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"Kafka"),".")))),(0,i.kt)("p",null,"\u5728 JS \u4e2d, ",(0,i.kt)("inlineCode",{parentName:"p"},"Closure")," + ",(0,i.kt)("inlineCode",{parentName:"p"},"Callback")," (",(0,i.kt)("inlineCode",{parentName:"p"},"Higher Order Function"),") \u53ef\u4ee5\u5b9e\u73b0\u9690\u5f0f\u7684\u547d\u4ee4\u6a21\u5f0f:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Closure")," \u6355\u83b7 ",(0,i.kt)("inlineCode",{parentName:"li"},"Receiver")," (\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u4e2d, ",(0,i.kt)("inlineCode",{parentName:"li"},"Command")," \u5bf9\u8c61\u9700\u8981\u6301\u6709 ",(0,i.kt)("inlineCode",{parentName:"li"},"Receiver")," \u5bf9\u8c61)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Callback")," \u51fd\u6570\u5b9e\u73b0\u5177\u4f53\u903b\u8f91 (\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u4e2d, \u9700\u8981\u5c06\u5176\u5c01\u88c5\u8fdb ",(0,i.kt)("inlineCode",{parentName:"li"},"Command.execute()")," \u5bf9\u8c61\u65b9\u6cd5).")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// Higher order function\nconst Command = receiver => () => receiver.action();\n")),(0,i.kt)("p",null,"Bind ",(0,i.kt)("inlineCode",{parentName:"p"},"Command")," to UI components:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Executor"),": UI components."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Client")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"Receiver"),": background tasks or other UI components."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Executor")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"Client")," ",(0,i.kt)("inlineCode",{parentName:"li"},"Command.execute()")," -> ",(0,i.kt)("inlineCode",{parentName:"li"},"Receiver.action()"),":\ne.g click ",(0,i.kt)("inlineCode",{parentName:"li"},"button")," -> refresh ",(0,i.kt)("inlineCode",{parentName:"li"},"menu"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// Executor\nclass Button {\n  commands = new Set();\n\n  add(command) {\n    this.commands.set(command);\n  }\n\n  click() {\n    for (const command of this.commands) {\n      command.execute();\n    }\n  }\n}\n\n// Client: command object, `action` implemented\nclass Command {\n  constructor(receiver) {\n    this.receiver = receiver;\n  }\n\n  execute() {\n    this.receiver.action();\n  }\n}\n\n// Receiver\nclass MenuBar {\n  action() {\n    this.refresh();\n  }\n\n  refresh() {\n    console.log('refresh menu pages');\n  }\n}\n\nconst button = new Button();\nconst menuBar = new MenuBar();\nconst refreshMenuBarCommand = new Command(menuBar);\n\nbutton.add(refreshMenuBarCommand);\nbutton.click();\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class MenuCommand {\n  constructor(action) {\n    this.action = action;\n  }\n\n  execute() {\n    this.action();\n  }\n}\n\n// --------------\nconst appMenuBar = new MenuBar();\n\n// --------------\nconst fileActions = new FileActions();\nconst EditActions = new EditActions();\nconst InsertActions = new InsertActions();\nconst HelpActions = new HelpActions();\n\n// --------------\nconst openCommand = new MenuCommand(fileActions.open);\nconst closeCommand = new MenuCommand(fileActions.close);\nconst saveCommand = new MenuCommand(fileActions.save);\nconst saveAsCommand = new MenuCommand(fileActions.saveAs);\nconst fileMenu = new Menu('File');\nfileMenu.add(new MenuItem('open', openCommand));\nfileMenu.add(new MenuItem('Close', closeCommand));\nfileMenu.add(new MenuItem('Save', saveCommand));\nfileMenu.add(new MenuItem('Close', saveAsCommand));\nappMenuBar.add(fileMenu);\n\n// --------------\nconst cutCommand = new MenuCommand(EditActions.cut);\nconst copyCommand = new MenuCommand(EditActions.copy);\nconst pasteCommand = new MenuCommand(EditActions.paste);\nconst deleteCommand = new MenuCommand(EditActions.delete);\nconst editMenu = new Menu('Edit');\neditMenu.add(new MenuItem('Cut', cutCommand));\neditMenu.add(new MenuItem('Copy', copyCommand));\neditMenu.add(new MenuItem('Paste', pasteCommand));\neditMenu.add(new MenuItem('Delete', deleteCommand));\nappMenuBar.add(editMenu);\n\n// --------------\nconst textBlockCommand = new MenuCommand(InsertActions.textBlock);\nconst insertMenu = new Menu('Insert');\ninsertMenu.add(new MenuItem('Text  Block', textBlockCommand));\nappMenuBar.add(insertMenu);\n\n// --------------\nconst showHelpCommand = new MenuCommand(HelpActions.showHelp());\nconst helpMenu = new Menu('Help');\nhelpMenu.add(new MenuItem('Show Help', showHelpCommand));\nappMenuBar.add(helpMenu);\n\n// --------------\ndocument.getElementsByTagName('body')[0].appendChild(appMenuBar.getElement());\nappMenuBar.show();\n")),(0,i.kt)("p",null,"Command sequences to implement ",(0,i.kt)("inlineCode",{parentName:"p"},"Macro"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"Batch"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"Undo"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"Redo")," feature:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Cursor {\n  constructor(width, height, parent) {\n    this.commandStack = [];\n    this.width = width;\n    this.height = height;\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n    parent.appendChild(this.canvas);\n\n    this.ctx = this.canvas.getContext('2d');\n    this.ctx.fillStyle = '#CCC000';\n    this.move(0, 0);\n  }\n\n  move(x, y) {\n    this.commandStack.push(() => {\n      // `this` point to `Cursor`.\n      this.lineTo(x, y);\n    });\n  }\n\n  lineTo(x, y) {\n    this.position.x += x;\n    this.position.y += y;\n    this.ctx.lineTo(this.position.x, this.position.y);\n  }\n\n  executeCommands() {\n    this.position = { x: this.width / 2, y: this.height / 2 };\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    this.ctx.beginPath();\n    this.ctx.moveTo(this.position.x, this.position.y);\n    for (let i = 0; i < this.commandStack.length; i++) {\n      this.commandStack[i]();\n    }\n    this.ctx.stroke();\n  }\n\n  undo() {\n    this.commandStack.pop();\n    this.executeCommands();\n  }\n}\n")),(0,i.kt)("h3",{id:"iterator-pattern"},"Iterator Pattern"),(0,i.kt)("p",null,"\u4e00\u4e2a Iterator \u5bf9\u8c61\u5c01\u88c5\u8bbf\u95ee\u548c\u904d\u5386\u4e00\u4e2a\u805a\u96c6\u5bf9\u8c61\u4e2d\u7684\u5404\u4e2a\u6784\u4ef6\u7684\u65b9\u6cd5:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4efb\u4f55\u5b9e\u73b0 Iterable \u63a5\u53e3\u7684\u6570\u636e\u7ed3\u6784\u90fd\u53ef\u4ee5\u88ab\u5b9e\u73b0 Iterator \u63a5\u53e3\u7684\u7ed3\u6784",(0,i.kt)("strong",{parentName:"li"},"\u6d88\u8d39")," (",(0,i.kt)("inlineCode",{parentName:"li"},"Consume"),")."),(0,i.kt)("li",{parentName:"ul"},"\u8fed\u4ee3\u5668 (Iterator) \u662f\u6309\u9700\u521b\u5efa\u7684\u4e00\u6b21\u6027\u5bf9\u8c61.\n\u6bcf\u4e2a\u8fed\u4ee3\u5668\u90fd\u4f1a\u5173\u8054\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61, \u800c\u8fed\u4ee3\u5668\u4f1a\u66b4\u9732\u8fed\u4ee3\u5176\u5173\u8054\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684 API."),(0,i.kt)("li",{parentName:"ul"},"\u8fed\u4ee3\u5668\u65e0\u987b\u4e86\u89e3\u4e0e\u5176\u5173\u8054\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7684\u5185\u90e8\u7ed3\u6784, \u53ea\u9700\u8981\u77e5\u9053\u5982\u4f55\u53d6\u5f97\u8fde\u7eed\u7684\u503c."),(0,i.kt)("li",{parentName:"ul"},"\u65e0\u9700\u66b4\u9732\u805a\u96c6\u5bf9\u8c61\u7684\u5185\u90e8\u8868\u793a, \u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."),(0,i.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u7edf\u4e00\u904d\u5386\u63a5\u53e3, \u62bd\u79bb\u904d\u5386\u903b\u8f91\u4e0e\u4e1a\u52a1\u903b\u8f91, \u7b26\u5408\u5355\u4e00\u804c\u8d23\u539f\u5219.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Iterator Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Collection data structure."),(0,i.kt)("li",{parentName:"ul"},"\u904d\u5386\u5bf9\u8c61:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u987a\u5e8f\u8fed\u4ee3\u5668."),(0,i.kt)("li",{parentName:"ul"},"\u9006\u5e8f\u8fed\u4ee3\u5668."),(0,i.kt)("li",{parentName:"ul"},"\u53ef\u4e2d\u6b62\u8fed\u4ee3\u5668."))),(0,i.kt)("li",{parentName:"ul"},"Generator.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Stuff {\n  constructor() {\n    this.a = 11;\n    this.b = 22;\n  }\n\n  [Symbol.iterator]() {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n    let i = 0;\n\n    return {\n      next() {\n        return {\n          done: i > 1,\n          value: self[i++ === 0 ? 'a' : 'b'],\n        };\n      },\n    };\n  }\n\n  get backwards() {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n    let i = 0;\n\n    return {\n      next() {\n        return {\n          done: i > 1,\n          value: self[i++ === 0 ? 'b' : 'a'],\n        };\n      },\n      // Make iterator iterable\n      [Symbol.iterator]() {\n        return this;\n      },\n    };\n  }\n}\n\nconst stuff = new Stuff();\nfor (const item of stuff) console.log(`${item}`);\nfor (const item of stuff.backwards) console.log(`${item}`);\n")),(0,i.kt)("p",null,"Implement polyfill with iterator:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const activeXUploader = () => {\n  try {\n    return new ActiveXObject('ActiveX.Upload'); // IE \u4e0a\u4f20\u63a7\u4ef6.\n  } catch (e) {\n    return false;\n  }\n};\n\nconst flashUploader = () => {\n  if (supportFlash()) {\n    const str = '<object type=\"application/x-shockwave-flash\"></object>';\n    return $(str).appendTo($('body'));\n  }\n\n  return false;\n};\n\nconst formUploader = () => {\n  const str = '<input name=\"file\" type=\"file\" class=\"ui-file\"/>'; // \u8868\u5355\u4e0a\u4f20\u63a7\u4ef6.\n  return $(str).appendTo($('body'));\n};\n\nconst upload = (...uploaderList) => {\n  for (const uploader of uploaderList) {\n    const uploadResult = uploader();\n    if (uploadResult !== false) return uploadResult;\n  }\n};\n\nconst result = upload([activeXUploader, flashUploader, formUploader]);\nconst result = upload([activeXUploader, flashUploader]);\nconst result = upload([activeXUploader, formUploader]);\nconst result = upload([flashUploader, formUploader]);\n")),(0,i.kt)("h3",{id:"mediator-pattern"},"Mediator Pattern"),(0,i.kt)("p",null,"\u4e00\u4e2a Mediator \u5bf9\u8c61\u5c01\u88c5\u5bf9\u8c61\u95f4\u7684\u534f\u8bae (\u4e2d\u592e\u96c6\u6743\u7684\u63a7\u5236\u4e2d\u5fc3):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Defines an object that encapsulates how a set of objects interact."),(0,i.kt)("li",{parentName:"ul"},"\u6240\u6709\u89c2\u5bdf\u8005\u5171\u4eab\u4e00\u4e2a\u5171\u6709\u7684\u88ab\u89c2\u5bdf\u8005 (\u6240\u6709\u8ba2\u9605\u8005\u8ba2\u9605\u540c\u4e00\u4e2a\u8282\u70b9)."),(0,i.kt)("li",{parentName:"ul"},"\u89e3\u9664\u5bf9\u8c61\u95f4\u7684\u5f3a\u8026\u5408\u5173\u7cfb (\u6700\u5c11\u77e5\u8bc6\u539f\u5219), \u72ec\u7acb\u5730\u6539\u53d8\u5bf9\u8c61\u95f4\u7684\u4ea4\u4e92\u65b9\u5f0f."),(0,i.kt)("li",{parentName:"ul"},"\u7f51\u72b6\u7684\u591a\u5bf9\u591a\u5173\u7cfb => \u76f8\u5bf9\u7b80\u5355\u7684\u4e00\u5bf9\u591a\u5173\u7cfb."),(0,i.kt)("li",{parentName:"ul"},"\u5b58\u5728\u5355\u70b9\u6545\u969c (",(0,i.kt)("inlineCode",{parentName:"li"},"Single Point of Failure"),") \u53ef\u80fd, \u9700\u8981\u5bb9\u707e\u5907\u4efd.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Mediator Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"\u804a\u5929\u5ba4."),(0,i.kt)("li",{parentName:"ul"},"\u4ea4\u901a\u7cfb\u7edf."),(0,i.kt)("li",{parentName:"ul"},"\u6307\u6325\u4e2d\u5fc3."),(0,i.kt)("li",{parentName:"ul"},"\u6e38\u620f\u670d\u52a1\u5668."),(0,i.kt)("li",{parentName:"ul"},"DOM event bubbling and delegation: ",(0,i.kt)("inlineCode",{parentName:"li"},"document")," serves as a ",(0,i.kt)("inlineCode",{parentName:"li"},"Mediator"),"."),(0,i.kt)("li",{parentName:"ul"},"Global state store: A action => store => B change.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Person {\n  constructor(name) {\n    this.name = name;\n    this.chatLog = [];\n  }\n\n  receive(sender, message) {\n    const s = `${sender}: '${message}'`;\n    console.log(`[${this.name}'s chat session] ${s}`);\n    this.chatLog.push(s);\n  }\n\n  say(message) {\n    this.room.broadcast(this.name, message);\n  }\n\n  pm(who, message) {\n    this.room.message(this.name, who, message);\n  }\n}\n\nclass ChatRoom {\n  constructor() {\n    this.people = [];\n  }\n\n  broadcast(source, message) {\n    for (const p of this.people)\n      if (p.name !== source) p.receive(source, message);\n  }\n\n  join(p) {\n    const joinMsg = `${p.name} joins the chat`;\n    this.broadcast('room', joinMsg);\n    p.room = this;\n    this.people.push(p);\n  }\n\n  message(source, destination, message) {\n    for (const p of this.people)\n      if (p.name === destination) p.receive(source, message);\n  }\n}\n\nconst room = new ChatRoom();\nconst zee = new Person('Zee');\nconst shan = new Person('Shan');\n\nroom.join(zee);\nroom.join(shan);\nzee.say('Hello!!');\n\nconst doe = new Person('Doe');\nroom.join(doe);\ndoe.say('Hello everyone!');\n")),(0,i.kt)("h3",{id:"observer-pattern"},"Observer Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u88ab\u89c2\u5bdf\u8005 (",(0,i.kt)("inlineCode",{parentName:"li"},"Subject"),") \u7ef4\u62a4\u4e00\u7ec4\u89c2\u5bdf\u8005\u5217\u8868,\n\u6bcf\u5f53\u88ab\u89c2\u5bdf\u8005\u72b6\u6001\u6539\u53d8\u65f6,\n\u8c03\u7528 ",(0,i.kt)("inlineCode",{parentName:"li"},"notify")," \u51fd\u6570,\n\u6b64\u51fd\u6570\u904d\u5386\u8c03\u7528\u89c2\u5bdf\u8005 (",(0,i.kt)("inlineCode",{parentName:"li"},"Observer"),") \u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"update")," \u51fd\u6570 (\u81ea\u5b9a\u4e49\u903b\u8f91)."),(0,i.kt)("li",{parentName:"ul"},"Decouple ",(0,i.kt)("inlineCode",{parentName:"li"},"Subject")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"Observer"),":\neach depends on ",(0,i.kt)("inlineCode",{parentName:"li"},"Abstraction")," not ",(0,i.kt)("inlineCode",{parentName:"li"},"Implementation"),"."),(0,i.kt)("li",{parentName:"ul"},"\u6446\u8131\u6301\u7eed\u8f6e\u8be2\u6a21\u5f0f, \u5728\u5408\u9002\u65f6\u673a\u53d1\u5e03\u6d88\u606f.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observer Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Decouple."),(0,i.kt)("li",{parentName:"ul"},"\u8de8\u5c42\u7ea7\u901a\u4fe1."),(0,i.kt)("li",{parentName:"ul"},"Message channel."),(0,i.kt)("li",{parentName:"ul"},"\u5f02\u6b65\u7f16\u7a0b.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class ObserverList {\n  constructor() {\n    this.observerList = [];\n  }\n\n  add(obj) {\n    return this.observerList.push(obj);\n  }\n\n  count() {\n    return this.observerList.length;\n  }\n\n  get(index) {\n    if (index > -1 && index < this.observerList.length) {\n      return this.observerList[index];\n    }\n  }\n\n  indexOf(obj, startIndex) {\n    let i = startIndex;\n\n    while (i < this.observerList.length) {\n      if (this.observerList[i] === obj) {\n        return i;\n      }\n\n      i++;\n    }\n\n    return -1;\n  }\n\n  removeAt(index) {\n    this.observerList.splice(index, 1);\n  }\n}\n\nclass Subject {\n  constructor() {\n    this.observers = new ObserverList();\n  }\n\n  addObserver(observer) {\n    this.observers.add(observer);\n  }\n\n  removeObserver(observer) {\n    this.observers.removeAt(this.observers.indexOf(observer, 0));\n  }\n\n  notify(context) {\n    const observerCount = this.observers.count();\n\n    for (let i = 0; i < observerCount; i++) {\n      this.observers.get(i).update(context);\n    }\n  }\n}\n\nclass Observer {\n  update(context) {}\n}\n")),(0,i.kt)("h3",{id:"pub-sub-pattern"},"Pub-Sub Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u53d1\u5e03-\u8ba2\u9605\u6a21\u5f0f\u662f\u501f\u52a9\u7b2c\u4e09\u65b9\u6765\u5b9e\u73b0\u8c03\u5ea6, \u53d1\u5e03\u8005\u548c\u8ba2\u9605\u8005\u4e4b\u95f4\u4e92\u4e0d\u611f\u77e5."),(0,i.kt)("li",{parentName:"ul"},"\u89c2\u5bdf\u8005\u6a21\u5f0f\u4e2d\u4e3b\u4f53\u548c\u89c2\u5bdf\u8005\u662f\u4e92\u76f8\u611f\u77e5."),(0,i.kt)("li",{parentName:"ul"},"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."),(0,i.kt)("li",{parentName:"ul"},"\u5b58\u5728\u4f9d\u8d56\u8ffd\u8e2a\u56f0\u96be\u53ef\u80fd, \u5bfc\u81f4\u8c03\u8bd5\u56f0\u96be.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Pub-Sub Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Event listener and handler."),(0,i.kt)("li",{parentName:"ul"},"Event Bus in Vue."),(0,i.kt)("li",{parentName:"ul"},"Event Emitter in Node."),(0,i.kt)("li",{parentName:"ul"},"\u5f02\u6b65\u7f16\u7a0b.")))),(0,i.kt)("h4",{id:"pub-sub-pattern-implementation"},"Pub-Sub Pattern Implementation"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class PubSub {\n  constructor() {\n    // Broadcast channel\n    this.topics = {};\n    // Topic identifier\n    this.subUid = -1;\n  }\n\n  publish(topic, args) {\n    if (!this.topics[topic]) {\n      return false;\n    }\n\n    const subscribers = this.topics[topic];\n    let len = subscribers ? subscribers.length : 0;\n\n    while (len--) {\n      subscribers[len].func(topic, args);\n    }\n\n    return this;\n  }\n\n  subscribe(topic, func) {\n    if (!this.topics[topic]) {\n      this.topics[topic] = [];\n    }\n\n    const token = (++this.subUid).toString();\n    this.topics[topic].push({\n      token,\n      func,\n    });\n    return token;\n  }\n\n  unsubscribe(token) {\n    for (const m in this.topics) {\n      if (this.topics[m]) {\n        for (let i = 0, j = this.topics[m].length; i < j; i++) {\n          if (this.topics[m][i].token === token) {\n            this.topics[m].splice(i, 1);\n            return token;\n          }\n        }\n      }\n    }\n\n    return this;\n  }\n}\n\nconst pubsub = new PubSub();\nconst token = pubsub.subscribe('/addFavorite', (topic, args) => {\n  console.log('test', topic, args);\n});\npubsub.publish('/addFavorite', ['test']);\npubsub.unsubscribe(token);\n")),(0,i.kt)("h4",{id:"pub-sub-pattern-usage"},"Pub-Sub Pattern Usage"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"jQuery")," event system:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// Equivalent to subscribe(topicName, callback)\n$(document).on('topicName', function () {\n  // ..perform some behavior\n});\n\n// Equivalent to publish(topicName)\n$(document).trigger('topicName');\n\n// Equivalent to unsubscribe(topicName)\n$(document).off('topicName');\n")),(0,i.kt)("p",null,"Event emitter:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class MicroEvent {\n  bind(event, callback) {\n    this._events = this._events || {};\n    this._events[event] = this._events[event] || [];\n    this._events[event].push(callback);\n  }\n\n  unbind(event, callback) {\n    this._events = this._events || {};\n\n    if (event in this._events === false) {\n      return;\n    }\n\n    this._events[event].splice(this._events[event].indexOf(callback), 1);\n  }\n\n  trigger(event, ...args) {\n    this._events = this._events || {};\n    if (event in this._events === false) {\n      return;\n    }\n\n    for (let i = 0; i < this._events[event].length; i++) {\n      this._events[event][i].apply(this, args);\n    }\n  }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"AJAX")," callback:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5f53\u8bf7\u6c42\u8fd4\u56de, \u5e76\u4e14\u5b9e\u9645\u7684\u6570\u636e\u53ef\u7528\u7684\u65f6\u5019, \u4f1a\u751f\u6210\u4e00\u4e2a\u901a\u77e5."),(0,i.kt)("li",{parentName:"ul"},"\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u4e8b\u4ef6\uff08\u6216\u8005\u8fd4\u56de\u7684\u6570\u636e\uff09, \u90fd\u662f\u7531\u8ba2\u9605\u8005\u81ea\u5df1\u51b3\u5b9a\u7684."),(0,i.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u6709\u591a\u4e2a\u4e0d\u540c\u7684\u8ba2\u9605\u8005, \u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u4f7f\u7528\u8fd4\u56de\u7684\u6570\u636e."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AJAX")," \u5c42: \u552f\u4e00\u7684\u8d23\u4efb - \u8bf7\u6c42\u548c\u8fd4\u56de\u6570\u636e, \u63a5\u7740\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u6240\u6709\u60f3\u8981\u4f7f\u7528\u6570\u636e\u7684\u5730\u65b9.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"(function ($) {\n  // Pre-compile template and \"cache\" it using closure\n  const resultTemplate = _.template($('#resultTemplate').html());\n\n  // Subscribe to the new search tags topic\n  $.subscribe('/search/tags', function (tags) {\n    $('#searchResults').html(`Searched for: ${tags}`);\n  });\n\n  // Subscribe to the new results topic\n  $.subscribe('/search/resultSet', function (results) {\n    $('#searchResults').append(resultTemplate(results));\n  });\n\n  // Submit a search query and publish tags on the /search/tags topic\n  $('#flickrSearch').submit(function (e) {\n    e.preventDefault();\n    const tags = $(this).find('#query').val();\n\n    if (!tags) {\n      return;\n    }\n\n    $.publish('/search/tags', [$.trim(tags)]);\n  });\n\n  // Subscribe to new tags being published and perform\n  // a search query using them. Once data has returned\n  // publish this data for the rest of the application\n  // to consume\n\n  $.subscribe('/search/tags', function (tags) {\n    // Ajax Request\n    $.getJSON(\n      'http://api.flickr.com/services/feeds/',\n      {\n        tags,\n        tagMode: 'any',\n        format: 'json',\n      },\n\n      function (data) {\n        if (!data.items.length) {\n          return;\n        }\n\n        $.publish('/search/resultSet', data.items);\n      }\n    );\n  });\n})();\n")),(0,i.kt)("h3",{id:"state-pattern"},"State Pattern"),(0,i.kt)("p",null,"\u4e00\u4e2a State \u5bf9\u8c61\u5c01\u88c5\u4e00\u4e2a\u4e0e\u72b6\u6001\u76f8\u5173\u7684\u884c\u4e3a,\n\u8fd0\u7528\u6709\u9650\u72b6\u6001\u673a (Finite State Machines)\n\u6839\u636e Object State \u6539\u53d8 Object Behavior,\n",(0,i.kt)("inlineCode",{parentName:"p"},"object")," set ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," as its ",(0,i.kt)("strong",{parentName:"p"},"member"),",\n",(0,i.kt)("inlineCode",{parentName:"p"},"state")," set ",(0,i.kt)("inlineCode",{parentName:"p"},"object")," as its ",(0,i.kt)("strong",{parentName:"p"},"method parameter"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6bcf\u4e00\u79cd\u72b6\u6001\u548c\u5b83\u5bf9\u5e94\u7684\u884c\u4e3a\u4e4b\u95f4\u7684\u5173\u7cfb\u5c40\u90e8\u5316:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u72b6\u6001\u5177\u4f53\u884c\u4e3a\u5c01\u88c5\u5728\u72b6\u6001\u7c7b\u4e2d, \u4fbf\u4e8e\u9605\u8bfb\u548c\u7ba1\u7406\u4ee3\u7801."),(0,i.kt)("li",{parentName:"ul"},"\u72b6\u6001\u5207\u6362\u89c4\u5219\u5206\u5e03\u5728\u72b6\u6001\u7c7b\u4e2d, \u6709\u6548\u5730\u6d88\u9664\u4e86\u5927\u91cf\u6761\u4ef6\u5206\u652f\u8bed\u53e5."))),(0,i.kt)("li",{parentName:"ul"},"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Networking protocol stack."),(0,i.kt)("li",{parentName:"ul"},"Game player logic.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Switch {\n  constructor() {\n    this.state = new OffState();\n  }\n\n  on() {\n    this.state.on(this);\n  }\n\n  off() {\n    this.state.off(this);\n  }\n}\n\nclass State {\n  constructor() {\n    if (this.constructor === State) throw new Error('abstract!');\n  }\n\n  on(sw) {\n    console.log('Light is already on.');\n  }\n\n  off(sw) {\n    console.log('Light is already off.');\n  }\n}\n\nclass OnState extends State {\n  constructor() {\n    super();\n    console.log('Light turned on.');\n  }\n\n  off(sw) {\n    console.log('Turning light off...');\n    sw.state = new OffState();\n  }\n}\n\nclass OffState extends State {\n  constructor() {\n    super();\n    console.log('Light turned off.');\n  }\n\n  on(sw) {\n    console.log('Turning light on...');\n    sw.state = new OnState();\n  }\n}\n\nconst button = new Switch();\nbutton.on();\nbutton.off();\n")),(0,i.kt)("h3",{id:"strategy-pattern"},"Strategy Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6539\u53d8\u5bf9\u8c61\u7684\u5185\u6838/\u7b97\u6cd5, \u4e00\u4e2a Strategy \u5bf9\u8c61\u5c01\u88c5\u4e00\u4e2a\u7b97\u6cd5, \u76f8\u4e92\u53ef\u4ee5\u66ff\u6362."),(0,i.kt)("li",{parentName:"ul"},"\u5229\u7528\u7ec4\u5408 + \u59d4\u6258 + \u591a\u6001, \u907f\u514d\u590d\u6742\u7684\u5206\u652f\u8bed\u53e5."),(0,i.kt)("li",{parentName:"ul"},"\u5c06\u5355\u4e2a\u7b56\u7565\u8fdb\u884c\u62bd\u8c61\u5c01\u88c5:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u89e3\u8026."),(0,i.kt)("li",{parentName:"ul"},"\u590d\u7528."))),(0,i.kt)("li",{parentName:"ul"},"JS \u4e2d, \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u4e0e\u8fd4\u56de\u503c\u65f6, \u53ef\u4ee5\u5b9e\u73b0\u9690\u5f0f\u7684\u7b56\u7565\u6a21\u5f0f:\n\u51fd\u6570\u4f5c\u4e3a\u7b2c\u4e00\u516c\u6c11, \u65e0\u9700\u5c06 Strategy \u5c01\u88c5\u6210\u7b56\u7565\u5bf9\u8c61, \u53ef\u4ee5\u76f4\u63a5\u4f20\u9012\u6216\u8fd4\u56de\u7b56\u7565\u51fd\u6570.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Strategy Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"\u8868\u5355\u9a8c\u8bc1 (Validator)."),(0,i.kt)("li",{parentName:"ul"},"\u52a8\u753b\u7b56\u7565."),(0,i.kt)("li",{parentName:"ul"},"\u5b58\u5728\u5927\u91cf if-else \u573a\u666f."),(0,i.kt)("li",{parentName:"ul"},"\u91cd\u6784\u4ee3\u7801.")))),(0,i.kt)("p",null,"Change strategy:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const OutputFormat = Object.freeze({\n  markdown: 0,\n  html: 1,\n});\n\nclass ListStrategy {\n  start(buffer) {}\n  end(buffer) {}\n  addListItem(buffer, item) {}\n}\n\nclass MarkdownListStrategy extends ListStrategy {\n  addListItem(buffer, item) {\n    buffer.push(` * ${item}`);\n  }\n}\n\nclass HtmlListStrategy extends ListStrategy {\n  start(buffer) {\n    buffer.push('<ul>');\n  }\n\n  end(buffer) {\n    buffer.push('</ul>');\n  }\n\n  addListItem(buffer, item) {\n    buffer.push(`  <li>${item}</li>`);\n  }\n}\n\nclass TextProcessor {\n  constructor(outputFormat) {\n    this.buffer = [];\n    this.setOutputFormat(outputFormat);\n  }\n\n  setOutputFormat(format) {\n    switch (format) {\n      case OutputFormat.markdown:\n        this.listStrategy = new MarkdownListStrategy();\n        break;\n      case OutputFormat.html:\n        this.listStrategy = new HtmlListStrategy();\n        break;\n      default:\n        throw new Error('Unsupported output format!');\n    }\n  }\n\n  appendList(items) {\n    this.listStrategy.start(this.buffer);\n    for (const item of items) this.listStrategy.addListItem(this.buffer, item);\n    this.listStrategy.end(this.buffer);\n  }\n\n  clear() {\n    this.buffer = [];\n  }\n\n  toString() {\n    return this.buffer.join('\\n');\n  }\n}\n\nconst tp = new TextProcessor();\ntp.setOutputFormat(OutputFormat.markdown);\ntp.appendList(['one', 'two', 'three']);\nconsole.log(tp.toString());\n\ntp.clear();\ntp.setOutputFormat(OutputFormat.html);\ntp.appendList(['one', 'two', 'three']);\nconsole.log(tp.toString());\n")),(0,i.kt)("p",null,"Remove ",(0,i.kt)("inlineCode",{parentName:"p"},"if-else")," statements:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// \u8fdd\u53cd\u5f00\u653e\u5c01\u95ed\u539f\u5219\nconst activity = (type, price) => {\n  if (type === 'pre') {\n    return price * 0.95;\n  } else if (type === 'onSale') {\n    return price * 0.9;\n  } else if (type === 'back') {\n    return price * 0.85;\n  } else if (type === 'limit') {\n    return price * 0.8;\n  }\n};\n\n// \u5229\u7528 Strategy Pattern \u8fdb\u884c\u91cd\u6784\nconst activity = new Map([\n  ['pre', price => price * 0.95],\n  ['onSale', price => price * 0.9],\n  ['back', price => price * 0.85],\n  ['limit', price => price * 0.8],\n]);\n\nconst getActivityPrice = (type, price) => activity.get(type)(price);\n\n// \u65b0\u589e\u65b0\u624b\u6d3b\u52a8\nactivity.set('newcomer', price => price * 0.7);\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"module.exports = (function () {\n  const manager = {};\n\n  // command to be encapsulated\n  manager.isNull = function (nu) {\n    return toString.apply(nu) === '[object Null]';\n  };\n  manager.isArray = function (arr) {\n    return toString.apply(arr) === '[object Array]';\n  };\n  manager.isString = function (str) {\n    return toString.apply(str) === '[object String]';\n  };\n\n  // public api\n  function execute(command, ...args) {\n    return manager[command] && manager[command](...args);\n  }\n\n  function run(command) {\n    return manager[command] && manager[command]();\n  }\n\n  return {\n    execute,\n    run,\n  };\n})();\n")),(0,i.kt)("p",null,"Form validator:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const errorMsg = rules[rule](element, limits);\n")),(0,i.kt)("h3",{id:"template-method-pattern"},"Template Method Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Abstract superclass defines the skeleton of an operation\nin terms of a number of high-level steps."),(0,i.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u5c01\u88c5\u53d8\u5316\u63d0\u9ad8\u7cfb\u7edf\u6269\u5c55\u6027."),(0,i.kt)("li",{parentName:"ul"},"\u7b26\u5408\u5f00\u653e\u5c01\u95ed\u539f\u5219."),(0,i.kt)("li",{parentName:"ul"},"\u5728 JS \u4e2d, \u9ad8\u9636\u51fd\u6570\u53ef\u4ee5\u9690\u5f0f\u5730\u5b9e\u73b0\u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f.")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Template Method Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"APIs and SDKs."),(0,i.kt)("li",{parentName:"ul"},"Plugins and Extensions: VSCode extension, Vue plugin."),(0,i.kt)("li",{parentName:"ul"},"Hooks and Callbacks: React/Vue lifecycles, Webpack hooks."),(0,i.kt)("li",{parentName:"ul"},"Software Architecture.")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Game {\n  constructor(numberOfPlayers) {\n    this.numberOfPlayers = numberOfPlayers;\n    this.currentPlayer = 0;\n  }\n\n  run() {\n    this.start();\n    while (!this.haveWinner) {\n      this.takeTurn();\n    }\n    console.log(`Player ${this.winningPlayer} wins.`);\n  }\n\n  start() {\n    throw new Error('Unimplemented `start` method!');\n  }\n\n  takeTurn() {\n    throw new Error('Unimplemented `takeTurn` method!');\n  }\n\n  get haveWinner() {\n    return this.haveWinner;\n  }\n\n  get winningPlayer() {\n    return this.winningPlayer;\n  }\n}\n\nclass Chess extends Game {\n  constructor() {\n    super(2);\n    this.maxTurns = 10;\n    this.turn = 1;\n  }\n\n  start() {\n    console.log(\n      `Starting a game of chess with ${this.numberOfPlayers} players.`\n    );\n  }\n\n  get haveWinner() {\n    return this.turn === this.maxTurns;\n  }\n\n  takeTurn() {\n    console.log(`Turn ${this.turn++} taken by player ${this.currentPlayer}.`);\n    this.currentPlayer = (this.currentPlayer + 1) % this.numberOfPlayers;\n  }\n\n  get winningPlayer() {\n    return this.currentPlayer;\n  }\n}\n\nconst chess = new Chess();\nchess.run();\n")),(0,i.kt)("h3",{id:"visitor-pattern"},"Visitor Pattern"),(0,i.kt)("p",null,"Separating an algorithm from an object structure on which it operates."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Visitor Use Case")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"Tree."),(0,i.kt)("li",{parentName:"ul"},"Compiler (Abstract Syntax Tree).")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class NumberExpression {\n  constructor(value) {\n    this.value = value;\n  }\n\n  print(buffer) {\n    buffer.push(this.value.toString());\n  }\n}\n\nclass AdditionExpression {\n  constructor(left, right) {\n    this.left = left;\n    this.right = right;\n  }\n\n  print(buffer) {\n    buffer.push('(');\n    this.left.print(buffer);\n    buffer.push('+');\n    this.right.print(buffer);\n    buffer.push(')');\n  }\n}\n\nconst e = new AdditionExpression(\n  new NumberExpression(5),\n  new AdditionExpression(new NumberExpression(1), new NumberExpression(9))\n);\nconst buffer = [];\ne.print(buffer);\n")),(0,i.kt)("h3",{id:"ioc-and-di-pattern"},"IoC and DI Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"IoC (Inversion of Control) \u63a7\u5236\u53cd\u8f6c\u6a21\u5f0f: \u5c06\u7ec4\u4ef6\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u4ece\u7a0b\u5e8f\u5185\u90e8\u63d0\u5230\u5916\u90e8\u6765\u7ba1\u7406."),(0,i.kt)("li",{parentName:"ul"},"DI (Dependency Injection) \u4f9d\u8d56\u6ce8\u5165\u6a21\u5f0f: \u5c06\u7ec4\u4ef6\u7684\u4f9d\u8d56\u901a\u8fc7\u5916\u90e8\u4ee5\u53c2\u6570\u6216\u5176\u4ed6\u5f62\u5f0f\u6ce8\u5165.")),(0,i.kt)("p",null,"A \u4f9d\u8d56 B, \u82e5\u5728 A \u4e2d\u5b9e\u4f8b\u5316 B,\n\u5219\u4f1a\u5f62\u6210 A \u4e0e B \u95f4\u7684\u9ad8\u5ea6\u8026\u5408,\n\u4f7f\u5f97 A \u53ef\u6d4b\u8bd5\u6027\u4e0e\u53ef\u7ef4\u62a4\u6027\u53d8\u5dee."),(0,i.kt)("p",null,"\u5c06 A \u5bf9 B \u7684\u63a7\u5236\u6743\u62bd\u79bb\u51fa\u6765,\n\u628a\u63a7\u5236\u6743\u53cd\u8f6c\u7ed9\u7b2c\u4e09\u65b9 (IoC Container),\n\u5b9e\u73b0\u63a7\u5236\u53cd\u8f6c (IoC)."),(0,i.kt)("p",null,"IoC Container \u5c06 B \u5b9e\u4f8b\u5316\u540e,\n\u901a\u8fc7\u6784\u9020\u51fd\u6570/\u63a5\u53e3\u65b9\u6cd5/\u8bbe\u7f6e\u5c5e\u6027/\u5de5\u5382\u6a21\u5f0f\u7b49\u65b9\u6cd5\u6ce8\u5165 A \u4e2d,\n\u5b9e\u73b0\u4f9d\u8d56\u6ce8\u5165 (DI)."),(0,i.kt)("h4",{id:"inversion-of-control"},"Inversion of Control"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"class Component {\n  // \u6784\u9020\u51fd\u6570\u6ce8\u5165.\n  constructor(dep) {\n    this.dep = dep;\n  }\n\n  // \u63a5\u53e3\u65b9\u6cd5\u6ce8\u5165.\n  run(context, options = {}) {\n    const dep1 = context.getDep1();\n    const dep2 = context.getDep2();\n    dep1.run();\n    dep2.run();\n  }\n\n  // \u8bbe\u7f6e\u5c5e\u6027\u6ce8\u5165.\n  getDep(dep) {\n    this.dep = dep;\n  }\n\n  // \u5de5\u5382\u6a21\u5f0f\u6ce8\u5165.\n  static createComponent(dep) {\n    return new Component(dep);\n  }\n\n  action() {\n    this.dep.run();\n  }\n}\n\n// IoC.\nconst s1 = new Service('s1');\nconst s2 = Container.getService('s2');\nconst s3 = Context.getDep('s3');\nconst s4 = Context.getInstance();\n\n// DI.\nconst c1 = new Component(s1);\nc1.action(); // s1 run.\nc1.getDep(s2);\nc1.action(); // s2 run.\nconst c2 = Component.createComponent(s3);\nc2.action(); // s3 run.\nc2.run(s4); // s4 run.\n")),(0,i.kt)("h4",{id:"depends-on-abstraction"},"Depends on Abstraction"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"interface Database {\n  query: () => void;\n}\n\nclass DbMysql extends Database {\n  public query() {\n    console.log('Querying by MySQL');\n  }\n}\n\nclass Controller {\n  private db: Database;\n\n  public constructor(db: Database) {\n    this.db = db;\n  }\n\n  public action() {\n    this.db.query();\n  }\n}\n\nconst db = new DbMysql();\nconst c = new Controller(db);\nc.action();\n")),(0,i.kt)("h4",{id:"injection-container"},"Injection Container"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import * as React from 'react';\nimport type { IProvider } from './providers';\n\nclass Injector {\n  private static container = new Map<string, any>();\n\n  static resolve<T>(target: Type<T>): T {\n    if (Injector.container.has(target.name)) {\n      return Injector.container.get(target.name);\n    }\n\n    const tokens = Reflect.getMetadata('design:types', target) || [];\n    const injections = tokens.map((token: Type<any>): any =>\n      Injector.resolve(token)\n    );\n    // eslint-disable-next-line new-cap\n    const instance = new target(...injections);\n    Injector.container.set(target.name, instance);\n    return instance;\n  }\n}\n\nexport interface IProvider<T> {\n  provide(): T;\n}\n\n@injectable()\nexport class NameProvider implements IProvider<string> {\n  provide() {\n    return 'World';\n  }\n}\n\nexport class Hello extends React.Component {\n  private readonly nameProvider: IProvider<string>;\n\n  render() {\n    return <h1>Hello {this.nameProvider.provide()}!</h1>;\n  }\n}\n")),(0,i.kt)("h3",{id:"mixin-pattern"},"Mixin Pattern"),(0,i.kt)("p",null,"\u5c06\u591a\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u6df7\u5165\u540c\u4e00\u4e2a\u5bf9\u8c61, \u8fbe\u5230\u7ee7\u627f/\u6269\u5c55/\u7ec4\u5408\u7684\u6548\u679c.\nReact and Vue drop ",(0,i.kt)("inlineCode",{parentName:"p"},"Mixin"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Prototype pollution"),(0,i.kt)("li",{parentName:"ul"},"Dependency uncertainty.")),(0,i.kt)("h4",{id:"prototype-mixin-pattern"},"Prototype Mixin Pattern"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// Extend an existing object with a method from another\nfunction mixin(...args) {\n  const receivingClass = args[0];\n  const givingClass = args[1];\n\n  // Mixin provide certain methods\n  if (args[2]) {\n    for (let i = 2, len = args.length; i < len; i++) {\n      receivingClass.prototype[args[i]] = givingClass.prototype[args[i]];\n    }\n  } else {\n    // Mixin provide obj\n    for (const methodName in givingClass.prototype) {\n      if (!receivingClass.prototype[methodName]) {\n        receivingClass.prototype[methodName] =\n          givingClass.prototype[methodName];\n      }\n    }\n  }\n}\n")),(0,i.kt)("h4",{id:"class-mixin-pattern"},"Class Mixin Pattern"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const MoveMixin = superclass =>\n  class extends superclass {\n    moveUp() {\n      console.log('move up');\n    }\n\n    moveDown() {\n      console.log('move down');\n    }\n\n    stop() {\n      console.log('stop! in the name of love!');\n    }\n  };\n\nclass CarAnimator {\n  moveLeft() {\n    console.log('move left');\n  }\n}\n\nclass PersonAnimator {\n  moveRandomly() {\n    console.log('move randomly');\n  }\n}\n\nclass Animator extends MoveMixin(CarAnimator) {}\n\nconst animator = new Animator();\nanimator.moveLeft();\nanimator.moveDown();\nanimator.stop();\n// Outputs:\n// move left\n// move down\n// stop! in the name of love!\n")),(0,i.kt)("h2",{id:"programming-paradigms"},"Programming Paradigms"),(0,i.kt)("p",null,"Each programming language realizes one or more paradigms.\nEach paradigm is defined by a set of programming concepts."),(0,i.kt)("h3",{id:"taxonomy-of-paradigms"},"Taxonomy of Paradigms"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Taxonomy of Programming Paradigms",src:t(1196).Z,width:"2786",height:"1480"})),(0,i.kt)("p",null,"Nondeterminism is important for real-world interaction.\nNamed state is important for modularity."),(0,i.kt)("h4",{id:"observable-nondeterminism"},"Observable Nondeterminism"),(0,i.kt)("p",null,"During the execution, this choice is made by\na part of the run-time system called the scheduler.\nThe nondeterminism is observable\nif a user can see ",(0,i.kt)("strong",{parentName:"p"},"different results")," from executions\nthat start at the ",(0,i.kt)("strong",{parentName:"p"},"same internal configuration"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"concurrency or race condition (timing effects)"),(0,i.kt)("li",{parentName:"ul"},"shared-state concurrency or message-passing concurrency"),(0,i.kt)("li",{parentName:"ul"},"concurrent programming language e.g Java")),(0,i.kt)("h4",{id:"named-state"},"Named State"),(0,i.kt)("p",null,"State is the ability to remember information (a sequence of values in time).\nDistinguish three axes of expressiveness, depending on whether the state is:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Unnamed or named."),(0,i.kt)("li",{parentName:"ul"},"Deterministic or nondeterministic."),(0,i.kt)("li",{parentName:"ul"},"Sequential or concurrent."),(0,i.kt)("li",{parentName:"ul"},"Named, nondeterministic and concurrent paradigm\nas the most expressiveness of state."),(0,i.kt)("li",{parentName:"ul"},"Named state for updatable memory (mutable state) and modularity.")),(0,i.kt)("p",null,"The least expressive combination is functional programming\n(threaded state: unnamed, deterministic, sequential).\nAdding concurrency gives declarative concurrent programming\n(synchronous cells: unnamed, deterministic, concurrent).\nAdding nondeterministic choice gives concurrent logic programming\n(stream mergers: unnamed, nondeterministic, concurrent).\nAdding ports or cells, gives message passing or shared state\n(named, nondeterministic, concurrent)."),(0,i.kt)("h3",{id:"functional-programming"},"Functional Programming"),(0,i.kt)("p",null,"Based on the concept of first-class function or closure,\nwhich makes it equivalent to the \u03bb-calculus which is ",(0,i.kt)("inlineCode",{parentName:"p"},"Turing complete"),"."),(0,i.kt)("h2",{id:"framework-paradigms"},"Framework Paradigms"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"full-featured frameworks vs composing micro-libs"),(0,i.kt)("li",{parentName:"ul"},"JSX vs templates")),(0,i.kt)("p",null,"Evan You on Vue.js: ",(0,i.kt)("strong",{parentName:"p"},"Seeking the Balance in Framework Design"),"\non ",(0,i.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=ANtSWq-zI0s"},"JSConf.Asia 2019"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Functional vs Imperative."),(0,i.kt)("li",{parentName:"ul"},"Immutable vs Mutable."),(0,i.kt)("li",{parentName:"ul"},"Referential Equality Testing vs Change Tracking.")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u6253\u7834\u6846\u67b6\u7684\u8303\u5f0f\u4e4b\u4e89, \u5176\u5b9e\u662f\u6539\u53d8\u601d\u8def. \u4ece\u601d\u8003\u4e0d\u540c\u8303\u5f0f\u4e4b\u95f4\u7684\u7ade\u4e89\u5173\u7cfb, \u8f6c\u53d8\u6210\u601d\u8003\u591a\u4e2a\u8303\u5f0f\u4e4b\u95f4\u7684\u534f\u540c\u5173\u7cfb.\nUseRef in React, Composition in Vue")),(0,i.kt)("h3",{id:"third-party-libraries-usage"},"Third-party Libraries Usage"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Look for Libraries that Have Accessibility Built in."),(0,i.kt)("li",{parentName:"ul"},"Limit the Number of Third-party Libraries Use."),(0,i.kt)("li",{parentName:"ul"},"Wrap Third-party Dependencies:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import { DatePicker as LibraryXDatePicker } from 'LibraryX';\n\nconst DatePicker = props => {\n  return <LibraryXDatePicker {...props} />;\n};\n\nexport default DatePicker;\n")),(0,i.kt)("h3",{id:"framework-paradigms-comparison"},"Framework Paradigms Comparison"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u521d\u59cb\u6e32\u67d3: Virtual DOM > \u810f\u68c0\u67e5 >= \u4f9d\u8d56\u6536\u96c6."),(0,i.kt)("li",{parentName:"ul"},"\u5c0f\u91cf\u6570\u636e\u66f4\u65b0: \u4f9d\u8d56\u6536\u96c6 >> Virtual DOM + \u4f18\u5316 > \u810f\u68c0\u67e5\uff08\u65e0\u6cd5\u4f18\u5316\uff09 > Virtual DOM \u65e0\u4f18\u5316."),(0,i.kt)("li",{parentName:"ul"},"\u5927\u91cf\u6570\u636e\u66f4\u65b0: \u810f\u68c0\u67e5 + \u4f18\u5316 >= \u4f9d\u8d56\u6536\u96c6 + \u4f18\u5316 > Virtual DOM\uff08\u65e0\u6cd5/\u65e0\u9700\u4f18\u5316\uff09>> MVVM \u65e0\u4f18\u5316."),(0,i.kt)("li",{parentName:"ul"},"Angular: \u810f\u68c0\u67e5, React: Virtual DOM, Vue: Watch.")),(0,i.kt)("h3",{id:"mvc-pattern"},"MVC Pattern"),(0,i.kt)("p",null,"\u5728 MVC \u4e2d, \u89c6\u56fe\u4f4d\u4e8e\u6211\u4eec\u67b6\u6784\u7684\u9876\u90e8, \u5176\u80cc\u540e\u662f\u63a7\u5236\u5668.\n\u6a21\u578b\u5728\u63a7\u5236\u5668\u540e\u9762, \u800c\u56e0\u6b64\u6211\u4eec\u7684\u89c6\u56fe\u4e86\u89e3\u5f97\u5230\u6211\u4eec\u7684\u63a7\u5236\u5668, \u800c\u63a7\u5236\u5668\u4e86\u89e3\u5f97\u5230\u6a21\u578b.\n\u8fd9\u91cc, \u6211\u4eec\u7684\u89c6\u56fe\u6709\u5bf9\u6a21\u578b\u7684\u76f4\u63a5\u8bbf\u95ee.\n\u7136\u800c\u5c06\u6574\u4e2a\u6a21\u578b\u5b8c\u5168\u66b4\u9732\u7ed9\u89c6\u56fe\u53ef\u80fd\u4f1a\u6709\u5b89\u5168\u548c\u6027\u80fd\u635f\u5931,\n\u8fd9\u53d6\u51b3\u4e8e\u6211\u4eec\u5e94\u7528\u7a0b\u5e8f\u7684\u590d\u6742\u6027.\nMVVM \u5219\u5c1d\u8bd5\u53bb\u907f\u514d\u8fd9\u4e9b\u95ee\u9898."),(0,i.kt)("p",null,"\u5728 MVP \u4e2d, \u63a7\u5236\u5668\u7684\u89d2\u8272\u88ab\u4ee3\u7406\u5668\u6240\u53d6\u4ee3, \u4ee3\u7406\u5668\u548c\u89c6\u56fe\u5904\u4e8e\u540c\u6837\u7684\u5730\u4f4d,\n\u89c6\u56fe\u548c\u6a21\u578b\u7684\u4e8b\u4ef6\u90fd\u88ab\u5b83\u4fa6\u542c\u7740\u5e76\u4e14\u63a5\u53d7\u5b83\u7684\u8c03\u89e3.\n\u4e0d\u540c\u4e8e MVVM, \u6ca1\u6709\u4e00\u4e2a\u5c06\u89c6\u56fe\u7ed1\u5b9a\u5230\u89c6\u56fe\u6a21\u578b\u7684\u673a\u5236, \u56e0\u6b64\u6211\u4eec\u8f6c\u800c\u4f9d\u8d56\u4e8e\u6bcf\u4e00\u4e2a\u89c6\u56fe\u90fd\u5b9e\u73b0\u4e00\u4e2a\u5141\u8bb8\u4ee3\u7406\u5668\u540c\u89c6\u56fe\u53bb\u4ea4\u4e92\u7684\u63a5\u53e3."),(0,i.kt)("p",null,"MVVM \u8fdb\u4e00\u6b65\u5141\u8bb8\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u6a21\u578b\u7684\u7279\u5b9a\u89c6\u56fe\u5b50\u96c6, \u5305\u542b\u4e86\u72b6\u6001\u548c\u903b\u8f91\u4fe1\u606f,\n\u907f\u514d\u4e86\u5c06\u6a21\u578b\u5b8c\u5168\u66b4\u9732\u7ed9\u89c6\u56fe\u7684\u5fc5\u8981.\n\u4e0d\u540c\u4e8e MVP \u7684\u4ee3\u7406\u5668, \u89c6\u56fe\u6a21\u578b\u5e76\u4e0d\u9700\u8981\u53bb\u5f15\u7528\u4e00\u4e2a\u89c6\u56fe.\n\u89c6\u56fe\u53ef\u4ee5\u7ed1\u5b9a\u5230\u89c6\u56fe\u6a21\u578b\u7684\u5c5e\u6027\u4e0a\u9762, \u89c6\u56fe\u6a21\u578b\u5219\u53bb\u5c06\u5305\u542b\u5728\u6a21\u578b\u4e2d\u7684\u6570\u636e\u66b4\u9732\u7ed9\u89c6\u56fe.\n\u50cf\u6211\u4eec\u6240\u63d0\u5230\u8fc7\u7684, \u5bf9\u89c6\u56fe\u7684\u62bd\u8c61\u610f\u5473\u7740\u5176\u80cc\u540e\u7684\u4ee3\u7801\u9700\u8981\u8f83\u5c11\u7684\u903b\u8f91."),(0,i.kt)("h4",{id:"controller"},"Controller"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5904\u7406\u8bf7\u6c42\u7684\u53c2\u6570."),(0,i.kt)("li",{parentName:"ul"},"\u6e32\u67d3\u548c\u91cd\u5b9a\u5411."),(0,i.kt)("li",{parentName:"ul"},"\u9009\u62e9 Model \u548c Service."),(0,i.kt)("li",{parentName:"ul"},"\u5904\u7406 Session \u548c Cookies.")),(0,i.kt)("h3",{id:"mvvm-pattern"},"MVVM Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"View")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"ViewModel")," communicate using data-bindings and events."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ViewModel")," can expose ",(0,i.kt)("inlineCode",{parentName:"li"},"Model")," attributes for data-binding."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ViewModel")," can contain interfaces\nfor fetching and manipulating properties exposed in ",(0,i.kt)("inlineCode",{parentName:"li"},"View"),".")),(0,i.kt)("h3",{id:"aop-pattern"},"AOP Pattern"),(0,i.kt)("p",null,"AOP (Aspect Oriented Programming)\n\u628a\u901a\u7528\u903b\u8f91\u62bd\u79bb\u51fa\u6765,\n\u901a\u8fc7\u5207\u9762\u7684\u65b9\u5f0f\u6dfb\u52a0\u5230\u67d0\u4e2a\u5730\u65b9,\n\u53ef\u4ee5\u590d\u7528\u548c\u52a8\u6001\u589e\u5220\u5207\u9762\u903b\u8f91:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Chain of responsibility pattern."),(0,i.kt)("li",{parentName:"ul"},"Decorator pattern."),(0,i.kt)("li",{parentName:"ul"},"Proxy pattern.")),(0,i.kt)("p",null,"Nest.js:\nMiddleware, Guard, Interceptor, Pipe, ExceptionFilter \u901a\u8fc7 AOP \u601d\u60f3,\n\u7075\u6d3b\u5730\u4f5c\u7528\u5728\u67d0\u4e2a\u8def\u7531\u6216\u8005\u5168\u90e8\u8def\u7531."),(0,i.kt)("p",null,"Middleware \u5728\u6700\u5916\u5c42, \u5230\u8fbe\u67d0\u4e2a\u8def\u7531\u4e4b\u540e,\n\u5148\u8c03\u7528 Guard, Guard \u7528\u4e8e\u5224\u65ad\u8def\u7531\u6709\u6ca1\u6709\u6743\u9650\u8bbf\u95ee,\n\u518d\u8c03\u7528 Interceptor, \u5bf9 Controller \u524d\u540e\u6269\u5c55\u4e00\u4e9b\u903b\u8f91,\n\u5728\u5230\u8fbe\u76ee\u6807 Controller \u4e4b\u524d, \u4f1a\u8c03\u7528 Pipe \u6765\u5bf9\u53c2\u6570\u505a\u9a8c\u8bc1\u548c\u8f6c\u6362.\n\u6240\u6709\u7684 HttpException \u7684\u5f02\u5e38\u90fd\u4f1a\u88ab ExceptionFilter \u5904\u7406, \u8fd4\u56de\u4e0d\u540c\u7684\u54cd\u5e94."),(0,i.kt)("p",null,"Nest.js \u901a\u8fc7 AOP \u7684\u67b6\u6784\u65b9\u5f0f, \u5b9e\u73b0\u4e86\u677e\u8026\u5408, \u6613\u4e8e\u7ef4\u62a4\u4e0e\u6269\u5c55\u7684\u67b6\u6784."),(0,i.kt)("h3",{id:"jquery-pattern"},"jQuery Pattern"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Adapter pattern:\nadapted ",(0,i.kt)("inlineCode",{parentName:"li"},"$.css()")," API."),(0,i.kt)("li",{parentName:"ul"},"Facade pattern:\nsimple ",(0,i.kt)("inlineCode",{parentName:"li"},"$.get()"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"$.post()")," API over complicated ",(0,i.kt)("inlineCode",{parentName:"li"},"$.ajax()")," API."),(0,i.kt)("li",{parentName:"ul"},"Pub-Sub pattern:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"$.on()"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"$.off()"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"$.trigger()")," event system."),(0,i.kt)("li",{parentName:"ul"},"AJAX callback."))),(0,i.kt)("li",{parentName:"ul"},"Iterator pattern:\niterable ",(0,i.kt)("inlineCode",{parentName:"li"},"$.each()")," API."),(0,i.kt)("li",{parentName:"ul"},"Proxy pattern:\n",(0,i.kt)("inlineCode",{parentName:"li"},"$.proxy()")," context binding."),(0,i.kt)("li",{parentName:"ul"},"Builder pattern:\n",(0,i.kt)("inlineCode",{parentName:"li"},"$.text()"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"$.appendTo()")," DOM builder."),(0,i.kt)("li",{parentName:"ul"},"Dependency injection pattern:\ncustom plugin system.")),(0,i.kt)("h3",{id:"framework-paradigms-reference"},"Framework Paradigms Reference"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Even You presentation on ",(0,i.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=ANtSWq-zI0s"},"JSConf Asia 2019"),"."),(0,i.kt)("li",{parentName:"ul"},"Framework paradigms ",(0,i.kt)("a",{parentName:"li",href:"https://mp.weixin.qq.com/s/mZ7KuFjyCWNCAq7HnXg96A"},"guide"),".")),(0,i.kt)("h2",{id:"domain-driven-design"},"Domain Driven Design"),(0,i.kt)("h3",{id:"interface-layer"},"Interface Layer"),(0,i.kt)("p",null,"\u4e3b\u8981\u8d1f\u8d23\u4e0e\u5916\u90e8\u7cfb\u7edf\u8fdb\u884c\u4ea4\u4e92\u4e0e\u901a\u4fe1:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u505a\u53c2\u6570\u7684\u57fa\u672c\u5904\u7406, \u6bd4\u5982\u5165\u53c2\u6821\u9a8c, \u56de\u53c2 DTO \u8f6c\u6362 (\u62c6\u5305, \u7ec4\u5305)"),(0,i.kt)("li",{parentName:"ul"},"Dubbo Services"),(0,i.kt)("li",{parentName:"ul"},"RESTful API")),(0,i.kt)("h3",{id:"application-layer"},"Application Layer"),(0,i.kt)("p",null,"Application Service \u5c42\u53ea\u662f\u5f88\u8584\u7684\u4e00\u5c42,\n\u5b83\u5185\u90e8\u5e76\u4e0d\u5b9e\u73b0\u4efb\u4f55\u903b\u8f91,\n\u53ea\u662f\u8d1f\u8d23\u534f\u8c03\u548c\u8f6c\u53d1 (\u6d41\u7a0b\u7f16\u6392),\n\u59d4\u6d3e\u4e1a\u52a1\u52a8\u4f5c\u7ed9\u66f4\u4e0b\u5c42\u7684\u9886\u57df\u5c42."),(0,i.kt)("h3",{id:"domain-layer"},"Domain Layer"),(0,i.kt)("p",null,"Domain \u5c42\u662f\u9886\u57df\u6a21\u578b\u7cfb\u7edf\u7684\u6838\u5fc3,\n\u8d1f\u8d23\u7ef4\u62a4\u9762\u5411\u5bf9\u8c61\u7684\u9886\u57df\u6a21\u578b,\n\u51e0\u4e4e\u5168\u90e8\u7684\u4e1a\u52a1\u903b\u8f91\u90fd\u4f1a\u5728\u8fd9\u4e00\u5c42\u5b9e\u73b0.\n\u5185\u90e8\u4e3b\u8981\u5305\u542b Entity, ValueObject, Domain Event, Repository."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Controller")," will receive the user\u2019s requests and reply with a structured response."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Service")," will process the user\u2019s request,\nincluding validations and third-party reporting,\nand will receive data using the repository layer as a source of truth."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Repository")," will function as the application\u2019s source of truth,\nwill include the DB and external services queries.")),(0,i.kt)("h3",{id:"infrastructure-layer"},"Infrastructure Layer"),(0,i.kt)("p",null,"\u4e3b\u8981\u4e3a Interface, Application \u548c Domain \u4e09\u5c42\u63d0\u4f9b\u652f\u6491:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5c01\u88c5\u57fa\u7840\u8d44\u6e90\u670d\u52a1, \u901a\u8fc7\u4f9d\u8d56\u6ce8\u5165\u65b9\u5f0f\u89e3\u8026."),(0,i.kt)("li",{parentName:"ul"},"Third-party tools, Message Queue, File, Cache, Database, Search etc."),(0,i.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u4ed3\u50a8\u63a5\u53e3 DB, \u901a\u5e38\u771f\u6b63\u8bfb\u5199 DB.")),(0,i.kt)("h3",{id:"domain-driven-design-reference"},"Domain Driven Design Reference"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Front-end domain driven design ",(0,i.kt)("a",{parentName:"li",href:"https://dev.to/bespoyasov/clean-architecture-on-frontend-4311"},"guide"),"."),(0,i.kt)("li",{parentName:"ul"},"Domain driven design Layout in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/lupguo/ddd-layout"},"Golang"),".")),(0,i.kt)("h2",{id:"scalability-design"},"Scalability Design"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Prefer composites over mixins."),(0,i.kt)("li",{parentName:"ul"},"Always clone objects between components."),(0,i.kt)("li",{parentName:"ul"},"Use namespaced state store modules."),(0,i.kt)("li",{parentName:"ul"},"Write robust tests."),(0,i.kt)("li",{parentName:"ul"},"Interact with REST API via services/SDK."),(0,i.kt)("li",{parentName:"ul"},"Wrap third-party libraries other using them directly:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Abstract: changing dependencies without changing interface."),(0,i.kt)("li",{parentName:"ul"},"Extendability: More obvious route to extending functionality.")))),(0,i.kt)("h2",{id:"\u9ad8\u5e76\u53d1\u7cfb\u7edf\u8bbe\u8ba1"},"\u9ad8\u5e76\u53d1\u7cfb\u7edf\u8bbe\u8ba1"),(0,i.kt)("h3",{id:"concurrent-code-layer"},"Concurrent Code Layer"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Mutex Performance"),(0,i.kt)("li",{parentName:"ul"},"Database Caches"),(0,i.kt)("li",{parentName:"ul"},"Update Merge"),(0,i.kt)("li",{parentName:"ul"},"BloomFilter"),(0,i.kt)("li",{parentName:"ul"},"Asynchronous"),(0,i.kt)("li",{parentName:"ul"},"Multi-Thread")),(0,i.kt)("h3",{id:"concurrent-database-layer"},"Concurrent DataBase Layer"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"DataBase Type: RDBMS -> NoSQL -> NewSQL"),(0,i.kt)("li",{parentName:"ul"},"Table Structure Design"),(0,i.kt)("li",{parentName:"ul"},"Index Design"),(0,i.kt)("li",{parentName:"ul"},"Split Table"),(0,i.kt)("li",{parentName:"ul"},"Read and Write Separation"),(0,i.kt)("li",{parentName:"ul"},"Data Slice and Data Partition"),(0,i.kt)("li",{parentName:"ul"},"Hot Data Cache")),(0,i.kt)("h3",{id:"concurrent-architecture-layer"},"Concurrent Architecture Layer"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Microservices"),(0,i.kt)("li",{parentName:"ul"},"Scale Friendly"),(0,i.kt)("li",{parentName:"ul"},"FailFast"),(0,i.kt)("li",{parentName:"ul"},"Data PreFetch"),(0,i.kt)("li",{parentName:"ul"},"Multi-Level Caches")),(0,i.kt)("h2",{id:"\u9ad8\u53ef\u7528\u7cfb\u7edf\u8bbe\u8ba1"},"\u9ad8\u53ef\u7528\u7cfb\u7edf\u8bbe\u8ba1"),(0,i.kt)("h3",{id:"resource-isolation"},"Resource Isolation"),(0,i.kt)("h3",{id:"load-balance-design"},"Load Balance Design"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Hardware Load Balance"),(0,i.kt)("li",{parentName:"ul"},"Software Load Balance"),(0,i.kt)("li",{parentName:"ul"},"Load Balance Algorithms:\nRandom, RoundRobin, WeightRoundRobin, ConsistentHash"),(0,i.kt)("li",{parentName:"ul"},"Error Machines Auto Detection"),(0,i.kt)("li",{parentName:"ul"},"Error Services Auto Retirement"),(0,i.kt)("li",{parentName:"ul"},"Services Retry Automation"),(0,i.kt)("li",{parentName:"ul"},"Recovery Services Auto Detection")),(0,i.kt)("h3",{id:"idempotence-design"},"Idempotence Design"),(0,i.kt)("p",null,"\u5728\u7f16\u7a0b\u4e2d\u4e00\u4e2a\u5e42\u7b49\u64cd\u4f5c\u7684\u7279\u70b9\u662f\u5176\u4efb\u610f\u591a\u6b21\u6267\u884c\u6240\u4ea7\u751f\u7684\u5f71\u54cd\u5747\u4e0e\u4e00\u6b21\u6267\u884c\u7684\u5f71\u54cd\u76f8\u540c."),(0,i.kt)("h4",{id:"write-idempotence-design"},"Write Idempotence Design"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Mutex"),(0,i.kt)("li",{parentName:"ul"},"Key Index"),(0,i.kt)("li",{parentName:"ul"},"Token"),(0,i.kt)("li",{parentName:"ul"},"Data Version"),(0,i.kt)("li",{parentName:"ul"},"State Machine")),(0,i.kt)("h3",{id:"cap-theory"},"CAP Theory"),(0,i.kt)("p",null,"A distributed system to simultaneously provide\nmore than two out of the following three guarantees:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Consistency:\nEvery read receives the most recent write or an error."),(0,i.kt)("li",{parentName:"ul"},"Availability:\nEvery request receives a (non-error) response,\nwithout the guarantee that it contains the most recent write."),(0,i.kt)("li",{parentName:"ul"},"Partition tolerance:\nThe system continues to operate\ndespite an arbitrary number of messages\nbeing dropped (or delayed) by the network between nodes.")),(0,i.kt)("h3",{id:"\u670d\u52a1\u7194\u65ad"},"\u670d\u52a1\u7194\u65ad"),(0,i.kt)("h3",{id:"\u670d\u52a1\u9650\u6d41"},"\u670d\u52a1\u9650\u6d41"),(0,i.kt)("h4",{id:"\u670d\u52a1\u9650\u6d41\u7b97\u6cd5"},"\u670d\u52a1\u9650\u6d41\u7b97\u6cd5"),(0,i.kt)("p",null,"\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u53ef\u4ee5\u53c2\u8003\u8ba1\u7b97\u673a\u7f51\u7edc\u62e5\u585e\u63a7\u5236\u7b97\u6cd5:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u8ba1\u6570\u5668\u56fa\u5b9a\u7a97\u53e3\u9650\u6d41:\n\u5355\u4f4d\u65f6\u95f4\u5185\u8fbe\u5230\u9608\u503c\u540e\u5f00\u59cb\u9650\u6d41, \u5355\u4f4d\u65f6\u95f4\u540e\u91cd\u65b0\u8ba1\u6570.\n\u7a97\u53e3\u4e34\u754c\u5904\u6d41\u91cf\u8fc7\u5927, \u5bfc\u81f4\u670d\u52a1\u4e0d\u53ef\u7528."),(0,i.kt)("li",{parentName:"ul"},"\u6ed1\u52a8\u7a97\u53e3\u9650\u6d41:\n\u5728\u56fa\u5b9a\u7a97\u53e3\u9650\u6d41\u57fa\u7840\u4e0a, \u5c06\u7a97\u53e3\u5411\u53f3\u6ed1\u52a8."),(0,i.kt)("li",{parentName:"ul"},"\u6f0f\u6597\u9650\u6d41:\n\u672a\u6ee1\u524d\u53ef\u8fdb\u5165, \u6ee1\u5219\u62d2\u7edd.\n\u53ef\u4ee5\u5e73\u6ed1\u6d41\u91cf, \u65e0\u6cd5\u89e3\u51b3\u7a81\u53d1\u6d41\u91cf."),(0,i.kt)("li",{parentName:"ul"},"\u4ee4\u724c\u6876\u9650\u6d41:\n\u5728\u6f0f\u6597\u9650\u6d41\u57fa\u7840\u4e0a, \u4ee5\u6052\u5b9a\u901f\u7387\u4ea7\u751f\u4ee4\u724c.\n\u62e5\u6709\u4ee4\u724c\u53ef\u8fdb\u5165, \u65e0\u5219\u62d2\u7edd.\n\u53ef\u4ee5\u5e73\u6ed1\u6d41\u91cf, \u53ef\u4ee5\u5bb9\u5fcd\u7a81\u53d1\u6d41\u91cf.")),(0,i.kt)("h4",{id:"\u670d\u52a1\u9650\u6d41\u7b56\u7565"},"\u670d\u52a1\u9650\u6d41\u7b56\u7565"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u670d\u52a1\u62d2\u7edd"),(0,i.kt)("li",{parentName:"ul"},"\u5ef6\u65f6\u5904\u7406"),(0,i.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\u5206\u7ea7"),(0,i.kt)("li",{parentName:"ul"},"\u76d1\u63a7\u9884\u8b66"),(0,i.kt)("li",{parentName:"ul"},"\u52a8\u6001\u9650\u6d41"),(0,i.kt)("li",{parentName:"ul"},"\u52a8\u6001\u6269\u5bb9")),(0,i.kt)("h4",{id:"\u670d\u52a1\u9650\u6d41\u4f4d\u7f6e"},"\u670d\u52a1\u9650\u6d41\u4f4d\u7f6e"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u63a5\u5165\u5c42\u9650\u6d41: \u901a\u8fc7 Nginx/API Router \u5bf9 DNS/IP \u9650\u6d41."),(0,i.kt)("li",{parentName:"ul"},"\u5e94\u7528\u9650\u6d41: \u6bcf\u4e2a\u670d\u52a1\u62e5\u6709\u81ea\u5df1\u7684\u96c6\u7fa4\u9650\u6d41\u670d\u52a1."),(0,i.kt)("li",{parentName:"ul"},"\u57fa\u7840\u670d\u52a1\u9650\u6d41: \u5bf9\u6d88\u606f\u961f\u5217/\u6570\u636e\u5e93\u9650\u6d41.")),(0,i.kt)("h3",{id:"\u670d\u52a1\u964d\u7ea7"},"\u670d\u52a1\u964d\u7ea7"),(0,i.kt)("h2",{id:"reference"},"Reference"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://www.dofactory.com/javascript/design-patterns"},"JavaScript Design Patterns")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://refactoring.guru/design-patterns"},"Refactoring Design Patterns")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.patterns.dev"},"JavaScript Patterns"))))}d.isMDXComponent=!0},7706:function(e,n,t){n.Z=t.p+"assets/images/DesignPatterns-0cc48f386054737330533f9820b776c2.png"},1196:function(e,n,t){n.Z=t.p+"assets/images/ProgrammingParadigms-0372721b030f912cde3494c3c347c205.jpg"}}]);