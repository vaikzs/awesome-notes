"use strict";(self.webpackChunkawesome_notes=self.webpackChunkawesome_notes||[]).push([[6145],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return g}});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),d=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=d(e.components);return a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=d(t),g=i,m=p["".concat(s,".").concat(g)]||p[g]||u[g]||r;return t?a.createElement(m,l(l({ref:n},c),{},{components:t})):a.createElement(m,l({ref:n},c))}));function g(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,l=new Array(r);l[0]=p;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var d=2;d<r;d++)l[d]=t[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},5576:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return s},default:function(){return g},frontMatter:function(){return o},metadata:function(){return d},toc:function(){return u}});var a=t(7462),i=t(3366),r=(t(7294),t(3905)),l=["components"],o={author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Programming","Android"]},s="Android Basic Notes",d={unversionedId:"programming/android/androidBasicNotes",id:"programming/android/androidBasicNotes",title:"Android Basic Notes",description:"Android Framework",source:"@site/notes/programming/android/androidBasicNotes.md",sourceDirName:"programming/android",slug:"/programming/android/androidBasicNotes",permalink:"/awesome-notes/programming/android/androidBasicNotes",editUrl:"https://github.com/sabertazimi/awesome-notes/edit/main/notes/programming/android/androidBasicNotes.md",tags:[{label:"Programming",permalink:"/awesome-notes/tags/programming"},{label:"Android",permalink:"/awesome-notes/tags/android"}],version:"current",lastUpdatedBy:"sabertazimi",lastUpdatedAt:1648310706,formattedLastUpdatedAt:"3/26/2022",frontMatter:{author:"Sabertazimi",authorTitle:"Web Developer",authorURL:"https://github.com/sabertazimi",authorImageURL:"https://github.com/sabertazimi.png",tags:["Programming","Android"]},sidebar:"sidebar",previous:{title:"Virtualization Basic Notes",permalink:"/awesome-notes/computerScience/virtualization/virtualBasicNotes"},next:{title:"Clean Code Basic Notes",permalink:"/awesome-notes/programming/devops/cleanCodeBasicNotes"}},c={},u=[{value:"Android Framework",id:"android-framework",level:2},{value:"Dalvik virtual machine",id:"dalvik-virtual-machine",level:3},{value:"Basic Building Blocks",id:"basic-building-blocks",level:3},{value:"Android Studio",id:"android-studio",level:2},{value:"Plugins",id:"plugins",level:3},{value:"Code generator",id:"code-generator",level:4},{value:"API Conventions",id:"api-conventions",level:2},{value:"Manager Service",id:"manager-service",level:3},{value:"Activity",id:"activity",level:2},{value:"Base Activity",id:"base-activity",level:3},{value:"Activity Collector",id:"activity-collector",level:3},{value:"Start Activity",id:"start-activity",level:3},{value:"UI Design",id:"ui-design",level:2},{value:"Layout",id:"layout",level:3},{value:"Basic",id:"basic",level:4},{value:"Table Layout",id:"table-layout",level:4},{value:"Custom Layout",id:"custom-layout",level:4},{value:"Component",id:"component",level:3},{value:"Custom Component",id:"custom-component",level:4},{value:"AlertDialog",id:"alertdialog",level:4},{value:"List View",id:"list-view",level:4},{value:"Custom List View Layout",id:"custom-list-view-layout",level:5},{value:"Custom List View Listener",id:"custom-list-view-listener",level:5},{value:"Drawable",id:"drawable",level:3},{value:"Fragment",id:"fragment",level:2},{value:"Basic Fragment",id:"basic-fragment",level:3},{value:"Activity XML",id:"activity-xml",level:4},{value:"Create View in Fragment",id:"create-view-in-fragment",level:4},{value:"Add Fragment in Activity",id:"add-fragment-in-activity",level:4},{value:"Transfer Information",id:"transfer-information",level:3},{value:"In Activity",id:"in-activity",level:4},{value:"In Fragment",id:"in-fragment",level:4},{value:"Runtime Loop",id:"runtime-loop",level:3},{value:"Basic Override Function",id:"basic-override-function",level:4},{value:"Broadcast",id:"broadcast",level:2},{value:"Register Receiver",id:"register-receiver",level:3},{value:"Custom Broadcast",id:"custom-broadcast",level:3},{value:"Normal Broadcast",id:"normal-broadcast",level:4},{value:"Ordered Broadcast",id:"ordered-broadcast",level:4},{value:"Local Broadcast",id:"local-broadcast",level:3},{value:"Local Receiver",id:"local-receiver",level:4},{value:"Data Store",id:"data-store",level:2},{value:"Files Store",id:"files-store",level:3},{value:"Shared Preferences",id:"shared-preferences",level:3},{value:"DataBase",id:"database",level:3},{value:"SQLite Open Helper",id:"sqlite-open-helper",level:4},{value:"establish table",id:"establish-table",level:5},{value:"Basic Operator",id:"basic-operator",level:4},{value:"Transaction",id:"transaction",level:4},{value:"Content Provider",id:"content-provider",level:2},{value:"Read Other App Content",id:"read-other-app-content",level:3},{value:"Provide App Content",id:"provide-app-content",level:3},{value:"Service",id:"service",level:2},{value:"Handler",id:"handler",level:3},{value:"Async Task",id:"async-task",level:3},{value:"Basic Service",id:"basic-service",level:3},{value:"IBinder",id:"ibinder",level:4},{value:"ForeGround Service",id:"foreground-service",level:3},{value:"Intent Service",id:"intent-service",level:3},{value:"Alarm Service",id:"alarm-service",level:3},{value:"Media",id:"media",level:2},{value:"Notification",id:"notification",level:3},{value:"SMS",id:"sms",level:3},{value:"Audio",id:"audio",level:3},{value:"Music",id:"music",level:3},{value:"NetWork",id:"network",level:2},{value:"WebView",id:"webview",level:3},{value:"Three Steps",id:"three-steps",level:4},{value:"HTTP URL Connection",id:"http-url-connection",level:3},{value:"HTTP Client",id:"http-client",level:3},{value:"XML",id:"xml",level:3},{value:"Pull",id:"pull",level:4},{value:"SAX",id:"sax",level:4},{value:"Default Handler",id:"default-handler",level:5},{value:"JSON",id:"json",level:3},{value:"JSON Object",id:"json-object",level:4},{value:"GSON",id:"gson",level:4},{value:"Network Best Practice",id:"network-best-practice",level:3},{value:"Map",id:"map",level:2},{value:"Location",id:"location",level:3},{value:"Sensor",id:"sensor",level:2},{value:"Light Sensor",id:"light-sensor",level:3},{value:"Accelerometer Sensor",id:"accelerometer-sensor",level:3},{value:"Orientation Sensor",id:"orientation-sensor",level:3},{value:"Best Practice",id:"best-practice",level:2},{value:"Global Context",id:"global-context",level:3},{value:"\u7528 Intent \u4f20\u9012\u5bf9\u8c61",id:"\u7528-intent-\u4f20\u9012\u5bf9\u8c61",level:3},{value:"Serializable",id:"serializable",level:4},{value:"Parcelable",id:"parcelable",level:4},{value:"Custom Logger",id:"custom-logger",level:3}],p={toc:u};function g(e){var n=e.components,t=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"android-basic-notes"},"Android Basic Notes"),(0,r.kt)("h2",{id:"android-framework"},"Android Framework"),(0,r.kt)("h3",{id:"dalvik-virtual-machine"},"Dalvik virtual machine"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"register-based machine\n\u57fa\u4e8e\u5bc4\u5b58\u5668(\u4e0d\u5199\u5165\u5185\u5b58)"),(0,r.kt)("li",{parentName:"ol"},"minimizing instruction dispatch and memory accesses\n\u6700\u5c0f\u5316\u6307\u4ee4\u5206\u914d\u9ed1\u5185\u5b58\u8bbf\u95ee"),(0,r.kt)("li",{parentName:"ol"},"giving more efficient instruction stream(a lot more semantic content)\n\u63d0\u4f9b\u66f4\u52a0\u9ad8\u6548\u7684\u6307\u4ee4\u6d41")),(0,r.kt)("h3",{id:"basic-building-blocks"},"Basic Building Blocks"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Activity(Managed by activity stack)"),(0,r.kt)("li",{parentName:"ol"},"Service(Running in the background;with no UI)"),(0,r.kt)("li",{parentName:"ol"},"Broadcast Receiver(Can invoke(\u8c03\u7528) activity;with no UI)"),(0,r.kt)("li",{parentName:"ol"},"Content Provider(accessing and managing application data)")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"android-studio"},"Android Studio"),(0,r.kt)("h3",{id:"plugins"},"Plugins"),(0,r.kt)("h4",{id:"code-generator"},"Code generator"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Constructor"),(0,r.kt)("li",{parentName:"ul"},"getter/setter"),(0,r.kt)("li",{parentName:"ul"},"ViewHolder"),(0,r.kt)("li",{parentName:"ul"},"Parcelable Implementation"),(0,r.kt)("li",{parentName:"ul"},"GsonFormat : \u6839\u636e JSONObject \u751f\u6210\u76f8\u5e94\u7c7b")),(0,r.kt)("h2",{id:"api-conventions"},"API Conventions"),(0,r.kt)("h3",{id:"manager-service"},"Manager Service"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"PreferenceManager.getDefaultSharedPreferences"),(0,r.kt)("li",{parentName:"ul"},"LocalBroadcastManager.getInstance")),(0,r.kt)("h2",{id:"activity"},"Activity"),(0,r.kt)("h3",{id:"base-activity"},"Base Activity"),(0,r.kt)("p",null,"\u67e5\u770b\u5f53\u524d\u754c\u9762\u5c5e\u4e8e\u54ea\u4e2a Activity\uff0c\u81ea\u5b9a\u4e49 Activity \u7ee7\u627f BaseActivity"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class BaseActivity extends Activity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        Log.d("BaseActivity", getClass().getSimpleName());\n    }\n}\n')),(0,r.kt)("h3",{id:"activity-collector"},"Activity Collector"),(0,r.kt)("p",null,"\u5728\u6240\u6709 Activity \u7684 onCreate \u65b9\u6cd5\u8c03\u7528\u9759\u6001\u7684 addActivity \u65b9\u6cd5\uff0conDestroy \u65b9\u6cd5\u8c03\u7528\u9759\u6001\u7684 removeActivity \u65b9\u6cd5\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ActivityCollector.addActivity(this);")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ActivityCollector.removeActivity(this);"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class ActivityCollector {\n\n    public static List<Activity> activities = new ArrayList<Activity>();\n\n    public static void addActivity(Activity activity) {\n        activities.add(activity);\n\n    }\n\n    public static void removeActivity(Activity activity) {\n        activities.remove(activity);\n\n    }\n\n    public static void finishAll() {\n        for (Activity activity : activities) {\n            if (!activity.isFinishing()) {\n                activity.finish();\n            }\n        }\n    }\n}\n")),(0,r.kt)("h3",{id:"start-activity"},"Start Activity"),(0,r.kt)("p",null,"\u4e3a\u6bcf\u4e2a Activity \u6dfb\u52a0\u9759\u6001\u7684 actionStart \u65b9\u6cd5\uff0c\u4f9b\u5176\u4ed6 Activity \u542f\u7528\u6b64 Activity"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public static void actionStart(Context context, String data1, String data2) {\n    Intent intent = new Intent(context, thisActivity.class);\n    intent.putExtra("param1", data1);\n    intent.putExtra("param2", data2);\n    context.startActivity(intent);\n}\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"ui-design"},"UI Design"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"N activities can respond to a particular intent:")),(0,r.kt)("p",null,"Android will pop(\u5f39\u51fa) up a little dialogue list(\u5bf9\u8bdd\u6846) to\nuser showing application icon defining the intent"),(0,r.kt)("p",null,"\u5f53\u6709\u591a\u4e2a\u6d3b\u52a8\u53ef\u76f8\u5e94\u67d0\u4e2a\u7279\u5b9a\u610f\u56fe\u65f6\uff0c\u7cfb\u7edf\u5c06\u4f1a\u5f39\u51fa\u5bf9\u8bdd\u6846\u63d0\u793a\u7528\u6237\u9009\u62e9\u4e00\u4e2a\u5e94\u7528\u7684\u6d3b\u52a8\u6216\u8005\u8bbe\u5b9a\u9ed8\u8ba4\u503c(default)"),(0,r.kt)("p",null,"e.g web browsers"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<intent-filter>\n  <action android:name="android.intent.action.MAIN" />\n  <category android:name="android.intent.category.LAUNCHER" />\n</intent-filter>\n')),(0,r.kt)("h3",{id:"layout"},"Layout"),(0,r.kt)("h4",{id:"basic"},"Basic"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"android:layout_weight")," \u81ea\u9002\u914d\u5e03\u5c40"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"android:SingleLine")," \u5355\u884c\u663e\u793a\u6a21\u5f0f"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'android:ellipsize="end"')," \u6587\u5b57\u8fc7\u591a\u65f6\u7f29\u7565\u65b9\u5f0f")),(0,r.kt)("h4",{id:"table-layout"},"Table Layout"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'<TableLayout android:stretchColumns="1">')," \u62c9\u4f38\u7b2c 2 \u5217"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'android:layout_span="2"')," \u5360 2 \u5217")),(0,r.kt)("h4",{id:"custom-layout"},"Custom Layout"),(0,r.kt)("p",null,"LayoutInflater \u4f5c\u7528\u662f\u5c06 layout \u7684 xml \u5e03\u5c40\u6587\u4ef6\u5b9e\u4f8b\u5316\u4e3a View \u7c7b\u5bf9\u8c61\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"View view = LayoutInflater.from(context).inflate(R.layout.title, this/null);\n")),(0,r.kt)("h3",{id:"component"},"Component"),(0,r.kt)("p",null,"View(ViewGroup): e.g button\u3001textbox(\u6587\u672c\u6846)\u3001checkbox(\u590d\u9009\u6846)"),(0,r.kt)("h4",{id:"custom-component"},"Custom Component"),(0,r.kt)("p",null,"custom XML"),(0,r.kt)("p",null,"title.xml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<LinearLayout\n  xmlns:android="http://schemas.android.com/apk/res/android"\n  android:layout_width="match_parent"\n  android:layout_height="wrap_content"\n  android:background="@drawable/title_bg"\n>\n  <button\n    android:id="@+id/title_back"\n    android:layout_width="wrap_content"\n    android:layout_height="wrap_content"\n    android:layout_gravity="center"\n    android:layout_margin="5dip"\n    android:background="@drawable/back_bg"\n    android:text="Back"\n    android:textColor="#fff"\n  />\n  <TextView\n    android:id="@+id/title_text"\n    android:layout_width="0dip"\n    android:layout_height="wrap_content"\n    android:layout_gravity="center"\n    android:layout_weight="1"\n    android:gravity="center"\n    android:text="Title Text"\n    android:textColor="#fff"\n    android:textSize="24sp"\n  />\n  <button\n    android:id="@+id/title_edit"\n    android:layout_width="wrap_content"\n    android:layout_height="wrap_content"\n    android:layout_gravity="center"\n    android:layout_margin="5dip"\n    android:background="@drawable/edit_bg"\n    android:text="Edit"\n    android:textColor="#fff"\n  />\n</LinearLayout>\n')),(0,r.kt)("p",null,"custom class"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class TitleLayout extends LinearLayout {\n    public TitleLayout(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        LayoutInflater.from(context).inflate(R.layout.title, this);\n\n        //Register button click Listener\n        titleBack.setOnClickListener(new OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                ((Activity) getContext()).finish();\n            }\n        });\n        titleEdit.setOnClickListener(new OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(getContext(), "You clicked Edit button", Toast.LENGTH_SHORT).show();\n            }\n        });\n\n        //other awesome things\n        //like material design ripple effect\n        //animations and music\n    }\n\n}\n')),(0,r.kt)("h4",{id:"alertdialog"},"AlertDialog"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'//builder pattern\nAlertDialog.Builder dialogBuilder = new AlertDialog.Builder(context);\n\ndialogBuilder.setTitle("Warning");\ndialogBuilder.setMessage("You are forced to be offline. Please try to login again.");\ndialogBuilder.setCancelable(false);\ndialogBuilder.setPositiveButton("OK", new DialogInterface.OnClickListener() {\n    @Override\n    public void onClick(DialogInterface dialog, int which) {\n        ActivityCollector.finishAll(); // \u9500\u6bc1\u6240\u6709\u6d3b\u52a8\n        Intent intent = new Intent(context, LoginActivity.class);\n        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n        context.startActivity(intent); // \u91cd\u65b0\u542f\u52a8LoginActivity\n    }\n});\n\nAlertDialog alertDialog = dialogBuilder.create();\n\n// \u9700\u8981\u8bbe\u7f6eAlertDialog\u7684\u7c7b\u578b,\u4fdd\u8bc1\u5728\u5e7f\u64ad\u63a5\u6536\u5668\u4e2d\u53ef\u4ee5\u6b63\u5e38\u5f39\u51fa\nalertDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);\n\nalertDialog.show();\n')),(0,r.kt)("h4",{id:"list-view"},"List View"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"ArrayAdapter<String> adapter = new ArrayAdapter<String>(\n    MainActivity.this, android.R.layout.simple_list_item_1, data\n);\nlistView.setAdapter(adapter);\n")),(0,r.kt)("h5",{id:"custom-list-view-layout"},"Custom List View Layout"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Custom class"),(0,r.kt)("li",{parentName:"ul"},"Custom Sub Xml(\u5355\u9879)"),(0,r.kt)("li",{parentName:"ul"},"Custom ArrayAdapter",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u91cd\u5199\u6784\u9020\u51fd\u6570"),(0,r.kt)("li",{parentName:"ul"},"\u91cd\u5199 getView \u65b9\u6cd5",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u91cd\u7528 convertView \u63d0\u5347\u6027\u80fd"),(0,r.kt)("li",{parentName:"ul"},"ViewHolder \u63d0\u5347\u6027\u80fd")))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"\n//\u5185\u90e8\u7c7b\uff0c\u5176\u4e2d\u5b57\u6bb5\u4e0e\u81ea\u5b9a\u4e49class\u7684\u5b57\u6bb5\u4e00\u81f4\nclass ViewHolder {\n    ImageView fruitImage;\n    TextView fruitName;\n}\npublic FruitAdapter(\n  Context context,\n  int textViewResourceId,\n  List<Fruit> objects) {\n    super(context, textViewResourceId, objects);\n    resourceId = textViewResourceId;\n}\n\n@Override\npublic View getView(int position, View convertView, ViewGroup parent) {\n\n    Fruit fruit = getItem(position); // \u83b7\u53d6\u5f53\u524d\u9879\u7684Fruit\u5b9e\u4f8b\n    View view;\n    ViewHolder viewHolder;\n\n    //\u5927\u5e45\u63d0\u5347\u6027\u80fd\n    if (convertView == null) {\n        view = LayoutInflater.from(getContext()).inflate(resourceId, null);\n\n        viewHolder = new ViewHolder();\n        viewHolder.fruitImage = (ImageView) view.findViewById(R.id.fruit_image);\n        viewHolder.fruitName = (TextView) view.findViewById(R.id.fruit_name);\n        view.setTag(viewHolder); // \u5c06ViewHolder\u5b58\u50a8\u5728View\u4e2d\n\n    } else {\n        view = convertView;\n        viewHolder = (ViewHolder) view.getTag(); // \u91cd\u65b0\u83b7\u53d6ViewHolder\n    }\n\n    ImageView fruitImage = (ImageView) view.findViewById(R.id.fruit_image);\n    TextView fruitName = (TextView) view.findViewById(R.id.fruit_name);\n    fruitImage.setImageResource(fruit.getImageId());\n    fruitName.setText(fruit.getName());\n    return view;\n}\n")),(0,r.kt)("h5",{id:"custom-list-view-listener"},"Custom List View Listener"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"listView.setOnItemClickListener(new OnItemClickListener() {\n    @Override\n    public void onItemClick(\n      AdapterView<?> parent,\n      View view,\n      int position,\n      long id) {\n        Fruit fruit = fruitList.get(position);\n        Toast.makeText(MainActivity.this, fruit.getName(), Toast.LENGTH_SHORT).show();\n    }\n});\n\nadapter.notifyDataSetChanged();           // \u5f53\u6709\u65b0\u6d88\u606f\u65f6,\u5237\u65b0ListView\u4e2d\u7684\u663e\u793a\nmsgListView.setSelection(msgList.size()); // \u5c06ListView\u5b9a\u4f4d\u5230\u6700\u540e\u4e00\u884c\n")),(0,r.kt)("h3",{id:"drawable"},"Drawable"),(0,r.kt)("p",null,"\u4fee\u6539\u7279\u5b9a\u7ec4\u4ef6\u7684\u80cc\u666f\u989c\u8272"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Resources myColor = getBaseContext().getResources();\n// getBaseContext()\u83b7\u5f97\u57fa\u7840Context\n// getResources()\u83b7\u5f97\u8d44\u6e90\nDrawable color_M = myColor.getDrawable(R.color. lightGreen);\n// \u7531\u8d44\u6e90 myColor\u6765\u83b7\u5f97Drawable\n// R.color.lightGreen\u662f\u989c\u8272\u503c\u7684ID\u5f15\u7528\ntext.setBackgroundDrawable(color_M);\n//\u8bbe\u7f6e\u80cc\u666f\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"fragment"},"Fragment"),(0,r.kt)("p",null,"android.app.Fragment"),(0,r.kt)("h3",{id:"basic-fragment"},"Basic Fragment"),(0,r.kt)("h4",{id:"activity-xml"},"Activity XML"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<fragment android:id="@+id/right_fragment" \x3c!-- custom fragment class --\x3e\n  android:name="com.example.fragmentTest.RightFragment"\n  android:layout_width="0dp" android:layout_height="match_parent"\n  android:layout_weight="1" /></fragment\n>\n')),(0,r.kt)("h4",{id:"create-view-in-fragment"},"Create View in Fragment"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Override\npublic View onCreateView(\n  LayoutInflater inflater,\n  ViewGroup container,\n  Bundle savedInstanceState) {\n    View view = inflater.inflate(R.layout.left_fragment, container, false);\n    return view;\n}\n")),(0,r.kt)("h4",{id:"add-fragment-in-activity"},"Add Fragment in Activity"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"AnotherRightFragment fragment = new AnotherRightFragment();\nFragmentTransaction transaction = getFragmentManager.beginTransaction();\n\n//\u5bb9\u5668\u7684 id \u548c\u5f85\u6dfb\u52a0\u7684\u788e\u7247\u5b9e\u4f8b\ntransaction.replace(R.id.right_layout, fragment);\n//\u6a21\u62df\u8fd4\u56de\u6808\ntransaction.addToBackStack(null);\ntransaction.commit();\n")),(0,r.kt)("h3",{id:"transfer-information"},"Transfer Information"),(0,r.kt)("h4",{id:"in-activity"},"In Activity"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"getFragmentManager().findFragmentById(R.id.right_fragment);")),(0,r.kt)("h4",{id:"in-fragment"},"In Fragment"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"MainActivity activity = (MainActivity) getActivity();")),(0,r.kt)("h3",{id:"runtime-loop"},"Runtime Loop"),(0,r.kt)("h4",{id:"basic-override-function"},"Basic Override Function"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"onAttach()"),"\n\u5f53\u788e\u7247\u548c\u6d3b\u52a8\u5efa\u7acb\u5173\u8054\u7684\u65f6\u5019\u8c03\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"onCreateView()"),"\n\u4e3a\u788e\u7247\u521b\u5efa\u89c6\u56fe(\u52a0\u8f7d\u5e03\u5c40)\u65f6\u8c03\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"onActivityCreated()"),"\n\u786e\u4fdd\u4e0e\u788e\u7247\u76f8\u5173\u8054\u7684\u6d3b\u52a8\u4e00\u5b9a\u5df2\u7ecf\u521b\u5efa\u5b8c\u6bd5\u7684\u65f6\u5019\u8c03\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"onDestroyView()"),"\n\u5f53\u4e0e\u788e\u7247\u5173\u8054\u7684\u89c6\u56fe\u88ab\u79fb\u9664\u7684\u65f6\u5019\u8c03\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"onDetach()"),"\n\u5f53\u788e\u7247\u548c\u6d3b\u52a8\u89e3\u9664\u5173\u8054\u7684\u65f6\u5019\u8c03\u7528\u3002")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"broadcast"},"Broadcast"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Normal Broadcasts : async"),(0,r.kt)("li",{parentName:"ul"},"Ordered Broadcasts : sync")),(0,r.kt)("h3",{id:"register-receiver"},"Register Receiver"),(0,r.kt)("p",null,"In Activity"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"//Custom BroadcastReceiver,Override onReceive methods\n//intentFilter : action\n//\u524d\u4e3a\u54cd\u5e94\u540e\u7684\u884c\u4e3a\uff0c\u540e\u4e3a\u54cd\u5e94\u4f55\u79cd\u5e7f\u64ad\nregisterReceiver(networkChangeReceiver, intentFilter);\n\n//in onDestroy\nunregisterReceiver();\n")),(0,r.kt)("p",null,"In AndroidManifest,xml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- custom receiver class --\x3e\n<receiver android:name=".MyBroadcastReceiver">\n  \x3c!-- receiver priority --\x3e\n  <intent-filter android:priority="100">\n    \x3c!-- custom broadcast --\x3e\n    <action android:name="com.example.broadcastTest. MY_BROADCAST" />\n  </intent-filter>\n</receiver>\n')),(0,r.kt)("h3",{id:"custom-broadcast"},"Custom Broadcast"),(0,r.kt)("h4",{id:"normal-broadcast"},"Normal Broadcast"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'intent intent = new Intent("com.example.broadcastTest.MY_BROADCAST");\nsendBroadcast(intent);\n')),(0,r.kt)("h4",{id:"ordered-broadcast"},"Ordered Broadcast"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'intent intent = new Intent("com.example.broadcastTest.MY_BROADCAST");\nsendOrderedBroadcast(intent, null);\n')),(0,r.kt)("h3",{id:"local-broadcast"},"Local Broadcast"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"// \u83b7\u53d6\u5b9e\u4f8b\nlocalBroadcastManager = LocalBroadcastManager.getInstance(this);\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"localBroadcastManager.sendBroadcast(intent); // \u53d1\u9001\u672c\u5730\u5e7f\u64ad\n")),(0,r.kt)("h4",{id:"local-receiver"},"Local Receiver"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"localBroadcastManager.registerReceiver(CustomReceiver, intentFilter);\nlocalBroadcastManager.unregisterReceiver(CustomReceiver);\n")),(0,r.kt)("h2",{id:"data-store"},"Data Store"),(0,r.kt)("h3",{id:"files-store"},"Files Store"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"/data/data/<packageName>/files/")),(0,r.kt)("p",null,"Write"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'String data = "Data to save";\nFileOutputStream out = null;\nBufferedWriter writer = null;\ntry {\n    out = openFileOutput("data", Context.MODE_PRIVATE);\n    writer = new BufferedWriter(new OutputStreamWriter(out));\n    writer.write(data);\n} catch (IOException e) {\n    e.printStackTrace();\n} finally {\n    try {\n        if (writer != null) {\n            writer.close();\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n')),(0,r.kt)("p",null,"Read"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'FileInputStream in = null;\nBufferedReader reader = null;\nStringBuilder content = new StringBuilder();\ntry {\n    in = openFileInput("data");\n    reader = new BufferedReader(new InputStreamReader(in));\n    String line = "";\n    while ((line = reader.readLine()) != null) {\n        content.append(line);\n    }\n} catch (IOException e) {\n    e.printStackTrace();\n} finally {\n    if (reader != null) {\n        try {\n            reader.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\nreturn content.toString();\n')),(0,r.kt)("h3",{id:"shared-preferences"},"Shared Preferences"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"/data/data/<packageName>/shared_preferences/")),(0,r.kt)("p",null,"Write"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'//get Editor\nSharedPreferences.Editor editor = getSharedPreferences("data", MODE_PRIVATE).edit();\n//store date\neditor.putString("name", "Tom");\neditor.putInt("age", 28);\neditor.putBoolean("married", false);\n//commit\neditor.commit();\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"editor.clear();\n")),(0,r.kt)("p",null,"clear pref file content"),(0,r.kt)("p",null,"Read"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'SharedPreferences pref = getSharedPreferences("data", MODE_PRIVATE);\n//second argument - default value if target key don\'t exists\nString name = pref.getString("name", "");\nint age = pref.getInt("age", 0);\nboolean married = pref.getBoolean("married", false);\n')),(0,r.kt)("h3",{id:"database"},"DataBase"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"/data/data/<package name>/databases/")),(0,r.kt)("h4",{id:"sqlite-open-helper"},"SQLite Open Helper"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Override\nonCreate()\n@Override\npublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n    switch (oldVersion) {\n        case 1:\n            db.execSQL(CREATE_CATEGORY);\n        case 2:\n            db.execSQL("alter table Book add column category_id integer");\n        default:\n    }\n}\n')),(0,r.kt)("p",null,"Custom \u5b9e\u73b0\u521b\u5efa\u3001\u5347\u7ea7\u6570\u636e\u5e93\u7684\u903b\u8f91\n\u6784\u5efa\u51fa SQLiteOpenHelper \u7684\u5b9e\u4f8b\u540e,\u518d\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"getReadableDatabase()"),"\u6216",(0,r.kt)("inlineCode",{parentName:"p"},"getWritableDatabase()"),"\u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93"),(0,r.kt)("h5",{id:"establish-table"},"establish table"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"create table Book (\n    id integer primary key autoIncrement,\n    author text,\n    price real,\n    pages integer,\n    name text\n    )\n")),(0,r.kt)("h4",{id:"basic-operator"},"Basic Operator"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u5e93\u5e76\u8fd4\u56de\u4e00\u4e2a SQLiteDatabase \u5bf9\u8c61")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Context.createDatabase(String name,int version ,int mode,CursorFactory factory);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5220\u9664\u6570\u636e\u5e93")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'this.deleteDatabase("myDatabase.db");\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6253\u5f00\u6570\u636e\u5e93")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'SQLiteDatabase my_DataBase =\nthis.openOrCreateDatabase("myDateBase.db",MODE_PRIVATE , null);\nmy_DataBase.close();\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u975e\u67e5\u8be2 SQL \u6307\u4ee4")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'//\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a"test"\u5e76\u5e26\u4e24\u4e2a\u53c2\u6570\u7684\u8868\nmy_DataBase.execSQL("CREATE TABLE test (_id INTEGER PRIMARY KEY,\nsomeNumber INTEGER);");\n//\u5728\u6570\u636e\u5e93\u4e2d\u63d2\u5165\u4e00\u4e2a\u5143\u7ec4\nmy_DataBase.execSQL("INSERT INTO test (_id,someNumber) values(1,8);");\n\nSQLiteDatabase db = dbHelper.getWritableDatabase();\n\n//INSERT\nContentValues values = new ContentValues();\n// \u5f00\u59cb\u7ec4\u88c5\u7b2c\u4e00\u6761\u6570\u636e\nvalues.put("name", "The Da Vinci Code");\nvalues.put("author", "Dan Brown");\nvalues.put("pages", 454);\nvalues.put("price", 16.96);\ndb.insert("Book", null, values); // \u63d2\u5165\u7b2c\u4e00\u6761\u6570\u636e\nvalues.clear();\n// \u5f00\u59cb\u7ec4\u88c5\u7b2c\u4e8c\u6761\u6570\u636e\nvalues.put("name", "The Lost Symbol");\nvalues.put("author", "Dan Brown");\nvalues.put("pages", 510);\nvalues.put("price", 19.95);\ndb.insert("Book", null, values); // \u63d2\u5165\u7b2c\u4e8c\u6761\u6570\u636e\n\n//update\ncontentValues values = new ContentValues();\nvalues.put("price", 10.99);\ndb.update("Book", values, "name = ?", new String[] { "The DaVinci Code"  });\n\n//delete\ndb.delete("Book", "pages > ?", new String[] { "500"  });\n\n//\u5220\u9664\u8868\nmy_DataBase.execSQL("DROP TABLE test");\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u67e5\u8be2 SQL \u6307\u4ee4-\u6e38\u6807 Cursors",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"query()"))))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"\u65b9\u6cd5\u53c2\u6570"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u5bf9\u5e94 SQL \u90e8\u5206"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"table"),(0,r.kt)("td",{parentName:"tr",align:"left"},"from tableName"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u6307\u5b9a\u67e5\u8be2\u7684\u8868\u540d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"columns"),(0,r.kt)("td",{parentName:"tr",align:"left"},"select column1, column2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u6307\u5b9a\u67e5\u8be2\u7684\u5217\u540d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"selection"),(0,r.kt)("td",{parentName:"tr",align:"left"},"where column = value"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u6307\u5b9a where \u7684\u7ea6\u675f\u6761\u4ef6")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"selectionArgs"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u4e3a where \u4e2d\u7684\u5360\u4f4d\u7b26\u63d0\u4f9b\u5177\u4f53\u7684\u503c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"groupBy"),(0,r.kt)("td",{parentName:"tr",align:"left"},"group by column"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u6307\u5b9a\u9700\u8981 group by \u7684\u5217")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"having"),(0,r.kt)("td",{parentName:"tr",align:"left"},"having column = value"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5bf9 group by \u540e\u7684\u7ed3\u679c\u8fdb\u4e00\u6b65\u7ea6\u675f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"orderBy"),(0,r.kt)("td",{parentName:"tr",align:"left"},"order by column1, column2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u6307\u5b9a\u67e5\u8be2\u7ed3\u679c\u7684\u6392\u5e8f\u65b9\u5f0f")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'SQLiteDatabase db = dbHelper.getWritableDatabase();\n// \u67e5\u8be2Book\u8868\u4e2d\u6240\u6709\u7684\u6570\u636e\nCursor cursor = db.query("Book", null, null, null, null, null, null);\n// \u904d\u5386Cursor\u5bf9\u8c61,\u53d6\u51fa\u6570\u636e\n//cursor.moveToFirst()\n//cursor.moveToNext()\nString name = cursor.getString(cursor.getColumnIndex("name"));\nString author = cursor.getString(cursor.getColumnIndex("author"));\nint pages = cursor.getInt(cursor.getColumnIndex("pages"));\ndouble price = cursor.getDouble(cursor.getColumnIndex("price"));\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'//\u4e3a\u4e86\u521b\u5efa\u4e00\u4e2aCursor(\u6e38\u6807),\u5fc5\u987b\u6267\u884c\u4e00\u4e2a\u67e5\u8be2,\u8981\u4e48\u901a\u8fc7SQL\u4f7f\u7528rawQuery()\u65b9\u6cd5\n//\u6216\u662f\u66f4\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u65b9\u6cd5,\u50cfquery()\u65b9\u6cd5\nCursor cur = my_DataBase.rawQuery("SELECT * FORM test", null);\n\nif(cur!=null) {//\u6e38\u6807\u4e0d\u4e3a\u7a7a\n    //\u8fd4\u56de\u7ed9\u5b9a\u540d\u79f0\u7684\u5217\u7684\u57fa\u4e8e0\u5f00\u59cb\u7684index,\u5982\u679c\u8be5\u5c5e\u6027\u5217\u4e0d\u5b58\u5728\u5219\u8fd4\u56de-1\n    //\u901a\u8fc7\u5b83\u4eec\u7684index\u6765\u68c0\u7d22\u5c5e\u6027\u503c\n    int numColumn=cur.getColumnIndex("someNumber");\n\n    if(cur.moveToFirst()) {\n        //cur.moveToFirst()\u8ba9\u6e38\u6807\u6307\u5411\u7b2c\u4e00\u884c,\u5982\u679c\u6e38\u6807\u6307\u5411\u7b2c\u4e00\u884c,\u5219\u8fd4\u56detrue\n        do {\n        int num=cur.getInt(numColumn);//\u83b7\u5f97\u5f53\u524d\u884c\u8be5\u5c5e\u6027\u7684\u503c\n        /*Cursor\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u56de\u7d22\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\n        \u4f8b\u5982getInt(int index)/getString(int index)\u7b49\u7b49*/\n        /*\u505a\u4e00\u4e9b\u4e8b\u60c5*/\n        } while (cur.moveToNext());\n        /*\u6e38\u6807\u79fb\u52a8\u5230\u4e0b\u4e00\u884c,\u5982\u679c\u6e38\u6807\u5df2\u7ecf\u901a\u8fc7\u4e86\u7ed3\u679c\u96c6\u4e2d\u7684\u6700\u540e,\n        \u5373\u6ca1\u6709\u884c\u53ef\u4ee5\u79fb\u52a8\u65f6,\u5219\u8fd4\u56defalse*/\n        //\u5176\u4ed6\u53ef\u80fd\u79fb\u52a8\u7684\u662f previous() \u548cfirst()\u65b9\u6cd5\n    }\n}\n')),(0,r.kt)("h4",{id:"transaction"},"Transaction"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"SQLiteDatabase \u7684",(0,r.kt)("inlineCode",{parentName:"li"},"beginTransaction()"),"\u65b9\u6cd5"),(0,r.kt)("li",{parentName:"ul"},"\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"setTransactionSuccessful()"),"\u8868\u793a\u4e8b\u52a1\u5df2\u7ecf\u6267\u884c\u6210\u529f"),(0,r.kt)("li",{parentName:"ul"},"finally \u4ee3\u7801\u5757\u4e2d\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"endTransaction()"),"\u6765\u7ed3\u675f\u4e8b\u52a1")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"content-provider"},"Content Provider"),(0,r.kt)("h3",{id:"read-other-app-content"},"Read Other App Content"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'Uri uri = Uri.parse("content://com.example.app.provider/table1");\ngetContentResolver().query/insert/delete/update();\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME"),(0,r.kt)("li",{parentName:"ul"},"ContactsContract.CommonDataKinds.Phone.NUMBER")),(0,r.kt)("h3",{id:"provide-app-content"},"Provide App Content"),(0,r.kt)("p",null,"With ContentProvider:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class MyProvider extends ContentProvider {\n    @Override\n    public boolean onCreate() {\n        return false;\n    }\n    @Override\n    public Cursor query(Uri uri, String[] projection, String selection,\n      String[] selectionArgs, String sortOrder) {\n        return null;\n    }\n    @Override\n    public Uri insert(Uri uri, ContentValues values) {\n        return null;\n    }\n    @Override\n    public int update(Uri uri, ContentValues values, String selection,\n      String[] selectionArgs) {\n        return 0;\n    }\n    @Override\n    public int delete(Uri uri, String selection, String[] selectionArgs) {\n        return 0;\n    }\n    @Override\n    public String getType(Uri uri) {\n        return null;\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"UriMatcher.addURI(uri, customNumber)/.match(uri)\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e3a\u4f20\u5165 URI \u6307\u5b9a\u81ea\u5b9a\u4e49\u5e38\u91cf\u4f5c\u4e3a\u4ee3\u53f7")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"service"},"Service"),(0,r.kt)("h3",{id:"handler"},"Handler"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'//\u5728\u4e3b\u7ebf\u7a0b\u91cd\u5199handleMessage,\u66f4\u65b0UI\nnew Handler() {\n    public void handleMessage(Message msg) {\n        switch (msg.what) {\n            case UPDATE_TEXT:\n            // \u5728\u8fd9\u91cc\u53ef\u4ee5\u8fdb\u884cUI\u64cd\u4f5c\n            text.setText("Nice to meet you");\n            break;\n            default:\n            break;\n        }\n    }\n}\n\n//\u5728\u540e\u53f0\u6267\u884c\u5b50\u7ebf\u7a0b\nnew Thread(new Runnable() {\n    @Override\n    public void run() {\n        Message message = new Message();\n        message.what = UPDATE_TEXT;\n        handler.sendMessage(message); // \u5c06Message\u5bf9\u8c61\u53d1\u9001\u51fa\u53bb\n    }\n}).start();\n')),(0,r.kt)("h3",{id:"async-task"},"Async Task"),(0,r.kt)("p",null,"AsyncTask \u4e2d\u7684\u51e0\u4e2a\u65b9\u6cd5\u624d\u80fd\u5b8c\u6210\u5bf9\u4efb\u52a1\u7684\u5b9a\u5236\u3002\u7ecf\u5e38\u9700\u8981\u53bb\u91cd\u5199\u7684\u65b9\u6cd5\n\u6709\u4ee5\u4e0b\u56db\u4e2a:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"onPreExecute()"),"\n\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u5728\u540e\u53f0\u4efb\u52a1\u5f00\u59cb\u6267\u884c\u4e4b\u524d\u8c03\u7528,\u7528\u4e8e\u8fdb\u884c\u4e00\u4e9b\u754c\u9762\u4e0a\u7684\u521d\u59cb\u5316\u64cd\u4f5c,\n\u6bd4\u5982\u663e\u793a\u4e00\u4e2a\u8fdb\u5ea6\u6761\u5bf9\u8bdd\u6846\u7b49\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"doInBackground(Params...)"),"\n\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u7684\u6240\u6709\u4ee3\u7801\u90fd\u4f1a\u5728\u5b50\u7ebf\u7a0b\u4e2d\u8fd0\u884c,\u6211\u4eec\u5e94\u8be5\u5728\u8fd9\u91cc\u53bb\u5904\u7406\u6240\u6709\u7684\u8017\u65f6\u4efb\u52a1\u3002\n\u4efb\u52a1\u4e00\u65e6\u5b8c\u6210\u5c31\u53ef\u4ee5\u901a\u8fc7 return \u8bed\u53e5\u6765\u5c06\u4efb\u52a1\u7684\u6267\u884c\u7ed3\u679c\u8fd4\u56de,\u5982\u679c AsyncTask \u7684\n\u7b2c\u4e09\u4e2a\u6cdb\u578b\u53c2\u6570\u6307\u5b9a\u7684\u662f Void,\u5c31\u53ef\u4ee5\u4e0d\u8fd4\u56de\u4efb\u52a1\u6267\u884c\u7ed3\u679c\u3002\u6ce8\u610f,\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u662f\u4e0d\n\u53ef\u4ee5\u8fdb\u884c UI \u64cd\u4f5c\u7684,\u5982\u679c\u9700\u8981\u66f4\u65b0 UI \u5143\u7d20,\u6bd4\u5982\u8bf4\u53cd\u9988\u5f53\u524d\u4efb\u52a1\u7684\u6267\u884c\u8fdb\u5ea6,\n\u53ef\u4ee5\u8c03\u7528 publishProgress(Progress...)\u65b9\u6cd5\u6765\u5b8c\u6210\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"onProgressUpdate(Progress...)"),"\n\u5f53\u5728\u540e\u53f0\u4efb\u52a1\u4e2d\u8c03\u7528\u4e86 publishProgress(Progress...)\u65b9\u6cd5\u540e,\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u4f1a\u5f88\u5feb\u88ab\u8c03\u7528,\n\u65b9\u6cd5\u4e2d\u643a\u5e26\u7684\u53c2\u6570\u5c31\u662f\u5728\u540e\u53f0\u4efb\u52a1\u4e2d\u4f20\u9012\u8fc7\u6765\u7684\u3002\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u53ef\u4ee5\u5bf9 UI \u8fdb\u884c\u64cd\u4f5c,\n\u5229\u7528\u53c2\u6570\u4e2d\u7684\u6570\u503c\u5c31\u53ef\u4ee5\u5bf9\u754c\u9762\u5143\u7d20\u8fdb\u884c\u76f8\u5e94\u5730\u66f4\u65b0\u3002"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"onPostExecute(Result)"),"\n\u5f53\u540e\u53f0\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u5e76\u901a\u8fc7 return \u8bed\u53e5\u8fdb\u884c\u8fd4\u56de\u65f6,\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u5f88\u5feb\u4f1a\u88ab\u8c03\u7528\u3002\n\u8fd4\u56de\u7684\u6570\u636e\u4f1a\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u5230\u6b64\u65b9\u6cd5\u4e2d,\u53ef\u4ee5\u5229\u7528\u8fd4\u56de\u7684\u6570\u636e\u6765\u8fdb\u884c\u4e00\u4e9b UI \u64cd\u4f5c,\n\u6bd4\u5982\u8bf4\u63d0\u9192\u4efb\u52a1\u6267\u884c\u7684\u7ed3\u679c,\u4ee5\u53ca\u5173\u95ed\u6389\u8fdb\u5ea6\u6761\u5bf9\u8bdd\u6846\u7b49\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'class DownloadTask extends AsyncTask<Void, Integer, Boolean> {\n    @Override\n    protected void onPreExecute() {\n        progressDialog.show(); // \u663e\u793a\u8fdb\u5ea6\u5bf9\u8bdd\u6846\n    }\n    @Override\n    protected Boolean doInBackground(Void... params) {\n        try {\n            while (true) {\n                int downloadPercent = doDownload(); // \u8fd9\u662f\u4e00\u4e2a\u865a\u6784\u7684\u65b9\u6cd5\n                publishProgress(downloadPercent);\n            if (downloadPercent >= 100) {\n                break;\n                }\n            }\n        } catch (Exception e) {\n            return false;\n        }\n    return true;\n}\n    @Override\n    protected void onProgressUpdate(Integer... values) {\n        // \u5728\u8fd9\u91cc\u66f4\u65b0\u4e0b\u8f7d\u8fdb\u5ea6\n        progressDialog.setMessage("Downloaded " + values[0] + "%");\n    }\n    @Override\n    protected void onPostExecute(Boolean result) {\n        progressDialog.dismiss(); // \u5173\u95ed\u8fdb\u5ea6\u5bf9\u8bdd\u6846\n        // \u5728\u8fd9\u91cc\u63d0\u793a\u4e0b\u8f7d\u7ed3\u679c\n        if (result) {\n            Toast.makeText(context, "Download succeeded",\n            Toast.LENGTH_SHORT).show();\n        } else {\n            Toast.makeText(context, " Download failed",\n            Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n')),(0,r.kt)("h3",{id:"basic-service"},"Basic Service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'//in AndroidManifest.xml <service android:name=".MyService"> </service>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"stopSelf()\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class MyService extends Service {\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n    @Override\n        public void onCreate() {\n        super.onCreate();\n    }\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        return super.onStartCommand(intent, flags, startId);\n    }\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n    }\n}\n")),(0,r.kt)("h4",{id:"ibinder"},"IBinder"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In Custom Service class")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'private DownloadBinder mBinder = new DownloadBinder();\n\nclass DownloadBinder extends Binder {\n    public void startDownload() {\n        Log.d("MyService", "startDownload executed");\n    }\n    public int getProgress() {\n        Log.d("MyService", "getProgress executed");\n        return 0;\n    }\n}\n\n@Override\npublic IBinder onBind(Intent intent) {\n    return mBinder;\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In Activity class")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"case R.id.bind_service:\n    Intent bindIntent = new Intent(this, MyService.class);\n    bindService(bindIntent, connection, BIND_AUTO_CREATE); // \u7ed1\u5b9a\u670d\u52a1\n    break;\ncase R.id.unbind_service:\n    unbindService(connection); // \u89e3\u7ed1\u670d\u52a1\n    break;\ndefault:\n    break;\n\n@Override\npublic void onServiceDisconnected(ComponentName name) {\n    }\n@Override\npublic void onServiceConnected(ComponentName name, IBinder service) {\n    downloadBinder = (MyService.DownloadBinder) service;\n    downloadBinder.startDownload();\n    downloadBinder.getProgress();\n}\n")),(0,r.kt)("h3",{id:"foreground-service"},"ForeGround Service"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In service onCreate")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'Notification notification = new Notification(R.drawable.ic_launcher,\n  "Notification comes", System. currentTimeMills());\nIntent notificationIntent = new Intent(this, MainActivity.class);\nPendingIntent pendingIntent = PendingIntent.getActivity(this, 0,\n  notificationIntent, 0);\nnotification.setLatestEventInfo(this, "This is title", "This is content", pendingIntent);\nstartForeground(1, notification);\n')),(0,r.kt)("h3",{id:"intent-service"},"Intent Service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class MyIntentService extends IntentService {\n    public MyIntentService() {\n        super("MyIntentService"); // \u8c03\u7528\u7236\u7c7b\u7684\u6709\u53c2\u6784\u9020\u51fd\u6570\n    }\n    @Override\n    protected void onHandleIntent(Intent intent) {\n        // \u6253\u5370\u5f53\u524d\u7ebf\u7a0b\u7684id\n        Log.d("MyIntentService", "Thread id is " + Thread.currentThread().getId());\n    }\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        Log.d("MyIntentService", "onDestroy executed");\n    }\n}\n')),(0,r.kt)("h3",{id:"alarm-service"},"Alarm Service"),(0,r.kt)("p",null,"\u7ed3\u5408 BroadcastReceiver \u53ef\u4ee5\u5b9e\u73b0\u5b9a\u65f6\u4efb\u52a1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"AlarmManager manager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);\nlong triggerAtTime = SystemClock.elapsedRealtime() + 10 * 1000;\nmanager.set(AlarmManager.ELAPSED_REALTIME_WAKEUP, triggerAtTime, pendingIntent);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Service \u5ef6\u65f6\u53d1\u51fa\u5e7f\u64ad"),(0,r.kt)("li",{parentName:"ul"},"BroadcastReceiver \u63a5\u53d7\u5e7f\u64ad\u540e\u518d\u6b21\u542f\u52a8 Service")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public int onStartCommand(Intent intent, int flags, int startId) {\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            Log.d("LongRunningService", "executed at " + new Date().toString());\n        }\n    }).start();\n\n    AlarmManager manager = (AlarmManager) getSystemService(ALARM_SERVICE);\n    int anHour = 60 * 60 * 1000; // \u8fd9\u662f\u4e00\u5c0f\u65f6\u7684\u6beb\u79d2\u6570\n    long triggerAtTime = SystemClock.elapsedRealtime() + anHour;\n\n    //\u5173\u952e\uff1a\u5728\u670d\u52a1\u91cc\u53d1\u9001\u5e7f\u64ad\n    Intent i = new Intent(this, AlarmReceiver.class);\n    PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, 0);\n\n    manager.set(AlarmManager.ELAPSED_REALTIME_WAKEUP, triggerAtTime, pi);\n\n    return super.onStartCommand(intent, flags, startId);\n}\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"media"},"Media"),(0,r.kt)("h3",{id:"notification"},"Notification"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'NotificationManager manager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\n\nNotification notification = new Notification(R.drawable.ic_launcher, "This is\n  ticker text", System.currentTimeMills());\n\nIntent intent = new Intent(this, NotificationActivity.class);\nPendingIntent pi = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);\n\nnotification.setLatestEventInfo(this, "This is content title", "This is\n  content text", pi);\n\nmanager.notify(1, notification);\n//\u5728\u88ab\u542f\u52a8Activity manager.cancel(1);\n')),(0,r.kt)("h3",{id:"sms"},"SMS"),(0,r.kt)("h3",{id:"audio"},"Audio"),(0,r.kt)("h3",{id:"music"},"Music"),(0,r.kt)("h2",{id:"network"},"NetWork"),(0,r.kt)("p",null,"Networked Apps"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Network latency(\u7f51\u7edc\u5ef6\u8fdf)\u2014\u2014UI thread separated from data loading thread"),(0,r.kt)("li",{parentName:"ol"},"Battery drain(\u7535\u6c60\u8017\u5c3d)"),(0,r.kt)("li",{parentName:"ol"},"Intermittent service(\u4e2d\u65ad\u670d\u52a1)")),(0,r.kt)("h3",{id:"webview"},"WebView"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<uses-permission android:name="android.permission.INTERNET" />\n')),(0,r.kt)("h4",{id:"three-steps"},"Three Steps"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'webView.getSettings().setJavaScriptEnabled(true);\n\nwebView.setWebViewClient(new WebViewClient() {\n    @Override\n    public boolean shouldOverrideUrlLoading(WebView view, String url) {\n        view.loadUrl(url); // \u6839\u636e\u4f20\u5165\u7684\u53c2\u6570\u518d\u53bb\u52a0\u8f7d\u65b0\u7684\u7f51\u9875\n        return true; // \u8868\u793a\u5f53\u524dWebView\u53ef\u4ee5\u5904\u7406\u6253\u5f00\u65b0\u7f51\u9875\u7684\u8bf7\u6c42,\u4e0d\u7528\u501f\u52a9\u7cfb\u7edf\u6d4f\u89c8\u5668\n    }\n});\n\nwebView.loadUrl("http://www.github.com");\n')),(0,r.kt)("h3",{id:"http-url-connection"},"HTTP URL Connection"),(0,r.kt)("h3",{id:"http-client"},"HTTP Client"),(0,r.kt)("h3",{id:"xml"},"XML"),(0,r.kt)("h4",{id:"pull"},"Pull"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'HttpClient httpClient = new DefaultHttpClient();\n\n// \u6307\u5b9a\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u5730\u5740\u662f\u7535\u8111\u672c\u673a\nHttpGet httpGet = new HttpGet("http://10.0.2.2/get_data.xml");\nHttpResponse httpResponse = httpClient.execute(httpGet);\n\nif (httpResponse.getStatusLine().getStatusCode() == 200) {\n    // \u8bf7\u6c42\u548c\u54cd\u5e94\u90fd\u6210\u529f\u4e86\n    HttpEntity entity = httpResponse.getEntity();\n    String response = EntityUtils.toString(entity,"utf-8");\n\n    //XML Pull \u65b9\u5f0f\u89e3\u6790\n    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();\n    XmlPullParser xmlPullParser = factory.newPullParser();\n    xmlPullParser.setInput(new StringReader(xmlData));\n    int eventType = xmlPullParser.getEventType();\n\n    String id = "";\n    String name = "";\n    String version = "";\n\n    while (eventType != XmlPullParser.END_DOCUMENT) {\n\n        String nodeName = xmlPullParser.getName();\n\n        switch (eventType) {\n        // \u5f00\u59cb\u89e3\u6790\u67d0\u4e2a\u7ed3\u70b9\n        case XmlPullParser.START_TAG: {\n            if ("id".equals(nodeName)) {\n                id = xmlPullParser.nextText();\n            } else if ("name".equals(nodeName)) {\n                name = xmlPullParser.nextText();\n            } else if ("version".equals(nodeName)) {\n               version = xmlPullParser.nextText();\n            }\n            break;\n        }\n        // \u5b8c\u6210\u89e3\u6790\u67d0\u4e2a\u7ed3\u70b9\n        case XmlPullParser.END_TAG: {\n            if ("app".equals(nodeName)) {\n                Log.d("MainActivity", "id is " + id);\n                Log.d("MainActivity", "name is " + name);\n                Log.d("MainActivity", "version is " + version);\n            }\n            break;\n        }\n        default:\n            break;\n        }\n\n        eventType = xmlPullParser.next();\n    } // end of while\n}  //  end of if\n')),(0,r.kt)("h4",{id:"sax"},"SAX"),(0,r.kt)("h5",{id:"default-handler"},"Default Handler"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class ContentHandler extends DefaultHandler {\n    private String nodeName;\n    private StringBuilder id;\n    private StringBuilder name;\n    private StringBuilder version;\n\n    @Override\n    public void startDocument() throws SAXException {\n        id = new StringBuilder();\n        name = new StringBuilder();\n        version = new StringBuilder();\n    }\n    @Override\n    public void startElement(String uri, String localName, String qName,\n      Attributes attributes) throws SAXException {\n        // \u8bb0\u5f55\u5f53\u524d\u7ed3\u70b9\u540d\n        nodeName = localName;\n    }\n    @Override\n    public void characters(\n      char[] ch,\n      int start,\n      int length) throws SAXException {\n        // \u6839\u636e\u5f53\u524d\u7684\u7ed3\u70b9\u540d\u5224\u65ad\u5c06\u5185\u5bb9\u6dfb\u52a0\u5230\u54ea\u4e00\u4e2aStringBuilder\u5bf9\u8c61\u4e2d\n        if ("id".equals(nodeName)) {\n            id.append(ch, start, length);\n        } else if ("name".equals(nodeName)) {\n            name.append(ch, start, length);\n        } else if ("version".equals(nodeName)) {\n            version.append(ch, start, length);\n        }\n    }\n    @Override\n    public void endElement(\n      String uri,\n      String localName,\n      String qName) throws SAXException {\n        if ("app".equals(localName)) {\n            Log.d("ContentHandler", "id is " + id.toString().trim());\n            Log.d("ContentHandler", "name is " + name.toString().trim());\n            Log.d("ContentHandler", "version is " + version.toString().trim());\n            // \u6700\u540e\u8981\u5c06StringBuilder\u6e05\u7a7a\u6389\n            id.setLength(0);\n            name.setLength(0);\n            version.setLength(0);\n        }\n    }\n    @Override\n    public void endDocument() throws SAXException {\n    }\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'HttpClient httpClient = new DefaultHttpClient();\n// \u6307\u5b9a\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u5730\u5740\u662f\u7535\u8111\u672c\u673a\nHttpGet httpGet = new HttpGet("http://10.0.2.2:8080/get_data.xml");\nHttpResponse httpResponse = httpClient.execute(httpGet);\n\nif (httpResponse.getStatusLine().getStatusCode() == 200) {\n    // \u8bf7\u6c42\u548c\u54cd\u5e94\u90fd\u6210\u529f\u4e86\n    HttpEntity entity = httpResponse.getEntity();\n    String response = EntityUtils.toString(entity, "utf-8");\n\n    SAXParserFactory factory = SAXParserFactory.newInstance();\n    XMLReader xmlReader = factory.newSAXParser().getXMLReader();\n    ContentHandler handler = new ContentHandler();\n\n    // \u5c06ContentHandler\u7684\u5b9e\u4f8b\u8bbe\u7f6e\u5230XMLReader\u4e2d\n    xmlReader.setContentHandler(handler);\n    // \u5f00\u59cb\u6267\u884c\u89e3\u6790\n    xmlReader.parse(new InputSource(new StringReader(xmlData)));\n')),(0,r.kt)("h3",{id:"json"},"JSON"),(0,r.kt)("h4",{id:"json-object"},"JSON Object"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'HttpClient httpClient = new DefaultHttpClient();\n// \u6307\u5b9a\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u5730\u5740\u662f\u7535\u8111\u672c\u673a\nHttpGet httpGet = new HttpGet("http://10.0.2.2/get_data.json");\nHttpResponse httpResponse = httpClient.execute(httpGet);\n\nif (httpResponse.getStatusLine().getStatusCode() == 200) {\n    // \u8bf7\u6c42\u548c\u54cd\u5e94\u90fd\u6210\u529f\u4e86\n    HttpEntity entity = httpResponse.getEntity();\n    String response = EntityUtils.toString(entity, "utf-8");\n\n    JSONArray jsonArray = new JSONArray(response);\n\n    for (int i = 0; i < jsonArray.length(); i++) {\n        JSONObject jsonObject = jsonArray.getJSONObject(i);\n        String id = jsonObject.getString("id");\n        String name = jsonObject.getString("name");\n        String version = jsonObject.getString("version");\n    }\n}\n')),(0,r.kt)("h4",{id:"gson"},"GSON"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'HttpClient httpClient = new DefaultHttpClient();\n// \u6307\u5b9a\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u5730\u5740\u662f\u7535\u8111\u672c\u673a\nHttpGet httpGet = new HttpGet("http://10.0.2.2/get_data.json");\nHttpResponse httpResponse = httpClient.execute(httpGet);\n\nif (httpResponse.getStatusLine().getStatusCode() == 200) {\n    // \u8bf7\u6c42\u548c\u54cd\u5e94\u90fd\u6210\u529f\u4e86\n    HttpEntity entity = httpResponse.getEntity();\n    String response = EntityUtils.toString(entity, "utf-8");\n\n    Gson gson = new Gson();\n    List<App> appList = gson.fromJson(response, new TypeToken<List<App>>() {}.getType());\n\n    for (App app : appList) {\n        Log.d("MainActivity", "id is " + app.getId());\n        Log.d("MainActivity", "name is " + app.getName());\n        Log.d("MainActivity", "version is " + app.getVersion());\n    }\n}\n')),(0,r.kt)("h3",{id:"network-best-practice"},"Network Best Practice"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public interface HttpCallbackListener {\nvoid onFinish(String response);\nvoid onError(Exception e);\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class HttpUtil {\n    public static void sendHttpRequest(final String address, final\n      HttpCallbackListener listener) {\n        new Thread(new Runnable() {\n        @Override\n        public void run() {\n            HttpURLConnection connection = null;\n            try {\n\n            URL url = new URL(address);\n            connection = (HttpURLConnection) url.openConnection();\n            connection.setRequestMethod("GET");\n            connection.setConnectTimeout(8000);\n            connection.setReadTimeout(8000);\n            connection.setDoInput(true);\n            connection.setDoOutput(true);\n\n            InputStream in = connection.getInputStream();\n            BufferedReader reader = new BufferedReader(new InputStreamReader(in));\n            StringBuilder response = new StringBuilder();\n            String line;\n\n            while ((line = reader.readLine()) != null) {\n                response.append(line);\n            }\n\n            if (listener != null) {\n                // \u56de\u8c03 onFinish() \u65b9\u6cd5\n                // \u5c06 response \u4f20\u5165\u56de\u8c03\u65b9\u6cd5\n                listener.onFinish(response.toString());\n                }\n            } catch (Exception e) {\n                if (listener != null) {\n                // \u56de\u8c03 onError() \u65b9\u6cd5\n                listener.onError(e);\n                }\n            } finally {\n                if (connection != null) {\n                    connection.disconnect();\n                }\n            }\n        }  //  end of run\n        }).start();  //  end of runnable\n    }  //   end of sendHttpRequest\n}  //  end of class\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'//\u4ee5\u540e\u6bcf\u5f53\u9700\u8981\u53d1\u8d77\u4e00\u6761 HTTP \u8bf7\u6c42\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u8fd9\u6837\u5199:\nString address = "http://www.github.com";\nString response = HttpUtil.sendHttpRequest(address, new HttpCallbackListener() {\n    @Override\n    public void onFinish(String response) {\n        // \u5728\u8fd9\u91cc\u6839\u636e\u8fd4\u56de\u5185\u5bb9\u6267\u884c\u5177\u4f53\u7684\u903b\u8f91\n    }\n    @Override\n    public void onError(Exception e) {\n        // \u5728\u8fd9\u91cc\u5bf9\u5f02\u5e38\u60c5\u51b5\u8fdb\u884c\u5904\u7406\n    }\n});\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"map"},"Map"),(0,r.kt)("h3",{id:"location"},"Location"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class MainActivity extends Activity {\n\n  public static final int SHOW_LOCATION = 0;\n\n  private TextView positionTextView;\n\n  private LocationManager locationManager;\n\n  private String provider;\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    positionTextView = (TextView) findViewById(R.id.position_text_view);\n    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n    // \u83b7\u53d6\u6240\u6709\u53ef\u7528\u7684\u4f4d\u7f6e\u63d0\u4f9b\u5668\n    List<String> providerList = locationManager.getProviders(true);\n    if (providerList.contains(LocationManager.GPS_PROVIDER)) {\n      provider = LocationManager.GPS_PROVIDER;\n    } else if (providerList.contains(LocationManager.NETWORK_PROVIDER)) {\n      provider = LocationManager.NETWORK_PROVIDER;\n    } else {\n      // \u5f53\u6ca1\u6709\u53ef\u7528\u7684\u4f4d\u7f6e\u63d0\u4f9b\u5668\u65f6\uff0c\u5f39\u51faToast\u63d0\u793a\u7528\u6237\n      Toast.makeText(this, "No location provider to use",\n          Toast.LENGTH_SHORT).show();\n      return;\n    }\n    Location location = locationManager.getLastKnownLocation(provider);\n    if (location != null) {\n      // \u663e\u793a\u5f53\u524d\u8bbe\u5907\u7684\u4f4d\u7f6e\u4fe1\u606f\n      showLocation(location);\n    }\n    locationManager.requestLocationUpdates(provider, 5000, 1,\n        locationListener);\n  }\n\n  protected void onDestroy() {\n    super.onDestroy();\n    if (locationManager != null) {\n      // \u5173\u95ed\u7a0b\u5e8f\u65f6\u5c06\u76d1\u542c\u5668\u79fb\u9664\n      locationManager.removeUpdates(locationListener);\n    }\n  }\n\n  LocationListener locationListener = new LocationListener() {\n\n    @Override\n    public void onStatusChanged(String provider, int status, Bundle extras) {\n    }\n\n    @Override\n    public void onProviderEnabled(String provider) {\n    }\n\n    @Override\n    public void onProviderDisabled(String provider) {\n    }\n\n    @Override\n    public void onLocationChanged(Location location) {\n      // \u66f4\u65b0\u5f53\u524d\u8bbe\u5907\u7684\u4f4d\u7f6e\u4fe1\u606f\n      showLocation(location);\n    }\n  };\n\n  private void showLocation(final Location location) {\n    new Thread(new Runnable() {\n      @Override\n      public void run() {\n        try {\n          // \u7ec4\u88c5\u53cd\u5411\u5730\u7406\u7f16\u7801\u7684\u63a5\u53e3\u5730\u5740\n          StringBuilder url = new StringBuilder();\n          url.append("http://maps.googleapis.com/maps/api/geocode/json?latlng=");\n          url.append(location.getLatitude()).append(",")\n              .append(location.getLongitude());\n          url.append("&sensor=false");\n          HttpClient httpClient = new DefaultHttpClient();\n          HttpGet httpGet = new HttpGet(url.toString());\n          // \u5728\u8bf7\u6c42\u6d88\u606f\u5934\u4e2d\u6307\u5b9a\u8bed\u8a00\uff0c\u4fdd\u8bc1\u670d\u52a1\u5668\u4f1a\u8fd4\u56de\u4e2d\u6587\u6570\u636e\n          httpGet.addHeader("Accept-Language", "zh-CN");\n          HttpResponse httpResponse = httpClient.execute(httpGet);\n          if (httpResponse.getStatusLine().getStatusCode() == 200) {\n            HttpEntity entity = httpResponse.getEntity();\n            String response = EntityUtils.toString(entity, "utf-8");\n            JSONObject jsonObject = new JSONObject(response);\n            // \u83b7\u53d6results\u8282\u70b9\u4e0b\u7684\u4f4d\u7f6e\u4fe1\u606f\n            JSONArray resultArray = jsonObject.getJSONArray("results");\n            if (resultArray.length() > 0) {\n              JSONObject subObject = resultArray.getJSONObject(0);\n              // \u53d6\u51fa\u683c\u5f0f\u5316\u540e\u7684\u4f4d\u7f6e\u4fe1\u606f\n              String address = subObject.getString("formatted_address");\n              Message message = new Message();\n              message.what = SHOW_LOCATION;\n              message.obj = address;\n              handler.sendMessage(message);\n            }\n          }\n        } catch (Exception e) {\n          e.printStackTrace();\n        }\n      }\n    }).start();\n  }\n\n  private Handler handler = new Handler() {\n\n    public void handleMessage(Message msg) {\n      switch (msg.what) {\n      case SHOW_LOCATION:\n        String currentPosition = (String) msg.obj;\n        positionTextView.setText(currentPosition);\n        break;\n      default:\n        break;\n      }\n    }\n\n  };\n\n}\n\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"sensor"},"Sensor"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"SensorManager sensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"SensorEventListener listener = new SensorEventListener() {\n    @Override\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\n    }\n    @Override\n    public void onSensorChanged(SensorEvent event) {\n    }\n};\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"sensorManager.registerListener(listener, sensor, SensorManager.SENSOR_DELAY_NORMAL);\nsensorManager.unregisterListener(listener);\n")),(0,r.kt)("h3",{id:"light-sensor"},"Light Sensor"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Sensor sensor = sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);\n")),(0,r.kt)("h3",{id:"accelerometer-sensor"},"Accelerometer Sensor"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"Sensor sensor = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);\n")),(0,r.kt)("h3",{id:"orientation-sensor"},"Orientation Sensor"),(0,r.kt)("p",null,"Sensor sensor = sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);"),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"best-practice"},"Best Practice"),(0,r.kt)("h3",{id:"global-context"},"Global Context"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<application android:name="com.example.networkTest.MyApplication">\n  ......\n</application>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class MyApplication extends Application {\n    private static Context context;\n    @Override\n    public void onCreate() {\n        context = getApplicationContext();\n    }\n    public static Context getContext() {\n        return context;\n    }\n}\n")),(0,r.kt)("h3",{id:"\u7528-intent-\u4f20\u9012\u5bf9\u8c61"},"\u7528 Intent \u4f20\u9012\u5bf9\u8c61"),(0,r.kt)("h4",{id:"serializable"},"Serializable"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class Person implements Serializable\n")),(0,r.kt)("h4",{id:"parcelable"},"Parcelable"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class Person implements Parcelable {\n    private String name;\n    private int age;\n\n    @Override\n    public int describeContents() {\n        return 0;\n    }\n    @Override\n    public void writeToParcel(Parcel dest, int flags) {\n        dest.writeString(name); // \u5199\u51faname\n        dest.writeInt(age); // \u5199\u51faage\n    }\n\n    public static final Parcelable.Creator<Person> CREATOR = new\n      Parcelable.Creator<Person>() {\n        @Override\n        public Person createFromParcel(Parcel source) {\n            Person person = new Person();\n            person.name = source.readString(); // \u8bfb\u53d6name\n            person.age = source.readInt(); // \u8bfb\u53d6age\n            return person;\n        }\n        @Override\n        public Person[] newArray(int size) {\n            return new Person[size];\n        }\n    };\n}\n")),(0,r.kt)("h3",{id:"custom-logger"},"Custom Logger"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class LogUtil {\n    public static final int VERBOSE = 1;\n    public static final int DEBUG = 2;\n    public static final int INFO = 3;\n    public static final int WARN = 4;\n    public static final int ERROR = 5;\n    public static final int NOTHING = 6;\n    //custom key\n    public static final int LEVEL = VERBOSE;\n\n    public static void v(String tag, String msg) {\n        if (LEVEL <= VERBOSE) {\n            Log.v(tag, msg);\n        }\n    }\n    public static void d(String tag, String msg) {\n        if (LEVEL <= DEBUG) {\n            Log.d(tag, msg);\n        }\n    }\n    public static void i(String tag, String msg) {\n        if (LEVEL <= INFO) {\n            Log.i(tag, msg);\n        }\n    }\n    public static void w(String tag, String msg) {\n        if (LEVEL <= WARN) {\n            Log.w(tag, msg);\n        }\n    }\n    public static void e(String tag, String msg) {\n        if (LEVEL <= ERROR) {\n            Log.e(tag, msg);\n        }\n    }\n}\n")))}g.isMDXComponent=!0}}]);